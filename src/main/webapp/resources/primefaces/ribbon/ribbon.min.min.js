null;PrimeFaces.widget.Ribbon=PrimeFaces.widget.TabView.extend({init:function(d){this._super(d);this.panelContainer=this.jq.children(".ui-tabs-panels");this.stateHolder=$(this.jqId+"_activeIndex");this.cfg.selected=parseInt(this.stateHolder.val());this.focusedTabHeader=null;this.cfg.tabindex=this.cfg.tabindex||"0";if(this.cfg.scrollable){this.navscroller=this.jq.children(".ui-tabs-navscroller");this.navcrollerLeft=this.navscroller.children(".ui-tabs-navscroller-btn-left");this.navcrollerRight=this.navscroller.children(".ui-tabs-navscroller-btn-right");this.navContainer=this.navscroller.children(".ui-tabs-nav");this.firstTab=this.navContainer.children(":first-child");this.lastTab=this.navContainer.children(":last-child");this.scrollStateHolder=$(this.jqId+"_scrollState")}else{this.navContainer=this.jq.children(".ui-tabs-nav")}this.navContainerItems=this.navContainer.children("li");for(var c=0;c<this.navContainerItems.length;c++){if(this.cfg.selected===c&&!this.navContainerItems.eq(c).hasClass("ui-state-disabled")){this.navContainerItems.eq(c).attr("tabindex",this.cfg.tabindex)}else{this.navContainerItems.eq(c).attr("tabindex","-1")}}this.bindEvents();if(this.cfg.dynamic&&this.cfg.cache){this.markAsLoaded(this.panelContainer.children().eq(this.cfg.selected))}this.renderDeferred()},renderDeferred:function(){if(this.jq.is(":visible")){this._render()}else{var d=this.jq.parent().closest(".ui-hidden-container"),c=this;if(d.length){this.addDeferredRender(this.id,d,function(){return c.render()})}}},_render:function(){if(this.cfg.scrollable){this.initScrolling()}},bindEvents:function(){var b=this;this.navContainer.children("li").on("mouseover.ribbon",function(d){var a=$(this);if(!a.hasClass("ui-state-disabled")){a.addClass("ui-state-hover")}}).on("mouseout.ribbon",function(d){var a=$(this);if(!a.hasClass("ui-state-disabled")){a.removeClass("ui-state-hover")}}).on("click.ribbon",function(e){var f=$(this);if($(e.target).is(":not(.ui-icon-close)")){var a=f.index();if(!f.hasClass("ui-state-disabled")&&a!==b.cfg.selected){b.select(a);f.trigger("focus.ribbon")}}e.preventDefault()});this.navContainer.find("li .ui-icon-close").on("click.ribbon",function(e){var a=$(this).parent().index();if(b.cfg.onTabClose){var f=b.cfg.onTabClose.call(b,a);if(f!==false){b.remove(a)}}else{b.remove(a)}e.preventDefault()});if(this.cfg.scrollable){this.navscroller.children(".ui-tabs-navscroller-btn").on("mouseover.ribbon",function(){var a=$(this);if(!a.hasClass("ui-state-disabled")){$(this).addClass("ui-state-hover")}}).on("mouseout.ribbon",function(){var a=$(this);if(!a.hasClass("ui-state-disabled")){$(this).removeClass("ui-state-hover ui-state-active")}}).on("mousedown.ribbon",function(){var a=$(this);if(!a.hasClass("ui-state-disabled")){$(this).removeClass("ui-state-hover").addClass("ui-state-active")}}).on("mouseup.ribbon",function(){var a=$(this);if(!a.hasClass("ui-state-disabled")){$(this).addClass("ui-state-hover").removeClass("ui-state-active")}});this.navcrollerLeft.on("click.ribbon",function(a){b.scroll(100);a.preventDefault()});this.navcrollerRight.on("click.ribbon",function(a){b.scroll(-100);a.preventDefault()})}this.bindKeyEvents()},bindKeyEvents:function(){var b=this;this.navContainer.children("li").on("focus.ribbon",function(){b.focusedTabHeader=$(this);if(!b.focusedTabHeader.hasClass("ui-state-disabled")){b.navContainer.children('li[tabindex="'+b.cfg.tabindex+'"]').attr("tabindex","-1").removeClass("ui-tabs-outline");b.focusedTabHeader.attr("tabindex",b.cfg.tabindex).addClass("ui-tabs-outline")}}).on("blur.ribbon",function(){if(b.focusedTabHeader){b.focusedTabHeader.removeClass("ui-tabs-outline")}}).on("keydown.ribbon",function(h){var a=$.ui.keyCode;switch(h.which){case a.LEFT:case a.UP:if(b.focusedTabHeader){if(b.cfg.scrollable&&(b.focusedTabHeader.index()===0)){break}if(b.focusedTabHeader.index()===0){b.focusedTabHeader=b.navContainer.children("li:not(.ui-state-disabled):last")}else{b.focusedTabHeader=b.focusedTabHeader.prevAll("li:not(.ui-state-disabled):first");if(!b.focusedTabHeader.length){b.focusedTabHeader=b.navContainer.children("li:not(.ui-state-disabled):last")}}b.focusedTabHeader.trigger("focus.ribbon");if(b.cfg.scrollable){var g=b.focusedTabHeader.position().left<b.navcrollerLeft.position().left;if(g){b.navcrollerLeft.trigger("click.ribbon")}}}h.preventDefault();clearTimeout(b.activating);b.activating=setTimeout(function(){b.focusedTabHeader.trigger("click")},500);break;case a.RIGHT:case a.DOWN:if(b.focusedTabHeader){if(b.cfg.scrollable&&(b.focusedTabHeader.index()===(b.getLength()-1))){break}if(b.focusedTabHeader.index()===(b.getLength()-1)){b.focusedTabHeader=b.navContainer.children("li:not(.ui-state-disabled):first")}else{b.focusedTabHeader=b.focusedTabHeader.nextAll("li:not(.ui-state-disabled):first");if(!b.focusedTabHeader.length){b.focusedTabHeader=b.navContainer.children("li:not(.ui-state-disabled):first")}}b.focusedTabHeader.trigger("focus.ribbon");if(b.cfg.scrollable){var e=b.focusedTabHeader.position().left+b.focusedTabHeader.width()>b.navcrollerRight.position().left;if(e){b.navcrollerRight.trigger("click.ribbon")}}}h.preventDefault();clearTimeout(b.activating);b.activating=setTimeout(function(){b.focusedTabHeader.trigger("click")},500);break}})},initScrolling:function(){if(this.panelContainer.children().length){var b=((this.lastTab.position().left+this.lastTab.width())-this.firstTab.position().left)>this.navscroller.innerWidth();if(b){this.navscroller.css("padding-left","18px");this.navcrollerLeft.show();this.navcrollerRight.show();this.restoreScrollState()}}},scroll:function(l){if(this.navContainer.is(":animated")){return}var i=parseInt(this.navContainer.css("margin-left")),g=i+l,h=this.navscroller.innerWidth(),k=this;if(l<0){var j=this.lastTab.position().left+parseInt(this.lastTab.innerWidth());if(j>h){this.navContainer.animate({"margin-left":g+"px"},"fast","easeInOutCirc",function(){k.saveScrollState(g);if((j+l)<h){k.disableScrollerButton(k.navcrollerRight)}if(k.navcrollerLeft.hasClass("ui-state-disabled")){k.enableScrollerButton(k.navcrollerLeft)}})}}else{if(g<=0){this.navContainer.animate({"margin-left":g+"px"},"fast","easeInOutCirc",function(){k.saveScrollState(g);if(g===0){k.disableScrollerButton(k.navcrollerLeft)}if(k.navcrollerRight.hasClass("ui-state-disabled")){k.enableScrollerButton(k.navcrollerRight)}})}}},disableScrollerButton:function(b){b.addClass("ui-state-disabled").removeClass("ui-state-hover ui-state-active")},enableScrollerButton:function(b){b.removeClass("ui-state-disabled")},saveScrollState:function(b){this.scrollStateHolder.val(b)},restoreScrollState:function(){var b=parseInt(this.scrollStateHolder.val());if(b===0){this.disableScrollerButton(this.navcrollerLeft)}this.navContainer.css("margin-left",this.scrollStateHolder.val()+"px")},select:function(i,j){if(this.cfg.onTabChange&&!j){var g=this.cfg.onTabChange.call(this,i);if(g===false){return false}}var f=this.panelContainer.children().eq(i),h=this.cfg.dynamic&&!this.isLoaded(f);this.stateHolder.val(i);this.cfg.selected=i;if(h){this.loadDynamicTab(f)}else{this.show(f);if(this.hasBehavior("tabChange")&&!j){this.fireTabChangeEvent(f)}}return true},show:function(l){var i=this.navContainer.children(),j=i.filter(".ui-state-active"),g=i.eq(l.index()),k=this.panelContainer.children(".ui-tabs-panel:visible"),h=this;k.attr("aria-hidden",true);j.attr("aria-expanded",false);j.attr("aria-selected",false);l.attr("aria-hidden",false);g.attr("aria-expanded",true);g.attr("aria-selected",true);if(this.cfg.effect){k.hide(this.cfg.effect,null,this.cfg.effectDuration,function(){j.removeClass("ui-tabs-selected ui-state-active");g.addClass("ui-tabs-selected ui-state-active");l.show(h.cfg.effect,null,h.cfg.effectDuration,function(){h.postTabShow(l)})})}else{j.removeClass("ui-tabs-selected ui-state-active");k.hide();g.addClass("ui-tabs-selected ui-state-active");l.show();this.postTabShow(l)}},loadDynamicTab:function(g){var i=this,j=g.index(),f={source:this.id,process:this.id,update:this.id,params:[{name:this.id+"_contentLoad",value:true},{name:this.id+"_newTab",value:g.attr("id")},{name:this.id+"_tabindex",value:j}],onsuccess:function(a,c,b){PrimeFaces.ajax.Response.handle(a,c,b,{widget:i,handle:function(d){g.html(d);if(this.cfg.cache){this.markAsLoaded(g)}}});return true},oncomplete:function(){i.show(g)}};if(this.hasBehavior("tabChange")){var h=this.cfg.behaviors.tabChange;h.call(this,f)}else{PrimeFaces.ajax.Request.handle(f)}},remove:function(f){var h=this.navContainer.children().eq(f),g=this.panelContainer.children().eq(f);h.remove();g.remove();var i=this.getLength();if(i>0){if(f<this.cfg.selected){this.cfg.selected--}else{if(f===this.cfg.selected){var j=(this.cfg.selected===(i))?(this.cfg.selected-1):this.cfg.selected;this.select(j,true)}}}else{this.cfg.selected=-1}this.fireTabCloseEvent(g.attr("id"),f)},getLength:function(){return this.navContainer.children().length},getActiveIndex:function(){return this.cfg.selected},fireTabChangeEvent:function(e){var f=this.cfg.behaviors.tabChange,d={params:[{name:this.id+"_newTab",value:e.attr("id")},{name:this.id+"_tabindex",value:e.index()}]};f.call(this,d)},fireTabCloseEvent:function(g,f){if(this.hasBehavior("tabClose")){var h=this.cfg.behaviors.tabClose,e={params:[{name:this.id+"_closeTab",value:g},{name:this.id+"_tabindex",value:f}]};h.call(this,e)}},hasBehavior:function(b){if(this.cfg.behaviors){return this.cfg.behaviors[b]!==undefined}return false},markAsLoaded:function(b){b.data("loaded",true)},isLoaded:function(b){return b.data("loaded")===true},disable:function(b){this.navContainer.children().eq(b).addClass("ui-state-disabled")},enable:function(b){this.navContainer.children().eq(b).removeClass("ui-state-disabled")},postTabShow:function(b){if(this.cfg.onTabShow){this.cfg.onTabShow.call(this,b.index())}PrimeFaces.invokeDeferredRenders(this.id)}});