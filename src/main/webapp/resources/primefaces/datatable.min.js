PrimeFaces.widget.ColumnFilterPanel = PrimeFaces.widget.BaseWidget.extend({init:function(b){this._super(b); this.content = this.jq.children("div.ui-overlaypanel-content"); this.cfg.my = this.cfg.my || "left top"; this.cfg.at = this.cfg.at || "left bottom"; this.cfg.showEvent = this.cfg.showEvent || "click.ui-overlaypanel"; this.cfg.hideEvent = this.cfg.hideEvent || "click.ui-overlaypanel"; this.cfg.dismissable = (this.cfg.dismissable === false)?false:true; if (this.cfg.showCloseIcon){this.closerIcon = $('<a href="#" class="ui-overlaypanel-close ui-state-default" href="#"><span class="ui-icon ui-icon-closethick"></span></a>').appendTo(this.jq)}if (this.jq.length > 1){$(document.body).children(this.jqId).remove(); this.jq = $(this.jqId)}if (this.cfg.appendToBody){this.jq.appendTo(document.body)}this.bindCommonEvents(); if (this.cfg.target){this.target = PrimeFaces.expressions.SearchExpressionFacade.resolveComponentsAsSelector(this.cfg.target); this.bindTargetEvents(); this.setupDialogSupport()}}, bindTargetEvents:function(){var g = this; this.target.data("primefaces-overlay-target", this.id).find("*").data("primefaces-overlay-target", this.id); if (this.cfg.showEvent === this.cfg.hideEvent){var e = this.cfg.showEvent; this.target.on(e, function(a){g.toggle()})} else{var f = this.cfg.showEvent + ".ui-overlaypanel", h = this.cfg.hideEvent + ".ui-overlaypanel"; this.target.off(f + " " + h).on(f, function(a){if (!g.isVisible()){g.show(); if (f === "contextmenu.ui-overlaypanel"){a.preventDefault()}}}).on(h, function(a){if (g.isVisible()){g.hide()}})}g.target.off("keydown.ui-overlaypanel keyup.ui-overlaypanel").on("keydown.ui-overlaypanel", function(a){var b = $.ui.keyCode, c = a.which; if (c === b.ENTER || c === b.NUMPAD_ENTER){a.preventDefault()}}).on("keyup.ui-overlaypanel", function(a){var b = $.ui.keyCode, c = a.which; if (c === b.ENTER || c === b.NUMPAD_ENTER){g.toggle(); a.preventDefault()}})}, bindCommonEvents:function(){var f = this; if (this.cfg.showCloseIcon){this.closerIcon.on("mouseover.ui-overlaypanel", function(){$(this).addClass("ui-state-hover")}).on("mouseout.ui-overlaypanel", function(){$(this).removeClass("ui-state-hover")}).on("click.ui-overlaypanel", function(a){f.hide(); a.preventDefault()})}if (this.cfg.dismissable){var d = "mousedown." + this.id; $(document.body).off(d).on(d, function(b){if (f.jq.hasClass("ui-overlay-hidden")){return}if (f.target){var c = $(b.target); if (f.target.is(c) || f.target.has(c).length > 0){return}}var a = f.jq.offset(); if (b.pageX < a.left || b.pageX > a.left + f.jq.outerWidth() || b.pageY < a.top || b.pageY > a.top + f.jq.outerHeight()){f.hide()}})}var e = "resize." + this.id; $(window).off(e).on(e, function(){if (f.jq.hasClass("ui-overlay-visible")){f.align()}})}, toggle:function(){if (!this.isVisible()){this.show()} else{this.hide()}}, show:function(b){if (!this.loaded && this.cfg.dynamic){this.loadContents(b)} else{this._show(b)}}, _show:function(c){var d = this; this.align(c); this.jq.removeClass("ui-overlay-hidden").addClass("ui-overlay-visible").css({display:"none", visibility:"visible"}); if (this.cfg.showEffect){this.jq.show(this.cfg.showEffect, {}, 200, function(){d.postShow()})} else{this.jq.show(); this.postShow()}}, align:function(h){var j = this.jq.css("position") == "fixed", i = $(window), g = j?"-" + i.scrollLeft() + " -" + i.scrollTop():null, f = h || this.cfg.target; this.jq.css({left:"", top:"", "z-index":++PrimeFaces.zindex}).position({my:this.cfg.my, at:this.cfg.at, of:document.getElementById(f), offset:g})}, hide:function(){var b = this; if (this.cfg.hideEffect){this.jq.hide(this.cfg.hideEffect, {}, 200, function(){b.postHide()})} else{this.jq.hide(); this.postHide()}}, postShow:function(){if (this.cfg.onShow){this.cfg.onShow.call(this)}this.applyFocus()}, postHide:function(){this.jq.removeClass("ui-overlay-visible").addClass("ui-overlay-hidden").css({display:"block", visibility:"hidden"}); if (this.cfg.onHide){this.cfg.onHide.call(this)}}, setupDialogSupport:function(){var b = this.target.closest(".ui-dialog"); if (b.length == 1){this.jq.css("position", "fixed"); if (!this.cfg.appendToBody){this.jq.appendTo(document.body)}}}, loadContents:function(f){var d = this, e = {source:this.id, process:this.id, update:this.id, params:[{name:this.id + "_contentLoad", value:true}], onsuccess:function(a, c, b){PrimeFaces.ajax.Response.handle(a, c, b, {widget:d, handle:function(h){this.content.html(h); this.loaded = true}}); return true}, oncomplete:function(){d._show(f)}}; PrimeFaces.ajax.Request.handle(e)}, isVisible:function(){return this.jq.hasClass("ui-overlay-visible")}, applyFocus:function(){this.jq.find(":not(:submit):not(:button):input:visible:enabled:first").focus()}});