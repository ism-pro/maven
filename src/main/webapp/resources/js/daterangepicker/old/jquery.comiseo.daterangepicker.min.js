
/*!
 * jQuery UI date range picker widget
 * Copyright (c) 2016 Tamble, Inc.
 * Licensed under MIT (https://github.com/tamble/jquery-ui-daterangepicker/raw/master/LICENSE.txt)
 *
 * Depends:
 *   - jQuery 1.8.3+
 *   - jQuery UI 1.9.0+ (widget factory, position utility, button, menu, datepicker)
 *   - moment.js 2.3.0+
 */
(function(f,h,c){var i=0;f.widget("comiseo.daterangepicker",{version:"0.5.0",options:{presetRanges:[{text:"Aujourd'hui",dateStart:function(){return moment()},dateEnd:function(){return moment()}},{text:"Hier",dateStart:function(){return moment().subtract("days",1)},dateEnd:function(){return moment().subtract("days",1)}},{text:"Depuis 7 jours",dateStart:function(){return moment().subtract("days",6)},dateEnd:function(){return moment()}},{text:"Depuis (Lu-Di)",dateStart:function(){return moment().subtract("days",7).isoWeekday(1)},dateEnd:function(){return moment().subtract("days",7).isoWeekday(7)}},{text:"Mois au jour",dateStart:function(){return moment().startOf("month")},dateEnd:function(){return moment()}},{text:"Mois précédent",dateStart:function(){return moment().subtract("month",1).startOf("month")},dateEnd:function(){return moment().subtract("month",1).endOf("month")}},{text:"Année au jour",dateStart:function(){return moment().startOf("year")},dateEnd:function(){return moment()}}],initialText:"Sélection période...",icon:"ui-icon-triangle-1-s",applyButtonText:"Ok",clearButtonText:"Effacer",cancelButtonText:"Annuler",rangeSplitter:" - ",dateFormat:"M d, yy",altFormat:"yy-mm-dd",verticalOffset:0,mirrorOnCollision:true,autoFitCalendars:true,applyOnMenuSelect:true,open:null,close:null,change:null,clear:null,cancel:null,onOpen:null,onClose:null,onChange:null,onClear:null,datepickerOptions:{locale:"fr",numberOfMonths:2,maxDate:0}},_create:function(){this._dateRangePicker=b(this.element,this,this.options)},_destroy:function(){this._dateRangePicker.destroy()},_setOptions:function(j){this._super(j);this._dateRangePicker.enforceOptions()},open:function(){this._dateRangePicker.open()},close:function(){this._dateRangePicker.close()},setRange:function(j){this._dateRangePicker.setRange(j)},getRange:function(){return this._dateRangePicker.getRange()},clearRange:function(){this._dateRangePicker.clearRange()},widget:function(){return this._dateRangePicker.getContainer()}});function a(l,r,t){var q,j;function n(){j="drp_autogen"+i++;f('label[for="'+l.attr("id")+'"]').attr("for",j)}function s(){n();q=f('<button type="button"></button>').addClass(r+"-triggerbutton").attr({title:l.attr("title"),tabindex:l.attr("tabindex"),id:j}).button({icons:{secondary:t.icon},label:t.initialText})}function m(){return q.button("option","label")}function k(u){q.button("option","label",u)}function o(){l.val("").change();k(t.initialText)}function p(){q.button("option",{icons:{secondary:t.icon},label:t.initialText})}s();return{getElement:function(){return q},getLabel:m,setLabel:k,reset:o,enforceOptions:p}}function d(j,k,o){var n,l;function m(){n=f("<div></div>").addClass(j+"-presets");l=f("<ul></ul>");f.each(k.presetRanges,function(){f('<li><a href="#">'+this.text+"</a></li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).click(o).appendTo(l)});n.append(l);l.menu().data("ui-menu").delay=0}m();return{getElement:function(){return n}}}function e(s,u){var q,l={start:null,end:null};function t(){q=f("<div></div>",{"class":s+"-calendar ui-widget-content"});q.datepicker(f.extend({},u.datepickerOptions,{beforeShowDay:p,onSelect:m}));k()}function r(){q.datepicker("option",f.extend({},u.datepickerOptions,{beforeShowDay:p,onSelect:m}))}function m(y,w){var v=u.datepickerOptions.dateFormat||f.datepicker._defaults.dateFormat,x=f.datepicker.parseDate(v,y);if(!l.start||l.end){l.start=x;l.end=null}else{if(x<l.start){l.end=l.start;l.start=x}else{l.end=x}}if(u.datepickerOptions.hasOwnProperty("onSelect")){u.datepickerOptions.onSelect(y,w)}}function p(x){var v=[true,l.start&&((+x===+l.start)||(l.end&&l.start<=x&&x<=l.end))?"ui-state-highlight":""],w=[true,"",""];if(u.datepickerOptions.hasOwnProperty("beforeShowDay")){w=u.datepickerOptions.beforeShowDay(x)}return[v[0]&&w[0],v[1]+" "+w[1],w[2]]}function k(){setTimeout(function(){o();k()},moment().endOf("day")-moment())}function j(){if(l.start){q.datepicker("setDate",l.start)}}function o(){q.datepicker("refresh");q.datepicker("setDate",null)}function n(){l={start:null,end:null};o()}t();return{getElement:function(){return q},scrollToRangeStart:function(){return j()},getRange:function(){return l},setRange:function(v){l=v;o()},refresh:o,reset:n,enforceOptions:r}}function g(q,s,k){var o,p,l,j;function r(){o=f("<div></div>").addClass(q+"-buttonpanel");if(s.applyButtonText){p=f('<button type="button" class="ui-priority-primary"></button>').text(s.applyButtonText).button();o.append(p)}if(s.clearButtonText){l=f('<button type="button" class="ui-priority-secondary"></button>').text(s.clearButtonText).button();o.append(l)}if(s.cancelButtonText){j=f('<button type="button" class="ui-priority-secondary"></button>').text(s.cancelButtonText).button();o.append(j)}m()}function n(){if(p){p.button("option","label",s.applyButtonText)}if(l){l.button("option","label",s.clearButtonText)}if(j){j.button("option","label",s.cancelButtonText)}}function m(){if(k){if(p){p.click(k.onApply)}if(l){l.click(k.onClear)}if(j){j.click(k.onCancel)}}}r();return{getElement:function(){return o},enforceOptions:n}}function b(t,N,x){var k="comiseo-daterangepicker",r,j,T,m,L,G,n=false,A=false,w=0,U=1,E=2,C=3,Q=["left","right","top","bottom"],H=U,V=null;function R(){T=a(t,k,x);m=d(k,x,q);L=e(k,x);P.numberOfMonths=x.datepickerOptions.numberOfMonths;if(P.numberOfMonths instanceof Array){x.autoFitCalendars=false}G=g(k,x,{onApply:function(X){K(X);o(null,X)},onClear:function(X){K(X);y(X)},onCancel:function(X){N._trigger("cancel",X,{instance:N});K(X);I()}});D();P();I();W()}function D(){r=f("<div></div>",{"class":k+" "+k+"-"+Q[H]+" ui-widget ui-widget-content ui-corner-all ui-front"}).append(f("<div></div>",{"class":k+"-main ui-widget-content"}).append(m.getElement()).append(L.getElement())).append(f('<div class="ui-helper-clearfix"></div>').append(G.getElement())).hide();t.hide().after(T.getElement());j=f("<div></div>",{"class":"ui-front "+k+"-mask"}).hide();f("body").append(j).append(r)}function P(){if(x.autoFitCalendars){var Z=f(h).width(),ab=r.outerWidth(true),Y=L.getElement(),X=Y.datepicker("option","numberOfMonths"),aa=X;if(ab>Z){while(X>1&&r.outerWidth(true)>Z){Y.datepicker("option","numberOfMonths",--X)}if(X!==aa){P.monthWidth=(ab-r.outerWidth(true))/(aa-X)}}else{while(X<P.numberOfMonths&&(Z-r.outerWidth(true))>=P.monthWidth){Y.datepicker("option","numberOfMonths",++X)}}u();A=false}}function M(){r.remove();T.getElement().remove();t.show()}function W(){T.getElement().click(z);T.getElement().keydown(O);j.click(function(X){K(X);I()});f(h).resize(function(){n?P():A=true})}function l(Y){var X=x.dateFormat;return f.datepicker.formatDate(X,Y.start)+(+Y.end!==+Y.start?x.rangeSplitter+f.datepicker.formatDate(X,Y.end):"")}function J(Z){var Y=x.altFormat,X={};X.start=f.datepicker.formatDate(Y,Z.start);X.end=f.datepicker.formatDate(Y,Z.end);return JSON.stringify(X)}function S(aa){var X=x.altFormat,Y=null;if(aa){try{Y=JSON.parse(aa,function(ab,ac){return ab?f.datepicker.parseDate(X,ac):ac})}catch(Z){}}return Y}function I(){var X=p();if(X){T.setLabel(l(X));L.setRange(X)}else{L.reset()}}function o(Z,Y){var X=Z||L.getRange();if(!X.start){return}if(!X.end){X.end=X.start}Z&&L.setRange(X);T.setLabel(l(X));t.val(J(X)).change();if(x.onChange){x.onChange()}N._trigger("change",Y,{instance:N})}function p(){return S(t.val())}function y(X){T.reset();L.reset();if(x.onClear){x.onClear()}N._trigger("clear",X,{instance:N})}function q(Y){var Z=f(this),aa=Z.data("dateStart")().startOf("day").toDate(),X=Z.data("dateEnd")().startOf("day").toDate();L.setRange({start:aa,end:X});if(x.applyOnMenuSelect){K(Y);o(null,Y)}return false}function u(){r.position({my:"left top",at:"left bottom"+(x.verticalOffset<0?x.verticalOffset:"+"+x.verticalOffset),of:T.getElement(),collision:"flipfit flipfit",using:function(ac,X){var ag=X.element.left+X.element.width/2,Z=X.target.left+X.target.width/2,ab=H,ae,af=X.element.top+X.element.height/2,Y=X.target.top+X.target.height/2,aa=V,ad;H=(ag>Z)?U:w;if(H!==ab){if(x.mirrorOnCollision){ae=(H===w)?m:L;r.children().first().append(ae.getElement())}r.removeClass(k+"-"+Q[ab]);r.addClass(k+"-"+Q[H])}r.css({left:ac.left,top:ac.top});V=(af>Y)?C:E;if(V!==aa){if(aa!==null){T.getElement().removeClass(k+"-"+Q[aa])}T.getElement().addClass(k+"-"+Q[V])}ad=V===C&&X.element.top-X.target.top!==X.target.height+x.verticalOffset||V===E&&X.target.top-X.element.top!==X.element.height+x.verticalOffset;T.getElement().toggleClass(k+"-vfit",ad)}})}function B(X){X.preventDefault();X.stopPropagation()}function O(X){switch(X.which){case f.ui.keyCode.UP:case f.ui.keyCode.DOWN:B(X);v(X);return;case f.ui.keyCode.ESCAPE:B(X);K(X);I();return;case f.ui.keyCode.TAB:K(X);return}}function v(X){if(!n){T.getElement().addClass(k+"-active");j.show();n=true;A&&P();L.scrollToRangeStart();r.show();u()}if(x.onOpen){x.onOpen()}N._trigger("open",X,{instance:N})}function K(X){if(n){r.hide();j.hide();T.getElement().removeClass(k+"-active");n=false}if(x.onClose){x.onClose()}N._trigger("close",X,{instance:N})}function z(X){if(n){K(X);I()}else{v(X)}}function F(){return r}function s(){var X=m;m=d(k,x,q);X.getElement().replaceWith(m.getElement());L.enforceOptions();G.enforceOptions();T.enforceOptions();var Y=p();if(Y){T.setLabel(l(Y))}}R();return{toggle:z,destroy:M,open:v,close:K,setRange:o,getRange:p,clearRange:y,reset:I,enforceOptions:s,getContainer:F}}})(jQuery,window);(function(a){if(typeof define==="function"&&define.amd){define(["../widgets/datepicker"],a)}else{a(jQuery.datepicker)}}(function(a){a.regional.fr={closeText:"Fermer",prevText:"Précédent",nextText:"Suivant",currentText:"Aujourd'hui",monthNames:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthNamesShort:["Janv.","Févr.","Mars","Avr.","Mai","Juin","Juil.","Août","Sept.","Oct.","Nov.","Déc."],dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],dayNamesMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],weekHeader:"Sem.",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};a.setDefaults(a.regional.fr);return a.regional.fr}));