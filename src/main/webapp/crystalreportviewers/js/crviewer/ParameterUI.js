if(typeof bobj.crv.params.ParameterUI=="undefined"){bobj.crv.params.ParameterUI={};bobj.crv.params.ParameterValueRow={};bobj.crv.params.ParamValueButton={};bobj.crv.params.ParamRowCreator={};bobj.crv.params.TextField={};bobj.crv.params.TextCombo={};bobj.crv.params.ScrollMenuWidget={};bobj.crv.params.HelperRow={}}bobj.crv.params.newParameterUI=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),canChangeOnPanel:false,allowCustom:false,canAddValues:false,isPassword:false,valueRequired:true,isReadOnlyParam:true,values:[],defaultValues:null,hasRowButtons:false,rowButtonsUrl:null,width:"200px",changeValueCB:null,addValueCB:null,selectValueCB:null,enterPressCB:null,clickRowButtonCB:null,openAdvDialogCB:null,maxNumParameterDefaultValues:200,tooltip:null},a);var b=newWidget(a.id);bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.ParameterUI);b._selectedRow=null;b._createMenu();b._rows=[];b._numRowsChanged=false;return b};bobj.crv.params.ParameterUI._createMenu=function(){var a=this.defaultValues.length;if(a>0){var b={originalValues:this.defaultValues};if(a==this.maxNumParameterDefaultValues){b.originalValues[this.maxNumParameterDefaultValues]=L_bobj_crv_ParamsMaxNumDefaultValues;MochiKit.Base.update(b,{openAdvDialogCB:this.openAdvDialogCB,maxNumParameterDefaultValues:this.maxNumParameterDefaultValues})}this._defaultValuesMenu=bobj.crv.params.newScrollMenuWidget(b)}else{this._defaultValuesMenu=null}};bobj.crv.params.ParameterUI.init=function(){Widget_init.call(this);var c=this._rows;for(var b=0,a=c.length;b<a;++b){c[b].init()}if(this._rowCreator){this._rowCreator.init()}if(this._helperRow){this._helperRow.init()}};bobj.crv.params.ParameterUI.getHTML=function(){var g="";var b=this.values;var e=this._rows;for(var c=0,a=b.length;c<a;++c){e.push(this._getRow(b[c],this._getBgColor(c)));g+=e[c].getHTML()}var f="";if(this._canAddRowCreater()){this._rowCreator=this._getRowCreator();f=this._rowCreator.getHTML()}var d="";if(this._canAddHelperRow()){this._helperRow=bobj.crv.params.newHelperRow({message:L_bobj_crv_ParamsNoValue});d=this._helperRow.getHTML()}return bobj.html.DIV({id:this.id,style:{width:bobj.unitValue(this.width)}},g,d,f)};bobj.crv.params.ParameterUI._canAddRowCreater=function(){return(this.canAddValues||(!this.valueRequired&&this.values.length===0&&!this.isReadOnlyParam))};bobj.crv.params.ParameterUI._canAddHelperRow=function(){return(this.isReadOnlyParam&&this.values.length===0)};bobj.crv.params.ParameterUI._getRow=function(b,a){var d=bobj.crv.params.BackgroundColor;var c=bobj.crv.params.newParameterValueRow({value:b,defaultValues:this.defaultValues,width:this.width,bgColor:a,isReadOnlyParam:this.isReadOnlyParam,canChangeOnPanel:this.canChangeOnPanel,allowCustom:this.allowCustom,isPassword:this.isPassword,hasButton:this.hasRowButtons,buttonUrl:this.rowButtonsUrl,openAdvDialogCB:this.openAdvDialogCB,defaultValuesMenu:this._defaultValuesMenu,tooltip:this.tooltip});var e=MochiKit.Base.bind;c.changeCB=e(this._onChangeValue,this,c);c.selectCB=e(this._onSelectValue,this,c);c.enterCB=e(this._onEnterValue,this,c);c.buttonClickCB=e(this._onClickRowButton,this,c);return c};bobj.crv.params.ParameterUI._addRow=function(a){var b=this._getRow(a,this._getBgColor(this._rows.length));this._rows.push(b);this._numRowsChanged=true;if(this._rowCreator){this._rowCreator.setBgColor(this._getBgColor(this._rows.length));insBefore2(this._rowCreator.layer,b.getHTML());b._valueWidget.setAlwaysDirty()}else{append(this.layer,b.getHTML())}b.init();b.setBgColor();return b};bobj.crv.params.ParameterUI._onChangeValue=function(a){if(this.changeValueCB){this.changeValueCB(this._getRowIndex(a),a.getValue())}};bobj.crv.params.ParameterUI._onSelectValue=function(a){if(this._selectedRow!==a){this.deselect();this._selectedRow=a}if(this.selectValueCB){this.selectValueCB(this._getRowIndex(a))}};bobj.crv.params.ParameterUI._onEnterValue=function(a){if(this.enterPressCB){this.enterPressCB(this._getRowIndex(a))}};bobj.crv.params.ParameterUI._onClickRowButton=function(b,a,c){if(this.clickRowButtonCB){this.clickRowButtonCB(this._getRowIndex(b),a,c)}};bobj.crv.params.ParameterUI.showRowCreater=function(a){if(!this._rowCreator&&a){this._rowCreator=this._getRowCreator();append(this.layer,this._rowCreator.getHTML());this._rowCreator.init()}if(this._rowCreator){this._rowCreator.show(a)}};bobj.crv.params.ParameterUI.showHelperRow=function(a){if(!this._helperRow&&a){this._helperRow=bobj.crv.params.newHelperRow({message:L_bobj_crv_ParamsNoValue});if(this._rowCreator){insBefore2(this._rowCreator.layer,this._helperRow.getHTML())}else{append(this.layer,this._helperRow.getHTML())}this._helperRow.init()}if(this._helperRow){this._helperRow.show(a)}};bobj.crv.params.ParameterUI._onCreateRow=function(){if((!this.canChangeOnPanel)&&(!this.isReadOnlyParam)){this.selectValueCB(-1);this.openAdvDialogCB()}else{var b="";if(!this.allowCustom&&this.defaultValues.length>0){b=this.defaultValues[0]}var a=this._addRow(b);this.setSelected(this._rows.length-1);this._onSelectValue(a);if(this.addValueCB){this.addValueCB(a.getValue())}if(!this.canAddValues&&!this.valueRequired){this.showRowCreater(false)}}};bobj.crv.params.ParameterUI._getRowIndex=function(d){if(d){var c=this._rows;for(var b=0,a=c.length;b<a;++b){if(c[b]===d){return b}}}return -1};bobj.crv.params.ParameterUI._getRowCreator=function(){var a=MochiKit.Base.bind(this._onCreateRow,this);return bobj.crv.params.newParamRowCreator({activateCB:a})};bobj.crv.params.ParameterUI._getBgColor=function(a){var c=bobj.crv.params.BackgroundColor;var b=false;if(this._rows.length>a){b=this._rows[a].isDirty()}if(b){if(a%2){return c.dirtyAlternate}else{return c.dirty}}else{if(a%2){return c.alternate}else{return c.standard}}return c.standard};bobj.crv.params.ParameterUI.isDirty=function(){if(this._numRowsChanged){return true}for(var b=0,a=this._rows.length;b<a;++b){if(this._rows[b].isDirty()){return true}}return false};bobj.crv.params.ParameterUI.getNumValues=function(){return this._rows.length};bobj.crv.params.ParameterUI.getValueAt=function(a){var b=this._rows[a];if(b){return b.getValue()}return null};bobj.crv.params.ParameterUI.getValues=function(){var b=[];for(var c=0,a=this._rows.length;c<a;++c){b.push(this._rows[c].getValue())}return b};bobj.crv.params.ParameterUI.getSelectedIndex=function(){return this._getRowIndex(this._selectedRow)};bobj.crv.params.ParameterUI.setValueAt=function(a,b){var c=this._rows[a];if(c){c.setValue(b)}};bobj.crv.params.ParameterUI.setValues=function(b){if(!b){return}var a=b.length;var d=this._rows.length;for(var c=0;c<a&&c<d;++c){this._rows[c].setValue(b[c])}if(d>a){for(var c=d-1;c>=a;--c){this.deleteValue(c)}}else{if(a>d){for(var c=d;c<a;++c){this._addRow(b[c]);this._rows[c]._valueWidget.setAlwaysDirty()}}}};bobj.crv.params.ParameterUI.setCleanValue=function(a,b){var c=this._rows[a];if(c){c.setCleanValue(b)}};bobj.crv.params.ParameterUI.setBgColor=function(){var b=this._rows.length;for(var a=0;a<b;++a){this._rows[a].setBgColor(this._getBgColor(a))}};bobj.crv.params.ParameterUI.deleteValue=function(a){if(a>=0&&a<this._rows.length){var d=this._rows[a];d.layer.parentNode.removeChild(d.layer);_widgets[d.widx]=null;this._rows.splice(a,1);this._numRowsChanged=true;var c=this._rows.length;for(var b=a;b<c;++b){this._rows[b].setBgColor(this._getBgColor(b))}if(this._rowCreator){this._rowCreator.setBgColor(this._getBgColor(c))}}};bobj.crv.params.ParameterUI.setWarning=function(a,b){var c=this._rows[a];if(c){c.setWarning(b)}};bobj.crv.params.ParameterUI.getWarning=function(a){var b=this._rows[a];if(b){return b.getWarning()}};bobj.crv.params.ParameterUI.setSelected=function(a){var b=this._rows[a];if(b&&this._selectedRow!=b){if(this._getRowIndex(this._selectedRow)!=-1){this.deselect()}this._selectedRow=b;b.select()}};bobj.crv.params.ParameterUI.deselect=function(){if(this._selectedRow){this._selectedRow.deselect();this._selectedRow=null}};bobj.crv.params.ParameterUI.resize=function(a){if(a!==null){this.width=a;if(this.layer){bobj.setOuterSize(this.layer,a)}}};bobj.crv.params.BackgroundColor={standard:0,dirty:1,alternate:2,dirtyAlternate:3};bobj.crv.paramPanelIcon=bobj.crvUri("images/param_panel.gif");bobj.crv.paramWarningIconYOffset=0;bobj.crv.paramAdvIconYOffset=124;bobj.crv.params.newParameterValueRow=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),value:"",defaultValues:null,bgColor:bobj.crv.params.BackgroundColor.standard,isReadOnlyParam:true,canChangeOnPanel:false,allowCustom:false,isPassword:false,hasButton:false,buttonUrl:null,changeCB:null,selectCB:null,enterCB:null,buttonClickCB:null,openAdvDialogCB:null,defaultValuesMenu:null,tooltip:null},a);var b=newWidget(a.id);b.widgetType="ParameterValueRow";b._prevValueString=a.value;b._warning=null;bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.ParameterValueRow);return b};bobj.crv.params.ParameterValueRow.init=function(){Widget_init.call(this);this._valueWidget.init();if(this._button){this._button.init()}this._valueCtn=getLayer(this.id+"_vc");this._rightCtn=getLayer(this.id+"_rc");this._icon=this._rightCtn.firstChild;this._btnCtn=getLayer(this.id+"_bc");this._valBtnCtn=getLayer(this.id+"_vab");this._advBtnCtn=getLayer(this.id+"_adv_ctn");if(this._advButton){this._advButton.init()}if(MochiKit.Base.isIE()){var a=parseInt(MochiKit.Style.computedStyle(this._valueCtn,"margin-right"),10);if(bobj.isNumber(a)){this._valueWidget.layer.style.marginRight=(-1*a)+"px"}}this.layer.onmousedown=MochiKit.Base.bind(this._onMouseDown,this)};bobj.crv.params.ParameterValueRow.getHTML=function(){if(!this._valueWidget){this._valueWidget=this._getValueWidget()}if(this.hasButton&&!this._button){var b=MochiKit.Base.bind(this._onButtonClick,this);this._button=bobj.crv.params.newParamValueButton({url:this.buttonUrl,clickCB:b})}var c=bobj.html.DIV;var d=bobj.html.IMG;var a=this._getBgColorClass(this.bgColor)+" iactParamRow";if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){a+=" iactParamRowIE"}return c({id:this.id,"class":a},this.hasButton?this._getValueAndButtonHTML():this._getValueHTML(),c({id:this.id+"_rc","class":"iactParamRight"},imgOffset(bobj.crv.paramPanelIcon,16,16,0,bobj.crv.paramWarningIconYOffset,this.id+"_icn",'class="iactParamValueWarningIcon"',"","display:none",""),this._getAdvButtonHTML()))};bobj.crv.params.ParameterValueRow._getAdvButtonHTML=function(){this._advButton=bobj.crv.params.newParamValueButton({id:this.id+"_adv_icn",url:bobj.crv.paramPanelIcon,clickCB:this.openAdvDialogCB,tooltip:L_bobj_crv_ParamsAdvDlg,dx:0,dy:bobj.crv.paramAdvIconYOffset});var a=bobj.html.DIV;return a({id:this.id+"_adv_ctn",style:{display:"none",position:"absolute",right:"0",top:"0",cursor:_hand}},this._advButton.getHTML())};bobj.crv.params.ParameterValueRow._getValueHTML=function(){var b=bobj.html.DIV;var a={};if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){a.position="absolute";a.top="0px";a.left="0px"}return b({id:this.id+"_vc","class":"iactParamValue",style:a},this._valueWidget.getHTML())};bobj.crv.params.ParameterValueRow._getValueAndButtonHTML=function(){var b={};if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){b.width="100%"}var c=bobj.html.DIV;var a=c({id:this.id+"_vab",style:b,"class":"iactParamValueAndButton"},this._getValueHTML(),c({id:this.id+"_bc","class":"iactValueIcon",style:{position:"absolute",right:"0",top:"0",cursor:_hand}},this._button.getHTML()));return a};bobj.crv.params.ParameterValueRow._getValueWidget=function(){var d=this.defaultValuesMenu!==null&&!this.isReadOnlyParam&&this.canChangeOnPanel;var a=d?"newTextCombo":"newTextField";var c=MochiKit.Base.bind;var b=bobj.crv.params[a]({password:this.isPassword,cleanValue:this.value,editable:this.allowCustom&&this.canChangeOnPanel,enterCB:c(this._onEnterPress,this),keyUpCB:c(this._onKeyUp,this),bgColor:this.bgColor,tooltip:this.tooltip});if(d){b.setMenu(this.defaultValuesMenu);b.changeCB=c(this._onChange,this)}return b};bobj.crv.params.ParameterValueRow.getValue=function(){if(this._valueWidget){return this._valueWidget.getValue()}return this.value};bobj.crv.params.ParameterValueRow.setValue=function(a){if(this._valueWidget){this._valueWidget.setValue(a)}};bobj.crv.params.ParameterValueRow.setCleanValue=function(a){if(this._valueWidget){this._valueWidget.setCleanValue(a)}};bobj.crv.params.ParameterValueRow.select=bobj.crv.params.ParameterValueRow.focus=function(){this._select(true);if(this._valueWidget.widgetType=="TextCombo"){this._valueWidget.text.focus()}else{this._valueWidget.focus()}};bobj.crv.params.ParameterValueRow.isSelected=function(){return this._isSelected};bobj.crv.params.ParameterValueRow.deselect=function(){this._select(false)};bobj.crv.params.ParameterValueRow._select=function(a){this._isSelected=a?true:false;if(a){var b=MochiKit.DOM.addElementClass;b(this._rightCtn,"iactParamRightSel");b(this.layer,"iactParamRowSel");if(this._valBtnCtn){b(this._valBtnCtn,"iactParamValueAndButtonSel")}else{b(this._valueCtn,"iactParamValueSel")}}else{var c=MochiKit.DOM.removeElementClass;c(this._rightCtn,"iactParamRightSel");c(this.layer,"iactParamRowSel");if(this._valBtnCtn){c(this._valBtnCtn,"iactParamValueAndButtonSel")}else{c(this._valueCtn,"iactParamValueSel")}}if(this._valueWidget&&this._valueWidget.setSelected){this._valueWidget.setSelected(a)}this._showAdvButton(a)};bobj.crv.params.ParameterValueRow._showAdvButton=function(a){if(this.isReadOnlyParam){return}if(a===true){this._advBtnCtn.style.display=""}else{this._advBtnCtn.style.display="none"}};bobj.crv.params.ParameterValueRow.setWarning=function(a){if(a){bobj.crv.Tooltip.setElementTooltip(this._icon,a.message);this._icon.style.display=""}else{this._icon.style.display="none"}this._warning=a};bobj.crv.params.ParameterValueRow.getWarning=function(){return this._warning};bobj.crv.params.ParameterValueRow.resize=function(a,b){bobj.setOuterSize(this.layer,a,b)};bobj.crv.params.ParameterValueRow.isDirty=function(){return this._valueWidget.isDirty()};bobj.crv.params.ParameterValueRow.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){var b=MochiKit.DOM;b.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));b.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a;this._valueWidget.setBgColor(a)}};bobj.crv.params.ParameterValueRow._getBgColorClass=function(a){var b="iactParamRowBg";var c=bobj.crv.params.BackgroundColor;if(a===c.alternate||a===c.dirtyAlternate){b+="Alt"}if(a===c.dirty||a===c.dirtyAlternate){b+="Dirty"}return b};bobj.crv.params.ParameterValueRow.deleteValue=function(){this._valueWidget.setValue("",true)};bobj.crv.params.ParameterValueRow._onSelect=function(){var a=this.isSelected();if(!a&&this.selectCB){this.selectCB()}this._select(true)};bobj.crv.params.ParameterValueRow._onKeyUp=function(d){var c=new MochiKit.Signal.Event(src,d);var b=c.key().string;var a=this._valueWidget.getValue();switch(b){case"KEY_ESCAPE":this._valueWidget.setValue(this._valueWidget.cleanValue);if(this.changeCB){this.changeCB()}this._onSelect();break;case"KEY_ARROW_LEFT":case"KEY_ARROW_RIGHT":case"KEY_HOME":case"KEY_END":case"KEY_TAB":this._onSelect();break;default:if(a!==this._prevValueString){this._onSelect();if(this.changeCB){this.changeCB()}this._prevValueString=a}break}};bobj.crv.params.ParameterValueRow._onChange=function(){if(this.changeCB){this.changeCB()}};bobj.crv.params.ParameterValueRow._onEnterPress=function(){if(this.isSelected()&&this.enterCB){this.enterCB()}else{this._onSelect()}};bobj.crv.params.ParameterValueRow._onMouseDown=function(){this._onSelect()};bobj.crv.params.ParameterValueRow._onButtonClick=function(){if(this.buttonClickCB){var b=getPosScrolled(this._button.layer);var a=b.x+this._button.getWidth();var c=b.y+this._button.getHeight()+1;this.buttonClickCB(a,c)}};bobj.crv.params.newParamValueButton=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),url:null,clickCB:null,tooltip:this.tooltip,dx:0,dy:0},a);var b=newIconWidget(a.id,a.url,a.clickCB,null,a.tooltip,14,14,a.dx,a.dy,0,0);b.margin=0;b.oldInit=b.init;MochiKit.Base.update(b,bobj.crv.params.ParamValueButton);return b};bobj.crv.params.ParamValueButton.init=function(){this.oldInit();this.layer.onfocus=IconWidget_realOverCB;this.layer.onblur=IconWidget_realOutCB};bobj.crv.params.ParamValueButton.getHTML=function(){var c;var b=bobj.html;if(this.src){c=b.DIV({style:{overflow:"hidden",height:"16px",width:this.w+"px"}},simpleImgOffset(this.src,this.w,this.h,this.dis?this.disDx:this.dx,this.dis?this.dixDy:this.dy,"IconImg_"+this.id,null,this.alt,"cursor:"+_hand),this.extraHTML)}else{c=b.DIV({"class":"icontext",style:{width:"1px",height:(this.h+this.border)+"px"}})}var a={margin:this.margin+"px",padding:"1px"};if(this.width){a.width=this.width+"px"}if(!this.disp){a.display="none"}return b.DIV({style:a,id:this.id,"class":this.nocheckClass},(this.clickCB&&_ie)?lnk(c,null,null,null,' tabIndex="-1"'):c)};bobj.crv.params.newParamRowCreator=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),bgColor:null,activateCB:null},a);var b=newWidget(a.id);b.widgetType="ParamRowCreator";bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.ParamRowCreator);b._textField=b._createTextField();return b};bobj.crv.params.ParamRowCreator.init=function(){Widget_init.call(this);this._textField.init();this.layer.onclick=MochiKit.Base.bind(this._onClick,this)};bobj.crv.params.ParamRowCreator.show=function(a){if(a===false){this.css.visibility="hidden";this.css.display="none"}else{this.css.visibility="visible";this.css.display="block"}};bobj.crv.params.ParamRowCreator.getHTML=function(){var b=bobj.html.DIV;cssClass=this._getBgColorClass()+" iactParamRow";ieCssClass="iactParamRowIE";var a="";if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){cssClass+=" "+ieCssClass;a.width="100%"}return b({id:this.id,"class":cssClass},b({"class":"iactParamValue",style:a},this._textField.getHTML()),b({"class":"iactParamRight"}))};bobj.crv.params.ParamRowCreator._getBgColorClass=bobj.crv.params.ParameterValueRow._getBgColorClass;bobj.crv.params.ParamRowCreator.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){MochiKit.DOM.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));MochiKit.DOM.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a;this._textField.setBgColor(a)}};bobj.crv.params.ParamRowCreator._createTextField=function(){var a=bobj.crv.params.newTextField({cleanValue:L_bobj_crv_ParamsAddValue,editable:false,enterCB:MochiKit.Base.bind(this._onEnterPress,this)});return a};bobj.crv.params.ParamRowCreator._onEnterPress=function(){if(this.activateCB){this.activateCB()}};bobj.crv.params.ParamRowCreator._onClick=function(){if(this.activateCB){this.activateCB()}};bobj.crv.params.ParamRowCreator.resize=function(a,b){bobj.setOuterSize(this.layer,a,b)};bobj.crv.params.newTextField=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),cleanValue:"",width:"100%",maxChar:null,tooltip:null,disabled:false,editable:true,password:false,focusCB:null,blurCB:null,changeCB:null,keyUpCB:null,enterCB:null,bgColor:bobj.crv.params.BackgroundColor.standard,alwaysDirty:false},a);var b=newTextFieldWidget(a.id,a.changeCB,a.maxChar,a.keyUpCB,a.enterCB,true,a.tooltip,null,a.focusCB,a.blurCB);b.widgetType="TextField";bobj.fillIn(b,a);b.disabled=a.disabled;b.width=a.width;MochiKit.Base.update(b,bobj.crv.params.TextField);if(a.cleanValue){b.setValue(a.cleanValue)}return b};bobj.crv.params.TextField.setAlwaysDirty=function(){this.alwaysDirty=true};bobj.crv.params.TextField.getHTML=function(){var d={width:bobj.unitValue(this.width)};var c=MochiKit.Base.isIE();var b=this._getBgColorClass(this.bgColor)+" iactTextField";if(c&&bobj.isQuirksMode()){b+="IE"}var a={type:this.password?"password":"text",name:this.id,id:this.id,maxLength:this.maxChar,style:d,"class":b,oncontextmenu:"event.cancelBubble=true;return true",onfocus:"TextFieldWidget_focus(this)",onblur:"TextFieldWidget_blur(this)",onchange:"TextFieldWidget_changeCB(event, this)",onkeydown:"return TextFieldWidget_keyDownCB(event, this);",onkeyup:"return TextFieldWidget_keyUpCB(event, this);",onkeypress:"return TextFieldWidget_keyPressCB(event, this);",ondragstart:"event.cancelBubble=true; return true;",onselectstart:"event.cancelBubble=true; return true;"};if(this.disabled){a.disabled="disabled"}if(!this.editable){a.readonly="readonly";if(c){d.filter="alpha(opacity=50)"}else{d.opacity="0.5"}}if(this.tooltip){a.title=this.tooltip}return bobj.html.INPUT(a)};bobj.crv.params.TextField.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){var b=MochiKit.DOM;b.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));b.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a}};bobj.crv.params.TextField.isDirty=function(){return this.alwaysDirty===true||this.getValue()!==this.cleanValue};bobj.crv.params.TextField.setValue=function(a){TextFieldWidget_setValue.call(this,a)};bobj.crv.params.TextField.setCleanValue=function(a){this.cleanValue=a};bobj.crv.params.TextField._getBgColorClass=function(a){var b="iactTextFieldBg";var c=bobj.crv.params.BackgroundColor;if(a===c.alternate||a===c.dirtyAlternate){b+="Alt"}if(a===c.dirty||a===c.dirtyAlternate){b+="Dirty"}return b};bobj.crv.params.newTextCombo=function(a){var d=MochiKit.Base.update;var b=bobj.crv.params;a=d({id:bobj.uniqueId(),width:"100%",maxChar:null,tooltip:null,disabled:false,editable:false,changeCB:null,enterCB:null,keyUpCB:null,selected:false,bgColor:b.BackgroundColor.standard},a);var c=newTextComboWidget(a.id,a.maxChar,a.tooltip,null,a.changeCB,null,null,null);c.widgetType="TextCombo";bobj.fillIn(c,a);c.width=a.width;c.init_TextCombo=c.init;d(c,b.TextCombo);c._createTextField();c._createArrow();c.arrow.dy+=2;c.arrow.disDy+=2;return c};bobj.crv.params.TextCombo.setAlwaysDirty=function(){this.text.setAlwaysDirty()};bobj.crv.params.TextCombo.setMenu=function(a){this.menu=a};bobj.crv.params.TextCombo.init=function(){var a=MochiKit.Base.bind;this.init_TextCombo();this.arrowContainer=getLayer(this.id+"_arrowCtn");this.layer.onmouseover=a(this.showArrow,this,true);this.layer.onmouseout=a(this.onMouseOut,this);if(this.arrow){this.arrow.layer.onfocus=IconWidget_realOverCB;this.arrow.layer.onblur=IconWidget_realOutCB}this.text.setValue(this.cleanValue)};bobj.crv.params.TextCombo.onMouseOut=function(){if(this.selected===false){this.showArrow(false)}};bobj.crv.params.TextCombo.setSelected=function(a){if(this.selected!=a){this.selected=a;this.showArrow(a)}};bobj.crv.params.TextCombo.showArrow=function(a){if(this.arrowContainer){this.arrowContainer.style.visibility=a?"visible":"hidden"}};bobj.crv.params.TextCombo.showMenu=function(){var a=this.menu;a.parIcon=this;a.show(true);a.valueSelect(this.text.getValue()+"")};bobj.crv.params.TextCombo._createArrow=function(){this.arrow=newIconWidget(this.id+"arrow_",bobj.skinUri("menus.gif"),MochiKit.Base.bind(this.showMenu,this),null,(_openMenuPart1+(this.tooltip?this.tooltip:"")+_openMenuPart2),7,12,0,83,0,99);this.arrow.setClasses("iconnocheck","combobtnhover","combobtnhover","combobtnhover");this.arrow.par=this};bobj.crv.params.TextCombo._createTextField=function(){this.text=bobj.crv.params.newTextField({id:this.id+"_text",cleanValue:this.cleanValue,width:"100%",maxChar:null,tooltip:this.tooltip,disabled:false,editable:this.editable,password:false,focusCB:null,blurCB:null,keyUpCB:MochiKit.Base.bind(this._onKeyUp,this),enterCB:this.enterCB,alwaysDirty:false})};bobj.crv.params.TextCombo.getHTML=function(){var e=bobj.html;var d=this._getBgColorClass(this.bgColor);this.text.bgColor=this.bgColor;var b="iactTextComboArrow";var a={};a.right="0px";a.visibility="hidden";if(MochiKit.Base.isIE()){a.height="18px";if(!bobj.isQuirksMode()){a.right="5px"}}else{a.height="16px"}var c=e.DIV({id:this.id,"class":d,style:{width:"100%",position:"relative"}},e.DIV({style:{position:"relative"},"class":"iactTextComboTextField"},this.text.getHTML()),e.DIV({"class":b,id:this.id+"_arrowCtn",style:a},this.arrow.getHTML()));return c};bobj.crv.params.TextCombo.setValue=function(a){this.text.setValue(a)};bobj.crv.params.TextCombo.setCleanValue=function(a){this.text.setCleanValue(a)};bobj.crv.params.TextCombo.selectItem=function(a){if(a){this.val=a.value;this.text.setValue(a.value,true);this.menu.select(a.index)}};bobj.crv.params.TextCombo.getValue=function(){return this.text.getValue()};bobj.crv.params.TextCombo.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){var b=MochiKit.DOM;b.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));b.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a}if(this.text){this.text.setBgColor(a)}};bobj.crv.params.TextCombo._onKeyUp=function(a){var b=this.text.getValue();if(this.keyUpCB){this.keyUpCB(a)}};bobj.crv.params.TextCombo.isDirty=function(){return this.text.isDirty()};bobj.crv.params.TextCombo._getBgColorClass=function(a){var b="iactTextComboBg";var c=bobj.crv.params.BackgroundColor;if(a===c.alternate||a===c.dirtyAlternate){b+="Alt"}if(a===c.dirty||a===c.dirtyAlternate){b+="Dirty"}return b};bobj.crv.params.newScrollMenuWidget=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),originalValues:[],hasProperWidth:false,hasValueList:false,maxVisibleItems:10,openAdvDialogCB:null,maxNumParameterDefaultValues:null},a);var c=(a.originalValues.length>=a.maxVisibleItems)?a.maxVisibleItems:a.originalValues.length;if(c===1){c++}var b=newScrollMenuWidget("menu_"+a.id,bobj.crv.params.ScrollMenuWidget.onChange,false,null,c,null,null,null,false,"","",null,null);b.oldShow=b.show;MochiKit.Base.update(b,a,bobj.crv.params.ScrollMenuWidget);return b};bobj.crv.params.ScrollMenuWidget.onChange=function(){var b=this.parIcon;var a=this.getSelection();if(a){if(this.maxNumParameterDefaultValues&&a.index==this.maxNumParameterDefaultValues){if(this.openAdvDialogCB){this.openAdvDialogCB()}}else{b.val=a.value;b.text.setValue(a.value)}}else{b.val=null;b.text.setValue("")}if(b.changeCB){b.changeCB()}};bobj.crv.params.ScrollMenuWidget.getPosition=function(){if(this.parIcon===null){return}var c=this.parIcon.layer;var b=MochiKit.Style.getElementDimensions;var a=getPosScrolled(c);var e=a.x+2;var d=a.y+b(c).h+3;if(MochiKit.Base.isIE()){e-=1;if(bobj.isQuirksMode()){d-=2}}return{x:e,y:d}};bobj.crv.params.ScrollMenuWidget.setProperWidth=function(){if(this.hasProperWidth===false){this.css.display="block";this.orginalWidth=this.layer.offsetWidth;this.css.display="none";this.hasProperWidth=true}};bobj.crv.params.ScrollMenuWidget.setValueList=function(){if(this.hasValueList===false){this.hasValueList=true;var b=this.originalValues;for(var c=0,a=b.length;c<a;c++){this.add(b[c],b[c],false)}}};bobj.crv.params.ScrollMenuWidget.setFocus=function(a){if(a){var b=MochiKit.Base.bind(this.list.focus,this.list);setTimeout(b,300)}else{if(this.parIcon.selected===true){this.parIcon.arrow.focus()}}};bobj.crv.params.ScrollMenuWidget.show=function(a){if(this.layer===null){this.justInTimeInit()}if(this.hasValueList===false){this.setValueList()}if(this.parIcon===null){return}if(this.hasProperWidth===false){this.setProperWidth()}if(this.parIcon&&this.parIcon.layer){var b=this.parIcon.layer;if(b.clientWidth>this.orginalWidth){this.css.width=b.clientWidth+"px";this.list.css.width=b.clientWidth+"px"}else{this.css.width=this.orginalWidth+"px";this.list.css.width=this.orginalWidth+"px"}}var c=this.getPosition();this.oldShow(a,c.x,c.y);this.setFocus(a)};bobj.crv.params.newHelperRow=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),message:""},a);var b=newWidget(a.id);b.widgetType="HelperRow";bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.HelperRow);return b};bobj.crv.params.HelperRow.show=function(a){switch(a){case false:this.css.visibility="hidden";this.css.display="none";break;case true:this.css.visibility="visible";this.css.display="block";break}};bobj.crv.params.HelperRow.getHTML=function(){var b=bobj.html.DIV;cssClass=this._getBgColorClass()+" iactParamRow";ieCssClass="iactParamRowIE";var a="";if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){cssClass+=" "+ieCssClass;a.width="100%"}return b({id:this.id,"class":cssClass},b({"class":"iactParamValue",style:a},b({"class":"helperRowMessage"},"["+this.message+"]")),b({"class":"iactParamRight"}))};bobj.crv.params.HelperRow._getBgColorClass=bobj.crv.params.ParameterValueRow._getBgColorClass;bobj.crv.params.HelperRow.resize=function(a,b){bobj.setOuterSize(this.layer,a,b)};