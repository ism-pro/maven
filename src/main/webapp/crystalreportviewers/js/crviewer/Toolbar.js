if(typeof(bobj.crv.Toolbar)=="undefined"){bobj.crv.Toolbar={}}if(typeof(bobj.crv.ToolbarButton)=="undefined"){bobj.crv.ToolbarButton={}}if(typeof(bobj.crv.SelectPageControl)=="undefined"){bobj.crv.SelectPageControl={}}if(typeof(bobj.crv.ZoomControl)=="undefined"){bobj.crv.ZoomControl={}}if(typeof(bobj.crv.SearchTextControl)=="undefined"){bobj.crv.SearchTextControl={}}bobj.crv.toolbarImageY=function(a){return a*22+3};bobj.crv.exportIconIndex=0;bobj.crv.printIconIndex=1;bobj.crv.groupTreeIconIndex=2;bobj.crv.paramPanelIconIndex=3;bobj.crv.firstIconIndex=4;bobj.crv.prevIconIndex=5;bobj.crv.nextIconIndex=6;bobj.crv.lastIconIndex=7;bobj.crv.refreshIconIndex=8;bobj.crv.searchIconIndex=9;bobj.crv.newToolbar=function(a){var c=MochiKit.Base.update;a=c({id:bobj.uniqueId(),visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:null,height:null,fontStyle:null,fontSize:null}},a);var b=newPaletteContainerWidget(a.id);b.margin=0;bobj.fillIn(b,a);b._rightZoneWgts=[];b.widgetType="Toolbar";b.initOld=b.init;c(b,bobj.crv.Toolbar);b.palette=newPaletteWidget(b.id+"_palette");b.add(b.palette);return b};bobj.crv.Toolbar.addChild=function(c){var b=MochiKit.Signal.signal;var d=MochiKit.Base.partial;var a=MochiKit.Base.bind;switch(c.widgetType){case"ExportButton":this.exportButton=c;c.clickCB=d(b,this,"export");break;case"PrintButton":this.printButton=c;c.clickCB=d(b,this,"print");break;case"ParamPanelToggleButton":this.paramPanelToggleButton=c;c.toggleCB=a(this._onToggleButtonClick,this,c);break;case"GroupPanelToggleButton":this.groupPanelToggleButton=c;c.toggleCB=a(this._onToggleButtonClick,this,c);break;case"FirstPageButton":this.firstPageButton=c;c.clickCB=d(b,this,"firstPage");break;case"PrevPageButton":this.prevPageButton=c;c.clickCB=d(b,this,"prevPage");break;case"NextPageButton":this.nextPageButton=c;c.clickCB=d(b,this,"nextPage");break;case"LastPageButton":this.lastPageButton=c;c.clickCB=d(b,this,"lastPage");break;case"RefreshButton":this.refreshButton=c;c.clickCB=d(b,this,"refresh");break;case"ZoomControl":this.zoomControl=c;c.zoomCB=d(b,this,"zoom");break;case"SelectPageControl":this.selectPageControl=c;c.selectPageCB=d(b,this,"selectPage");break;case"SearchTextControl":this.searchTextControl=c;c.searchTextCB=d(b,this,"search");break;case"DrillUpButton":this.drillUpButton=c;c.clickCB=d(b,this,"drillUp");break;default:break}if(c.layoutAlign=="right"){this._rightZoneWgts.push(c)}else{this.palette.add(c)}};bobj.crv.Toolbar.init=function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);this.palette.init();this._updateNavButtons()};bobj.crv.Toolbar.write=function(){this._addRightZone();this.begin();this.palette.write();this.end();document.write(bobj.crv.getInitHTML(this.widx))};bobj.crv.Toolbar.beginHTML=function(){return bobj.html.openTag("div",{id:this.id,"class":"dialogzone",style:{overflow:"hidden",margin:this.margin+"px"}})};bobj.crv.Toolbar.getHTML=function(){this._addRightZone();return(this.beginHTML()+this.palette.getHTML()+this.endHTML()+bobj.crv.getInitHTML(this.widx))};bobj.crv.Toolbar.getWidth=function(){var e;var d=0;var b=this.palette.items;for(var c=0,a=b.length;c<a;c++){e=b[c].layer;if(e.offsetWidth){d+=e.offsetWidth}if(e.offsetLeft){d+=(e.offsetLeft*2)}}return d};bobj.crv.Toolbar._addRightZone=function(){this.palette.beginRightZone();var a=null;while(a=this._rightZoneWgts.pop()){this.palette.add(a)}delete this._rightZoneWgts};bobj.crv.Toolbar._updateNavButtons=function(){if(this.selectPageControl){var d=this.selectPageControl.getCurrentPage();if(this.firstPageButton){this.firstPageButton.setDisabled(d==1)}if(this.prevPageButton){this.prevPageButton.setDisabled(d==1)}var b=this.selectPageControl.getNumPages();var a=b.indexOf("+")==-1;var c=parseInt(b,10);var e=a&&c==d;if(this.nextPageButton){this.nextPageButton.setDisabled(e)}if(this.lastPageButton){this.lastPageButton.setDisabled(e)}}};bobj.crv.Toolbar._onToggleButtonClick=function(b,c){var a=(c?L_bobj_crv_Hide:L_bobj_crv_Show);if(this.paramPanelToggleButton===b){if(this.groupPanelToggleButton){this.groupPanelToggleButton.check(false);this.groupPanelToggleButton.changeTooltip(L_bobj_crv_Show+" "+L_bobj_crv_GroupTree)}this.paramPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_ParamPanel);MochiKit.Signal.signal(this,"showParamPanel",c)}else{if(this.groupPanelToggleButton===b){if(this.paramPanelToggleButton){this.paramPanelToggleButton.check(false);this.paramPanelToggleButton.changeTooltip(L_bobj_crv_Show+" "+L_bobj_crv_ParamPanel)}this.groupPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_GroupTree);MochiKit.Signal.signal(this,"showGroupTree",c)}}};bobj.crv.Toolbar.setPageNumber=function(b,a){if(this.selectPageControl){if(b){this.selectPageControl.setCurrentPage(b)}if(a){this.selectPageControl.setNumPages(a)}this._updateNavButtons()}};bobj.crv.Toolbar.updateToolPanelButtons=function(c){var d=bobj.crv.ToolPanelType;var e=false;var b=false;if(d.GroupTree==c){e=true}else{if(d.ParameterPanel==c){b=true}}if(this.groupPanelToggleButton){this.groupPanelToggleButton.check(e);var a=e?L_bobj_crv_Hide:L_bobj_crv_Show;this.groupPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_GroupTree)}if(this.paramPanelToggleButton){this.paramPanelToggleButton.check(b);var a=b?L_bobj_crv_Hide:L_bobj_crv_Show;this.paramPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_ParamPanel)}};bobj.crv.Toolbar.update=function(d,a){if(d){for(var b in d.children){var c=d.children[b];if(c){switch(c.cons){case"bobj.crv.newSelectPageControl":if(this.selectPageControl){this.selectPageControl.update(c,a);this._updateNavButtons()}break;case"bobj.crv.newSearchTextControl":if(this.searchTextControl){this.searchTextControl.update(c,a)}break}}}}};bobj.crv.newToolbarButton=function(b){b=MochiKit.Base.update({id:bobj.uniqueId(),icon:null,tooltip:null,text:null,isDisabled:false,isToggleButton:false,isChecked:false,clickCB:null,width:16,height:16,dx:3,dy:3,disDx:25,disDy:3},b);var a=b.isToggleButton?newIconCheckWidget:newIconWidget;var c=a.call(null,b.id,b.icon,b.clickCB,b.text,b.tooltip,b.width,b.height,b.dx,b.dy,b.disDx,b.disDy);c._tbBtnOldInit=c.init;c._tbBtnKwArgs=b;MochiKit.Base.update(c,bobj.crv.ToolbarButton);return c};bobj.crv.ToolbarButton.init=function(){this._tbBtnOldInit();var a=this._tbBtnKwArgs;this.setDisabled(a.isDisabled)};bobj.crv.newFirstPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_FirstPage,dy:bobj.crv.toolbarImageY(bobj.crv.firstIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.firstIconIndex)},a));b.widgetType="FirstPageButton";return b};bobj.crv.newPrevPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_PrevPage,dy:bobj.crv.toolbarImageY(bobj.crv.prevIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.prevIconIndex)},a));b.widgetType="PrevPageButton";return b};bobj.crv.newNextPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_NextPage,dy:bobj.crv.toolbarImageY(bobj.crv.nextIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.nextIconIndex)},a));b.widgetType="NextPageButton";return b};bobj.crv.newLastPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_LastPage,dy:bobj.crv.toolbarImageY(bobj.crv.lastIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.lastIconIndex)},a));b.widgetType="LastPageButton";return b};bobj.crv.newDrillUpButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/up.gif"),tooltip:L_bobj_crv_DrillUp},a));b.widgetType="DrillUpButton";return b};bobj.crv.newPanelToggleButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),text:L_bobj_crv_Parameters,isToggleButton:true,clickCB:function(){if(this.toggleCB){this.toggleCB(this.isChecked())}},dy:bobj.crv.toolbarImageY(bobj.crv.paramPanelIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.paramPanelIconIndex)},a));b.widgetType="ParamPanelToggleButton";return b};bobj.crv.newGroupTreeToggleButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),text:L_bobj_crv_GroupTree,isToggleButton:true,clickCB:function(){if(this.toggleCB){this.toggleCB(this.isChecked())}},dy:bobj.crv.toolbarImageY(bobj.crv.groupTreeIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.groupTreeIconIndex)},a));b.widgetType="GroupPanelToggleButton";return b};bobj.crv.newRefreshButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_Refresh,dy:bobj.crv.toolbarImageY(bobj.crv.refreshIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.refreshIconIndex)},a));b.widgetType="RefreshButton";return b};bobj.crv.newExportButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_Export,dy:bobj.crv.toolbarImageY(bobj.crv.exportIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.exportIconIndex)},a));b.widgetType="ExportButton";return b};bobj.crv.newPrintButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_Print,dy:bobj.crv.toolbarImageY(bobj.crv.printIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.printIconIndex)},a));b.widgetType="PrintButton";return b};bobj.crv.newLogoButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/logo.gif"),tooltip:"SAP Crystal Reports",clickCB:function(){window.location.href="http://www.businessobjects.com/ipl/default.asp?destination=ViewerLogoLink&product=crystalreports&version=12.0"},width:120,height:20,dx:0,dy:0,disDx:0,disDy:0},a));b.layoutAlign="right";b.widgetType="LogoButton";return b};bobj.crv.newToolbarSeparator=function(){return newPaletteVerticalSepWidget(bobj.uniqueId())};bobj.crv.newZoomControl=function(d){var g=MochiKit.Base.update;d=g({initialZoom:"100%",id:bobj.uniqueId()},d);if(bobj.isNumber(d.initialZoom)){d.initialZoom=d.initialZoom+"%"}var f=newTextComboWidget(d.id,5,L_bobj_crv_Zoom,60,bobj.crv.ZoomControl._zoomChangeCB,null,null,null);var b=["400%","300%","200%","150%","125%","100%","75%","50%","25%"];for(var c=0,a=b.length;c<a;++c){var e=b[c];f.add(e,e,(e==d.initialZoom))}f.text.setValue(d.initialZoom);f.zoomCB=null;f.widgetType="ZoomControl";f.initOld=f.init;f._initZoom=d.initialZoom;g(f,bobj.crv.ZoomControl);return f};bobj.crv.ZoomControl.init=function(){this.initOld();this.setZoom(this._initZoom)};bobj.crv.ZoomControl.setZoom=function(b){var c=parseInt(b,10);if(bobj.isNumber(c)){c+="%";this.valueSelect(c);var a=this.selectedItem;if(a&&a.val!=c){a.check(false);this.selectedItem=null}this._lastValue=c;return true}return false};bobj.crv.ZoomControl._zoomChangeCB=function(){var a=parseInt(this.text.getValue(),10);if(bobj.isNumber(a)){if(a<10){a=10}else{if(a>400){a=400}}}if(!this.setZoom(a)){this.setZoom(this._lastValue)}else{if(this.zoomCB){this.zoomCB(a)}}};bobj.crv.newSelectPageControl=function(a){var c=MochiKit.Base.update;a=c({id:bobj.uniqueId()},a);var b=newWidget(a.id);b.curPage=a.curPage;b.numPages=a.numPages;b.margin=1;b.space=0;b.fieldWidth=30;b.labelWidth=13+b.space;b.intField=newIntFieldWidget(b.id+"_intField",null,null,null,function(){if(b.selectPageCB){b.selectPageCB(b.getCurrentPage())}},true,L_bobj_crv_SelectPage,b.fieldWidth);b.label=NewLabelWidget(b.id+"_label"," / "+b.numPages);b.initOld=b.init;b.selectPageCB=null;c(b,bobj.crv.SelectPageControl);b.widgetType="SelectPageControl";return b};bobj.crv.SelectPageControl.update=function(b,a){if(b&&b.cons=="bobj.crv.newSelectPageControl"){this.setCurrentPage(b.args.curPage);this.setNumPages(b.args.numPages)}};bobj.crv.SelectPageControl.getHTML=function(){var b=bobj.html;var a={cursor:"default","padding-left":this.space+"px",width:this.labelWidth+"px"};return b.TABLE({id:this.id,cellspacing:0,cellpadding:0,border:0,style:{margin:this.margin+"px"}},b.TBODY(null,b.TR(null,b.TD(null,this.intField.getHTML()),b.TD({style:a},this.label.getHTML()))))};bobj.crv.SelectPageControl.getCurrentPage=function(){return this.intField.getValue()};bobj.crv.SelectPageControl.setCurrentPage=function(a){this.intField.setValue(a)};bobj.crv.SelectPageControl.getNumPages=function(){var a=this.label.text||"";return a.substring(3)};bobj.crv.SelectPageControl.setNumPages=function(b){this.label.text=" / "+b;var a=getLayer(this.label.id);a.innerHTML=convStr(this.label.text,false)};bobj.crv.SelectPageControl.init=function(){this.initOld();this.intField.init();this.intField.setMin(1);this.intField.setValue(this.curPage);this.label.init()};bobj.crv.newSearchTextControl=function(a){var c=MochiKit.Base.update;a=c({id:bobj.uniqueId()},a);var b=newWidget(a.id);bobj.fillIn(b,a);b.textField=newTextFieldWidget(b.id+"_textField",null,null,null,MochiKit.Base.bind(bobj.crv.SearchTextControl._searchTextCB,b),true,L_bobj_crv_SearchText,100);b.searchButton=newIconWidget(b.id+"_button",bobj.crvUri("images/toolbar.gif"),MochiKit.Base.bind(bobj.crv.SearchTextControl._searchTextCB,b),null,L_bobj_crv_SearchText,16,16,3,bobj.crv.toolbarImageY(bobj.crv.searchIconIndex),bobj.crv.toolbarImageY(bobj.crv.searchIconIndex),3);b.initOld=b.init;b.searchTextCB=null;c(b,bobj.crv.SearchTextControl);b.widgetType="SearchTextControl";return b};bobj.crv.SearchTextControl.update=function(b,a){if(b&&b.cons=="bobj.crv.newSearchTextControl"){this.textField.setValue(b.args.searchText)}};bobj.crv.SearchTextControl.init=function(){this.initOld();this.textField.init();this.textField.setValue(this.searchText);this.searchButton.init()};bobj.crv.SearchTextControl.getHTML=function(){var b=bobj.html;var a={cursor:"default","padding-left":this.space+"px",width:this.labelWidth+"px"};return b.TABLE({id:this.id,cellspacing:0,cellpadding:0,border:0,style:{margin:this.margin+"px"}},b.TBODY(null,b.TR(null,b.TD(null,this.textField.getHTML()),b.TD(null,this.searchButton.getHTML()))))};bobj.crv.SearchTextControl._searchTextCB=function(){var a=this.textField.getValue();if((a!==""||this.searchText!=a)&&bobj.isFunction(this.searchTextCB)){this.searchTextCB(a)}};