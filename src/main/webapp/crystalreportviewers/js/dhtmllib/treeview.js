_trIndent=18;function newTreeWidget(a,j,d,l,n,c,g,m,i,f,k,e){var b=newScrolledZoneWidget(a,2,4,j,d,g);b.icns=l;b.sub=new Array;b.clickCB=n;b.doubleClickCB=c;b.expandCB=m;b.collapseCB=i;b.deleteCB=f;b.minIcon=k;b.plusIcon=e;b.mouseOverCB=null;b.rightClickMenuCB=null;b.mouseOverTooltip=false;b.dragDrop=null;b.oldInit=b.init;b.init=TreeWidget_init;b.getHTML=TreeWidget_getHTML;b.getSelections=TreeWidget_getSelections;b.getSelectedItem=TreeWidget_getSelectedItem;b.getSelectedItems=TreeWidget_getSelectedItems;b.getCheckedItems=TreeWidget_getCheckedItems;b.setDragDrop=TreeWidget_setDragDrop;b.setFocus=TreeWidget_setFocus;b.add=TreeWidget_add;b.setRightClickMenuCB=TreeWidget_setRightClickMenuCB;b.findByData=TreeWidget_findByData;b.findById=TreeWidget_findById;b.findInName=TreeWidget_findInName;b.selectByData=TreeWidget_selectByData;b.selectById=TreeWidget_selectById;b.unselect=TreeWidget_unselect;b.search=TreeWidget_search;b.treeLyr=null;b.elems=new Array;b.elemCount=0;b.selId=-1;b.selIds=new Array;b.multiSelection=false;b.hlPath=false;b.hlElems=new Array;b.iconOrientVertical=true;b.deleteAll=TreeWidget_deleteAll;b.rebuildHTML=TreeWidget_rebuildHTML;b.iconW=16;b.iconH=16;b.initialIndent=0;b.buildElems=TreeWidget_buildElems;b.getCount=TreeWidget_getCount;if(window._TreeWidgetElemInstances==null){window._TreeWidgetElemInstances=new Array}b.dispIcnFuncName="dispIcn";b.setTooltipOnMouseOver=TreeWidget_setTooltipOnMouseOver;b.setMouseOverCB=TreeWidget_setMouseOverCB;b.setMultiSelection=TreeWidget_setMultiSelection;b.setHighlightPath=TreeWidget_setHighlightPath;b.highlightPath=TreeWidget_highlightPath;b.unhlPath=TreeWidget_unhlPath;return b}function TreeWidget_unselect(){var d=this;if(d.selId>=0){var c=_TreeWidgetElemInstances[d.selId];c.unselect();d.selId=-1}if(d.multiSelection){var a=d.selIds.length,e;for(var b=a-1;b>=0;b--){var c=_TreeWidgetElemInstances[d.selIds[b]];if(c){c.unselect()}}d.selIds.length=0;d.layer._BOselIds=""}d.unhlPath()}function TreeWidget_selectByData(c,a){var d=this,b=d.findByData(c);if(b){b.select(a)}}function TreeWidget_selectById(d,a){var c=this,b=c.findById(d);if(b){b.select(a)}}function TreeWidget_findByData(d){var e=this,b=e.sub,c=null;for(var a in b){c=b[a].findByData(d);if(c){return c}}return null}function TreeWidget_findById(e){var d=this,b=d.sub,c=null;for(var a in b){c=b[a].findById(e);if(c){return c}}return null}function TreeWidget_findInName(i,m,e,s,j,g,c){if(i==""||i==null){return null}var k=this,q=null,p=null,l=false;var u=0,b=0;var h=m?m:false;var r=e?e:false;var f=(!j)?j:true;var d=c?c:false;var n=k.elems.length;if(n==0){k.buildElems();n=k.elems.length;if(n==0){return}}var a=k.getSelections();if(a.length>0){u=a[0].elemPos+(f?1:-1);if((u<0)&&!f){u=n-1}if((u==n)&&f){u=0}}else{if(s=="begin"){u=0}else{if(s=="end"){u=n-1}}}b=u;while((b>=0)&&(b<n)){p=k.elems[b];l=p.getHiddenParent();if((d&&!l)||(!d)){q=p.findInName(i,h,r,f,g)}if(q!=null){break}b=b+(f?1:-1);if((b<0)&&!f){b=n-1}if((b==n)&&f){b=0}if(b==u){break}}return q}function TreeWidget_search(j,d,e,i,h,b,f,c,g){var a=this,k=null;if(j==""||j==null){return}k=a.findInName(j,d,e,i,h,f,c);if(k){a.unselect();k.select(g)}else{if(b){b()}}}function TreeWidget_add(d,b){var e=this,c=e.sub,a=c.length;d.treeView=e;c[a]=d;d.expanded=(a==0);if(b){d.extraIndent=b}return d}function TreeWidget_getHTML(){var g=this,f=g.sub,b=f.length,c=new Array(b+3),d=0;c[d++]=g.beginHTML()+'<span id="treeCont_'+g.id+'" onkeydown="return '+_codeWinName+'.TreeWidget_keyDownCB(this,event)" >';for(var e in f){c[d++]=f[e].getHTML(g.initialIndent,e==0)}c[d++]="</span>"+g.endHTML();return c.join("")}function TreeWidget_deleteAll(){var b=this.sub;for(var a in b){b[a].deleteAll();b[a]=null}b.length=0;if(this.elems){this.elems.length=0}}function TreeWidget_rebuildHTML(){var h=this,g=h.sub,b=g.length,c=new Array(b),d=0,f=h.initialIndent;for(var e in g){c[d++]=g[e].getHTML(f,e==0)}h.treeLyr.innerHTML=c.join("");h.selId=-1;h.layer._BOselId=-1;h.selIds.length=0;h.layer._BOselIds="";this.buildElems()}function TreeWidget_init(){this.oldInit();var b=this.treeLyr=getLayer("treeCont_"+this.id);if(this.dragDrop){this.dragDrop.attachCallbacks(this.layer)}var a=this.layer._BOselId;if(a!=null){this.selId=a}var d=this.layer._BOselIds;if(d!=null&&d!=""){this.selIds.length=0;this.selIds=d.split(";")}var c=this.sub}function TreeWidget_buildElems(elem){with(this){if(elem==null){elem=this}else{var pos=elems.length;elems[pos]=elem;elem.elemPos=pos}var subArr=elem.sub,len=subArr.length;for(var i=0;i<len;i++){buildElems(subArr[i])}}}function TreeWidget_getSelectedItem(){var a=this.selId;return(a>=0)?_TreeWidgetElemInstances[a]:null}function TreeWidget_getSelections(){var c=this;if(c.multiSelection){return c.getSelectedItems()}else{var a=c.getSelectedItem(),b=new Array;if(a!=null){b[0]=a}return b}}function TreeWidget_setFocus(a){var b=_TreeWidgetElemInstances[a];if(b!=null){b.init();safeSetFocus(b.domElem)}}function TreeWidget_keyPressCB(c,h){if(getWidget(c).multiSelection){return TreeWidget_multiSelKeyPress(c,h)}var i=getWidget(c).selId;if(i>=0){var d=_TreeWidgetElemInstances[i];var b=d.treeView;var g=TreeIdToIdx(_ie?_curWin.event.srcElement:h.target);var a=eventGetKey(h),f=_ie?_curWin.event.ctrlKey:h.ctrlKey;if(a==13){if(g!=i){TreeWidget_clickCB(g,false,null);TreeWidgetElem_UpdateTooltip(g,true)}else{if((g==i)&&(b.doubleClickCB)){b.doubleClickCB(d.userData)}}}if((a==10)&&f&&(g==_codeWinName+"trLstElt"+i)){if(d.sub.length>0){TreeWidget_toggleCB(i);TreeWidgetElem_UpdateTooltip(g)}if(d.isIncomplete&&d.querycompleteCB){d.querycompleteCB();TreeWidgetElem_UpdateTooltip(g)}return false}}else{var g=TreeIdToIdx(_ie?_curWin.event.srcElement:h.target);var a=eventGetKey(h);if(a==13){TreeWidget_clickCB(g,false,null);TreeWidgetElem_UpdateTooltip(g,true)}}}function TreeWidget_multiSelKeyPress(d,m){var g=getWidget(d);var l=g.selIds.length;if(l>0){var a=TreeIdToIdx(_ie?_curWin.event.srcElement:m.target);var h=eventGetKey(m),b=_ie?_curWin.event.ctrlKey:m.ctrlKey;var f=null;for(var j=0;j<l;j++){var c=g.selIds[j];if(a==c){f=_TreeWidgetElemInstances[c];break}}if(h==13){if(f==null){TreeWidget_clickCB(a,false,_ie?_curWin.event:m);TreeWidgetElem_UpdateTooltip(a,true)}else{if(f&&(g.doubleClickCB)){g.doubleClickCB(f.userData)}}}if((h==10)&&b&&f){if(f.sub.length>0){TreeWidget_toggleCB(c);TreeWidgetElem_UpdateTooltip(a)}if(f.isIncomplete&&f.querycompleteCB){f.querycompleteCB();TreeWidgetElem_UpdateTooltip(a)}return false}}else{var a=TreeIdToIdx(_ie?_curWin.event.srcElement:m.target);var h=eventGetKey(m);if(h==13){TreeWidget_clickCB(a,false,null);TreeWidgetElem_UpdateTooltip(a,true)}}return true}t=0;function TreeWidget_keyDownCB(h,i){if(getWidget(h).multiSelection){return TreeWidget_multiSelKeyDown(h,i)}var b=getWidget(h).selId;var g=eventGetKey(i);if(b>=0){var d=_TreeWidgetElemInstances[b];if(d!=null){var f=d.treeView;var a=TreeIdToIdx(_ie?_curWin.event.srcElement:i.target);switch(g){case 107:case 39:if((d.sub.length>0)&&(!d.expanded)){TreeWidget_toggleCB(b);TreeWidgetElem_UpdateTooltip(a)}if(d.isIncomplete&&d.querycompleteCB){d.querycompleteCB();TreeWidgetElem_UpdateTooltip(a)}break;case 109:case 37:if((d.sub.length>0)&&(d.expanded)){TreeWidget_toggleCB(b);TreeWidgetElem_UpdateTooltip(a)}break;case 40:case 38:var l=d.getNextPrev(g==40?1:-1);if(l!=null){l.select(null,null,null,true);safeSetFocus(l.domElem)}return false;break;case 46:if(f.deleteCB){f.deleteCB(d.userData)}break;default:var j=String.fromCharCode(g);if(j){f.search(j,false,false,null,true,null,true,true,true)}break}}}if(g==13){eventCancelBubble(i)}}function TreeWidget_multiSelKeyDown(f,p){var j=getWidget(f);var n=j.selIds.length;var l=eventGetKey(p);if(n>0){var a=_ie?_curWin.event.ctrlKey:p.ctrlKey;var g=_ie?_curWin.event.shiftKey:p.shiftKey;var b=TreeIdToIdx(_ie?_curWin.event.srcElement:p.target);var h=null,d;for(var m=0;m<n;m++){d=j.selIds[m];if(b==d){h=_TreeWidgetElemInstances[d];break}}if(h){switch(l){case 107:case 39:if((h.sub.length>0)&&(!h.expanded)){TreeWidget_toggleCB(d);TreeWidgetElem_UpdateTooltip(b)}if(h.isIncomplete&&h.querycompleteCB){h.querycompleteCB();TreeWidgetElem_UpdateTooltip(b)}break;case 109:case 37:if((h.sub.length>0)&&(h.expanded)){TreeWidget_toggleCB(d);TreeWidgetElem_UpdateTooltip(b)}break;case 40:case 38:var r=h.getNextPrev(l==40?1:-1);if(r!=null){r.select(null,_ie?_curWin.event:p,null,true);safeSetFocus(r.domElem)}return false;break;case 46:if(j.deleteCB){j.deleteCB(h.userData)}break;default:var q=String.fromCharCode(l);if(q){j.search(q,false,false,null,true,null,true,true,true)}break}}}if(l==13){eventCancelBubble(p)}}function TreeWidget_setDragDrop(c,b,a,d){this.dragCB=c;this.acceptDropCB=b;this.dropCB=a;this.dragEndCB=d;this.dragDrop=newDragDropData(this,TreeWidget_dragStartCB,TreeWidget_dragCB,TreeWidget_dragEndCB,TreeWidget_acceptDropCB,TreeWidget_leaveDropCB,TreeWidget_dropCB)}function TreeWidget_dragStartCB(e){var c=e.getSelections(),b=e.iconOrientVertical;e.dragCB(e);if(c&&c.length==1){var d=c[0];var a=d.iconId;newTooltipWidget().show(true,d.getDragTooltip(),a>=0?e.icns:null,e.iconW,e.iconH,b?0:e.iconW*a,b?e.iconH*a:0)}}function TreeWidget_setRightClickMenuCB(a){this.rightClickMenuCB=a}function TreeWidget_getCount(){var a=this;if(a.sub!=null){return a.sub.length}else{return 0}}function TreeWidget_setTooltipOnMouseOver(a){this.mouseOverTooltip=a}function TreeWidget_setMouseOverCB(a){this.mouseOverCB=a}function TreeWidget_dragCB(a){newTooltipWidget().setPos()}function TreeWidget_dragEndCB(a){newTooltipWidget().show(false);if(a.dragEndCB){a.dragEndCB()}}function TreeWidget_dragOverEnterCB(a,d){var b=_TreeWidgetElemInstances[d];if(a.ondrop==null){b.treeView.dragDrop.attachCallbacks(a,true);a.domEltID=d}var c=_ddData[a._dragDropData],b=_curWin.event;b.dataTransfer.dropEffect=b.ctrlKey?"copy":"move";if(c.acceptDropCB(window._globalDDD,c.widget,b.ctrlKey,b.ctrlKey?false:b.shiftKey,a,false)){b.returnValue=false}b.cancelBubble=true}function TreeWidget_acceptDropCB(e,d,c,a,b){return d.acceptDropCB(e,d,c,a,b)}function TreeWidget_leaveDropCB(d,c,b,a){if(c.dropWidget&&c.dropWidget.layer){if(c.dropWidget.layer.className!=c.dropWidget.nonselectedClass){c.dropWidget.layer.className=c.dropWidget.nonselectedClass}}}function TreeWidget_dropCB(f,d,c,a,b,e){newTooltipWidget().show(false);d.dropCB(f,d,c,a)}function TreeWidget_setMultiSelection(a){if((!this.multiSelection&&a)||(this.multiSelection&&!a)){this.unselect()}this.multiSelection=a}function TreeWidget_getSelectedItems(){var d=new Array;var a=this.selIds.length,e,c=0;for(var b=0;b<a;b++){e=this.selIds[b];if(e>=0){d[c]=_TreeWidgetElemInstances[e];c++}}return d}function TreeWidget_getCheckedItems(){var c=new Array;var a=_TreeWidgetElemInstances.length,d=0;for(var b=0;b<a;b++){elem=_TreeWidgetElemInstances[b];if(elem.isChecked()){c[d]=elem;d++}}return c}function TreeWidget_setHighlightPath(a){this.hlPath=a;if(!a){this.unhlPath()}}function TreeWidget_unhlPath(){var d=this,a=d.hlElems.length;var c,e;if(a>0){for(var b=0;b<a;b++){c=d.hlElems[b];c.init();e=c.domElem;if(e==null){return}if(c.isSelected()){e.className=c.selectedClass}else{e.className=c.nonselectedClass}}d.hlElems.length=0}}function TreeWidget_highlightPath(d){var c=this;if(!c.hlPath){return}c.unhlPath();var a=_TreeWidgetElemInstances[d];c.hlElems[c.hlElems.length]=a;a.domElem.className=a.selectedClass;if(a.elemPos==-1){c.buildElems()}var b=a.par;while(b){b.init();b.domElem.className=b.hlClass;c.hlElems[c.hlElems.length]=b;b=b.par}if(a.isNode()){hlVisibleChildren(a,c.hlElems)}}function hlVisibleChildren(e,b){if(e.expanded&&!e.isIncomplete){var a=e.sub.length;for(var c=0;c<a;c++){var d=e.sub[c];b[b.length]=d;d.init();d.domElem.className=d.hlClass;if(d.isNode()){hlVisibleChildren(d,b)}}}}function newTreeWidgetElem(g,a,b,d,h,j,e,i,f){var c=new Object;c.elemPos=-1;if(window._TreeWidgetElemInstances==null){window._TreeWidgetElemInstances=new Array}c.expanded=false;c.generated=false;c.iconId=g;c.iconSelId=h?h:g;c.tooltip=j;c.customTooltip=false;c.iconAlt=e;c.isHTML=false;c.isCheck=false;c.checked=false;c.check=TreeWidgetElem_check;c.isChecked=TreeWidgetElem_isChecked;c.checkCB=null;c.name=a;c.par=null;c.userData=b;c.sub=new Array;c.treeView=null;c.id=_TreeWidgetElemInstances.length;c.layer=null;c.plusLyr=null;c.icnLyr=null;c.checkElem=null;c.domElem=null;c.toggleLyr=null;c.blackTxt=(i)?i:"treeNormal";c.grayTxt="treeGray";c.selectedClass=(f)?f:"treeSelected";c.nonselectedClass=c.blackTxt;c.feedbackDDClass="treeFeedbackDD";c.hlClass="treeHL";c.help=d;_TreeWidgetElemInstances[c.id]=c;c.getHTML=TreeWidgetElem_getHTML;c.init=TreeWidgetElem_init;c.add=TreeWidgetElem_add;c.select=TreeWidgetElem_select;c.unselect=TreeWidgetElem_unselect;c.getNextPrev=TreeWidgetElem_getNextPrev;c.getHiddenParent=TreeWidgetElem_getHiddenParent;c.nodeIndent=0;c.getTooltip=TreeWidgetElem_getTooltip;c.getDragTooltip=TreeWidgetElem_getDragTooltip;c.change=TreeWidgetElem_change;c.deleteAll=TreeWidget_deleteAll;c.setGrayStyle=TreeWidgetElem_setGrayStyle;c.isGrayStyle=TreeWidgetElem_isGrayStyle;c.findByData=TreeWidgetElem_findByData;c.findById=TreeWidgetElem_findById;c.findInName=TreeWidgetElem_findInName;c.isIncomplete=false;c.querycompleteCB=null;c.setIncomplete=TreeWidgetElem_setIncomplete;c.finishComplete=TreeWidgetElem_finishComplete;c.setEditable=TreeWidgetElem_setEditable;c.showEditInput=TreeWidgetElem_showEditInput;c.isLeaf=TreeWidgetElem_isLeaf;c.isNode=TreeWidgetElem_isNode;c.isSelected=TreeWidgetElem_isSelected;c.htmlWritten=false;c.showCustomTooltipCB=null;c.hideCustomTooltipCB=null;return c}function TreeWidgetElem_checkCB(a,c){var b=_TreeWidgetElemInstances[c];b.checked=a.checked;if(b.checkCB){b.checkCB(b,c)}}function TreeWidgetElem_isChecked(){var a=this;return(a.isCheck?a.checked:false)}function TreeWidgetElem_check(a){var b=this;if(b.isCheck){b.checked=a;if(b.htmlWritten){b.init();b.checkElem.checked=a}}}function TreeWidgetElem_EditNormalBehaviour(a){eventCancelBubble(a);return true}function TreeWidgetElem_EditBlurCB(){setTimeout("TreeWidgetElem_EditKeyCancel("+this.widID+")",1)}_globTreeTxtvalue="";function TreeWidgetElem_EditKeyDown(b){eventCancelBubble(b);var a=eventGetKey(b),c=_TreeWidgetElemInstances[this.widID];if(a==27){setTimeout("TreeWidgetElem_EditKeyCancel("+this.widID+")",1)}else{if(a==13){_globTreeTxtvalue=this.value;setTimeout("TreeWidgetElem_EditKeyAccept("+this.widID+")",1)}}}function TreeWidgetElem_EditKeyCancel(b){var a=_TreeWidgetElemInstances[b];a.showEditInput(false)}function TreeWidgetElem_EditKeyAccept(b){var a=_TreeWidgetElemInstances[b];if(a.validChangeNameCB){if(a.validChangeNameCB(_globTreeTxtvalue)==false){return}}a.change(null,_globTreeTxtvalue);a.showEditInput(false);if(a.changeNameCB){a.changeNameCB()}}_globTreeTxt=null;function TreeWidgetElem_showEditInput(g){var a=this;a.init();var c=a.domElem,e=c.style;if(g&&(e.display!="none")){var f=c.parentNode,i=c.offsetWidth,d=c.offsetHeight;e.display="none";var j=_globTreeTxt=_curDoc.createElement("INPUT");j.type="text";j.className="textinputs";j.value=a.name;j.ondragstart=TreeWidgetElem_EditNormalBehaviour;j.onselectstart=TreeWidgetElem_EditNormalBehaviour;j.onblur=TreeWidgetElem_EditBlurCB;j.onkeydown=TreeWidgetElem_EditKeyDown;j.widID=a.id;var b=j.style;b.width=""+(i+20)+"px";f.appendChild(j);j.focus();j.select()}if((g!=true)&&(e.display=="none")){var j=_globTreeTxt;if(j){j.parentNode.removeChild(j);e.display="";_globTreeTxt=null}}}function TreeWidgetElem_setEditable(a,d,b){var c=this;if(a){c.changeNameCB=d;c.validChangeNameCB=b}c.isEditable=a}function TreeWidgetElem_triggerDD(){var d=_treeWClickedW,c=_curWin.event;if(d&&(d.clicked)&&(c.button==_leftBtn)){if(d.initialX!=null){var b=eventGetX(c),f=eventGetY(c),a=3;if((b<(d.initialX-a))||(b>(d.initialX+a))||(f<(d.initialY-a))||(f>(d.initialY+a))){this.dragDrop();d.clicked=false}}}}function TreeWidgetElem_mouseUp(){var b=_treeWClickedW,a=_curWin.event;b.select(null,a);b.domElem.onmouseup=null}function TreeWidgetElem_init(){var f=this;if(f.layer==null){var c=f.sub,a=c.length,e=(a>0)||f.isIncomplete;f.layer=getLayer(_codeWinName+"TWe_"+f.id);if(f.layer==null){return}var g=f.layer.childNodes,d=g.length;f.plusLyr=e?g[0].childNodes[1]:null;f.icnLyr=(f.iconId>-1)?g[e?1:0]:null;f.checkElem=f.isCheck?g[d-2]:null;f.domElem=g[d-1];f.toggleLyr=getLayer(_codeWinName+"trTog"+f.id);if(f.treeView.mouseOverTooltip||f.treeView.mouseOverCB){f.domElem.onmouseout=TreeFuncMouseout}if(e){addDblClickCB(f.plusLyr,_tpdb)}if(e&&f.generated){for(var b in c){c[b].init()}}addDblClickCB(f.domElem,_tpdb)}}function TreeIdToIdx(b){if(b){var c=b.id;if(c){var a=c.lastIndexOf("TWe_");if(a>=0){return parseInt(c.slice(a+4))}else{return -1}}else{return TreeIdToIdx(b.parentNode)}}return -1}function TreeFuncMouseout(a){_tmoc(this,TreeIdToIdx(this),false,a)}function _tmvc(a,b){_tmoc(a,TreeIdToIdx(a),true,b)}function _tpl(a,b){TreeWidget_clickCB(TreeIdToIdx(a),true,b,true);return false}function _tkl(a,c){var b=eventGetKey(c);if(b==13){return _tpl(a,c)}}function _tkt(a,c){var b=eventGetKey(c);if(b==13){return _tpt(a,c)}}function _tpt(a,b){TreeWidget_clickCB(TreeIdToIdx(a),false,b,true);return false}function _tpdb(a){treeDblClickCB(TreeIdToIdx(this),_ie?event:a);return false}function _tfcc(a,b){treeFCCB(a,TreeIdToIdx(a),true,b);a.onblur=_tblc}function _tblc(a){treeFCCB(this,TreeIdToIdx(this),false,a)}function TreeWidgetElem_getHTML(indent,isFirst){var s="";with(this){htmlWritten=true,isRoot=(par==null);var len=sub.length,exp=(len>0)||isIncomplete,a=new Array,i=0;if(this.extraIndent){indent+=_trIndent*extraIndent}var keyCB='onkeydown=" return '+_codeWinName+'._tkt(this,event)" ';var mouseCB='onfocus="'+_codeWinName+'._tfcc(this,event)" onclick="return '+_codeWinName+'._tpt(this,event)" ';if(treeView.mouseOverTooltip||treeView.mouseOverCB){mouseCB+='onmouseover="'+_codeWinName+'._tmvc(this,event)" '}var contextMenu="";if(treeView.rightClickMenuCB!=null){contextMenu=' oncontextmenu="'+_codeWinName+".treeContextMenuCB('"+id+"', event);return false\" "}var acceptDD="";if((treeView.acceptDropCB!=null)&&(_ie)){acceptDD=' ondragenter="'+_codeWinName+".TreeWidget_dragOverEnterCB(this,'"+id+"');\" ";acceptDD+=' ondragover="'+_codeWinName+".TreeWidget_dragOverEnterCB(this,'"+id+"');\" "}a[i++]='<div id="'+_codeWinName+"TWe_"+id+'"'+contextMenu+" class=trElt>";var onkeydown='onkeydown="return '+_codeWinName+'._tkl(this,event)" ';var onclick='onclick="return '+_codeWinName+'._tpl(this,event)" ';if(exp){var expIcon;var iconTooltip;if(expanded){if(treeView.minIcon!=null){expIcon=treeView.minIcon}else{expIcon=_skin+"../min.gif"}iconTooltip=_collapseNode.replace("%1",name)}else{if(treeView.plusIcon!=null){expIcon=treeView.plusIcon}else{expIcon=_skin+"../plus.gif"}iconTooltip=_expandNode.replace("%1",name)}a[i++]="<a tabindex=1 "+onclick+" "+onkeydown+' href="javascript:doNothing();"><span style="display:none">'+iconTooltip+'</span><img class=trPlus src="'+expIcon+'"/></a>'}if(iconId>-1){a[i++]="<img tabindex=1 "+mouseCB+" "+keyCB+"class=trIcn"+(exp||isRoot?"Plus":"")+" "+attr("src",_skin+"../transp.gif")+attr("alt",iconAlt)+' align=top style="'+backImgOffset(treeView.icns,(treeView.iconOrientVertical?0:treeView.iconW*(expanded?iconSelId:iconId)),(treeView.iconOrientVertical?treeView.iconH*(expanded?iconSelId:iconId):0))+'" >'}else{if(!exp&&!isRoot){a[i++]="<img tabindex=1 class=trSep "+attr("src",_skin+"../transp.gif")+">"}}if(isCheck){a[i++]='<input type=checkbox style="margin:0px;" onclick="'+_codeWinName+".TreeWidgetElem_checkCB(this,'"+id+"')\""+(this.checked?" checked":"")+">"}a[i++]='<a href="javascript:doNothing();" '+mouseCB+" "+keyCB+" tabindex=1 "+acceptDD+" class="+nonselectedClass+">";a[i++]=(isHTML?name:convStr(name));a[i++]="</a>";a[i++]="</div>";if(exp){a[i++]='<div id="'+_codeWinName+"trTog"+id+'" style="margin-left:18px;display:'+(expanded?"":"none")+'">'}if(expanded){generated=true;for(var j=0;j<len;j++){a[i++]=sub[j].getHTML(0,j==0)}}if(exp){nodeIndent=indent;a[i++]="</div>"}}return a.join("")}function TreeWidgetElem_setGrayStyle(b){var c=this,a=b?c.grayTxt:c.blackTxt;if(a!=c.nonselectedClass){c.nonselectedClass=a;c.init();if(c.domElem&&(c.domElem.className!=c.selectedClass)){c.domElem.className=a}}}function TreeWidgetElem_isGrayStyle(){return this.nonselectedClass==this.grayTxt}function TreeWidgetElem_setIncomplete(a){this.isIncomplete=true;this.querycompleteCB=a}function TreeWidgetElem_finishComplete(){this.isIncomplete=false;TreeWidget_toggleCB(this.id);this.treeView.buildElems()}function TreeWidgetElem_findByData(d){var e=this;if(e.userData==d){return e}var b=e.sub;for(var a in b){var c=b[a].findByData(d);if(c!=null){return c}}return null}function TreeWidgetElem_findInName(j,c,d,g,e){var b=this,a=b.name;if(j==""||j==null){return}if(!c||(c==null)){a=a.toLowerCase();j=j.toLowerCase()}if(d){var k=a.split(" ");for(var f=0;f<k.length;f++){if(k[f]==j){return b}}}else{var h=a.indexOf(j);if(e==true){if(h==0){return b}}else{if(h>-1){return b}}}return null}function TreeWidgetElem_findById(e){var d=this;if(d.id==e){return d}var b=d.sub;for(var a in b){var c=b[a].findById(e);if(c!=null){return c}}return null}function TreeWidgetElem_change(g,a,b,e,h,i){var c=this,d=c.treeView;if(g!=null){c.iconId=g}if(a!=null){c.name=a}c.userData=b;if(e!=null){c.help=e}c.iconSelId=(h!=null)?h:c.iconId;if(i!=null){c.tooltip=i}c.init();if(c.domElem){c.domElem.innerHTML=convStr(c.name)}if(c.icnLyr){if(c.icnLyr.childNodes.length>0){var f=c.icnLyr.childNodes[c.sub.length>0?1:0];changeOffset(f,d.iconOrientVertical?0:c.treeView.iconW*(c.expanded?c.iconSelId:c.iconId),d.iconOrientVertical?c.treeView.iconH*(c.expanded?c.iconSelId:c.iconId):0)}}}function treeInitDropFunc(a,c){var b=_TreeWidgetElemInstances[c];if(a.ondrop==null){b.treeView.dragDrop.attachCallbacks(a,true);a.domEltID=c}}function TreeWidget_toggleCB(d,b){var c=_TreeWidgetElemInstances[d];if(c.sub.length==0){c.plusLyr.style.visibility="hidden";return}c.expanded=!c.expanded;c.init();if(b){dispIcn(d)}else{setTimeout(c.treeView.dispIcnFuncName+"("+d+")",1)}var a=c.treeView;if(c.expanded&&a.expandCB){a.expandCB(c.userData)}if(!c.expanded&&a.collapseCB){a.collapseCB(c.userData)}}function dispIcn(eId){var e=_TreeWidgetElemInstances[eId];with(e){if(expanded&&!generated){generated=true;var a=new Array,i=0,len=sub.length,newInd=nodeIndent+_trIndent;for(var j=0;j<len;j++){a[i++]=sub[j].getHTML(newInd,j==0)}toggleLyr.innerHTML=a.join("")}toggleLyr.style.display=expanded?"block":"none";if(expanded){if(treeView.minIcon!=null){plusLyr.src=treeView.minIcon}else{plusLyr.src=_skin+"../min.gif"}}else{if(treeView.plusIcon!=null){plusLyr.src=treeView.plusIcon}else{plusLyr.src=_skin+"../plus.gif"}}plusLyr.title=expanded?_expandedLab:_collapsedLab;if(icnLyr&&icnLyr.childNodes&&icnLyr.childNodes.length>1){var iconL=icnLyr.childNodes[1];changeOffset(iconL,treeView.iconOrientVertical?0:treeView.iconW*(expanded?iconSelId:iconId),treeView.iconOrientVertical?treeView.iconH*(expanded?iconSelId:iconId):0)}}}function TreeWidgetElem_add(elem){with(this){elem.treeView=treeView;elem.par=this;sub[sub.length]=elem}return elem}function TreeWidgetElem_getHiddenParent(){var a=this.par;if(a==null){return null}if(!a.expanded){return a}return;a.getHiddenParent()}function TreeWidgetElem_getNextPrev(delta){with(this){if(elemPos==-1){treeView.buildElems()}var newPos=elemPos+delta;if((newPos>=0)&&(newPos<treeView.elems.length)){var ret=treeView.elems[newPos];var hidden=ret.getHiddenParent();if(hidden!=null){return ret.getNextPrev(delta)}else{return ret}}else{return null}}}function TreeWidgetElem_scroll(e,a){var c=Math.max(0,a.offsetHeight-20),f=a.scrollTop;var b=getPos(e,a);var g=b.offsetTop,d=e.offsetHeight;if((g-f+d)>c){a.scrollTop=g+d-c}if((g-f)<0){a.scrollTop=g}}function TreeWidgetElem_unselect(){var o=this;with(o){init();if(domElem){domElem.className=o.nonselectedClass}treeView.selId=-1;if(treeView.multiSelection){var idx=arrayFind(treeView,"selIds",id);if(idx>-1){arrayRemove(treeView,"selIds",idx);treeView.layer._BOselIds="";var len=treeView.selIds.length;for(var i=0;i<len;i++){if(treeView.layer._BOselIds==""){treeView.layer._BOselIds=""+treeView.selIds[i]}else{treeView.layer._BOselIds+=";"+treeView.selIds[i]}}}}}}function TreeWidgetElem_select(setFocus,ev,noSendClickCB,isFromKeybArrow){var coll=new Array;var par=this.par;while(par){if(!par.expanded){coll[coll.length]=par}par=par.par}var cLen=coll.length;for(var i=cLen-1;i>=0;i--){TreeWidget_toggleCB(coll[i].id,true)}if(cLen>0){this.select(setFocus,ev,noSendClickCB,isFromKeybArrow)}if(this.treeView.multiSelection){TreeWidgetElem_multiSelect(this,setFocus,ev,noSendClickCB,isFromKeybArrow);return}if(noSendClickCB==null){noSendClickCB=false}with(this){if(treeView.selId!=id){if(treeView.selId>=0){var prev=_TreeWidgetElemInstances[treeView.selId];prev.init();if(prev.domElem){prev.domElem.className=prev.nonselectedClass}}treeView.selId=id;init();treeView.layer._BOselId=id;var de=domElem;if(de==null){return}if(treeView.hlPath){treeView.highlightPath(id)}else{de.className=selectedClass}if(setFocus){safeSetFocus(de)}TreeWidgetElem_scroll(de,treeView.layer)}if((treeView.clickCB)&&(!noSendClickCB)){treeView.clickCB(userData,isFromKeybArrow!=null?isFromKeybArrow:false)}}}_startShift=null;function TreeWidgetElem_multiSelect(o,setFocus,ev,noSendClickCB,isFromKeybArrow){if(noSendClickCB==null){noSendClickCB=false}with(o){init();var de=domElem;if(de==null){return}if(treeView.hlPath){treeView.unhlPath()}if(ev==null){var idx=arrayFind(treeView,"selIds",id);if(idx==-1){treeView.selIds[treeView.selIds.length]=id;if(treeView.layer._BOselIds==""){treeView.layer._BOselIds=""+id}else{treeView.layer._BOselIds+=";"+id}de.className=selectedClass}_startShift=null}else{var idx=arrayFind(treeView,"selIds",id);var ctrl=_ie?_curWin.event.ctrlKey:ev.ctrlKey;var shift=_ie?_curWin.event.shiftKey:ev.shiftKey;var typeEvt=_ie?_curWin.event.type:ev.type;if(ctrl&&!shift){if(idx==-1){treeView.selIds[treeView.selIds.length]=id;if(treeView.layer._BOselIds==""){treeView.layer._BOselIds=""+id}else{treeView.layer._BOselIds+=";"+id}de.className=selectedClass}else{unselect()}_startShift=o}if(shift){var lastSelId=-1,lastSel=null;if(treeView.selIds.length>0){lastSelId=treeView.selIds[treeView.selIds.length-1];lastSel=_TreeWidgetElemInstances[lastSelId];if(_startShift==null){_startShift=lastSel}if(!ctrl){treeView.unselect()}TreeWidgetElem_multiSelectShift(_startShift.id,id)}else{treeView.unselect();treeView.selIds[0]=id;treeView.layer._BOselIds=""+id;if(treeView.hlPath){treeView.highlightPath(id)}else{de.className=selectedClass}_startShift=null}}if(!ctrl&&!shift){var idx=arrayFind(treeView,"selIds",id);if(_ie&&typeEvt=="mousedown"&&idx>-1){window._treeWClickedW=o;de.onmouseup=TreeWidgetElem_mouseUp}else{treeView.unselect();treeView.selIds[0]=id;treeView.layer._BOselIds=""+id;if(treeView.hlPath){treeView.highlightPath(id)}else{de.className=selectedClass}_startShift=null}}}if(setFocus){safeSetFocus(de)}TreeWidgetElem_scroll(de,treeView.layer);if((treeView.clickCB)&&(!noSendClickCB)){treeView.clickCB(userData,isFromKeybArrow!=null?isFromKeybArrow:false)}}}function TreeWidgetElem_multiSelectCtrl(){}function TreeWidgetElem_multiSelectShift(h,g){var k=_TreeWidgetElemInstances[h];var i=_TreeWidgetElemInstances[g];var c=k?k.treeView:null;if(c==null){return}if(k.elemPos==-1||i.elemPos==-1){c.buildElems()}var f=(k.elemPos<i.elemPos)?k.elemPos:i.elemPos;var a=(k.elemPos>i.elemPos)?k.elemPos:i.elemPos;if((f>=0)&&(a<c.elems.length)){for(var d=f;d<=a;d++){var b=c.elems[d];var e=b.getHiddenParent();if((e==null)&&(arrayFind(c,"selIds",b.id)==-1)){c.selIds[c.selIds.length]=b.id;if(c.layer._BOselIds==""){c.layer._BOselIds=""+b.id}else{c.layer._BOselIds+=";"+b.id}b.init();if(b.domElem){b.domElem.className=b.selectedClass}}}}}function TreeWidget_clickCB(f,c,b,a){eventCancelBubble(b);var d=_TreeWidgetElemInstances[f];if(d==null){return}d.init();if(c&&(d.sub.length>0)){TreeWidget_toggleCB(f)}else{if(c&&d.isIncomplete&&d.querycompleteCB){d.querycompleteCB()}else{d.select(null,b)}}if(_curDoc.onmousedown){_curDoc.onmousedown(b)}if(a&&_ie){window._treeWClickedW=d;d.init();d.clicked=true;d.initialX=eventGetX(b);d.initialY=eventGetY(b);if(_ie&&d.domElem){d.domElem.onmousemove=TreeWidgetElem_triggerDD}}if(_moz&&d.domElem){setTimeout("_TreeWidgetElemInstances["+f+"].domElem.focus()",1)}return false}function treeDblClickCB(d,b){eventCancelBubble(b);var c=_TreeWidgetElemInstances[d],a=c.treeView;if(c.sub.length>0){TreeWidget_toggleCB(d)}else{if(c.isIncomplete&&c.querycompleteCB){c.querycompleteCB();return}}if(c.isEditable){c.showEditInput(true)}else{if(a.doubleClickCB){a.doubleClickCB(c.userData)}}}function TreeWidgetElem_UpdateTooltip(a,b){var c=_TreeWidgetElemInstances[a];if(c){c.init();if(c.domElem!=null){c.domElem.title=c.getTooltip(b)}}}function TreeWidgetElem_getDragTooltip(){var a=this;if(a.obj&&a.obj.getDragTooltip){return a.obj.getDragTooltip()}return a.name}function TreeWidgetElem_getTooltip(a){var c="",d=this;var b=false;if(d.treeView.multiSelection){b=(arrayFind(d.treeView,"selIds",d.id)>-1)}else{b=(d.treeView.selId==d.id)}if(a||b){c=_selectedLab+" "}c+=d.name;if((d.sub.length>0)||(d.isIncomplete)){if(d.expanded){c+=" "+_expandedLab+" "}else{c+=" "+_collapsedLab+" "}}if(d.advTooltip){c+=" ("+d.advTooltip+")"}return c}function treeFCCB(d,f,a,c){var b=_TreeWidgetElemInstances[f];if((b==null)||b.treeView.mouseOverTooltip){return}if(a){if(b.customTooltip&&b.showCustomTooltipCB){b.showCustomTooltipCB(b.userData,c);b.init()}else{d.title=b.getTooltip()}}else{if(b.customTooltip&&b.hideCustomTooltipCB){b.hideCustomTooltipCB()}else{d.title=""}}}function _tmoc(d,f,c,b){d.style.cursor=_hand;var a=_TreeWidgetElemInstances[f];if(a==null){return}if(a.treeView.mouseOverTooltip){if(c){if(a.customTooltip&&a.showCustomTooltipCB){a.showCustomTooltipCB(a.userData,b);a.init()}else{d.title=a.tooltip?a.tooltip:""}}else{if(a.customTooltip&&a.hideCustomTooltipCB){a.hideCustomTooltipCB()}else{d.title=""}}}if(a.treeView.mouseOverCB){a.treeView.mouseOverCB(a)}}function treeContextMenuCB(c,b){var a=_TreeWidgetElemInstances[c];if(a){a.treeView.rightClickMenuCB(c,_ie?_curWin.event:b)}}function TreeWidgetElem_isLeaf(){return(this.sub.length==0&&!this.isIncomplete)}function TreeWidgetElem_isNode(){return(!this.isLeaf())}function TreeWidgetElem_isSelected(){var b=this;if(b.treeView.multi){var a=arrayFind(b.treeView,"selIds",b.id);return(a>=0)}else{return(b.id==b.treeView.selId)}};