_firstWeekDay=0;_dateObj=new Date;function newCalendarTextFieldButton(e,r,h,q,g,j,c,s,d,b,i,n,p,l,a,k){var f=newWidget(e);f.changeCB=h;f.keyUpCB=g;f.enterCB=j;f.focusCB=b;f.blurCB=i;f.getValue=CTFB_getValue;f.setValue=CTFB_setValue;f.width=d?d:150;f.setFormatInfo=CTFB_setFormatInfo;f.setFormatInfo(n,p,l,a,k);f.widResize=f.resize;f.resize=CTFB_resize;f.text=newTextFieldWidget(r?r:"text_"+e,CTFB_changeCB,q,CTFB_keyUpCB,CTFB_enterCB,c,s,d-22,CTFB_focusCB,CTFB_blurCB);f.text.ctfb=f;f.calendar=newCalendarButton("calendar_"+e,CTFB_CalendarChangeCB);f.calendar.ctfb=f;f.calendar.menu.alignLeft=true;f.getHTML=CTFB_getHTML;f.oldInit=f.init;f.init=CTFB_init;f.setDateValueFromString=CTFB_setDateValueFromString;f.setStringFromDateValue=CTFB_setStringFromDateValue;return f}function CTFB_setFormatInfo(e,c,a,d,b){var f=this;f.arrMonthNames=a?a:_month;f.arrDayNames=c?c:_day;f.format=e?e:"MM/dd/yyyy hh:mm:ss a";f.AM=d?d:_AM;f.PM=b?b:_PM}function CTFB_resize(a,b){var c=this;c.text.resize(a!=null?(Math.max(0,a-22)):null,b);c.widResize(a,b)}function CTFB_getHTML(){var a=this;return'<table cellpadding="0" border="0" cellspacing="0" id="'+a.id+'" style="width:'+a.width+'px"><tr valign="middle"><td width="100%">'+a.text.getHTML()+"</td><td>"+a.calendar.getHTML()+"</td></tr></table>"}function CTFB_init(){var a=this;a.oldInit();a.text.init();a.calendar.init()}function CTFB_changeCB(){if(this.ctfb.changeCB){this.ctfb.changeCB()}}function CTFB_keyUpCB(){if(this.ctfb.keyUpCB){this.ctfb.keyUpCB()}}function CTFB_enterCB(){if(this.ctfb.enterCB){this.ctfb.enterCB()}}function CTFB_focusCB(){if(this.ctfb.focusCB){this.ctfb.focusCB()}}function CTFB_blurCB(){if(this.ctfb.blurCB){this.ctfb.blurCB()}}function CTFB_getValue(){return this.text.getValue()}function CTFB_setValue(a){this.text.setValue(a)}function CTFB_CalendarChangeCB(){var d=this,b=d.ctfb;b.setStringFromDateValue();var a=d.get();if(b.changeCB){b.changeCB()}}function CTFB_setDateValueFromString(){var g=this;var b=g.getValue();var c=g.format;var f=setDateValue(b,c);if(f==",,"){g.calendar.menu.setToday(true)}else{var a=f.split(",");var e=a[1],h=a[0],d=a[2];g.calendar.set(parseInt(e),parseInt(h),parseInt(d));g.calendar.menu.update()}}function CTFB_setStringFromDateValue(){var e=this;var c=""+e.format;var b=_dateObj;var d=e.calendar.menu;b.setYear(d.year);b.setMonth(d.month);b.setDate(d.day+1);b.setHours(0);b.setMinutes(0);b.setSeconds(0);var a=formatDate(b,c);e.setValue(a)}function newCalendarButton(c,b){var a=newIconWidget(c,_skin+"menus.gif",IconCalendarMenuWidget_ClickCB,null,_openCalendarLab,16,16,0,114,0,114);a.setClasses("iconhover","iconcheck","iconhover","iconcheckhover");a.changeCB=b;a.menu=newCalendarMenuWidget("iconMenu_menu_"+c,IconCalendarMenuWidget_hideCB,IconCalendarMenuWidget_closeCB);a.menu.parCalendar=a;a.set=CalendarButton_set;a.get=CalendarButton_get;a.getMenu=IconMenuWidget_getMenu;return a}function newCalendarIconButton(c,b,g,j,e,i,f,n,k,a,l){var d=newIconMenuWidget(c,b,IconCalendarMenuWidget_ClickCB,j,_openCalendarLab,i,f,n,k,a,l,false);d.changeCB=g;d.menu=newCalendarMenuWidget("iconMenu_menu_"+c,IconCalendarMenuWidget_hideCB,IconMenuCalendarMenuWidget_closeCB);d.menu.parCalendar=d;d.set=CalendarButton_set;d.get=CalendarButton_get;d.getMenu=IconMenuWidget_getMenu;return d}function IconMenuCalendarMenuWidget_closeCB(){var b=this,a=b.parCalendar;a.outEnable=true;if(!a.menu.isShown()){IconWidget_outCB(a.icon.index);IconWidget_outCB(a.arrow.index)}else{IconWidget_overCB(a.icon.index);IconWidget_overCB(a.arrow.index)}}function IconCalendarMenuWidget_ClickCB(){var b=this,a=b.layer;b.outEnable=false;if(b.ctfb){b.ctfb.setDateValueFromString()}b.menu.show(true,getPosScrolled(a).x+(b.menu.alignLeft?b.getWidth():0),getPosScrolled(a).y+b.getHeight()+1);IconWidget_overCB(b.index)}function IconCalendarMenuWidget_hideCB(){var a=this.parCalendar;if(a.changeCB){a.changeCB()}}function IconCalendarMenuWidget_closeCB(){var b=this,a=b.parCalendar;a.outEnable=true;if(!a.menu.isShown()){IconWidget_outCB(a.index)}else{IconWidget_overCB(a.index)}}function CalendarButton_set(a,c,b){var d=this.menu;d.day=a?a-1:0;d.month=c?c-1:0;d.year=b?b:2000;d.day=Math.min(Math.max(d.day,0),30);d.month=Math.min(Math.max(d.month,0),11)}function CalendarButton_get(a,c,b){var d=this.menu;return{day:d.day+1,month:d.month+1,year:d.year}}function newCalendarWidget(h,g){var f=newWidget(h);f.day=0;f.month=0;f.year=2000;f.daysL=new Array;f.changeCB=g;var e=f.p1=newIconWidget(h+"_p1",_skin+"../lov.gif",CalendarWidget_clickCB,"",_calendarPrevMonthLab,8,4,46,12);var d=f.p2=newIconWidget(h+"_p2",_skin+"../lov.gif",CalendarWidget_clickCB,"",_calendarPrevYearLab,8,4,46,12);var c=f.n1=newIconWidget(h+"_n1",_skin+"../lov.gif",CalendarWidget_clickCB,"",_calendarNextMonthLab,8,4,46,0);var b=f.n2=newIconWidget(h+"_n2",_skin+"../lov.gif",CalendarWidget_clickCB,"",_calendarNextYearLab,8,4,46,0);e.allowDblClick=true;d.allowDblClick=true;c.allowDblClick=true;b.allowDblClick=true;e.margin=d.margin=c.margin=b.margin=0;var a=f.today=newButtonWidget(h+"_t",_today,CalendarWidget_clickCB);a.par=e.par=d.par=c.par=b.par=f;a.today=e.p1=d.p2=c.n1=b.n2=true;f.init=CalendarWidget_init;f.getHTML=CalendarWidget_getHTML;f.update=CalendarWidget_update;f.setToday=CalendarWidget_setToday;f.set=CalendarWidget_set;f.get=CalendarWidget_get;f.focus=CalendarWidget_focus;f.focusOnDay=CalendarWidget_focusOnDay;f.isCalendar=true;return f}function CalendarWidget_set(a,c,b){var d=this;d.day=a?a-1:0;d.month=c?c-1:0;d.year=b?b:2000;d.day=Math.min(Math.max(d.day,0),30);d.month=Math.min(Math.max(d.month,0),11)}function CalendarWidget_get(a,c,b){var d=this;return{day:d.day+1,month:d.month+1,year:d.year}}function CalendarWidget_init(){var c=this;c.p1.init();c.p2.init();c.n1.init();c.n2.init();c.today.init();var a=c.layer=getLayer(c.id);c.layer._widget=c.widx;c.css=c.layer.style;for(var b=0;b<42;b++){c.daysL[b]=getElemBySub(a,""+b)}c.update()}function CalendarWidget_getHTML(){var g=this,f=_moz?10:12;var a=' onkeydown="'+_codeWinName+".MenuWidget_keyDown('"+g.id+"',event);return true\" ";var e='<table onmousedown="'+_codeWinName+'._minb(event)" onmouseup="'+_codeWinName+'._minb(event)" '+a+' style="cursor:default" class="calendarFrame" id="'+g.id+'" border="0" cellpadding="0" cellspacing="0"><tr><td align="center" style="padding:1px" ><table class="dialogzone" width="100%" cellpadding="0" border="0" cellspacing="0"><tr><td style="padding-top:1px">'+g.n1.getHTML()+'</td><td rowspan="2" width="100%" align="center" class="dialogzone"><span subid="month" tabIndex=0>'+convStr(_month[g.month])+'</span>&nbsp;&nbsp;<span subid="year" tabIndex=0>'+convStr(g.year)+'</span></td><td style="padding-top:1px">'+g.n2.getHTML()+'</td></tr><tr valign="top"><td style="padding-bottom:1px">'+g.p1.getHTML()+'</td><td style="padding-bottom:1px">'+g.p2.getHTML()+"</td></tr></table></td></tr>";e+='<tr><td align="center"><table style="margin:2px;margin-top:6px" cellpadding="0" border="0" cellspacing="0">';for(var c=0;c<7;c++){var b=(c+_firstWeekDay)%7;if((b%7)==0){e+='<tr align="center">'}e+='<td class="calendarTextPart">'+_day[b]+"</td>";if((b%7)==6){e+="</tr>"}}e+='<tr><td colspan="7" style="padding:2px;"><table width="100%" height="3" cellpadding="0" cellspacing="0" border="0" style="'+backImgOffset(_skin+"menus.gif",0,80)+';"><tbody><tr><td></td></tr></tbody></table></td></tr>';for(var c=0;c<6;c++){e+='<tr align="right">';for(var b=0;b<7;b++){e+='<td class="calendarTextPart" onmousedown="'+_codeWinName+'.CalendarWidget_mouseDown(this)" onmouseover="'+_codeWinName+'.CalendarWidget_mouseOver(this)" onmouseout="'+_codeWinName+'.CalendarWidget_mouseOut(this)" onkeydown="'+_codeWinName+'.CalendarWidget_keyDown(this,event)"><div subid="'+(b+(c*7))+'" class="menuCalendar"></div></td>'}e+="</tr>"}e+='<tr><td colspan="7" style="padding:2px;"><table width="100%" height="3" cellpadding="0" cellspacing="0" border="0" style="'+backImgOffset(_skin+"menus.gif",0,80)+';"><tbody><tr><td></td></tr></tbody></table></td></tr>';e+='<tr><td colspan="7" align="center" style="padding-bottom=3px;padding-top:3px;">'+g.today.getHTML()+"</td></tr>";e+="</table></td></tr>";e+="</table>";return e}function CalendarWidget_mouseDown(c){c=c.childNodes[0];var d=getWidget(c),b=parseInt(c.getAttribute("subid"));var a=b-d.dateOffset;if((a<0)||(a>d.lastDate)){return}d.day=a;d.update();if(d.changeCB){d.changeCB()}}function CalendarWidget_clickCB(){var a=m=this;if(a.p1||a.n1){m=a.par;m.month=(m.month+(a.p1?-1:1))%12;if(m.month==-1){m.month=11}m.update()}if(a.p2||a.n2){m=a.par;m.year=m.year+(a.p2?-1:1);m.update()}if(a.today){m=a.par;m.setToday(true);if(m.changeCB){m.changeCB()}}}function newCalendarMenuWidget(a,e,i){var b=newMenuWidget(a,i);b.day=0;b.month=0;b.year=2000;b.daysL=new Array;b.changeCB=e;var g=b.p1=newIconWidget(a+"_p1",_skin+"../lov.gif",CalendarMenuWidget_clickCB,"",_calendarPrevMonthLab,8,4,46,12);var f=b.p2=newIconWidget(a+"_p2",_skin+"../lov.gif",CalendarMenuWidget_clickCB,"",_calendarPrevYearLab,8,4,46,12);var d=b.n1=newIconWidget(a+"_n1",_skin+"../lov.gif",CalendarMenuWidget_clickCB,"",_calendarNextMonthLab,8,4,46,0);var c=b.n2=newIconWidget(a+"_n2",_skin+"../lov.gif",CalendarMenuWidget_clickCB,"",_calendarNextYearLab,8,4,46,0);g.allowDblClick=true;f.allowDblClick=true;d.allowDblClick=true;c.allowDblClick=true;g.margin=f.margin=d.margin=c.margin=0;var h=b.today=newButtonWidget(a+"_t",_today,CalendarMenuWidget_clickCB);h.par=g.par=f.par=d.par=c.par=b;h.today=g.p1=f.p2=d.n1=c.n2=true;b.getHTML=CalendarMenuWidget_getHTML;b.oldMenuInit=b.justInTimeInit;b.justInTimeInit=CalendarMenuWidget_justInTimeInit;b.update=CalendarWidget_update;b.setToday=CalendarWidget_setToday;b.focus=CalendarWidget_focus;b.focusOnDay=CalendarWidget_focusOnDay;b.isCalendar=true;return b}function CalendarMenuWidget_justInTimeInit(){var c=this;c.oldMenuInit();c.p1.init();c.p2.init();c.n1.init();c.n2.init();c.today.init();var a=c.layer;for(var b=0;b<42;b++){c.daysL[b]=getElemBySub(a,""+b)}c.update()}function CalendarMenuWidget_getHTML(){var g=this,f=_moz?10:12;var a=' onkeydown="'+_codeWinName+".MenuWidget_keyDown('"+g.id+"',event);return true\" ";var e="";e+='<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="startLink_'+g.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+g.id+"');return false;\" ></a>";e+='<table onmousedown="'+_codeWinName+'._minb(event)" onmouseup="'+_codeWinName+'._minb(event)" '+a+' style="cursor:default" class="menuFrame" id="'+g.id+'" border="0" cellpadding="0" cellspacing="0"><tr><td align="center" style="padding:1px" ><table class="dialogzone" width="100%" cellpadding="0" border="0" cellspacing="0"><tr><td style="padding-top:1px">'+g.n1.getHTML()+'</td><td rowspan="2" width="100%" align="center" class="dialogzone"><span subid="month" tabIndex=0>'+convStr(_month[g.month])+'</span>&nbsp;&nbsp;<span subid="year" tabIndex=0>'+convStr(g.year)+'</span></td><td style="padding-top:1px">'+g.n2.getHTML()+'</td></tr><tr valign="top"><td style="padding-bottom:1px">'+g.p1.getHTML()+'</td><td style="padding-bottom:1px">'+g.p2.getHTML()+"</td></tr></table></td></tr>";e+='<tr><td align="center"><table style="margin:2px;margin-top:6px" cellpadding="0" border="0" cellspacing="0">';for(var c=0;c<7;c++){var b=(c+_firstWeekDay)%7;if((b%7)==0){e+='<tr align="center">'}e+='<td class="calendarTextPart">'+_day[b]+"</td>";if((b%7)==6){e+="</tr>"}}e+='<tr><td colspan="7" style="padding:2px;"><table width="100%" height="3" cellpadding="0" cellspacing="0" border="0" style="'+backImgOffset(_skin+"menus.gif",0,80)+';"><tbody><tr><td></td></tr></tbody></table></td></tr>';for(var c=0;c<6;c++){e+='<tr align="right">';for(var b=0;b<7;b++){e+='<td class="calendarTextPart" onmousedown="'+_codeWinName+'.CalendarMenuWidget_mouseDown(this)" onmouseover="'+_codeWinName+'.CalendarWidget_mouseOver(this)" onmouseout="'+_codeWinName+'.CalendarWidget_mouseOut(this)" onkeydown="'+_codeWinName+'.CalendarMenuWidget_keyDown(this,event)"><div subid="'+(b+(c*7))+'" class="menuCalendar"></div></td>'}e+="</tr>"}e+='<tr><td colspan="7" style="padding:2px;"><table width="100%" height="3" cellpadding="0" cellspacing="0" border="0" style="'+backImgOffset(_skin+"menus.gif",0,80)+';"><tbody><tr><td></td></tr></tbody></table></td></tr>';e+='<tr><td colspan="7" align="center" style="padding-bottom=3px;padding-top:3px;">'+g.today.getHTML()+"</td></tr>";e+="</table></td></tr>";e+="</table>";e+='<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="endLink_'+g.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+g.id+"');return false;\" ></a>";return e}function CalendarMenuWidget_clickCB(){var b=m=this;if(b.p1||b.n1){m=b.par;m.month=(m.month+(b.p1?-1:1))%12;if(m.month==-1){m.month=11}m.update()}if(b.p2||b.n2){m=b.par;m.year=m.year+(b.p2?-1:1);m.update()}if(b.today){m=b.par;m.setToday(true);m.show(false);if(m.changeCB){m.changeCB()}var a=m.parCalendar;if(a&&a.ctfb&&a.ctfb.text){a.ctfb.text.focus()}else{a.focus()}}}function CalendarWidget_update(){var a=this;if(a.layer==null){return}var g=getElemBySub(a.layer,"month"),h=getElemBySub(a.layer,"year"),b=a.layer;g.innerHTML=convStr(_month[a.month]);h.innerHTML=convStr(""+a.year);_dateObj.setYear(a.year);_dateObj.setMonth(a.month);_dateObj.setDate(1);var c=_dateObj.getDay();var n=26;for(var e=26;e<33;e++){_dateObj.setDate(e);if(_dateObj.getMonth()==a.month){n=e-1}else{break}}a.lastDate=n;a.dateOffset=c;a.day=Math.min(n,a.day);for(var e=0;e<42;e++){var d=e-c,f=a.daysL[e],k="menuCalendar";if((d<0)||(d>n)){f.innerHTML="";f.tabIndex=-1}else{f.innerHTML=""+(d+1);f.tabIndex=0;if(d==a.day){k="menuCalendarSel";f.title=_calendarSelectionLab+(d+1)}}f.className=k}}function CalendarWidget_setToday(b){_dateObj=new Date;var a=this;a.day=_dateObj.getDate()-1;a.month=_dateObj.getMonth();a.year=_dateObj.getFullYear();if(b){a.update()}}function CalendarMenuWidget_mouseDown(c){c=c.childNodes[0];var e=getWidget(c),b=parseInt(c.getAttribute("subid"));var a=b-e.dateOffset;if((a<0)||(a>e.lastDate)){return}e.day=a;e.update();e.show(false);if(e.changeCB){e.changeCB()}var d=e.parCalendar;if(d&&d.ctfb&&d.ctfb.text){d.ctfb.text.focus()}else{d.focus()}}function CalendarWidget_mouseOver(d){d=d.childNodes[0];var e=getWidget(d),c=parseInt(d.getAttribute("subid"));var b=c-e.dateOffset,a="";if((b<0)||(b>e.lastDate)){a="menuCalendar"}else{a="menuCalendarSel"}d.className=a}function CalendarWidget_mouseOut(d){d=d.childNodes[0];var e=getWidget(d),c=parseInt(d.getAttribute("subid"));var b=c-e.dateOffset,a="";if(e.day!=b){d.className="menuCalendar"}}function getElemBySub(b,c){if(b.getAttribute&&(b.getAttribute("subid")==c)){return b}var e=b.childNodes,a=e.length;for(var d=0;d<a;d++){var f=getElemBySub(e[d],c);if(f){return f}}return null}function CalendarWidget_focus(){var a=this;a.n1.focus();if(a.endLink){a.endLink.show(true)}if(a.startLink){a.startLink.show(true)}}function CalendarWidget_focusOnDay(){var a=this;a.day.focus()}function CalendarWidget_keyDown(b,c){var a=eventGetKey(c);if(a==13){CalendarWidget_mouseDown(b)}}function CalendarMenuWidget_keyDown(b,c){var a=eventGetKey(c);if(a==13){CalendarMenuWidget_mouseDown(b)}};