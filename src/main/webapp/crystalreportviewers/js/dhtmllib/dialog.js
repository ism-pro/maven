DialogBoxWidget_modals=new Array;DialogBoxWidget_instances=new Array;DialogBoxWidget_current=null;_promptDlgInfo=0;_promptDlgWarning=1;_promptDlgCritical=2;function newDialogBoxWidget(h,f,d,a,b,g,c){var e=newWidget(h);e.title=f;e.width=d;e.height=a;e.defaultCB=b;e.cancelCB=g;e.noCloseButton=c?c:false;e.resizeable=false;e.oldMouseDown=null;e.oldCurrent=null;e.modal=null;e.hiddenVis=new Array;e.lastLink=null;e.firstLink=null;e.titleLayer=null;e.defaultBtn=null;e.divLayer=null;e.oldInit=e.init;e.oldShow=e.show;e.init=DialogBoxWidget_init;e.setResize=DialogBoxWidget_setResize;e.beginHTML=DialogBoxWidget_beginHTML;e.endHTML=DialogBoxWidget_endHTML;e.show=DialogBoxWidget_Show;e.center=DialogBoxWidget_center;e.focus=DialogBoxWidget_focus;e.setTitle=DialogBoxWidget_setTitle;e.getContainerWidth=DialogBoxWidget_getContainerWidth;e.getContainerHeight=DialogBoxWidget_getContainerHeight;DialogBoxWidget_instances[h]=e;e.modal=newWidget("modal_"+h);e.placeIframe=DialogBoxWidget_placeIframe;e.oldResize=e.resize;e.resize=DialogBoxWidget_resize;e.attachDefaultButton=DialogBoxWidget_attachDefaultButton;e.unload=DialogBoxWidget_unload;if(!_ie){if(e.width!=null){e.width=Math.max(0,d+4)}if(e.height!=null){e.height=Math.max(0,a+4)}}return e}function DialogBoxWidget_setResize(a,c,d,b,f){var e=this;e.resizeable=true;e.resizeCB=a;e.minWidth=c?c:50;e.minHeight=d?d:50;e.noResizeW=b;e.noResizeH=f}function DialogBoxWidget_setTitle(b){var a=this;a.title=b;if(a.titleLayer==null){a.titleLayer=getLayer("titledialog_"+this.id)}a.titleLayer.innerHTML=convStr(b)}function DialogBoxWidget_setCloseIcon(a,b){changeOffset(a,0,(b==1?0:18))}function DialogBoxWidget_beginHTML(){with(this){var moveableCb=' onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+".DialogBoxWidget_down(event,'"+id+"',this,false);return false;\" ";var mdl='<div onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_skin+'../transp.gif" id="modal_'+id+'" style="position:absolute;top:0px;left:0px;width:1px;height:1px">'+(_ie?img(_skin+"../transp.gif","100%","100%",null):"")+"</div>";var titleBG="background-image:url("+_skin+"dialogtitle.gif)";return mdl+'<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="firstLink_'+this.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".DialogBoxWidget_keepFocus('"+this.id+'\');return false;" ></a><table dir="ltr" border="0" cellspacing="0" cellpadding="2" id="'+id+'" style="display:none;padding:0px;visibility:'+_hide+";position:absolute;"+sty("width",width?(""+width+"px"):null)+sty("height",height?(""+height+"px"):null)+'"><tr><td id="td_dialog_'+id+'" onresize="'+_codeWinName+".DialogBoxWidget_resizeIframeCB('"+id+'\',this)" class="dialogbox" valign="top"><table width="100%" style="margin-bottom:4px" border="0" cellspacing="0" cellpadding="0"><tr valign="top"><td '+moveableCb+' style="cursor:move;'+titleBG+'" class="titlezone">'+getSpace(5,18)+"</td><td "+moveableCb+' style="cursor:move;'+titleBG+'" class="titlezone" width="100%" valign="middle" align="left"><nobr><span id="titledialog_'+id+'" tabIndex="0" class="titlezone">'+convStr(title)+'</span></nobr></td><td class="titlezone" style="'+titleBG+'">'+(noCloseButton?"":'<a href="javascript:void(0)" onclick="'+_codeWinName+".DialogBoxWidget_close('"+id+'\');return false;" title="'+_closeDialog+'">'+imgOffset(_skin+"dialogelements.gif",18,18,0,18,"dialogClose_"+this.id,'onmouseover="'+_codeWinName+'.DialogBoxWidget_setCloseIcon(this,1)" onmouseout="'+_codeWinName+'.DialogBoxWidget_setCloseIcon(this,0)" ',_closeDialog,"cursor:"+_hand)+"</a>")+'</td></tr></table><div id="div_dialog_'+id+'">'}}function DialogBoxWidget_endHTML(){return'</div></td></tr></table><a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="lastLink_'+this.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".DialogBoxWidget_keepFocus('"+this.id+"');return false;\" ></a>"}function DialogBoxWidget_getContainerWidth(){var a=this;return a.width-(2+2)}function DialogBoxWidget_getContainerHeight(){var a=this;return a.height-(2+18+2+2+2)}function DialogBoxWidget_close(b){var a=DialogBoxWidget_instances[b];if(a){a.show(false);if(a.cancelCB!=null){a.cancelCB()}}}function DialogBoxWidget_resizeIframeCB(b,a){DialogBoxWidget_instances[b].placeIframe()}function DialogBoxWidget_placeIframe(){var b=this;if(b.iframe){var a=b.td_lyr;if(a==null){b.td_lyr=a=getLayer("td_dialog_"+b.id)}b.iframe.resize(a.offsetWidth,a.offsetHeight);b.iframe.move(b.layer.offsetLeft,b.layer.offsetTop)}}function DialogBoxWidget_resize(a,b){var c=this;c.oldResize(a,b);if(c.iframe){c.iframe.resize(a,b)}}function DialogBoxWidget_init(){if(this.layer!=null){return}var a=this;a.oldInit();a.modal.init();a.lastLink=newWidget("lastLink_"+a.id);a.firstLink=newWidget("firstLink_"+a.id);a.lastLink.init();a.firstLink.init();if(!a.noCloseButton){a.closeButton=getLayer("dialogClose_"+a.id);DialogBoxWidget_setCloseIcon(a.closeButton,false)}}function DialogBoxWidget_attachDefaultButton(a){this.defaultBtn=a;this.defaultBtn.setDefaultButton()}_theLYR=null;_dlgResize=null;function DialogBoxWidget_down(e,id,obj,isResize){_dlgResize=isResize;var o=DialogBoxWidget_instances[id],lyr=o.layer,mod=o.modal.layer;lyr.onmousemove=mod.onmousemove=eval("_curWin."+_codeWinName+".DialogBoxWidget_move");lyr.onmouseup=mod.onmouseup=eval("_curWin."+_codeWinName+".DialogBoxWidget_up");lyr.dlgStartPosx=mod.dlgStartPosx=parseInt(lyr.style.left);lyr.dlgStartPosy=mod.dlgStartPosy=parseInt(lyr.style.top);lyr.dlgStartx=mod.dlgStartx=eventGetX(e);lyr.dlgStarty=mod.dlgStarty=eventGetY(e);lyr.dlgStartw=mod.dlgStartw=o.getWidth();lyr.dlgStarth=mod.dlgStarth=o.getHeight();lyr._widget=mod._widget=o.widx;_theLYR=lyr;eventCancelBubble(e);if(lyr.setCapture){lyr.setCapture(true)}}function DialogBoxWidget_move(c){var f=_theLYR,d=getWidget(f);if(_dlgResize){var h=Math.max(d.minWidth,f.dlgStartw+eventGetX(c)-f.dlgStartx);var b=Math.max(d.minHeight,f.dlgStarth+eventGetY(c)-f.dlgStarty);d.resize(d.noResizeW?null:h,d.noResizeH?null:b);if(d.firstTR){if(!d.noResizeW){d.firstTR.style.width=h-4}if(!d.noResizeH){d.secondTR.style.height=b-44}}if(d.resizeCB){d.resizeCB(h,b)}}else{var a=Math.max(0,f.dlgStartPosx-f.dlgStartx+eventGetX(c));var g=Math.max(0,f.dlgStartPosy-f.dlgStarty+eventGetY(c));d.iframe.move(a,g);d.move(a,g)}eventCancelBubble(c);return false}function DialogBoxWidget_up(c){var d=getWidget(_theLYR),a=d.layer,b=d.modal.layer;a.onmousemove=b.onmousemove=null;a.onmouseup=b.onmouseup=null;if(a.releaseCapture){a.releaseCapture()}_theLYR=null}function DialogBoxWidget_keypress(a){eventCancelBubble(a);var b=DialogBoxWidget_current;if(b!=null){switch(eventGetKey(a)){case 13:if(b.yes&&!b.no){if(b.defaultCB){b.defaultCB()}return false}if(isTextArea(_ie?_curWin.event:a)){return true}if(b.defaultBtn!=null&&!b.defaultBtn.isDisabled()){b.defaultBtn.executeCB();return false}break;case 27:b.show(false);hideBlockWhileWaitWidget();if(b.cancelCB!=null){b.cancelCB()}return false;break;case 8:return isTextInput(_ie?_curWin.event:a);break}}}function DialogBoxWidgetResizeModals(b){for(var a in DialogBoxWidget_modals){m_sty=DialogBoxWidget_modals[a];m_sty.width=documentWidth()+"px";m_sty.height=documentHeight()+"px"}}function DialogBoxWidget_center(){var h=this;var f={modalDisplay:h.modal.css.display,layerDisplay:h.css.display};h.modal.css.display="none";h.css.display="none";var b=getScrollY(),c=getScrollX();h.modal.css.display=f.modalDisplay;h.css.display="block";var a=h.layer.offsetHeight,e=h.layer.offsetWidth;h.css.display=f.layerDisplay;var g=(winHeight()-a)/2;g=(g<0)?0:g;var d=(winWidth()-e)/2;d=(d<0)?0:d;h.move(Math.max(0,c+d),Math.max(0,b+g));h.placeIframe()}function DialogBoxWidget_Show(sh){with(this){m_sty=modal.css;l_sty=css;if(sh){if(!this.iframe){this.iframe=newWidget(getDynamicBGIFrameLayer().id);this.iframe.init()}oldCurrent=DialogBoxWidget_current;DialogBoxWidget_current=this;if(_ie){layer.onkeydown=eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress");modal.layer.onkeydown=eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress")}else{_curDoc.addEventListener("keydown",eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress"),false)}oldMouseDown=_curDoc.onmousedown;_curDoc.onmousedown=null;hideBlockWhileWaitWidget()}else{DialogBoxWidget_current=oldCurrent;oldCurrent=null;if(_ie){layer.onkeydown=null;modal.layer.onkeydown=null}else{_curDoc.removeEventListener("keydown",eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress"),false)}_curDoc.onmousedown=oldMouseDown}var sameState=(layer.isShown==sh);if(sameState){return}layer.isShown=sh;if(sh){if(_curWin.DialogBoxWidget_zindex==null){_curWin.DialogBoxWidget_zindex=1000}this.iframe.css.zIndex=_curWin.DialogBoxWidget_zindex++;m_sty.zIndex=_curWin.DialogBoxWidget_zindex++;l_sty.zIndex=_curWin.DialogBoxWidget_zindex++;DialogBoxWidget_modals[DialogBoxWidget_modals.length]=m_sty;m_sty.display="";l_sty.display="block";this.iframe.setDisplay(true);holdBGIFrame(this.iframe.id);DialogBoxWidgetResizeModals();this.height=layer.offsetHeight;this.width=layer.offsetWidth;if(_small&&height){if(divLayer==null){divLayer=getLayer("div_dialog_"+id)}if(divLayer){divLayer.style.overflow="auto";divLayer.style.height=(winHeight()<height)?(winHeight()-40):getContainerHeight();divLayer.style.width=(_moz?width+20:getContainerWidth())}resize(null,((winHeight()<height)?(winHeight()-10):null))}if(isHidden(layer)){this.center()}if(!_small&&this.resizeCB){this.resizeCB(width,height)}}else{var l=DialogBoxWidget_modals.length=Math.max(0,DialogBoxWidget_modals.length-1);m_sty.width="1px";m_sty.height="1px";m_sty.display="none";l_sty.display="none";if(this.iframe!=null){this.iframe.setDisplay(false);releaseBGIFrame(this.iframe.id)}}modal.show(sh);firstLink.show(sh);lastLink.show(sh);oldShow(sh);if(DialogBoxWidget_current!=null&&sh==true){DialogBoxWidget_current.focus()}}}function DialogBoxWidget_unload(){if(this.iframe){releaseBGIFrame(this.iframe.id)}}function DialogBoxWidget_keepFocus(b){var a=DialogBoxWidget_instances[b];if(a){a.focus()}}function DialogBoxWidget_focus(){with(this){if(titleLayer==null){titleLayer=getLayer("titledialog_"+id)}if(titleLayer.focus){titleLayer.focus()}}}function newPromptDialog(a,g,i,f,d,h,j,c,e){var b=newDialogBoxWidget(a,g,300,null,PromptDialog_defaultCB,PromptDialog_cancelCB,e);b.text=i;b.getHTML=PromptDialog_getHTML;b.yes=f?newButtonWidget(a+"_yesBtn",f,'PromptDialog_yesCB("'+b.id+'")',70):null;b.no=d?newButtonWidget(a+"_noBtn",d,'PromptDialog_noCB("'+b.id+'")',70):null;b.yesCB=j;b.noCB=c;b.promptType=h;b.txtLayer=null;b.imgLayer=null;b.setPromptType=PromptDialog_setPromptType;b.setText=PromptDialog_setText;if(b.yes){b.attachDefaultButton(b.yes)}else{if(b.no){b.attachDefaultButton(b.no)}}return b}function PromptDialog_getimgPath(b){var a=_skin;switch(b){case _promptDlgInfo:a+="information_icon.gif";break;case _promptDlgWarning:a+="warning_icon.gif";break;default:a+="critical_icon.gif";break}return a}function PromptDialog_getimgAlt(b){var a="";return a}function PromptDialog_setPromptType(b){var a=this;if(a.imgLayer==null){a.imgLayer=getLayer("dlg_img_"+a.id)}a.imgLayer.src=PromptDialog_getimgPath(b);a.imgLayer.alt=PromptDialog_getimgAlt(b)}function PromptDialog_setText(b){var a=this;a.text=b;if(a.txtLayer==null){a.txtLayer=getLayer("dlg_txt_"+a.id)}a.txtLayer.innerHTML=convStr(b,false,true)}function PromptDialog_getHTML(){var c=this;var b=PromptDialog_getimgPath(c.promptType);var a=PromptDialog_getimgAlt(c.promptType);return c.beginHTML()+'<table class="dialogzone" width="290" cellpadding="0" cellspacing="5" border="0"><tr><td><table class="dialogzone" cellpadding="5" cellspacing="0" border="0"><tr><td align="right" width="32" >'+img(b,32,32,null,'id="dlg_img_'+c.id+'"',a)+'</td><td></td><td id="dlg_txt_'+c.id+'" align="left" tabindex="0">'+convStr(c.text,false,true)+"</td></tr></table></td></tr><tr><td>"+getSep()+'</td></tr><tr><td align="right"><table cellpadding="5" cellspacing="0" border="0"><tr>'+(c.yes?"<td>"+c.yes.getHTML()+"</td>":"")+(c.no?"<td>"+c.no.getHTML()+"</td>":"")+"</tr></table></td></tr></table>"+c.endHTML()}function PromptDialog_defaultCB(){var o=this;if(o.yesCB){if(typeof o.yesCB!="string"){o.yesCB()}else{eval(o.yesCB)}}this.show(false)}function PromptDialog_cancelCB(){var o=this;if(o.noCB){if(typeof o.noCB!="string"){o.noCB()}else{eval(o.noCB)}}this.show(false)}function PromptDialog_yesCB(a){DialogBoxWidget_instances[a].defaultCB()}function PromptDialog_noCB(a){DialogBoxWidget_instances[a].cancelCB()};