if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Format")}if(typeof(MochiKit)=="undefined"){MochiKit={}}if(typeof(MochiKit.Format)=="undefined"){MochiKit.Format={}}MochiKit.Format.NAME="MochiKit.Format";MochiKit.Format.VERSION="1.4";MochiKit.Format.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Format.toString=function(){return this.__repr__()};MochiKit.Format._numberFormatter=function(h,d,g,f,a,e,i,b,c){return function(o){o=parseFloat(o);if(typeof(o)=="undefined"||o===null||isNaN(o)){return h}var k=d;var p=g;if(o<0){o=-o}else{k=k.replace(/-/,"")}var r=arguments.callee;var l=MochiKit.Format.formatLocale(f);if(a){o=o*100;p=l.percent+p}o=MochiKit.Format.roundToFixed(o,e);var m=o.split(/\./);var s=m[0];var j=(m.length==1)?"":m[1];var q="";while(s.length<i){s="0"+s}if(b){while(s.length>b){var n=s.length-b;q=l.separator+s.substring(n,s.length)+q;s=s.substring(0,n)}}q=s+q;if(e>0){while(j.length<c){j=j+"0"}q=q+l.decimal+j}return k+q+p}};MochiKit.Format.numberFormatter=function(n,f,k){if(typeof(f)=="undefined"){f=""}var g=n.match(/((?:[0#]+,)?[0#]+)(?:\.([0#]+))?(%)?/);if(!g){throw TypeError("Invalid pattern")}var l=n.substr(0,g.index);var i=n.substr(g.index+g[0].length);if(l.search(/-/)==-1){l=l+"-"}var q=g[1];var e=(typeof(g[2])=="string"&&g[2]!="")?g[2]:"";var a=(typeof(g[3])=="string"&&g[3]!="");var p=q.split(/,/);var r;if(typeof(k)=="undefined"){k="default"}if(p.length==1){r=null}else{r=p[1].length}var c=q.length-q.replace(/0/g,"").length;var d=e.length-e.replace(/0/g,"").length;var o=e.length;var s=MochiKit.Format._numberFormatter(f,l,i,k,a,o,c,r,d);var j=MochiKit.Base;if(j){var h=arguments.callee;var b=j.concat(arguments);s.repr=function(){return[self.NAME,"(",map(j.repr,b).join(", "),")"].join("")}}return s};MochiKit.Format.formatLocale=function(a){if(typeof(a)=="undefined"||a===null){a="default"}if(typeof(a)=="string"){var b=MochiKit.Format.LOCALE[a];if(typeof(b)=="string"){b=arguments.callee(b);MochiKit.Format.LOCALE[a]=b}return b}else{return a}};MochiKit.Format.twoDigitAverage=function(b,c){if(c){var a=b/c;if(!isNaN(a)){return MochiKit.Format.twoDigitFloat(b/c)}}return"0"};MochiKit.Format.twoDigitFloat=function(d){var a=(d<0?"-":"");var e=Math.floor(Math.abs(d)*100).toString();if(e=="0"){return e}if(e.length<3){while(e.charAt(e.length-1)=="0"){e=e.substring(0,e.length-1)}return a+"0."+e}var c=a+e.substring(0,e.length-2);var b=e.substring(e.length-2,e.length);if(b=="00"){return c}else{if(b.charAt(1)=="0"){return c+"."+b.charAt(0)}else{return c+"."+b}}};MochiKit.Format.lstrip=function(b,a){b=b+"";if(typeof(b)!="string"){return null}if(!a){return b.replace(/^\s+/,"")}else{return b.replace(new RegExp("^["+a+"]+"),"")}};MochiKit.Format.rstrip=function(b,a){b=b+"";if(typeof(b)!="string"){return null}if(!a){return b.replace(/\s+$/,"")}else{return b.replace(new RegExp("["+a+"]+$"),"")}};MochiKit.Format.strip=function(c,b){var a=MochiKit.Format;return a.rstrip(a.lstrip(c,b),b)};MochiKit.Format.truncToFixed=function(c,a){c=Math.floor(c*Math.pow(10,a));var b=(c*Math.pow(10,-a)).toFixed(a);if(b.charAt(0)=="."){b="0"+b}return b};MochiKit.Format.roundToFixed=function(b,a){return MochiKit.Format.truncToFixed(b+0.5*Math.pow(10,-a),a)};MochiKit.Format.percentFormat=function(a){return MochiKit.Format.twoDigitFloat(100*a)+"%"};MochiKit.Format.EXPORT=["truncToFixed","roundToFixed","numberFormatter","formatLocale","twoDigitAverage","twoDigitFloat","percentFormat","lstrip","rstrip","strip"];MochiKit.Format.LOCALE={en_US:{separator:",",decimal:".",percent:"%"},de_DE:{separator:".",decimal:",",percent:"%"},fr_FR:{separator:" ",decimal:",",percent:"%"},"default":"en_US"};MochiKit.Format.EXPORT_OK=[];MochiKit.Format.EXPORT_TAGS={":all":MochiKit.Format.EXPORT,":common":MochiKit.Format.EXPORT};MochiKit.Format.__new__=function(){var c=this.NAME+".";var b,a,f;for(b in this.LOCALE){f=this.LOCALE[b];if(typeof(f)=="object"){f.repr=function(){return this.NAME};f.NAME=c+"LOCALE."+b}}for(b in this){f=this[b];if(typeof(f)=="function"&&typeof(f.NAME)=="undefined"){try{f.NAME=c+b}catch(d){}}}};MochiKit.Format.__new__();if(typeof(MochiKit.Base)!="undefined"){MochiKit.Base._exportSymbols(this,MochiKit.Format)}else{(function(d,b){if((typeof(JSAN)=="undefined"&&typeof(dojo)=="undefined")||(MochiKit.__export__===false)){var c=b.EXPORT_TAGS[":all"];for(var a=0;a<c.length;a++){d[c[a]]=b[c[a]]}}})(this,MochiKit.Format)};