if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Style");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Style depends on MochiKit.Base!"}try{if(typeof(MochiKit.DOM)=="undefined"){throw""}}catch(e){throw"MochiKit.Style depends on MochiKit.DOM!"}if(typeof(MochiKit.Style)=="undefined"){MochiKit.Style={}}MochiKit.Style.NAME="MochiKit.Style";MochiKit.Style.VERSION="1.4";MochiKit.Style.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Style.toString=function(){return this.__repr__()};MochiKit.Style.EXPORT_OK=[];MochiKit.Style.EXPORT=["setOpacity","computedStyle","getElementDimensions","elementDimensions","setElementDimensions","getElementPosition","elementPosition","setElementPosition","setDisplayForElement","hideElement","showElement","getViewportDimensions","Dimensions","Coordinates"];MochiKit.Style.Dimensions=function(a,b){this.w=a;this.h=b};MochiKit.Style.Dimensions.prototype.__repr__=function(){var a=MochiKit.Base.repr;return"{w: "+a(this.w)+", h: "+a(this.h)+"}"};MochiKit.Style.Dimensions.prototype.toString=function(){return this.__repr__()};MochiKit.Style.Coordinates=function(a,b){this.x=a;this.y=b};MochiKit.Style.Coordinates.prototype.__repr__=function(){var a=MochiKit.Base.repr;return"{x: "+a(this.x)+", y: "+a(this.y)+"}"};MochiKit.Style.Coordinates.prototype.toString=function(){return this.__repr__()};MochiKit.Base.update(MochiKit.Style,{computedStyle:function(f,a){var i=MochiKit.DOM;var h=i._document;f=i.getElement(f);a=MochiKit.Base.camelize(a);if(!f||f==h){return undefined}if(a=="opacity"&&f.filters){try{return f.filters.item("DXImageTransform.Microsoft.Alpha").opacity/100}catch(g){try{return f.filters.item("alpha").opacity/100}catch(g){}}}if(f.currentStyle){return f.currentStyle[a]}if(typeof(h.defaultView)=="undefined"){return undefined}if(h.defaultView===null){return undefined}var c=h.defaultView.getComputedStyle(f,null);if(typeof(c)=="undefined"||c===null){return undefined}var b=a.replace(/([A-Z])/g,"-$1").toLowerCase();return c.getPropertyValue(b)},setOpacity:function(a,b){a=MochiKit.DOM.getElement(a);MochiKit.DOM.updateNodeAttributes(a,{style:{opacity:b,"-moz-opacity":b,"-khtml-opacity":b,filter:" alpha(opacity="+(b*100)+")"}})},getElementPosition:function(f,g){var o=MochiKit.Style;var h=MochiKit.DOM;f=h.getElement(f);if(!f||(!(f.x&&f.y)&&(!f.parentNode==null||o.computedStyle(f,"display")=="none"))){return undefined}var k=new o.Coordinates(0,0);var i=null;var n=null;var j=MochiKit.DOM._document;var m=j.documentElement;var l=j.body;if(!f.parentNode&&f.x&&f.y){k.x+=f.x||0;k.y+=f.y||0}else{if(f.getBoundingClientRect){i=f.getBoundingClientRect();k.x+=i.left+(m.scrollLeft||l.scrollLeft)-(m.clientLeft||0);k.y+=i.top+(m.scrollTop||l.scrollTop)-(m.clientTop||0)}else{if(f.offsetParent){k.x+=f.offsetLeft;k.y+=f.offsetTop;n=f.offsetParent;if(n!=f){while(n){k.x+=n.offsetLeft;k.y+=n.offsetTop;n=n.offsetParent}}var a=navigator.userAgent.toLowerCase();if((typeof(opera)!="undefined"&&parseFloat(opera.version())<9)||(a.indexOf("safari")!=-1&&o.computedStyle(f,"position")=="absolute")){k.x-=l.offsetLeft;k.y-=l.offsetTop}}}}if(typeof(g)!="undefined"){g=arguments.callee(g);if(g){k.x-=(g.x||0);k.y-=(g.y||0)}}if(f.parentNode){n=f.parentNode}else{n=null}while(n&&n.tagName!="BODY"&&n.tagName!="HTML"){k.x-=n.scrollLeft;k.y-=n.scrollTop;if(n.parentNode){n=n.parentNode}else{n=null}}return k},setElementPosition:function(c,b,a){c=MochiKit.DOM.getElement(c);if(typeof(a)=="undefined"){a="px"}MochiKit.DOM.updateNodeAttributes(c,{style:{left:b.x+a,top:b.y+a}})},getElementDimensions:function(d){var a=MochiKit.Style;var h=MochiKit.DOM;if(typeof(d.w)=="number"||typeof(d.h)=="number"){return new a.Dimensions(d.w||0,d.h||0)}d=h.getElement(d);if(!d){return undefined}if(a.computedStyle(d,"display")!="none"){return new a.Dimensions(d.offsetWidth||0,d.offsetHeight||0)}var c=d.style;var g=c.visibility;var b=c.position;c.visibility="hidden";c.position="absolute";c.display="";var i=d.offsetWidth;var f=d.offsetHeight;c.display="none";c.position=b;c.visibility=g;return new a.Dimensions(i,f)},setElementDimensions:function(c,b,a){c=MochiKit.DOM.getElement(c);if(typeof(a)=="undefined"){a="px"}MochiKit.DOM.updateNodeAttributes(c,{style:{width:b.w+a,height:b.h+a}})},setDisplayForElement:function(f,b){var d=MochiKit.Base.extend(null,arguments,1);var c=MochiKit.DOM.getElement;for(var a=0;a<d.length;a++){var b=c(d[a]);if(b){b.style.display=f}}},getViewportDimensions:function(){var f=new MochiKit.Style.Dimensions();var c=MochiKit.DOM._window;var a=MochiKit.DOM._document.body;if(c.innerWidth){f.w=c.innerWidth;f.h=c.innerHeight}else{if(a.parentElement.clientWidth){f.w=a.parentElement.clientWidth;f.h=a.parentElement.clientHeight}else{if(a&&a.clientWidth){f.w=a.clientWidth;f.h=a.clientHeight}}}return f},__new__:function(){var a=MochiKit.Base;this.elementPosition=this.getElementPosition;this.elementDimensions=this.getElementDimensions;this.hideElement=a.partial(this.setDisplayForElement,"none");this.showElement=a.partial(this.setDisplayForElement,"block");this.EXPORT_TAGS={":common":this.EXPORT,":all":a.concat(this.EXPORT,this.EXPORT_OK)};a.nameFunctions(this)}});MochiKit.Style.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Style);