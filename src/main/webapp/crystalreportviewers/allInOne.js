
if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Base")}if(typeof(MochiKit)=="undefined"){MochiKit={}}if(typeof(MochiKit.Base)=="undefined"){MochiKit.Base={}}MochiKit.Base.VERSION="1.4";MochiKit.Base.NAME="MochiKit.Base";MochiKit.Base.update=function(b,g){if(b===null){b={}}for(var f=1;f<arguments.length;f++){var l=arguments[f];if(typeof(l)!="undefined"&&l!==null){for(var a in l){b[a]=l[a]}}}return b};MochiKit.Base.update(MochiKit.Base,{__repr__:function(){return"["+this.NAME+" "+this.VERSION+"]"},toString:function(){return this.__repr__()},camelize:function(b){var a=b.split("-");var g=a[0];for(var f=1;f<a.length;f++){g+=a[f].charAt(0).toUpperCase()+a[f].substring(1)}return g},counter:function(a){if(arguments.length===0){a=1}return function(){return a++}},clone:function(b){var a=arguments.callee;if(arguments.length==1){a.prototype=b;return new a()}},_flattenArray:function(f,a){for(var b=0;b<a.length;b++){var g=a[b];if(g instanceof Array){arguments.callee(f,g)}else{f.push(g)}}return f},flattenArray:function(a){return MochiKit.Base._flattenArray([],a)},flattenArguments:function(b){var k=[];var a=MochiKit.Base;var f=a.extend(null,arguments);while(f.length){var l=f.shift();if(l&&typeof(l)=="object"&&typeof(l.length)=="number"){for(var g=l.length-1;g>=0;g--){f.unshift(l[g])}}else{k.push(l)}}return k},extend:function(b,k,g){if(!g){g=0}if(k){var a=k.length;if(typeof(a)!="number"){if(typeof(MochiKit.Iter)!="undefined"){k=MochiKit.Iter.list(k);a=k.length}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}if(!b){b=[]}for(var f=g;f<a;f++){b.push(k[f])}}return b},updatetree:function(f,l){if(f===null){f={}}for(var g=1;g<arguments.length;g++){var m=arguments[g];if(typeof(m)!="undefined"&&m!==null){for(var b in m){var a=m[b];if(typeof(f[b])=="object"&&typeof(a)=="object"){arguments.callee(f[b],a)}else{f[b]=a}}}}return f},setdefault:function(b,g){if(b===null){b={}}for(var f=1;f<arguments.length;f++){var l=arguments[f];for(var a in l){if(!(a in b)){b[a]=l[a]}}}return b},keys:function(b){var a=[];for(var f in b){a.push(f)}return a},items:function(g){var f=[];var b;for(var k in g){var a;try{a=g[k]}catch(b){continue}f.push([k,a])}return f},_newNamedError:function(b,a,f){f.prototype=new MochiKit.Base.NamedError(b.NAME+"."+a);b[a]=f},operator:{truth:function(b){return !!b},lognot:function(b){return !b},identity:function(b){return b},not:function(b){return ~b},neg:function(b){return -b},add:function(g,f){return g+f},sub:function(g,f){return g-f},div:function(g,f){return g/f},mod:function(g,f){return g%f},mul:function(g,f){return g*f},and:function(g,f){return g&f},or:function(g,f){return g|f},xor:function(g,f){return g^f},lshift:function(g,f){return g<<f},rshift:function(g,f){return g>>f},zrshift:function(g,f){return g>>>f},eq:function(g,f){return g==f},ne:function(g,f){return g!=f},gt:function(g,f){return g>f},ge:function(g,f){return g>=f},lt:function(g,f){return g<f},le:function(g,f){return g<=f},seq:function(g,f){return g===f},sne:function(g,f){return g!==f},ceq:function(g,f){return MochiKit.Base.compare(g,f)===0},cne:function(g,f){return MochiKit.Base.compare(g,f)!==0},cgt:function(g,f){return MochiKit.Base.compare(g,f)==1},cge:function(g,f){return MochiKit.Base.compare(g,f)!=-1},clt:function(g,f){return MochiKit.Base.compare(g,f)==-1},cle:function(g,f){return MochiKit.Base.compare(g,f)!=1},logand:function(g,f){return g&&f},logor:function(g,f){return g||f},contains:function(g,f){return f in g}},forwardCall:function(a){return function(){return this[a].apply(this,arguments)}},itemgetter:function(a){return function(b){return b[a]}},typeMatcher:function(){var b={};for(var a=0;a<arguments.length;a++){var f=arguments[a];b[f]=f}return function(){for(var g=0;g<arguments.length;g++){if(!(typeof(arguments[g]) in b)){return false}}return true}},isNull:function(){for(var a=0;a<arguments.length;a++){if(arguments[a]!==null){return false}}return true},isUndefinedOrNull:function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(!(typeof(b)=="undefined"||b===null)){return false}}return true},isEmpty:function(a){return !MochiKit.Base.isNotEmpty.apply(this,arguments)},isNotEmpty:function(b){for(var a=0;a<arguments.length;a++){var f=arguments[a];if(!(f&&f.length)){return false}}return true},isArrayLike:function(){for(var a=0;a<arguments.length;a++){var f=arguments[a];var b=typeof(f);if((b!="object"&&!(b=="function"&&typeof(f.item)=="function"))||f===null||typeof(f.length)!="number"||f.nodeType===3){return false}}return true},isDateLike:function(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(typeof(b)!="object"||b===null||typeof(b.getTime)!="function"){return false}}return true},xmap:function(b){if(b===null){return MochiKit.Base.extend(null,arguments,1)}var f=[];for(var a=1;a<arguments.length;a++){f.push(b(arguments[a]))}return f},map:function(u,n){var b=MochiKit.Base;var r=MochiKit.Iter;var v=b.isArrayLike;if(arguments.length<=2){if(!v(n)){if(r){n=r.list(n);if(u===null){return n}}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}if(u===null){return b.extend(null,n)}var q=[];for(var k=0;k<n.length;k++){q.push(u(n[k]))}return q}else{if(u===null){u=Array}var a=null;for(k=1;k<arguments.length;k++){if(!v(arguments[k])){if(r){return r.list(r.imap.apply(null,arguments))}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}var f=arguments[k].length;if(a===null||a>f){a=f}}q=[];for(k=0;k<a;k++){var s=[];for(var g=1;g<arguments.length;g++){s.push(arguments[g][k])}q.push(u.apply(this,s))}return q}},xfilter:function(b){var f=[];if(b===null){b=MochiKit.Base.operator.truth}for(var a=1;a<arguments.length;a++){var g=arguments[a];if(b(g)){f.push(g)}}return f},filter:function(k,b,f){var l=[];var a=MochiKit.Base;if(!a.isArrayLike(b)){if(MochiKit.Iter){b=MochiKit.Iter.list(b)}else{throw new TypeError("Argument not an array-like and MochiKit.Iter not present")}}if(k===null){k=a.operator.truth}if(typeof(Array.prototype.filter)=="function"){return Array.prototype.filter.call(b,k,f)}else{if(typeof(f)=="undefined"||f===null){for(var g=0;g<b.length;g++){var n=b[g];if(k(n)){l.push(n)}}}else{for(g=0;g<b.length;g++){n=b[g];if(k.call(f,n)){l.push(n)}}}}return l},_wrapDumbFunction:function(func){return function(){switch(arguments.length){case 0:return func();case 1:return func(arguments[0]);case 2:return func(arguments[0],arguments[1]);case 3:return func(arguments[0],arguments[1],arguments[2])}var args=[];for(var i=0;i<arguments.length;i++){args.push("arguments["+i+"]")}return eval("(func("+args.join(",")+"))")}},methodcaller:function(b){var a=MochiKit.Base.extend(null,arguments,1);if(typeof(b)=="function"){return function(f){return b.apply(f,a)}}else{return function(f){return f[b].apply(f,a)}}},method:function(b,f){var a=MochiKit.Base;return a.bind.apply(this,a.extend([f,b],arguments,2))},compose:function(b,l){var k=[];var a=MochiKit.Base;if(arguments.length===0){throw new TypeError("compose() requires at least one argument")}for(var f=0;f<arguments.length;f++){var g=arguments[f];if(typeof(g)!="function"){throw new TypeError(repr(g)+" is not a function")}k.push(g)}return function(){var m=arguments;for(var n=k.length-1;n>=0;n--){m=[k[n].apply(this,m)]}return m[0]}},bind:function(k,f){if(typeof(k)=="string"){k=f[k]}var g=k.im_func;var n=k.im_preargs;var b=k.im_self;var a=MochiKit.Base;if(typeof(k)=="function"&&typeof(k.apply)=="undefined"){k=a._wrapDumbFunction(k)}if(typeof(g)!="function"){g=k}if(typeof(f)!="undefined"){b=f}if(typeof(n)=="undefined"){n=[]}else{n=n.slice()}a.extend(n,arguments,2);var l=function(){var q=arguments;var r=arguments.callee;if(r.im_preargs.length>0){q=a.concat(r.im_preargs,q)}var m=r.im_self;if(!m){m=this}return r.im_func.apply(m,q)};l.im_self=b;l.im_func=g;l.im_preargs=n;return l},bindMethods:function(b){var g=MochiKit.Base.bind;for(var a in b){var f=b[a];if(typeof(f)=="function"){b[a]=g(f,b)}}},registerComparator:function(f,b,a,g){MochiKit.Base.comparatorRegistry.register(f,b,a,g)},_primitives:{"boolean":true,string:true,number:true},compare:function(q,g){if(q==g){return 0}var n=(typeof(q)=="undefined"||q===null);var r=(typeof(g)=="undefined"||g===null);if(n&&r){return 0}else{if(n){return -1}else{if(r){return 1}}}var f=MochiKit.Base;var l=f._primitives;if(!(typeof(q) in l&&typeof(g) in l)){try{return f.comparatorRegistry.match(q,g)}catch(s){if(s!=f.NotFound){throw s}}}if(q<g){return -1}else{if(q>g){return 1}}var k=f.repr;throw new TypeError(k(q)+" and "+k(g)+" can not be compared")},compareDateLike:function(g,f){return MochiKit.Base.compare(g.getTime(),f.getTime())},compareArrayLike:function(g,f){var n=MochiKit.Base.compare;var m=g.length;var q=0;if(m>f.length){q=1;m=f.length}else{if(m<f.length){q=-1}}for(var k=0;k<m;k++){var l=n(g[k],f[k]);if(l){return l}}return q},registerRepr:function(b,a,g,f){MochiKit.Base.reprRegistry.register(b,a,g,f)},repr:function(g){if(typeof(g)=="undefined"){return"undefined"}else{if(g===null){return"null"}}try{if(typeof(g.__repr__)=="function"){return g.__repr__()}else{if(typeof(g.repr)=="function"&&g.repr!=arguments.callee){return g.repr()}}return MochiKit.Base.reprRegistry.match(g)}catch(b){if(typeof(g.NAME)=="string"&&(g.toString==Function.prototype.toString||g.toString==Object.prototype.toString)){return g.NAME}}try{var f=(g+"")}catch(b){return"["+typeof(g)+"]"}if(typeof(g)=="function"){g=f.replace(/^\s+/,"");var a=g.indexOf("{");if(a!=-1){g=g.substr(0,a)+"{...}"}}return f},reprArrayLike:function(b){var a=MochiKit.Base;return"["+a.map(a.repr,b).join(", ")+"]"},reprString:function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},reprNumber:function(a){return a+""},registerJSON:function(b,a,g,f){MochiKit.Base.jsonRegistry.register(b,a,g,f)},evalJSON:function(){return eval("("+arguments[0]+")")},serializeJSON:function(a){var v=typeof(a);if(v=="undefined"){return"undefined"}else{if(v=="number"||v=="boolean"){return a+""}else{if(a===null){return"null"}}}var f=MochiKit.Base;var x=f.reprString;if(v=="string"){return x(a)}var u=arguments.callee;var l;if(typeof(a.__json__)=="function"){l=a.__json__();if(a!==l){return u(l)}}if(typeof(a.json)=="function"){l=a.json();if(a!==l){return u(l)}}if(v!="function"&&typeof(a.length)=="number"){var s=[];for(var q=0;q<a.length;q++){var b=u(a[q]);if(typeof(b)!="string"){b="undefined"}s.push(b)}return"["+s.join(", ")+"]"}try{l=f.jsonRegistry.match(a);if(a!==l){return u(l)}}catch(r){if(r!=f.NotFound){throw r}}if(v=="function"){return null}s=[];for(var g in a){var n;if(typeof(g)=="number"){n='"'+g+'"'}else{if(typeof(g)=="string"){n=x(g)}else{continue}}b=u(a[g]);if(typeof(b)!="string"){continue}s.push(n+":"+b)}return"{"+s.join(", ")+"}"},objEqual:function(g,f){return(MochiKit.Base.compare(g,f)===0)},arrayEqual:function(b,a){if(b.length!=a.length){return false}return(MochiKit.Base.compare(b,a)===0)},concat:function(){var b=[];var f=MochiKit.Base.extend;for(var a=0;a<arguments.length;a++){f(b,arguments[a])}return b},keyComparator:function(b){var a=MochiKit.Base;var g=a.compare;if(arguments.length==1){return function(l,k){return g(l[b],k[b])}}var f=a.extend(null,arguments);return function(l,k){var q=0;for(var n=0;(q===0)&&(n<f.length);n++){var m=f[n];q=g(l[m],k[m])}return q}},reverseKeyComparator:function(b){var a=MochiKit.Base.keyComparator.apply(this,arguments);return function(g,f){return a(f,g)}},partial:function(b){var a=MochiKit.Base;return a.bind.apply(this,a.extend([b,undefined],arguments,1))},listMinMax:function(l,a){if(a.length===0){return null}var k=a[0];var f=MochiKit.Base.compare;for(var b=1;b<a.length;b++){var g=a[b];if(f(g,k)==l){k=g}}return k},objMax:function(){return MochiKit.Base.listMinMax(1,arguments)},objMin:function(){return MochiKit.Base.listMinMax(-1,arguments)},findIdentical:function(a,g,k,b){if(typeof(b)=="undefined"||b===null){b=a.length}if(typeof(k)=="undefined"||k===null){k=0}for(var f=k;f<b;f++){if(a[f]===g){return f}}return -1},mean:function(){var g=0;var a=MochiKit.Base;var b=a.extend(null,arguments);var k=b.length;while(b.length){var l=b.shift();if(l&&typeof(l)=="object"&&typeof(l.length)=="number"){k+=l.length-1;for(var f=l.length-1;f>=0;f--){g+=l[f]}}else{g+=l}}if(k<=0){throw new TypeError("mean() requires at least one argument")}return g/k},median:function(){var b=MochiKit.Base.flattenArguments(arguments);if(b.length===0){throw new TypeError("median() requires at least one argument")}b.sort(compare);if(b.length%2==0){var a=b.length/2;return(b[a]+b[a-1])/2}else{return b[(b.length-1)/2]}},findValue:function(a,k,l,b){if(typeof(b)=="undefined"||b===null){b=a.length}if(typeof(l)=="undefined"||l===null){l=0}var g=MochiKit.Base.compare;for(var f=l;f<b;f++){if(g(a[f],k)===0){return f}}return -1},nodeWalk:function(f,g){var a=[f];var k=MochiKit.Base.extend;while(a.length){var b=g(a.shift());if(b){k(a,b)}}},nameFunctions:function(b){var f=b.NAME;if(typeof(f)=="undefined"){f=""}else{f=f+"."}for(var a in b){var k=b[a];if(typeof(k)=="function"&&typeof(k.NAME)=="undefined"){try{k.NAME=f+a}catch(g){}}}},queryString:function(q,r){if(typeof(MochiKit.DOM)!="undefined"&&arguments.length==1&&(typeof(q)=="string"||(typeof(q.nodeType)!="undefined"&&q.nodeType>0))){var n=MochiKit.DOM.formContents(q);q=n[0];r=n[1]}else{if(arguments.length==1){var a=q;q=[];r=[];for(var b in a){var s=a[b];if(typeof(s)!="function"){q.push(b);r.push(s)}}}}var l=[];var m=Math.min(q.length,r.length);var f=MochiKit.Base.urlEncode;for(var g=0;g<m;g++){s=r[g];if(typeof(s)!="undefined"&&s!==null){l.push(f(q[g])+"="+f(s))}}return l.join("&")},parseQueryString:function(n,q){var f=n.replace(/\+/g,"%20").split("&");var g={};var a;if(typeof(decodeURIComponent)!="undefined"){a=decodeURIComponent}else{a=unescape}if(q){for(var l=0;l<f.length;l++){var k=f[l].split("=");var b=a(k[0]);var m=g[b];if(!(m instanceof Array)){m=[];g[b]=m}m.push(a(k[1]))}}else{for(l=0;l<f.length;l++){k=f[l].split("=");g[a(k[0])]=a(k[1])}}return g}});MochiKit.Base.AdapterRegistry=function(){this.pairs=[]};MochiKit.Base.AdapterRegistry.prototype={register:function(b,a,g,f){if(f){this.pairs.unshift([b,a,g])}else{this.pairs.push([b,a,g])}},match:function(){for(var a=0;a<this.pairs.length;a++){var b=this.pairs[a];if(b[1].apply(this,arguments)){return b[2].apply(this,arguments)}}throw MochiKit.Base.NotFound},unregister:function(a){for(var b=0;b<this.pairs.length;b++){var f=this.pairs[b];if(f[0]==a){this.pairs.splice(b,1);return true}}return false}};MochiKit.Base.EXPORT=["flattenArray","noop","camelize","counter","clone","extend","update","updatetree","setdefault","keys","items","NamedError","operator","forwardCall","itemgetter","typeMatcher","isCallable","isUndefined","isUndefinedOrNull","isNull","isEmpty","isNotEmpty","isArrayLike","isDateLike","xmap","map","xfilter","filter","methodcaller","compose","bind","bindMethods","NotFound","AdapterRegistry","registerComparator","compare","registerRepr","repr","objEqual","arrayEqual","concat","keyComparator","reverseKeyComparator","partial","merge","listMinMax","listMax","listMin","objMax","objMin","nodeWalk","zip","urlEncode","queryString","serializeJSON","registerJSON","evalJSON","parseQueryString","findValue","findIdentical","flattenArguments","method","average","mean","median"];MochiKit.Base.EXPORT_OK=["nameFunctions","comparatorRegistry","reprRegistry","jsonRegistry","compareDateLike","compareArrayLike","reprArrayLike","reprString","reprNumber"];MochiKit.Base._exportSymbols=function(g,b){if(typeof(MochiKit.__export__)=="undefined"){MochiKit.__export__=(MochiKit.__compat__||(typeof(JSAN)=="undefined"&&typeof(dojo)=="undefined"))}if(!MochiKit.__export__){return}var f=b.EXPORT_TAGS[":all"];for(var a=0;a<f.length;a++){g[f[a]]=b[f[a]]}};MochiKit.Base.__new__=function(){var a=this;a.noop=a.operator.identity;a.forward=a.forwardCall;a.find=a.findValue;if(typeof(encodeURIComponent)!="undefined"){a.urlEncode=function(f){return encodeURIComponent(f).replace(/\'/g,"%27")}}else{a.urlEncode=function(f){return escape(f).replace(/\+/g,"%2B").replace(/\"/g,"%22").rval.replace(/\'/g,"%27")}}a.NamedError=function(f){this.message=f;this.name=f};a.NamedError.prototype=new Error();a.update(a.NamedError.prototype,{repr:function(){if(this.message&&this.message!=this.name){return this.name+"("+a.repr(this.message)+")"}else{return this.name+"()"}},toString:a.forwardCall("repr")});a.NotFound=new a.NamedError("MochiKit.Base.NotFound");a.listMax=a.partial(a.listMinMax,1);a.listMin=a.partial(a.listMinMax,-1);a.isCallable=a.typeMatcher("function");a.isUndefined=a.typeMatcher("undefined");a.merge=a.partial(a.update,null);a.zip=a.partial(a.map,null);a.average=a.mean;a.comparatorRegistry=new a.AdapterRegistry();a.registerComparator("dateLike",a.isDateLike,a.compareDateLike);a.registerComparator("arrayLike",a.isArrayLike,a.compareArrayLike);a.reprRegistry=new a.AdapterRegistry();a.registerRepr("arrayLike",a.isArrayLike,a.reprArrayLike);a.registerRepr("string",a.typeMatcher("string"),a.reprString);a.registerRepr("numbers",a.typeMatcher("number","boolean"),a.reprNumber);a.jsonRegistry=new a.AdapterRegistry();var b=a.concat(a.EXPORT,a.EXPORT_OK);a.EXPORT_TAGS={":common":a.concat(a.EXPORT_OK),":all":b};a.nameFunctions(this)};MochiKit.Base.__new__();if(MochiKit.__export__){compare=MochiKit.Base.compare}MochiKit.Base._exportSymbols(this,MochiKit.Base);if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Async");dojo.require("MochiKit.Base")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Async depends on MochiKit.Base!"}if(typeof(MochiKit.Async)=="undefined"){MochiKit.Async={}}MochiKit.Async.NAME="MochiKit.Async";MochiKit.Async.VERSION="1.4";MochiKit.Async.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Async.toString=function(){return this.__repr__()};MochiKit.Async.Deferred=function(a){this.chain=[];this.id=this._nextId();this.fired=-1;this.paused=0;this.results=[null,null];this.canceller=a;this.silentlyCancelled=false;this.chained=false};MochiKit.Async.Deferred.prototype={repr:function(){var a;if(this.fired==-1){a="unfired"}else{if(this.fired===0){a="success"}else{a="error"}}return"Deferred("+this.id+", "+a+")"},toString:MochiKit.Base.forwardCall("repr"),_nextId:MochiKit.Base.counter(),cancel:function(){var a=MochiKit.Async;if(this.fired==-1){if(this.canceller){this.canceller(this)}else{this.silentlyCancelled=true}if(this.fired==-1){this.errback(new a.CancelledError(this))}}else{if((this.fired===0)&&(this.results[0] instanceof a.Deferred)){this.results[0].cancel()}}},_resback:function(a){this.fired=((a instanceof Error)?1:0);this.results[this.fired]=a;this._fire()},_check:function(){if(this.fired!=-1){if(!this.silentlyCancelled){throw new MochiKit.Async.AlreadyCalledError(this)}this.silentlyCancelled=false;return}},callback:function(a){this._check();if(a instanceof MochiKit.Async.Deferred){throw new Error("Deferred instances can only be chained if they are the result of a callback")}this._resback(a)},errback:function(b){this._check();var a=MochiKit.Async;if(b instanceof a.Deferred){throw new Error("Deferred instances can only be chained if they are the result of a callback")}if(!(b instanceof Error)){b=new a.GenericError(b)}this._resback(b)},addBoth:function(a){if(arguments.length>1){a=MochiKit.Base.partial.apply(null,arguments)}return this.addCallbacks(a,a)},addCallback:function(a){if(arguments.length>1){a=MochiKit.Base.partial.apply(null,arguments)}return this.addCallbacks(a,null)},addErrback:function(a){if(arguments.length>1){a=MochiKit.Base.partial.apply(null,arguments)}return this.addCallbacks(null,a)},addCallbacks:function(a,b){if(this.chained){throw new Error("Chained Deferreds can not be re-used")}this.chain.push([a,b]);if(this.fired>=0){this._fire()}return this},_fire:function(){var k=this.chain;var n=this.fired;var g=this.results[n];var b=this;var a=null;while(k.length>0&&this.paused===0){var q=k.shift();var m=q[n];if(m===null){continue}try{g=m(g);n=((g instanceof Error)?1:0);if(g instanceof MochiKit.Async.Deferred){a=function(f){b._resback(f);b.paused--;if((b.paused===0)&&(b.fired>=0)){b._fire()}};this.paused++}}catch(l){n=1;if(!(l instanceof Error)){l=new MochiKit.Async.GenericError(l)}g=l}}this.fired=n;this.results[n]=g;if(a&&this.paused){g.addBoth(a);g.chained=true}}};MochiKit.Base.update(MochiKit.Async,{evalJSONRequest:function(){return eval("("+arguments[0].responseText+")")},succeed:function(a){var b=new MochiKit.Async.Deferred();b.callback.apply(b,arguments);return b},fail:function(a){var b=new MochiKit.Async.Deferred();b.errback.apply(b,arguments);return b},getXMLHttpRequest:function(){var a=arguments.callee;if(!a.XMLHttpRequest){var k=[function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},function(){throw new MochiKit.Async.BrowserComplianceError("Browser does not support XMLHttpRequest")}];for(var b=0;b<k.length;b++){var f=k[b];try{a.XMLHttpRequest=f;return f()}catch(g){}}}return a.XMLHttpRequest()},_xhr_onreadystatechange:function(k){var a=MochiKit.Base;if(this.readyState==4){try{this.onreadystatechange=null}catch(g){try{this.onreadystatechange=a.noop}catch(g){}}var b=null;try{b=this.status;if(!b&&a.isNotEmpty(this.responseText)){b=304}}catch(g){}if(b==200||b==304){k.callback(this)}else{var f=new MochiKit.Async.XMLHttpRequestError(this,"Request failed");if(f.number){k.errback(f)}else{k.errback(f)}}}},_xhr_canceller:function(a){try{a.onreadystatechange=null}catch(b){try{a.onreadystatechange=MochiKit.Base.noop}catch(b){}}a.abort()},sendXMLHttpRequest:function(g,f){if(typeof(f)=="undefined"||f===null){f=""}var a=MochiKit.Base;var b=MochiKit.Async;var l=new b.Deferred(a.partial(b._xhr_canceller,g));try{g.onreadystatechange=a.bind(b._xhr_onreadystatechange,g,l);g.send(f)}catch(k){try{g.onreadystatechange=null}catch(n){}l.errback(k)}return l},doSimpleXMLHttpRequest:function(g){var f=MochiKit.Async;var k=f.getXMLHttpRequest();if(arguments.length>1){var b=MochiKit.Base;var a=b.queryString.apply(null,b.extend(null,arguments,1));if(a){g+="?"+a}}k.open("GET",g,true);return f.sendXMLHttpRequest(k)},loadJSONDoc:function(b){var a=MochiKit.Async;var f=a.doSimpleXMLHttpRequest.apply(a,arguments);f=f.addCallback(a.evalJSONRequest);return f},wait:function(k,f){var g=new MochiKit.Async.Deferred();var a=MochiKit.Base;if(typeof(f)!="undefined"){g.addCallback(function(){return f})}var b=setTimeout(a.bind("callback",g),Math.floor(k*1000));g.canceller=function(){try{clearTimeout(b)}catch(l){}};return g},callLater:function(g,b){var a=MochiKit.Base;var f=a.partial.apply(a,a.extend(null,arguments,1));return MochiKit.Async.wait(g).addCallback(function(k){return f()})}});MochiKit.Async.DeferredLock=function(){this.waiting=[];this.locked=false;this.id=this._nextId()};MochiKit.Async.DeferredLock.prototype={__class__:MochiKit.Async.DeferredLock,acquire:function(){d=new MochiKit.Async.Deferred();if(this.locked){this.waiting.push(d)}else{this.locked=true;d.callback(this)}return d},release:function(){if(!this.locked){throw TypeError("Tried to release an unlocked DeferredLock")}this.locked=false;if(this.waiting.length>0){this.locked=true;this.waiting.shift().callback(this)}},_nextId:MochiKit.Base.counter(),repr:function(){var a;if(this.locked){a="locked, "+this.waiting.length+" waiting"}else{a="unlocked"}return"DeferredLock("+this.id+", "+a+")"},toString:MochiKit.Base.forwardCall("repr")};MochiKit.Async.DeferredList=function(m,l,b,g,q){MochiKit.Async.Deferred.apply(this,[q]);this.list=m;var a=[];this.resultList=a;this.finishedCount=0;this.fireOnOneCallback=l;this.fireOnOneErrback=b;this.consumeErrors=g;var f=MochiKit.Base.bind(this._cbDeferred,this);for(var k=0;k<m.length;k++){var n=m[k];a.push(undefined);n.addCallback(f,k,true);n.addErrback(f,k,false)}if(m.length===0&&!l){this.callback(this.resultList)}};MochiKit.Async.DeferredList.prototype=new MochiKit.Async.Deferred();MochiKit.Async.DeferredList.prototype._cbDeferred=function(b,f,a){this.resultList[b]=[f,a];this.finishedCount+=1;if(this.fired!==0){if(f&&this.fireOnOneCallback){this.callback([b,a])}else{if(!f&&this.fireOnOneErrback){this.errback(a)}else{if(this.finishedCount==this.list.length){this.callback(this.resultList)}}}}if(!f&&this.consumeErrors){a=null}return a};MochiKit.Async.gatherResults=function(a){var b=new MochiKit.Async.DeferredList(a,false,true,false);b.addCallback(function(k){var f=[];for(var g=0;g<k.length;g++){f.push(k[g][1])}return f});return b};MochiKit.Async.maybeDeferred=function(g){var b=MochiKit.Async;var a;try{var f=g.apply(null,MochiKit.Base.extend([],arguments,1));if(f instanceof b.Deferred){a=f}else{if(f instanceof Error){a=b.fail(f)}else{a=b.succeed(f)}}}catch(k){a=b.fail(k)}return a};MochiKit.Async.EXPORT=["AlreadyCalledError","CancelledError","BrowserComplianceError","GenericError","XMLHttpRequestError","Deferred","succeed","fail","getXMLHttpRequest","doSimpleXMLHttpRequest","loadJSONDoc","wait","callLater","sendXMLHttpRequest","DeferredLock","DeferredList","gatherResults","maybeDeferred"];MochiKit.Async.EXPORT_OK=["evalJSONRequest"];MochiKit.Async.__new__=function(){var a=MochiKit.Base;var b=a.partial(a._newNamedError,this);b("AlreadyCalledError",function(f){this.deferred=f});b("CancelledError",function(f){this.deferred=f});b("BrowserComplianceError",function(f){this.message=f});b("GenericError",function(f){this.message=f});b("XMLHttpRequestError",function(f,k){this.req=f;this.message=k;try{this.number=f.status}catch(g){}});this.EXPORT_TAGS={":common":this.EXPORT,":all":a.concat(this.EXPORT,this.EXPORT_OK)};a.nameFunctions(this)};MochiKit.Async.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Async);if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.DOM");dojo.require("MochiKit.Base")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.DOM depends on MochiKit.Base!"}if(typeof(MochiKit.DOM)=="undefined"){MochiKit.DOM={}}MochiKit.DOM.NAME="MochiKit.DOM";MochiKit.DOM.VERSION="1.4";MochiKit.DOM.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.DOM.toString=function(){return this.__repr__()};MochiKit.DOM.EXPORT=["removeEmptyTextNodes","formContents","currentWindow","currentDocument","withWindow","withDocument","registerDOMConverter","coerceToDOM","createDOM","createDOMFunc","getNodeAttribute","setNodeAttribute","updateNodeAttributes","appendChildNodes","replaceChildNodes","removeElement","swapDOM","BUTTON","TT","PRE","H1","H2","H3","BR","CANVAS","HR","LABEL","TEXTAREA","FORM","STRONG","SELECT","OPTION","OPTGROUP","LEGEND","FIELDSET","P","UL","OL","LI","TD","TR","THEAD","TBODY","TFOOT","TABLE","TH","INPUT","SPAN","A","DIV","IMG","getElement","$","getElementsByTagAndClassName","addToCallStack","addLoadEvent","focusOnLoad","setElementClass","toggleElementClass","addElementClass","removeElementClass","swapElementClass","hasElementClass","escapeHTML","toHTML","emitHTML","scrapeText"];MochiKit.DOM.EXPORT_OK=["domConverters"];MochiKit.DOM.DEPRECATED=[["computedStyle","MochiKit.Style.computedStyle","1.4"],["elementDimensions","MochiKit.Style.getElementDimensions","1.4"],["elementPosition","MochiKit.Style.getElementPosition","1.4"],["hideElement","MochiKit.Style.hideElement","1.4"],["setElementDimensions","MochiKit.Style.setElementDimensions","1.4"],["setElementPosition","MochiKit.Style.setElementPosition","1.4"],["setDisplayForElement","MochiKit.Style.setDisplayForElement","1.4"],["setOpacity","MochiKit.Style.setOpacity","1.4"],["showElement","MochiKit.Style.showElement","1.4"],["Coordinates","MochiKit.Style.Coordinates","1.4"],["Dimensions","MochiKit.Style.Dimensions","1.4"]];MochiKit.DOM.getViewportDimensions=new Function('if (!MochiKit["Style"]) {    throw new Error("This function has been deprecated and depends on MochiKit.Style.");}return MochiKit.Style.getViewportDimensions.apply(this, arguments);');MochiKit.Base.update(MochiKit.DOM,{currentWindow:function(){return MochiKit.DOM._window},currentDocument:function(){return MochiKit.DOM._document},withWindow:function(m,g){var f=MochiKit.DOM;var b=f._document;var a=f._win;var l;try{f._window=m;f._document=m.document;l=g()}catch(k){f._window=a;f._document=b;throw k}f._window=a;f._document=b;return l},formContents:function(g){var k=[];var f=[];var a=MochiKit.Base;var b=MochiKit.DOM;if(typeof(g)=="undefined"||g===null){g=b._document}else{g=b.getElement(g)}a.nodeWalk(g,function(s){var l=s.name;if(a.isNotEmpty(l)){var q=s.nodeName;if(q=="INPUT"&&(s.type=="radio"||s.type=="checkbox")&&!s.checked){return null}if(q=="SELECT"){if(s.type=="select-one"){if(s.selectedIndex>=0){var n=s.options[s.selectedIndex];k.push(l);f.push((n.value)?n.value:n.text);return null}k.push(l);f.push("");return null}else{var r=s.options;if(!r.length){k.push(l);f.push("");return null}for(var m=0;m<r.length;m++){var n=r[m];if(!n.selected){continue}k.push(l);f.push((n.value)?n.value:n.text)}return null}}if(q=="FORM"||q=="P"||q=="SPAN"||q=="DIV"){return s.childNodes}k.push(l);f.push(s.value||"");return null}return s.childNodes});return[k,f]},withDocument:function(l,f){var b=MochiKit.DOM;var a=b._document;var k;try{b._document=l;k=f()}catch(g){b._document=a;throw g}b._document=a;return k},registerDOMConverter:function(b,a,g,f){MochiKit.DOM.domConverters.register(b,a,g,f)},coerceToDOM:function(g,x){var k=MochiKit.Base;var r=MochiKit.Iter;var v=MochiKit.DOM;if(r){var s=r.iter;var b=r.repeat;var a=k.map}var u=v.domConverters;var f=arguments.callee;var n=k.NotFound;while(true){if(typeof(g)=="undefined"||g===null){return null}if(typeof(g.nodeType)!="undefined"&&g.nodeType>0){return g}if(typeof(g)=="number"||typeof(g)=="boolean"){g=g.toString()}if(typeof(g)=="string"){return v._document.createTextNode(g)}if(typeof(g.__dom__)=="function"){g=g.__dom__(x);continue}if(typeof(g.dom)=="function"){g=g.dom(x);continue}if(typeof(g)=="function"){g=g.apply(x,[x]);continue}if(r){var l=null;try{l=s(g)}catch(q){}if(l){return a(f,l,b(x))}}try{g=u.match(g,x);continue}catch(q){if(q!=n){throw q}}return v._document.createTextNode(g.toString())}return undefined},setNodeAttribute:function(b,a,f){var k={};k[a]=f;try{return MochiKit.DOM.updateNodeAttributes(b,k)}catch(g){}return null},getNodeAttribute:function(g,a){var f=MochiKit.DOM;var b=f.attributeArray.renames[a];g=f.getElement(g);try{if(b){return g[b]}return g.getAttribute(a)}catch(k){}return null},updateNodeAttributes:function(b,m){var f=b;var r=MochiKit.DOM;if(typeof(b)=="string"){f=r.getElement(b)}if(m){var q=MochiKit.Base.updatetree;if(r.attributeArray.compliant){for(var g in m){var n=m[g];if(typeof(n)=="object"&&typeof(f[g])=="object"){q(f[g],n)}else{if(g.substring(0,2)=="on"){if(typeof(n)=="string"){n=new Function(n)}f[g]=n}else{f.setAttribute(g,n)}}}}else{var l=r.attributeArray.renames;for(g in m){n=m[g];var a=l[g];if(g=="style"&&typeof(n)=="string"){f.style.cssText=n}else{if(typeof(a)=="string"){f[a]=n}else{if(typeof(f[g])=="object"&&typeof(n)=="object"){q(f[g],n)}else{if(g.substring(0,2)=="on"){if(typeof(n)=="string"){n=new Function(n)}f[g]=n}else{f.setAttribute(g,n)}}}}}}}return f},appendChildNodes:function(f){var b=f;var a=MochiKit.DOM;if(typeof(f)=="string"){b=a.getElement(f)}var g=[a.coerceToDOM(MochiKit.Base.extend(null,arguments,1),b)];var k=MochiKit.Base.concat;while(g.length){var l=g.shift();if(typeof(l)=="undefined"||l===null){}else{if(typeof(l.nodeType)=="number"){b.appendChild(l)}else{g=k(l,g)}}}return b},replaceChildNodes:function(f){var b=f;var a=MochiKit.DOM;if(typeof(f)=="string"){b=a.getElement(f);arguments[0]=b}var g;while((g=b.firstChild)){b.removeChild(g)}if(arguments.length<2){return b}else{return a.appendChildNodes.apply(this,arguments)}},createDOM:function(k,g){var n;var b=MochiKit.DOM;var a=MochiKit.Base;if(typeof(g)=="string"||typeof(g)=="number"){var f=a.extend([k,null],arguments,1);return arguments.callee.apply(this,f)}if(typeof(k)=="string"){if(g&&!b.attributeArray.compliant){var l="";if("name" in g){l+=' name="'+b.escapeHTML(g.name)+'"'}if(k=="input"&&"type" in g){l+=' type="'+b.escapeHTML(g.type)+'"'}if(l){k="<"+k+l+">"}}n=b._document.createElement(k)}else{n=k}if(g){b.updateNodeAttributes(n,g)}if(arguments.length<=2){return n}else{var f=a.extend([n],arguments,2);return b.appendChildNodes.apply(this,f)}},createDOMFunc:function(){var a=MochiKit.Base;return a.partial.apply(this,a.extend([MochiKit.DOM.createDOM],arguments))},removeElement:function(a){var b=MochiKit.DOM.getElement(a);b.parentNode.removeChild(b);return b},swapDOM:function(b,g){var a=MochiKit.DOM;b=a.getElement(b);var f=b.parentNode;if(g){g=a.getElement(g);f.replaceChild(g,b)}else{f.removeChild(b)}return g},getElement:function(b){var a=MochiKit.DOM;if(arguments.length==1){return((typeof(b)=="string")?a._document.getElementById(b):b)}else{return MochiKit.Base.map(a.getElement,arguments)}},getElementsByTagAndClassName:function(k,n,q){var r=MochiKit.DOM;if(typeof(k)=="undefined"||k===null){k="*"}if(typeof(q)=="undefined"||q===null){q=r._document}q=r.getElement(q);var g=(q.getElementsByTagName(k)||r._document.all);if(typeof(n)=="undefined"||n===null){return MochiKit.Base.extend(null,g)}var b=[];for(var m=0;m<g.length;m++){var f=g[m];var a=f.className.split(" ");for(var l=0;l<a.length;l++){if(a[l]==n){b.push(f);break}}}return b},_newCallStack:function(f,a){var b=function(){var g=arguments.callee.callStack;for(var k=0;k<g.length;k++){if(g[k].apply(this,arguments)===false){break}}if(a){try{this[f]=null}catch(l){}}};b.callStack=[];return b},addToCallStack:function(m,l,k,f){var b=MochiKit.DOM;var g=m[l];var a=g;if(!(typeof(g)=="function"&&typeof(g.callStack)=="object"&&g.callStack!==null)){a=b._newCallStack(l,f);if(typeof(g)=="function"){a.callStack.push(g)}m[l]=a}a.callStack.push(k)},addLoadEvent:function(b){var a=MochiKit.DOM;a.addToCallStack(a._window,"onload",b,true)},focusOnLoad:function(b){var a=MochiKit.DOM;a.addLoadEvent(function(){b=a.getElement(b);if(b){b.focus()}})},setElementClass:function(b,f){var a=MochiKit.DOM;var g=a.getElement(b);if(a.attributeArray.compliant){g.setAttribute("class",f)}else{g.setAttribute("className",f)}},toggleElementClass:function(f){var a=MochiKit.DOM;for(var b=1;b<arguments.length;b++){var g=a.getElement(arguments[b]);if(!a.addElementClass(g,f)){a.removeElementClass(g,f)}}},addElementClass:function(k,l){var b=MochiKit.DOM;var m=b.getElement(k);var a=m.className;if(a.length===0){b.setElementClass(m,l);return true}if(a==l){return false}var g=m.className.split(" ");for(var f=0;f<g.length;f++){if(g[f]==l){return false}}b.setElementClass(m,a+" "+l);return true},removeElementClass:function(k,l){var b=MochiKit.DOM;var m=b.getElement(k);var a=m.className;if(a.length===0){return false}if(a==l){b.setElementClass(m,"");return true}var g=m.className.split(" ");for(var f=0;f<g.length;f++){if(g[f]==l){g.splice(f,1);b.setElementClass(m,g.join(" "));return true}}return false},swapElementClass:function(f,k,a){var g=MochiKit.DOM.getElement(f);var b=MochiKit.DOM.removeElementClass(g,k);if(b){MochiKit.DOM.addElementClass(g,a)}return b},hasElementClass:function(g,k){var m=MochiKit.DOM.getElement(g);var f=m.className.split(" ");for(var b=1;b<arguments.length;b++){var l=false;for(var a=0;a<f.length;a++){if(f[a]==arguments[b]){l=true;break}}if(!l){return false}}return true},escapeHTML:function(a){return a.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},toHTML:function(a){return MochiKit.DOM.emitHTML(a).join("")},emitHTML:function(g,m){if(typeof(m)=="undefined"||m===null){m=[]}var q=[g];var x=MochiKit.DOM;var v=x.escapeHTML;var b=x.attributeArray;while(q.length){g=q.pop();if(typeof(g)=="string"){m.push(g)}else{if(g.nodeType==1){m.push("<"+g.nodeName.toLowerCase());var k=[];var r=b(g);for(var l=0;l<r.length;l++){var s=r[l];k.push([" ",s.name,'="',v(s.value),'"'])}k.sort();for(l=0;l<k.length;l++){var u=k[l];for(var f=0;f<u.length;f++){m.push(u[f])}}if(g.hasChildNodes()){m.push(">");q.push("</"+g.nodeName.toLowerCase()+">");var n=g.childNodes;for(l=n.length-1;l>=0;l--){q.push(n[l])}}else{m.push("/>")}}else{if(g.nodeType==3){m.push(v(g.nodeValue))}}}}return m},scrapeText:function(b,a){var f=[];(function(l){var m=l.childNodes;if(m){for(var k=0;k<m.length;k++){arguments.callee.call(this,m[k])}}var g=l.nodeValue;if(typeof(g)=="string"){f.push(g)}})(MochiKit.DOM.getElement(b));if(a){return f}else{return f.join("")}},removeEmptyTextNodes:function(b){b=MochiKit.DOM.getElement(b);for(var a=0;a<b.childNodes.length;a++){var f=b.childNodes[a];if(f.nodeType==3&&!/\S/.test(f.nodeValue)){f.parentNode.removeChild(f)}}},__new__:function(r){var k=MochiKit.Base;if(typeof(document)!="undefined"){this._document=document}else{if(MochiKit.MockDOM){this._document=MochiKit.MockDOM.document}}this._window=r;this.domConverters=new k.AdapterRegistry();var u=this._document.createElement("span");var b;if(u&&u.attributes&&u.attributes.length>0){var f=k.filter;b=function(a){return f(b.ignoreAttrFilter,a.attributes)};b.ignoreAttr={};var v=u.attributes;var l=b.ignoreAttr;for(var q=0;q<v.length;q++){var s=v[q];l[s.name]=s.value}b.ignoreAttrFilter=function(m){return(b.ignoreAttr[m.name]!=m.value)};b.compliant=false;b.renames={"class":"className",checked:"defaultChecked",usemap:"useMap","for":"htmlFor",readonly:"readOnly"}}else{b=function(a){return a.attributes};b.compliant=true;b.renames={}}this.attributeArray=b;var n=function(z,a){var m=a[1].split(".");var y="";var x={};y+="if (!MochiKit."+m[1]+') { throw new Error("';y+="This function has been deprecated and depends on MochiKit.";y+=m[1]+'.");}';y+="return MochiKit."+m[1]+"."+a[0];y+=".apply(this, arguments);";x[m[2]]=new Function(y);MochiKit.Base.update(MochiKit[z],x)};for(var q;q<MochiKit.DOM.DEPRECATED.length;q++){n("DOM",MochiKit.DOM.DEPRECATED[q])}var g=this.createDOMFunc;this.UL=g("ul");this.OL=g("ol");this.LI=g("li");this.TD=g("td");this.TR=g("tr");this.TBODY=g("tbody");this.THEAD=g("thead");this.TFOOT=g("tfoot");this.TABLE=g("table");this.TH=g("th");this.INPUT=g("input");this.SPAN=g("span");this.A=g("a");this.DIV=g("div");this.IMG=g("img");this.BUTTON=g("button");this.TT=g("tt");this.PRE=g("pre");this.H1=g("h1");this.H2=g("h2");this.H3=g("h3");this.BR=g("br");this.HR=g("hr");this.LABEL=g("label");this.TEXTAREA=g("textarea");this.FORM=g("form");this.P=g("p");this.SELECT=g("select");this.OPTION=g("option");this.OPTGROUP=g("optgroup");this.LEGEND=g("legend");this.FIELDSET=g("fieldset");this.STRONG=g("strong");this.CANVAS=g("canvas");this.$=this.getElement;this.EXPORT_TAGS={":common":this.EXPORT,":all":k.concat(this.EXPORT,this.EXPORT_OK)};k.nameFunctions(this)}});MochiKit.DOM.__new__(((typeof(window)=="undefined")?this:window));if(MochiKit.__export__){withWindow=MochiKit.DOM.withWindow;withDocument=MochiKit.DOM.withDocument}MochiKit.Base._exportSymbols(this,MochiKit.DOM);if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Style");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Style depends on MochiKit.Base!"}try{if(typeof(MochiKit.DOM)=="undefined"){throw""}}catch(e){throw"MochiKit.Style depends on MochiKit.DOM!"}if(typeof(MochiKit.Style)=="undefined"){MochiKit.Style={}}MochiKit.Style.NAME="MochiKit.Style";MochiKit.Style.VERSION="1.4";MochiKit.Style.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Style.toString=function(){return this.__repr__()};MochiKit.Style.EXPORT_OK=[];MochiKit.Style.EXPORT=["setOpacity","computedStyle","getElementDimensions","elementDimensions","setElementDimensions","getElementPosition","elementPosition","setElementPosition","setDisplayForElement","hideElement","showElement","getViewportDimensions","Dimensions","Coordinates"];MochiKit.Style.Dimensions=function(a,b){this.w=a;this.h=b};MochiKit.Style.Dimensions.prototype.__repr__=function(){var a=MochiKit.Base.repr;return"{w: "+a(this.w)+", h: "+a(this.h)+"}"};MochiKit.Style.Dimensions.prototype.toString=function(){return this.__repr__()};MochiKit.Style.Coordinates=function(a,b){this.x=a;this.y=b};MochiKit.Style.Coordinates.prototype.__repr__=function(){var a=MochiKit.Base.repr;return"{x: "+a(this.x)+", y: "+a(this.y)+"}"};MochiKit.Style.Coordinates.prototype.toString=function(){return this.__repr__()};MochiKit.Base.update(MochiKit.Style,{computedStyle:function(g,a){var m=MochiKit.DOM;var l=m._document;g=m.getElement(g);a=MochiKit.Base.camelize(a);if(!g||g==l){return undefined}if(a=="opacity"&&g.filters){try{return g.filters.item("DXImageTransform.Microsoft.Alpha").opacity/100}catch(k){try{return g.filters.item("alpha").opacity/100}catch(k){}}}if(g.currentStyle){return g.currentStyle[a]}if(typeof(l.defaultView)=="undefined"){return undefined}if(l.defaultView===null){return undefined}var f=l.defaultView.getComputedStyle(g,null);if(typeof(f)=="undefined"||f===null){return undefined}var b=a.replace(/([A-Z])/g,"-$1").toLowerCase();return f.getPropertyValue(b)},setOpacity:function(a,b){a=MochiKit.DOM.getElement(a);MochiKit.DOM.updateNodeAttributes(a,{style:{opacity:b,"-moz-opacity":b,"-khtml-opacity":b,filter:" alpha(opacity="+(b*100)+")"}})},getElementPosition:function(f,g){var u=MochiKit.Style;var k=MochiKit.DOM;f=k.getElement(f);if(!f||(!(f.x&&f.y)&&(!f.parentNode==null||u.computedStyle(f,"display")=="none"))){return undefined}var n=new u.Coordinates(0,0);var l=null;var s=null;var m=MochiKit.DOM._document;var r=m.documentElement;var q=m.body;if(!f.parentNode&&f.x&&f.y){n.x+=f.x||0;n.y+=f.y||0}else{if(f.getBoundingClientRect){l=f.getBoundingClientRect();n.x+=l.left+(r.scrollLeft||q.scrollLeft)-(r.clientLeft||0);n.y+=l.top+(r.scrollTop||q.scrollTop)-(r.clientTop||0)}else{if(f.offsetParent){n.x+=f.offsetLeft;n.y+=f.offsetTop;s=f.offsetParent;if(s!=f){while(s){n.x+=s.offsetLeft;n.y+=s.offsetTop;s=s.offsetParent}}var a=navigator.userAgent.toLowerCase();if((typeof(opera)!="undefined"&&parseFloat(opera.version())<9)||(a.indexOf("safari")!=-1&&u.computedStyle(f,"position")=="absolute")){n.x-=q.offsetLeft;n.y-=q.offsetTop}}}}if(typeof(g)!="undefined"){g=arguments.callee(g);if(g){n.x-=(g.x||0);n.y-=(g.y||0)}}if(f.parentNode){s=f.parentNode}else{s=null}while(s&&s.tagName!="BODY"&&s.tagName!="HTML"){n.x-=s.scrollLeft;n.y-=s.scrollTop;if(s.parentNode){s=s.parentNode}else{s=null}}return n},setElementPosition:function(f,b,a){f=MochiKit.DOM.getElement(f);if(typeof(a)=="undefined"){a="px"}MochiKit.DOM.updateNodeAttributes(f,{style:{left:b.x+a,top:b.y+a}})},getElementDimensions:function(g){var a=MochiKit.Style;var m=MochiKit.DOM;if(typeof(g.w)=="number"||typeof(g.h)=="number"){return new a.Dimensions(g.w||0,g.h||0)}g=m.getElement(g);if(!g){return undefined}if(a.computedStyle(g,"display")!="none"){return new a.Dimensions(g.offsetWidth||0,g.offsetHeight||0)}var f=g.style;var l=f.visibility;var b=f.position;f.visibility="hidden";f.position="absolute";f.display="";var n=g.offsetWidth;var k=g.offsetHeight;f.display="none";f.position=b;f.visibility=l;return new a.Dimensions(n,k)},setElementDimensions:function(f,b,a){f=MochiKit.DOM.getElement(f);if(typeof(a)=="undefined"){a="px"}MochiKit.DOM.updateNodeAttributes(f,{style:{width:b.w+a,height:b.h+a}})},setDisplayForElement:function(k,b){var g=MochiKit.Base.extend(null,arguments,1);var f=MochiKit.DOM.getElement;for(var a=0;a<g.length;a++){var b=f(g[a]);if(b){b.style.display=k}}},getViewportDimensions:function(){var g=new MochiKit.Style.Dimensions();var f=MochiKit.DOM._window;var a=MochiKit.DOM._document.body;if(f.innerWidth){g.w=f.innerWidth;g.h=f.innerHeight}else{if(a.parentElement.clientWidth){g.w=a.parentElement.clientWidth;g.h=a.parentElement.clientHeight}else{if(a&&a.clientWidth){g.w=a.clientWidth;g.h=a.clientHeight}}}return g},__new__:function(){var a=MochiKit.Base;this.elementPosition=this.getElementPosition;this.elementDimensions=this.getElementDimensions;this.hideElement=a.partial(this.setDisplayForElement,"none");this.showElement=a.partial(this.setDisplayForElement,"block");this.EXPORT_TAGS={":common":this.EXPORT,":all":a.concat(this.EXPORT,this.EXPORT_OK)};a.nameFunctions(this)}});MochiKit.Style.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Style);if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Signal");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM");dojo.require("MochiKit.Style")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[]);JSAN.use("MochiKit.DOM",[])}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Signal depends on MochiKit.Base!"}try{if(typeof(MochiKit.DOM)=="undefined"){throw""}}catch(e){throw"MochiKit.Signal depends on MochiKit.DOM!"}try{if(typeof(MochiKit.Style)=="undefined"){throw""}}catch(e){throw"MochiKit.Signal depends on MochiKit.Style!"}if(typeof(MochiKit.Signal)=="undefined"){MochiKit.Signal={}}MochiKit.Signal.NAME="MochiKit.Signal";MochiKit.Signal.VERSION="1.4";MochiKit.Signal._observers=[];MochiKit.Signal.Event=function(b,a){this._event=a||window.event;this._src=b};MochiKit.Base.update(MochiKit.Signal.Event.prototype,{__repr__:function(){var a=MochiKit.Base.repr;var b="{event(): "+a(this.event())+", src(): "+a(this.src())+", type(): "+a(this.type())+", target(): "+a(this.target())+", modifier(): {alt: "+a(this.modifier().alt)+", ctrl: "+a(this.modifier().ctrl)+", meta: "+a(this.modifier().meta)+", shift: "+a(this.modifier().shift)+", any: "+a(this.modifier().any)+"}";if(this.type()&&this.type().indexOf("key")===0){b+=", key(): {code: "+a(this.key().code)+", string: "+a(this.key().string)+"}"}if(this.type()&&(this.type().indexOf("mouse")===0||this.type().indexOf("click")!=-1||this.type()=="contextmenu")){b+=", mouse(): {page: "+a(this.mouse().page)+", client: "+a(this.mouse().client);if(this.type()!="mousemove"){b+=", button: {left: "+a(this.mouse().button.left)+", middle: "+a(this.mouse().button.middle)+", right: "+a(this.mouse().button.right)+"}}"}else{b+="}"}}if(this.type()=="mouseover"||this.type()=="mouseout"){b+=", relatedTarget(): "+a(this.relatedTarget())}b+="}";return b},toString:function(){return this.__repr__()},src:function(){return this._src},event:function(){return this._event},type:function(){return this._event.type||undefined},target:function(){return this._event.target||this._event.srcElement},_relatedTarget:null,relatedTarget:function(){if(this._relatedTarget!==null){return this._relatedTarget}var a=null;if(this.type()=="mouseover"){a=(this._event.relatedTarget||this._event.fromElement)}else{if(this.type()=="mouseout"){a=(this._event.relatedTarget||this._event.toElement)}}if(a!==null){this._relatedTarget=a;return a}return undefined},_modifier:null,modifier:function(){if(this._modifier!==null){return this._modifier}var a={};a.alt=this._event.altKey;a.ctrl=this._event.ctrlKey;a.meta=this._event.metaKey||false;a.shift=this._event.shiftKey;a.any=a.alt||a.ctrl||a.shift||a.meta;this._modifier=a;return a},_key:null,key:function(){if(this._key!==null){return this._key}var a={};if(this.type()&&this.type().indexOf("key")===0){if(this.type()=="keydown"||this.type()=="keyup"){a.code=this._event.keyCode;a.string=(MochiKit.Signal._specialKeys[a.code]||"KEY_UNKNOWN");this._key=a;return a}else{if(this.type()=="keypress"){a.code=0;a.string="";if(typeof(this._event.charCode)!="undefined"&&this._event.charCode!==0&&!MochiKit.Signal._specialMacKeys[this._event.charCode]){a.code=this._event.charCode;a.string=String.fromCharCode(a.code)}else{if(this._event.keyCode&&typeof(this._event.charCode)=="undefined"){a.code=this._event.keyCode;a.string=String.fromCharCode(a.code)}}this._key=a;return a}}}return undefined},_mouse:null,mouse:function(){if(this._mouse!==null){return this._mouse}var f={};var g=this._event;if(this.type()&&(this.type().indexOf("mouse")===0||this.type().indexOf("click")!=-1||this.type()=="contextmenu")){f.client=new MochiKit.Style.Coordinates(0,0);if(g.clientX||g.clientY){f.client.x=(!g.clientX||g.clientX<0)?0:g.clientX;f.client.y=(!g.clientY||g.clientY<0)?0:g.clientY}f.page=new MochiKit.Style.Coordinates(0,0);if(g.pageX||g.pageY){f.page.x=(!g.pageX||g.pageX<0)?0:g.pageX;f.page.y=(!g.pageY||g.pageY<0)?0:g.pageY}else{var k=MochiKit.DOM._document.documentElement;var a=MochiKit.DOM._document.body;f.page.x=g.clientX+(k.scrollLeft||a.scrollLeft)-(k.clientLeft||0);f.page.y=g.clientY+(k.scrollTop||a.scrollTop)-(k.clientTop||0)}if(this.type()!="mousemove"){f.button={};f.button.left=false;f.button.right=false;f.button.middle=false;if(g.which){f.button.left=(g.which==1);f.button.middle=(g.which==2);f.button.right=(g.which==3)}else{f.button.left=!!(g.button&1);f.button.right=!!(g.button&2);f.button.middle=!!(g.button&4)}}this._mouse=f;return f}return undefined},stop:function(){this.stopPropagation();this.preventDefault()},stopPropagation:function(){if(this._event.stopPropagation){this._event.stopPropagation()}else{this._event.cancelBubble=true}},preventDefault:function(){if(this._event.preventDefault){this._event.preventDefault()}else{if(this._confirmUnload===null){this._event.returnValue=false}}},_confirmUnload:null,confirmUnload:function(a){if(this.type()=="beforeunload"){this._confirmUnload=a;this._event.returnValue=a}}});MochiKit.Signal._specialMacKeys={3:"KEY_ENTER",63289:"KEY_NUM_PAD_CLEAR",63276:"KEY_PAGE_UP",63277:"KEY_PAGE_DOWN",63275:"KEY_END",63273:"KEY_HOME",63234:"KEY_ARROW_LEFT",63232:"KEY_ARROW_UP",63235:"KEY_ARROW_RIGHT",63233:"KEY_ARROW_DOWN",63302:"KEY_INSERT",63272:"KEY_DELETE"};for(i=63236;i<=63242;i++){MochiKit.Signal._specialMacKeys[i]="KEY_F"+(i-63236+1)}MochiKit.Signal._specialKeys={8:"KEY_BACKSPACE",9:"KEY_TAB",12:"KEY_NUM_PAD_CLEAR",13:"KEY_ENTER",16:"KEY_SHIFT",17:"KEY_CTRL",18:"KEY_ALT",19:"KEY_PAUSE",20:"KEY_CAPS_LOCK",27:"KEY_ESCAPE",32:"KEY_SPACEBAR",33:"KEY_PAGE_UP",34:"KEY_PAGE_DOWN",35:"KEY_END",36:"KEY_HOME",37:"KEY_ARROW_LEFT",38:"KEY_ARROW_UP",39:"KEY_ARROW_RIGHT",40:"KEY_ARROW_DOWN",44:"KEY_PRINT_SCREEN",45:"KEY_INSERT",46:"KEY_DELETE",59:"KEY_SEMICOLON",91:"KEY_WINDOWS_LEFT",92:"KEY_WINDOWS_RIGHT",93:"KEY_SELECT",106:"KEY_NUM_PAD_ASTERISK",107:"KEY_NUM_PAD_PLUS_SIGN",109:"KEY_NUM_PAD_HYPHEN-MINUS",110:"KEY_NUM_PAD_FULL_STOP",111:"KEY_NUM_PAD_SOLIDUS",144:"KEY_NUM_LOCK",145:"KEY_SCROLL_LOCK",186:"KEY_SEMICOLON",187:"KEY_EQUALS_SIGN",188:"KEY_COMMA",189:"KEY_HYPHEN-MINUS",190:"KEY_FULL_STOP",191:"KEY_SOLIDUS",192:"KEY_GRAVE_ACCENT",219:"KEY_LEFT_SQUARE_BRACKET",220:"KEY_REVERSE_SOLIDUS",221:"KEY_RIGHT_SQUARE_BRACKET",222:"KEY_APOSTROPHE"};for(var i=48;i<=57;i++){MochiKit.Signal._specialKeys[i]="KEY_"+(i-48)}for(i=65;i<=90;i++){MochiKit.Signal._specialKeys[i]="KEY_"+String.fromCharCode(i)}for(i=96;i<=105;i++){MochiKit.Signal._specialKeys[i]="KEY_NUM_PAD_"+(i-96)}for(i=112;i<=123;i++){MochiKit.Signal._specialKeys[i]="KEY_F"+(i-112+1)}MochiKit.Base.update(MochiKit.Signal,{__repr__:function(){return"["+this.NAME+" "+this.VERSION+"]"},toString:function(){return this.__repr__()},_unloadCache:function(){var a=MochiKit.Signal;var g=a._observers;for(var b=0;b<g.length;b++){a._disconnect(g[b])}delete a._observers;try{window.onload=undefined}catch(f){}try{window.onunload=undefined}catch(f){}},_listener:function(k,b,g,a){var f=MochiKit.Signal.Event;if(!a){return MochiKit.Base.bind(b,g)}g=g||k;if(typeof(b)=="string"){return function(l){g[b].apply(g,[new f(k,l)])}}else{return function(l){b.apply(g,[new f(k,l)])}}},connect:function(a,r,n,b){a=MochiKit.DOM.getElement(a);var q=MochiKit.Signal;if(typeof(r)!="string"){throw new Error("'sig' must be a string")}var l=null;var g=null;if(typeof(b)!="undefined"){l=n;g=b;if(typeof(b)=="string"){if(typeof(n[b])!="function"){throw new Error("'funcOrStr' must be a function on 'objOrFunc'")}}else{if(typeof(b)!="function"){throw new Error("'funcOrStr' must be a function or string")}}}else{if(typeof(n)!="function"){throw new Error("'objOrFunc' must be a function if 'funcOrStr' is not given")}else{g=n}}if(typeof(l)=="undefined"||l===null){l=a}var m=!!(a.addEventListener||a.attachEvent);var f=q._listener(a,g,l,m);if(a.addEventListener){a.addEventListener(r.substr(2),f,false)}else{if(a.attachEvent){a.attachEvent(r,f)}}var k=[a,r,f,m,n,b];q._observers.push(k);return k},_disconnect:function(b){if(!b[3]){return}var g=b[0];var f=b[1];var a=b[2];if(g.removeEventListener){g.removeEventListener(f.substr(2),a,false)}else{if(g.detachEvent){g.detachEvent(f,a)}else{throw new Error("'src' must be a DOM element")}}},disconnect:function(n){var s=MochiKit.Signal;var q=s._observers;var g=MochiKit.Base;if(arguments.length>1){var a=MochiKit.DOM.getElement(arguments[0]);var u=arguments[1];var l=arguments[2];var f=arguments[3];for(var k=q.length-1;k>=0;k--){var b=q[k];if(b[0]===a&&b[1]===u&&b[4]===l&&b[5]===f){s._disconnect(b);q.splice(k,1);return true}}}else{var r=g.findIdentical(q,n);if(r>=0){s._disconnect(n);q.splice(r,1);return true}}return false},disconnectAll:function(a,s){a=MochiKit.DOM.getElement(a);var b=MochiKit.Base;var f=b.flattenArguments(b.extend(null,arguments,1));var q=MochiKit.Signal;var n=q._disconnect;var l=q._observers;if(f.length===0){for(var k=l.length-1;k>=0;k--){var g=l[k];if(g[0]===a){n(g);l.splice(k,1)}}}else{var r={};for(var k=0;k<f.length;k++){r[f[k]]=true}for(var k=l.length-1;k>=0;k--){var g=l[k];if(g[0]===a&&g[1] in r){n(g);l.splice(k,1)}}}},signal:function(m,l){var k=MochiKit.Signal._observers;m=MochiKit.DOM.getElement(m);var a=MochiKit.Base.extend(null,arguments,2);var n=[];for(var b=0;b<k.length;b++){var f=k[b];if(f[0]===m&&f[1]===l){try{f[2].apply(m,a)}catch(g){n.push(g)}}}if(n.length==1){throw n[0]}else{if(n.length>1){var g=new Error("Multiple errors thrown in handling 'sig', see errors property");g.errors=n;throw g}}}});MochiKit.Signal.EXPORT_OK=[];MochiKit.Signal.EXPORT=["connect","disconnect","signal","disconnectAll"];MochiKit.Signal.__new__=function(f){var a=MochiKit.Base;this._document=document;this._window=f;try{this.connect(window,"onunload",this._unloadCache)}catch(b){}this.EXPORT_TAGS={":common":this.EXPORT,":all":a.concat(this.EXPORT,this.EXPORT_OK)};a.nameFunctions(this)};MochiKit.Signal.__new__(this);if(MochiKit.__export__){connect=MochiKit.Signal.connect;disconnect=MochiKit.Signal.disconnect;disconnectAll=MochiKit.Signal.disconnectAll;signal=MochiKit.Signal.signal}MochiKit.Base._exportSymbols(this,MochiKit.Signal);MochiKit.Base.update(MochiKit.Base,{isIE:function(){return/MSIE/.test(navigator.userAgent)},isGecko:function(){return/Gecko/.test(navigator.userAgent)},isKHTML:function(){return/Konqueror|Safari|KHTML/.test(navigator.userAgent)},isSafari:function(){return/AppleWebKit'/.test(navigator.appVersion)},isOpera:function(){return/Opera/.test(navigator.userAgent)}});MochiKit.Base.update(MochiKit.DOM,{getStyle:function(b,f){b=MochiKit.DOM.getElement(b);var g=b.style[MochiKit.Base.camelize(f)];if(!g){if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(b,null);g=a?a.getPropertyValue(f):null}else{if(b.currentStyle){g=b.currentStyle[MochiKit.Base.camelize(f)]}}}if(MochiKit.Base.isOpera()&&(MochiKit.Base.find(["left","top","right","bottom"],f))){if(MochiKit.DOM.getStyle(b,"position")=="static"){g="auto"}}return g=="auto"?null:g},setStyle:function(a,b){a=MochiKit.DOM.getElement(a);for(name in b){a.style[MochiKit.Base.camelize(name)]=b[name]}},getOpacity:function(b){var a;if(a=MochiKit.DOM.getStyle(b,"opacity")){return parseFloat(a)}if(a=(MochiKit.DOM.getStyle(b,"filter")||"").match(/alpha\(opacity=(.*)\)/)){if(a[1]){return parseFloat(a[1])/100}}return 1},getInlineOpacity:function(a){return MochiKit.DOM.getElement(a).style.opacity||""},setOpacity:function(a,b){a=MochiKit.DOM.getElement(a);if(b==1){MochiKit.DOM.setStyle(a,{opacity:(MochiKit.Base.isGecko()&&!MochiKit.Base.isKHTML())?0.999999:null});if(MochiKit.Base.isIE()){MochiKit.DOM.setStyle(a,{filter:MochiKit.DOM.getStyle(a,"filter").replace(/alpha\([^\)]*\)/gi,"")})}}else{if(b<0.00001){b=0}MochiKit.DOM.setStyle(a,{opacity:b});if(MochiKit.Base.isIE()){MochiKit.DOM.setStyle(a,{filter:MochiKit.DOM.getStyle(a,"filter").replace(/alpha\([^\)]*\)/gi,"")+"alpha(opacity="+b*100+")"})}}},isVisible:function(a){return MochiKit.DOM.getElement(a).style.display!="none"},makeClipping:function(a){a=MochiKit.DOM.getElement(a);if(a._overflow){return}a._overflow=a.style.overflow;if((MochiKit.DOM.getStyle(a,"overflow")||"visible")!="hidden"){a.style.overflow="hidden"}},undoClipping:function(a){a=MochiKit.DOM.getElement(a);if(!a._overflow){return}a.style.overflow=a._overflow;a._overflow=undefined},makePositioned:function(a){a=MochiKit.DOM.getElement(a);var b=MochiKit.DOM.getStyle(a,"position");if((b=="static"||!b)&&!a._madePositioned){a._madePositioned=true;a.style.position="relative";if(MochiKit.Base.isOpera()){a.style.top=0;a.style.left=0}}},undoPositioned:function(a){a=MochiKit.DOM.getElement(a);if(a._madePositioned){a._madePositioned=undefined;a.style.position=a.style.top=a.style.left=a.style.bottom=a.style.right=""}},getFirstElementByTagAndClassName:function(g,m,n){var q=MochiKit.DOM;if(typeof(g)=="undefined"||g===null){g="*"}if(typeof(n)=="undefined"||n===null){n=q._document}n=q.getElement(n);var f=(n.getElementsByTagName(g)||q._document.all);if(typeof(m)=="undefined"||m===null){return MochiKit.Base.extend(null,f)}for(var l=0;l<f.length;l++){var b=f[l];var a=b.className.split(" ");for(var k=0;k<a.length;k++){if(a[k]==m){return b}}}},isParent:function(b,a){if(!b.parentNode||b==a){return false}if(b.parentNode==a){return true}return MochiKit.DOM.isParent(b.parentNode,a)}});MochiKit.Position={includeScrollOffsets:false,prepare:function(){var b=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;var a=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;this.windowOffset=new MochiKit.Style.Coordinates(b,a)},cumulativeOffset:function(b){var a=0;var f=0;do{a+=b.offsetTop||0;f+=b.offsetLeft||0;b=b.offsetParent}while(b);return new MochiKit.Style.Coordinates(f,a)},realOffset:function(b){var a=0;var f=0;do{a+=b.scrollTop||0;f+=b.scrollLeft||0;b=b.parentNode}while(b);return new MochiKit.Style.Coordinates(f,a)},within:function(b,a,f){if(this.includeScrollOffsets){return this.withinIncludingScrolloffsets(b,a,f)}this.xcomp=a;this.ycomp=f;this.offset=this.cumulativeOffset(b);if(b.style.position=="fixed"){this.offset.x+=this.windowOffset.x;this.offset.y+=this.windowOffset.y}return(f>=this.offset.y&&f<this.offset.y+b.offsetHeight&&a>=this.offset.x&&a<this.offset.x+b.offsetWidth)},withinIncludingScrolloffsets:function(b,a,g){var f=this.realOffset(b);this.xcomp=a+f.x-this.windowOffset.x;this.ycomp=g+f.y-this.windowOffset.y;this.offset=this.cumulativeOffset(b);return(this.ycomp>=this.offset.y&&this.ycomp<this.offset.y+b.offsetHeight&&this.xcomp>=this.offset.x&&this.xcomp<this.offset.x+b.offsetWidth)},overlap:function(b,a){if(!b){return 0}if(b=="vertical"){return((this.offset.y+a.offsetHeight)-this.ycomp)/a.offsetHeight}if(b=="horizontal"){return((this.offset.x+a.offsetWidth)-this.xcomp)/a.offsetWidth}},absolutize:function(f){f=MochiKit.DOM.getElement(f);if(f.style.position=="absolute"){return}MochiKit.Position.prepare();var k=MochiKit.Position.positionedOffset(f);var g=f.clientWidth;var a=f.clientHeight;var b={position:f.style.position,left:k.x-parseFloat(f.style.left||0),top:k.y-parseFloat(f.style.top||0),width:f.style.width,height:f.style.height};f.style.position="absolute";f.style.top=k.y+"px";f.style.left=k.x+"px";f.style.width=g+"px";f.style.height=a+"px";return b},positionedOffset:function(b){var a=0,f=0;do{a+=b.offsetTop||0;f+=b.offsetLeft||0;b=b.offsetParent;if(b){p=MochiKit.DOM.getStyle(b,"position");if(p=="relative"||p=="absolute"){break}}}while(b);return new MochiKit.Style.Coordinates(f,a)},relativize:function(b,a){b=MochiKit.DOM.getElement(b);if(b.style.position=="relative"){return}MochiKit.Position.prepare();var g=parseFloat(b.style.top||0)-(a.top||0);var f=parseFloat(b.style.left||0)-(a.left||0);b.style.position=a.position;b.style.top=g+"px";b.style.left=f+"px";b.style.width=a.width;b.style.height=a.height},clone:function(b,f){b=MochiKit.DOM.getElement(b);f=MochiKit.DOM.getElement(f);f.style.position="absolute";var a=this.cumulativeOffset(b);f.style.top=a.y+"px";f.style.left=a.x+"px";f.style.width=b.offsetWidth+"px";f.style.height=b.offsetHeight+"px"},page:function(g){var a=0;var f=0;var b=g;do{a+=b.offsetTop||0;f+=b.offsetLeft||0;if(b.offsetParent==document.body&&MochiKit.DOM.getStyle(b,"position")=="absolute"){break}}while(b=b.offsetParent);b=g;do{a-=b.scrollTop||0;f-=b.scrollLeft||0}while(b=b.parentNode);return new MochiKit.Style.Coordinates(f,a)}};if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Color");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM");dojo.require("MochiKit.Style")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[]);JSAN.use("MochiKit.DOM",[]);JSAN.use("MochiKit.Style",[])}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Color depends on MochiKit.Base"}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Color depends on MochiKit.DOM"}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Color depends on MochiKit.Style"}if(typeof(MochiKit.Color)=="undefined"){MochiKit.Color={}}MochiKit.Color.NAME="MochiKit.Color";MochiKit.Color.VERSION="1.4";MochiKit.Color.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Color.toString=function(){return this.__repr__()};MochiKit.Color.Color=function(g,b,a,f){if(typeof(f)=="undefined"||f===null){f=1}this.rgb={r:g,g:b,b:a,a:f}};MochiKit.Color.Color.prototype={__class__:MochiKit.Color.Color,colorWithAlpha:function(f){var b=this.rgb;var a=MochiKit.Color;return a.Color.fromRGB(b.r,b.g,b.b,f)},colorWithHue:function(f){var b=this.asHSL();b.h=f;var a=MochiKit.Color;return a.Color.fromHSL(b)},colorWithSaturation:function(f){var b=this.asHSL();b.s=f;var a=MochiKit.Color;return a.Color.fromHSL(b)},colorWithLightness:function(f){var b=this.asHSL();b.l=f;var a=MochiKit.Color;return a.Color.fromHSL(b)},darkerColorWithLevel:function(f){var b=this.asHSL();b.l=Math.max(b.l-f,0);var a=MochiKit.Color;return a.Color.fromHSL(b)},lighterColorWithLevel:function(f){var b=this.asHSL();b.l=Math.min(b.l+f,1);var a=MochiKit.Color;return a.Color.fromHSL(b)},blendedColor:function(a,f){if(typeof(f)=="undefined"||f===null){f=0.5}var g=1-f;var b=this.rgb;var l=a.rgb;var k=f;return MochiKit.Color.Color.fromRGB((b.r*g)+(l.r*k),(b.g*g)+(l.g*k),(b.b*g)+(l.b*k),(b.a*g)+(l.a*k))},compareRGB:function(g){var k=this.asRGB();var f=g.asRGB();return MochiKit.Base.compare([k.r,k.g,k.b,k.a],[f.r,f.g,f.b,f.a])},isLight:function(){return this.asHSL().b>0.5},isDark:function(){return(!this.isLight())},toHSLString:function(){var l=this.asHSL();var k=MochiKit.Color.clampColorComponent;var g=this._hslString;if(!g){var f=(k(l.h,360).toFixed(0)+","+k(l.s,100).toPrecision(4)+"%,"+k(l.l,100).toPrecision(4)+"%");var b=l.a;if(b>=1){b=1;g="hsl("+f+")"}else{if(b<=0){b=0}g="hsla("+f+","+b+")"}this._hslString=g}return g},toRGBString:function(){var g=this.rgb;var f=MochiKit.Color.clampColorComponent;var b=this._rgbString;if(!b){var a=(f(g.r,255).toFixed(0)+","+f(g.g,255).toFixed(0)+","+f(g.b,255).toFixed(0));if(g.a!=1){b="rgba("+a+","+g.a+")"}else{b="rgb("+a+")"}this._rgbString=b}return b},asRGB:function(){return MochiKit.Base.clone(this.rgb)},toHexString:function(){var a=MochiKit.Color;var g=this.rgb;var f=MochiKit.Color.clampColorComponent;var b=this._hexString;if(!b){b=("#"+a.toColorPart(f(g.r,255))+a.toColorPart(f(g.g,255))+a.toColorPart(f(g.b,255)));this._hexString=b}return b},asHSV:function(){var a=this.hsv;var b=this.rgb;if(typeof(a)=="undefined"||a===null){a=MochiKit.Color.rgbToHSV(this.rgb);this.hsv=a}return MochiKit.Base.clone(a)},asHSL:function(){var a=this.hsl;var b=this.rgb;if(typeof(a)=="undefined"||a===null){a=MochiKit.Color.rgbToHSL(this.rgb);this.hsl=a}return MochiKit.Base.clone(a)},toString:function(){return this.toRGBString()},repr:function(){var b=this.rgb;var a=[b.r,b.g,b.b,b.a];return this.__class__.NAME+"("+a.join(", ")+")"}};MochiKit.Base.update(MochiKit.Color.Color,{fromRGB:function(l,f,a,k){var g=MochiKit.Color.Color;if(arguments.length==1){var b=l;l=b.r;f=b.g;a=b.b;if(typeof(b.a)=="undefined"){k=undefined}else{k=b.a}}return new g(l,f,a,k)},fromHSL:function(b,f,k,g){var a=MochiKit.Color;return a.Color.fromRGB(a.hslToRGB.apply(a,arguments))},fromHSV:function(b,f,g,k){var a=MochiKit.Color;return a.Color.fromRGB(a.hsvToRGB.apply(a,arguments))},fromName:function(a){var f=MochiKit.Color.Color;if(a.charAt(0)=='"'){a=a.substr(1,a.length-2)}var b=f._namedColors[a.toLowerCase()];if(typeof(b)=="string"){return f.fromHexString(b)}else{if(a=="transparent"){return f.transparentColor()}}return null},fromString:function(a){var b=MochiKit.Color.Color;var f=a.substr(0,3);if(f=="rgb"){return b.fromRGBString(a)}else{if(f=="hsl"){return b.fromHSLString(a)}else{if(a.charAt(0)=="#"){return b.fromHexString(a)}}}return b.fromName(a)},fromHexString:function(b){if(b.charAt(0)=="#"){b=b.substring(1)}var g=[];var a,f;if(b.length==3){for(a=0;a<3;a++){f=b.substr(a,1);g.push(parseInt(f+f,16)/255)}}else{for(a=0;a<6;a+=2){f=b.substr(a,2);g.push(parseInt(f,16)/255)}}var k=MochiKit.Color.Color;return k.fromRGB.apply(k,g)},_fromColorString:function(l,b,q,r){if(r.indexOf(l)===0){r=r.substring(r.indexOf("(",3)+1,r.length-1)}var f=r.split(/\s*,\s*/);var k=[];for(var m=0;m<f.length;m++){var n=f[m];var g;var a=n.substring(n.length-3);if(n.charAt(n.length-1)=="%"){g=0.01*parseFloat(n.substring(0,n.length-1))}else{if(a=="deg"){g=parseFloat(n)/360}else{if(a=="rad"){g=parseFloat(n)/(Math.PI*2)}else{g=q[m]*parseFloat(n)}}}k.push(g)}return this[b].apply(this,k)},fromComputedStyle:function(k,g){var l=MochiKit.DOM;var a=MochiKit.Color.Color;for(k=l.getElement(k);k;k=k.parentNode){var f=MochiKit.Style.computedStyle.apply(l,arguments);if(!f){continue}var b=a.fromString(f);if(!b){break}if(b.asRGB().a>0){return b}}return null},fromBackground:function(b){var a=MochiKit.Color.Color;return a.fromComputedStyle(b,"backgroundColor","background-color")||a.whiteColor()},fromText:function(b){var a=MochiKit.Color.Color;return a.fromComputedStyle(b,"color","color")||a.blackColor()},namedColors:function(){return MochiKit.Base.clone(MochiKit.Color.Color._namedColors)}});MochiKit.Base.update(MochiKit.Color,{clampColorComponent:function(a,b){a*=b;if(a<0){return 0}else{if(a>b){return b}else{return a}}},_hslValue:function(f,b,a){if(a>6){a-=6}else{if(a<0){a+=6}}var g;if(a<1){g=f+(b-f)*a}else{if(a<3){g=b}else{if(a<4){g=f+(b-f)*(4-a)}else{g=f}}}return g},hsvToRGB:function(s,n,v,k){if(arguments.length==1){var r=s;s=r.h;n=r.s;v=r.v;k=r.a}var g;var l;var x;if(n===0){g=0;l=0;x=0}else{var m=Math.floor(s*6);var u=(s*6)-m;var b=v*(1-n);var a=v*(1-(n*u));var y=v*(1-(n*(1-u)));switch(m){case 1:g=a;l=v;x=b;break;case 2:g=b;l=v;x=y;break;case 3:g=b;l=a;x=v;break;case 4:g=y;l=b;x=v;break;case 5:g=v;l=b;x=a;break;case 6:case 0:g=v;l=y;x=b;break}}return{r:g,g:l,b:x,a:k}},hslToRGB:function(m,l,r,b){if(arguments.length==1){var u=m;m=u.h;l=u.s;r=u.l;b=u.a}var a;var g;var q;if(l===0){a=r;g=r;q=r}else{var s;if(r<=0.5){s=r*(1+l)}else{s=r+l-(r*l)}var v=(2*r)-s;var n=MochiKit.Color._hslValue;var k=m*6;a=n(v,s,k+2);g=n(v,s,k);q=n(v,s,k-2)}return{r:a,g:g,b:q,a:b}},rgbToHSV:function(a,f,r,b){if(arguments.length==1){var m=a;a=m.r;f=m.g;r=m.b;b=m.a}var n=Math.max(Math.max(a,f),r);var g=Math.min(Math.min(a,f),r);var l;var k;var q=n;if(g==n){l=0;k=0}else{var s=(n-g);k=s/n;if(a==n){l=(f-r)/s}else{if(f==n){l=2+((r-a)/s)}else{l=4+((a-f)/s)}}l/=6;if(l<0){l+=1}if(l>1){l-=1}}return{h:l,s:k,v:q,a:b}},rgbToHSL:function(a,f,q,b){if(arguments.length==1){var m=a;a=m.r;f=m.g;q=m.b;b=m.a}var n=Math.max(a,Math.max(f,q));var g=Math.min(a,Math.min(f,q));var l;var k;var s=(n+g)/2;var r=n-g;if(r===0){l=0;k=0}else{if(s<=0.5){k=r/(n+g)}else{k=r/(2-n-g)}if(a==n){l=(f-q)/r}else{if(f==n){l=2+((q-a)/r)}else{l=4+((a-f)/r)}}l/=6;if(l<0){l+=1}if(l>1){l-=1}}return{h:l,s:k,l:s,a:b}},toColorPart:function(a){a=Math.round(a);var b=a.toString(16);if(a<16){return"0"+b}return b},__new__:function(){var g=MochiKit.Base;this.Color.fromRGBString=g.bind(this.Color._fromColorString,this.Color,"rgb","fromRGB",[1/255,1/255,1/255,1]);this.Color.fromHSLString=g.bind(this.Color._fromColorString,this.Color,"hsl","fromHSL",[1/360,0.01,0.01,1]);var r=1/3;var a={black:[0,0,0],blue:[0,0,1],brown:[0.6,0.4,0.2],cyan:[0,1,1],darkGray:[r,r,r],gray:[0.5,0.5,0.5],green:[0,1,0],lightGray:[2*r,2*r,2*r],magenta:[1,0,1],orange:[1,0.5,0],purple:[0.5,0,0.5],red:[1,0,0],transparent:[0,0,0,0],white:[1,1,1],yellow:[1,1,0]};var s=function(u,x,v,k,m){var y=this.fromRGB(x,v,k,m);this[u]=function(){return y};return y};for(var l in a){var b=l+"Color";var n=g.concat([s,this.Color,b],a[l]);this.Color[b]=g.bind.apply(null,n)}var f=function(){for(var k=0;k<arguments.length;k++){if(!(arguments[k] instanceof Color)){return false}}return true};var q=function(m,k){return m.compareRGB(k)};g.nameFunctions(this);g.registerComparator(this.Color.NAME,f,q);this.EXPORT_TAGS={":common":this.EXPORT,":all":g.concat(this.EXPORT,this.EXPORT_OK)}}});MochiKit.Color.EXPORT=["Color"];MochiKit.Color.EXPORT_OK=["clampColorComponent","rgbToHSL","hslToRGB","rgbToHSV","hsvToRGB","toColorPart"];MochiKit.Color.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Color);MochiKit.Color.Color._namedColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Iter");dojo.require("MochiKit.Base")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[])}try{if(typeof(MochiKit.Base)=="undefined"){throw""}}catch(e){throw"MochiKit.Iter depends on MochiKit.Base!"}if(typeof(MochiKit.Iter)=="undefined"){MochiKit.Iter={}}MochiKit.Iter.NAME="MochiKit.Iter";MochiKit.Iter.VERSION="1.4";MochiKit.Base.update(MochiKit.Iter,{__repr__:function(){return"["+this.NAME+" "+this.VERSION+"]"},toString:function(){return this.__repr__()},registerIteratorFactory:function(b,a,g,f){MochiKit.Iter.iteratorRegistry.register(b,a,g,f)},iter:function(g,f){var b=MochiKit.Iter;if(arguments.length==2){return b.takewhile(function(l){return l!=f},g)}if(typeof(g.next)=="function"){return g}else{if(typeof(g.iter)=="function"){return g.iter()}}try{return b.iteratorRegistry.match(g)}catch(k){var a=MochiKit.Base;if(k==a.NotFound){k=new TypeError(typeof(g)+": "+a.repr(g)+" is not iterable")}throw k}},count:function(b){if(!b){b=0}var a=MochiKit.Base;return{repr:function(){return"count("+b+")"},toString:a.forwardCall("repr"),next:a.counter(b)}},cycle:function(k){var f=MochiKit.Iter;var b=MochiKit.Base;var a=[];var g=f.iter(k);return{repr:function(){return"cycle(...)"},toString:b.forwardCall("repr"),next:function(){try{var n=g.next();a.push(n);return n}catch(m){if(m!=f.StopIteration){throw m}if(a.length===0){this.next=function(){throw f.StopIteration}}else{var l=-1;this.next=function(){l=(l+1)%a.length;return a[l]}}return this.next()}}}},repeat:function(b,f){var a=MochiKit.Base;if(typeof(f)=="undefined"){return{repr:function(){return"repeat("+a.repr(b)+")"},toString:a.forwardCall("repr"),next:function(){return b}}}return{repr:function(){return"repeat("+a.repr(b)+", "+f+")"},toString:a.forwardCall("repr"),next:function(){if(f<=0){throw MochiKit.Iter.StopIteration}f-=1;return b}}},next:function(a){return a.next()},izip:function(l,k){var a=MochiKit.Base;var f=MochiKit.Iter;var g=f.next;var b=a.map(f.iter,arguments);return{repr:function(){return"izip(...)"},toString:a.forwardCall("repr"),next:function(){return a.map(g,b)}}},ifilter:function(f,b){var a=MochiKit.Base;b=MochiKit.Iter.iter(b);if(f===null){f=a.operator.truth}return{repr:function(){return"ifilter(...)"},toString:a.forwardCall("repr"),next:function(){while(true){var g=b.next();if(f(g)){return g}}return undefined}}},ifilterfalse:function(f,b){var a=MochiKit.Base;b=MochiKit.Iter.iter(b);if(f===null){f=a.operator.truth}return{repr:function(){return"ifilterfalse(...)"},toString:a.forwardCall("repr"),next:function(){while(true){var g=b.next();if(!f(g)){return g}}return undefined}}},islice:function(f){var b=MochiKit.Iter;var a=MochiKit.Base;f=b.iter(f);var n=0;var k=0;var l=1;var g=-1;if(arguments.length==2){k=arguments[1]}else{if(arguments.length==3){n=arguments[1];k=arguments[2]}else{n=arguments[1];k=arguments[2];l=arguments[3]}}return{repr:function(){return"islice("+["...",n,k,l].join(", ")+")"},toString:a.forwardCall("repr"),next:function(){var m;while(g<n){m=f.next();g++}if(n>=k){throw b.StopIteration}n+=l;return m}}},imap:function(f,r,l){var a=MochiKit.Base;var g=MochiKit.Iter;var b=a.map(g.iter,a.extend(null,arguments,1));var n=a.map;var k=g.next;return{repr:function(){return"imap(...)"},toString:a.forwardCall("repr"),next:function(){return f.apply(this,n(k,b))}}},applymap:function(b,g,f){g=MochiKit.Iter.iter(g);var a=MochiKit.Base;return{repr:function(){return"applymap(...)"},toString:a.forwardCall("repr"),next:function(){return b.apply(f,g.next())}}},chain:function(k,g){var f=MochiKit.Iter;var b=MochiKit.Base;if(arguments.length==1){return f.iter(arguments[0])}var a=b.map(f.iter,arguments);return{repr:function(){return"chain(...)"},toString:b.forwardCall("repr"),next:function(){while(a.length>1){try{return a[0].next()}catch(m){if(m!=f.StopIteration){throw m}a.shift()}}if(a.length==1){var l=a.shift();this.next=b.bind("next",l);return this.next()}throw f.StopIteration}}},takewhile:function(f,b){var a=MochiKit.Iter;b=a.iter(b);return{repr:function(){return"takewhile(...)"},toString:MochiKit.Base.forwardCall("repr"),next:function(){var g=b.next();if(!f(g)){this.next=function(){throw a.StopIteration};this.next()}return g}}},dropwhile:function(f,b){b=MochiKit.Iter.iter(b);var a=MochiKit.Base;var g=a.bind;return{repr:function(){return"dropwhile(...)"},toString:a.forwardCall("repr"),next:function(){while(true){var k=b.next();if(!f(k)){break}}this.next=g("next",b);return k}}},_tee:function(k,f,g){f.pos[k]=-1;var a=MochiKit.Base;var b=a.listMin;return{repr:function(){return"tee("+k+", ...)"},toString:a.forwardCall("repr"),next:function(){var m;var l=f.pos[k];if(l==f.max){m=g.next();f.deque.push(m);f.max+=1;f.pos[k]+=1}else{m=f.deque[l-f.min];f.pos[k]+=1;if(l==f.min&&b(f.pos)!=f.min){f.min+=1;f.deque.shift()}}return m}}},tee:function(k,m){var l=[];var g={pos:[],deque:[],max:-1,min:-1};if(arguments.length==1||typeof(m)=="undefined"||m===null){m=2}var b=MochiKit.Iter;k=b.iter(k);var a=b._tee;for(var f=0;f<m;f++){l.push(a(f,g,k))}return l},list:function(f){var a=MochiKit.Base;if(typeof(f.slice)=="function"){return f.slice()}else{if(a.isArrayLike(f)){return a.concat(f)}}var b=MochiKit.Iter;f=b.iter(f);var k=[];try{while(true){k.push(f.next())}}catch(g){if(g!=b.StopIteration){throw g}return k}return undefined},reduce:function(k,l,f){var g=0;var a=f;var b=MochiKit.Iter;l=b.iter(l);if(arguments.length<3){try{a=l.next()}catch(m){if(m==b.StopIteration){m=new TypeError("reduce() of empty sequence with no initial value")}throw m}g++}try{while(true){a=k(a,l.next())}}catch(m){if(m!=b.StopIteration){throw m}}return a},range:function(){var f=0;var a=0;var b=1;if(arguments.length==1){a=arguments[0]}else{if(arguments.length==2){f=arguments[0];a=arguments[1]}else{if(arguments.length==3){f=arguments[0];a=arguments[1];b=arguments[2]}else{throw new TypeError("range() takes 1, 2, or 3 arguments!")}}}if(b===0){throw new TypeError("range() step must not be 0")}return{next:function(){if((b>0&&f>=a)||(b<0&&f<=a)){throw MochiKit.Iter.StopIteration}var g=f;f+=b;return g},repr:function(){return"range("+[f,a,b].join(", ")+")"},toString:MochiKit.Base.forwardCall("repr")}},sum:function(f,k){if(typeof(k)=="undefined"||k===null){k=0}var a=k;var b=MochiKit.Iter;f=b.iter(f);try{while(true){a+=f.next()}}catch(g){if(g!=b.StopIteration){throw g}}return a},exhaust:function(b){var a=MochiKit.Iter;b=a.iter(b);try{while(true){b.next()}}catch(f){if(f!=a.StopIteration){throw f}}},forEach:function(k,g,b){var a=MochiKit.Base;if(arguments.length>2){g=a.bind(g,b)}if(a.isArrayLike(k)){try{for(var f=0;f<k.length;f++){g(k[f])}}catch(l){if(l!=MochiKit.Iter.StopIteration){throw l}}}else{b=MochiKit.Iter;b.exhaust(b.imap(g,k))}},every:function(f,b){var a=MochiKit.Iter;try{a.ifilterfalse(b,f).next();return false}catch(g){if(g!=a.StopIteration){throw g}return true}},sorted:function(b,a){var f=MochiKit.Iter.list(b);if(arguments.length==1){a=MochiKit.Base.compare}f.sort(a);return f},reversed:function(a){var b=MochiKit.Iter.list(a);b.reverse();return b},some:function(f,b){var a=MochiKit.Iter;try{a.ifilter(b,f).next();return true}catch(g){if(g!=a.StopIteration){throw g}return false}},iextend:function(a,g){if(MochiKit.Base.isArrayLike(g)){for(var f=0;f<g.length;f++){a.push(g[f])}}else{var b=MochiKit.Iter;g=b.iter(g);try{while(true){a.push(g.next())}}catch(k){if(k!=b.StopIteration){throw k}}}return a},groupby:function(f,r){var g=MochiKit.Base;var u=MochiKit.Iter;if(arguments.length<2){r=g.operator.identity}f=u.iter(f);var n=undefined;var l=undefined;var s;function a(){s=f.next();l=r(s)}function b(){var k=s;s=undefined;return k}var q=true;return{repr:function(){return"groupby(...)"},next:function(){while(l==n){a();if(q){q=false;break}}n=l;return[l,{next:function(){if(s==undefined){a()}if(l!=n){throw u.StopIteration}return b()}}]}}},groupby_as_array:function(a,l){var b=MochiKit.Base;var s=MochiKit.Iter;if(arguments.length<2){l=b.operator.identity}a=s.iter(a);var u=[];var f=true;var g;while(true){try{var n=a.next();var r=l(n)}catch(k){if(k==s.StopIteration){break}throw k}if(f||r!=g){var q=[];u.push([r,q])}q.push(n);f=false;g=r}return u},arrayLikeIter:function(b){var a=0;return{repr:function(){return"arrayLikeIter(...)"},toString:MochiKit.Base.forwardCall("repr"),next:function(){if(a>=b.length){throw MochiKit.Iter.StopIteration}return b[a++]}}},hasIterateNext:function(a){return(a&&typeof(a.iterateNext)=="function")},iterateNextIter:function(a){return{repr:function(){return"iterateNextIter(...)"},toString:MochiKit.Base.forwardCall("repr"),next:function(){var b=a.iterateNext();if(b===null||b===undefined){throw MochiKit.Iter.StopIteration}return b}}}});MochiKit.Iter.EXPORT_OK=["iteratorRegistry","arrayLikeIter","hasIterateNext","iterateNextIter",];MochiKit.Iter.EXPORT=["StopIteration","registerIteratorFactory","iter","count","cycle","repeat","next","izip","ifilter","ifilterfalse","islice","imap","applymap","chain","takewhile","dropwhile","tee","list","reduce","range","sum","exhaust","forEach","every","sorted","reversed","some","iextend","groupby","groupby_as_array"];MochiKit.Iter.__new__=function(){var a=MochiKit.Base;if(typeof(StopIteration)!="undefined"){this.StopIteration=StopIteration}else{this.StopIteration=new a.NamedError("StopIteration")}this.iteratorRegistry=new a.AdapterRegistry();this.registerIteratorFactory("arrayLike",a.isArrayLike,this.arrayLikeIter);this.registerIteratorFactory("iterateNext",this.hasIterateNext,this.iterateNextIter);this.EXPORT_TAGS={":common":this.EXPORT,":all":a.concat(this.EXPORT,this.EXPORT_OK)};a.nameFunctions(this)};MochiKit.Iter.__new__();if(MochiKit.__export__){reduce=MochiKit.Iter.reduce}MochiKit.Base._exportSymbols(this,MochiKit.Iter);if(typeof(dojo)!="undefined"){dojo.provide("MochiKit.Visual");dojo.require("MochiKit.Base");dojo.require("MochiKit.DOM");dojo.require("MochiKit.Style");dojo.require("MochiKit.Color");dojo.require("MochiKit.Iter")}if(typeof(JSAN)!="undefined"){JSAN.use("MochiKit.Base",[]);JSAN.use("MochiKit.DOM",[]);JSAN.use("MochiKit.Style",[]);JSAN.use("MochiKit.Color",[]);JSAN.use("MochiKit.Iter",[])}try{if(typeof(MochiKit.Base)==="undefined"||typeof(MochiKit.DOM)==="undefined"||typeof(MochiKit.Style)==="undefined"||typeof(MochiKit.Color)==="undefined"||typeof(MochiKit.Iter)==="undefined"){throw""}}catch(e){throw"MochiKit.Visual depends on MochiKit.Base, MochiKit.DOM, MochiKit.Style, MochiKit.Color and MochiKit.Iter!"}if(typeof(MochiKit.Visual)=="undefined"){MochiKit.Visual={}}MochiKit.Visual.NAME="MochiKit.Visual";MochiKit.Visual.VERSION="1.4";MochiKit.Visual.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"};MochiKit.Visual.toString=function(){return this.__repr__()};MochiKit.Visual._RoundCorners=function(g,b){g=MochiKit.DOM.getElement(g);this._setOptions(b);if(this.options.__unstable__wrapElement){g=this._doWrap(g)}var a=this.options.color;var k=MochiKit.Color.Color;if(this.options.color==="fromElement"){a=k.fromBackground(g)}else{if(!(a instanceof k)){a=k.fromString(a)}}this.isTransparent=(a.asRGB().a<=0);var f=this.options.bgColor;if(this.options.bgColor==="fromParent"){f=k.fromBackground(g.offsetParent)}else{if(!(f instanceof k)){f=k.fromString(f)}}this._roundCornersImpl(g,a,f)};MochiKit.Visual._RoundCorners.prototype={_doWrap:function(g){var b=g.parentNode;var f=MochiKit.DOM.currentDocument();if(typeof(f.defaultView)==="undefined"||f.defaultView===null){return g}var a=f.defaultView.getComputedStyle(g,null);if(typeof(a)==="undefined"||a===null){return g}var k=MochiKit.DOM.DIV({style:{display:"block",marginTop:a.getPropertyValue("padding-top"),marginRight:a.getPropertyValue("padding-right"),marginBottom:a.getPropertyValue("padding-bottom"),marginLeft:a.getPropertyValue("padding-left"),padding:"0px"}});k.innerHTML=g.innerHTML;g.innerHTML="";g.appendChild(k);return g},_roundCornersImpl:function(f,a,b){if(this.options.border){this._renderBorder(f,b)}if(this._isTopRounded()){this._roundTopCorners(f,a,b)}if(this._isBottomRounded()){this._roundBottomCorners(f,a,b)}},_renderBorder:function(g,k){var b="1px solid "+this._borderColor(k);var a="border-left: "+b;var l="border-right: "+b;var f="style='"+a+";"+l+"'";g.innerHTML="<div "+f+">"+g.innerHTML+"</div>"},_roundTopCorners:function(f,a,k){var g=this._createCorner(k);for(var b=0;b<this.options.numSlices;b++){g.appendChild(this._createCornerSlice(a,k,b,"top"))}f.style.paddingTop=0;f.insertBefore(g,f.firstChild)},_roundBottomCorners:function(f,a,k){var g=this._createCorner(k);for(var b=(this.options.numSlices-1);b>=0;b--){g.appendChild(this._createCornerSlice(a,k,b,"bottom"))}f.style.paddingBottom=0;f.appendChild(g)},_createCorner:function(a){var b=MochiKit.DOM;return b.DIV({style:{backgroundColor:a.toString()}})},_createCornerSlice:function(f,g,m,a){var k=MochiKit.DOM.SPAN();var b=k.style;b.backgroundColor=f.toString();b.display="block";b.height="1px";b.overflow="hidden";b.fontSize="1px";var l=this._borderColor(f,g);if(this.options.border&&m===0){b.borderTopStyle="solid";b.borderTopWidth="1px";b.borderLeftWidth="0px";b.borderRightWidth="0px";b.borderBottomWidth="0px";b.height="0px";b.borderColor=l.toString()}else{if(l){b.borderColor=l.toString();b.borderStyle="solid";b.borderWidth="0px 1px"}}if(!this.options.compact&&(m==(this.options.numSlices-1))){b.height="2px"}this._setMargin(k,m,a);this._setBorder(k,m,a);return k},_setOptions:function(a){this.options={corners:"all",color:"fromElement",bgColor:"fromParent",blend:true,border:false,compact:false,__unstable__wrapElement:false};MochiKit.Base.update(this.options,a);this.options.numSlices=(this.options.compact?2:4)},_whichSideTop:function(){var a=this.options.corners;if(this._hasString(a,"all","top")){return""}var f=(a.indexOf("tl")!=-1);var b=(a.indexOf("tr")!=-1);if(f&&b){return""}if(f){return"left"}if(b){return"right"}return""},_whichSideBottom:function(){var b=this.options.corners;if(this._hasString(b,"all","bottom")){return""}var f=(b.indexOf("bl")!=-1);var a=(b.indexOf("br")!=-1);if(f&&a){return""}if(f){return"left"}if(a){return"right"}return""},_borderColor:function(a,b){if(a=="transparent"){return b}else{if(this.options.border){return this.options.border}else{if(this.options.blend){return b.blendedColor(a)}}}return""},_setMargin:function(k,l,b){var f=this._marginSize(l)+"px";var a=(b=="top"?this._whichSideTop():this._whichSideBottom());var g=k.style;if(a=="left"){g.marginLeft=f;g.marginRight="0px"}else{if(a=="right"){g.marginRight=f;g.marginLeft="0px"}else{g.marginLeft=f;g.marginRight=f}}},_setBorder:function(k,l,b){var f=this._borderSize(l)+"px";var a=(b=="top"?this._whichSideTop():this._whichSideBottom());var g=k.style;if(a=="left"){g.borderLeftWidth=f;g.borderRightWidth="0px"}else{if(a=="right"){g.borderRightWidth=f;g.borderLeftWidth="0px"}else{g.borderLeftWidth=f;g.borderRightWidth=f}}},_marginSize:function(l){if(this.isTransparent){return 0}var k=this.options;if(k.compact&&k.blend){var b=[1,0];return b[l]}else{if(k.compact){var g=[2,1];return g[l]}else{if(k.blend){var a=[3,2,1,0];return a[l]}else{var f=[5,3,2,1];return f[l]}}}},_borderSize:function(f){var b=this.options;var a;if(b.compact&&(b.blend||this.isTransparent)){return 1}else{if(b.compact){a=[1,0]}else{if(b.blend){a=[2,1,1,1]}else{if(b.border){a=[0,2,0,0]}else{if(this.isTransparent){a=[5,3,2,1]}else{return 0}}}}}return a[f]},_hasString:function(b){for(var a=1;a<arguments.length;a++){if(b.indexOf(arguments[a])!=-1){return true}}return false},_isTopRounded:function(){return this._hasString(this.options.corners,"all","top","tl","tr")},_isBottomRounded:function(){return this._hasString(this.options.corners,"all","bottom","bl","br")},_hasSingleTextChild:function(a){return(a.childNodes.length==1&&a.childNodes[0].nodeType==3)}};MochiKit.Visual.roundElement=function(b,a){new MochiKit.Visual._RoundCorners(b,a)};MochiKit.Visual.roundClass=function(f,g,a){var k=MochiKit.DOM.getElementsByTagAndClassName(f,g);for(var b=0;b<k.length;b++){MochiKit.Visual.roundElement(k[b],a)}};MochiKit.Visual.tagifyText=function(b,f){var f=f||"position:relative";if(MochiKit.Base.isIE()){f+=";zoom:1"}b=MochiKit.DOM.getElement(b);var a=MochiKit.Iter.forEach;a(b.childNodes,function(g){if(g.nodeType==3){a(g.nodeValue.split(""),function(k){b.insertBefore(MochiKit.DOM.SPAN({style:f},k==" "?String.fromCharCode(160):k),g)});MochiKit.DOM.removeElement(g)}})};MochiKit.Visual.forceRerendering=function(a){try{a=MochiKit.DOM.getElement(a);var f=document.createTextNode(" ");a.appendChild(f);a.removeChild(f)}catch(b){}};MochiKit.Visual.multiple=function(k,f,b){b=MochiKit.Base.update({speed:0.1,delay:0},b||{});var g=b.delay;var a=0;MochiKit.Iter.forEach(k,function(l){b.delay=a*b.speed+g;new f(l,b);a+=1})};MochiKit.Visual.PAIRS={slide:["slideDown","slideUp"],blind:["blindDown","blindUp"],appear:["appear","fade"],size:["grow","shrink"]};MochiKit.Visual.toggle=function(f,g,b){f=MochiKit.DOM.getElement(f);g=(g||"appear").toLowerCase();b=MochiKit.Base.update({queue:{position:"end",scope:(f.id||"global"),limit:1}},b||{});var a=MochiKit.Visual;a[MochiKit.DOM.isVisible(f)?a.PAIRS[g][1]:a.PAIRS[g][0]](f,b)};MochiKit.Visual.Transitions={};MochiKit.Visual.Transitions.linear=function(a){return a};MochiKit.Visual.Transitions.sinoidal=function(a){return(-Math.cos(a*Math.PI)/2)+0.5};MochiKit.Visual.Transitions.reverse=function(a){return 1-a};MochiKit.Visual.Transitions.flicker=function(a){return((-Math.cos(a*Math.PI)/4)+0.75)+Math.random()/4};MochiKit.Visual.Transitions.wobble=function(a){return(-Math.cos(a*Math.PI*(9*a))/2)+0.5};MochiKit.Visual.Transitions.pulse=function(a){return(Math.floor(a*10)%2==0?(a*10-Math.floor(a*10)):1-(a*10-Math.floor(a*10)))};MochiKit.Visual.Transitions.none=function(a){return 0};MochiKit.Visual.Transitions.full=function(a){return 1};MochiKit.Visual.ScopedQueue=function(){this.__init__()};MochiKit.Base.update(MochiKit.Visual.ScopedQueue.prototype,{__init__:function(){this.effects=[];this.interval=null},add:function(g){var k=new Date().getTime();var a=(typeof(g.options.queue)=="string")?g.options.queue:g.options.queue.position;var b=MochiKit.Iter.forEach;switch(a){case"front":b(this.effects,function(l){if(l.state=="idle"){l.startOn+=g.finishOn;l.finishOn+=g.finishOn}});break;case"end":var f;b(this.effects,function(m){var l=m.finishOn;if(l>=(f||l)){f=l}});k=f||k;break}g.startOn+=k;g.finishOn+=k;if(!g.options.queue.limit||this.effects.length<g.options.queue.limit){this.effects.push(g)}if(!this.interval){this.interval=setInterval(MochiKit.Base.bind(this.loop,this),40)}},remove:function(a){this.effects=MochiKit.Base.filter(function(b){return b!=a},this.effects);if(this.effects.length==0){clearInterval(this.interval);this.interval=null}},loop:function(){var a=new Date().getTime();MochiKit.Iter.forEach(this.effects,function(b){b.loop(a)})}});MochiKit.Visual.Queues={instances:{},get:function(a){if(typeof(a)!="string"){return a}if(!this.instances[a]){this.instances[a]=new MochiKit.Visual.ScopedQueue()}return this.instances[a]}};MochiKit.Visual.Queue=MochiKit.Visual.Queues.get("global");MochiKit.Visual.DefaultOptions={transition:MochiKit.Visual.Transitions.sinoidal,duration:1,fps:25,sync:false,from:0,to:1,delay:0,queue:"parallel"};MochiKit.Visual.Base=function(){};MochiKit.Visual.Base.prototype={__class__:MochiKit.Visual.Base,start:function(b){var a=MochiKit.Visual;this.options=MochiKit.Base.setdefault(b||{},a.DefaultOptions);this.currentFrame=0;this.state="idle";this.startOn=this.options.delay*1000;this.finishOn=this.startOn+(this.options.duration*1000);this.event("beforeStart");if(!this.options.sync){a.Queues.get(typeof(this.options.queue)=="string"?"global":this.options.queue.scope).add(this)}},loop:function(f){if(f>=this.startOn){if(f>=this.finishOn){this.render(1);this.cancel();this.event("beforeFinish");this.finish();this.event("afterFinish");return}var b=(f-this.startOn)/(this.finishOn-this.startOn);var a=Math.round(b*this.options.fps*this.options.duration);if(a>this.currentFrame){this.render(b);this.currentFrame=a}}},render:function(a){if(this.state=="idle"){this.state="running";this.event("beforeSetup");this.setup();this.event("afterSetup")}if(this.state=="running"){if(this.options.transition){a=this.options.transition(a)}a*=(this.options.to-this.options.from);a+=this.options.from;this.event("beforeUpdate");this.update(a);this.event("afterUpdate")}},cancel:function(){if(!this.options.sync){MochiKit.Visual.Queues.get(typeof(this.options.queue)=="string"?"global":this.options.queue.scope).remove(this)}this.state="finished"},setup:function(){},finish:function(){},update:function(a){},event:function(a){if(this.options[a+"Internal"]){this.options[a+"Internal"](this)}if(this.options[a]){this.options[a](this)}},repr:function(){return"["+this.__class__.NAME+", options:"+MochiKit.Base.repr(this.options)+"]"}};MochiKit.Visual.Parallel=function(b,a){this.__init__(b,a)};MochiKit.Visual.Parallel.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Parallel.prototype,{__init__:function(b,a){this.effects=b||[];this.start(a)},update:function(a){MochiKit.Iter.forEach(this.effects,function(b){b.render(a)})},finish:function(){MochiKit.Iter.forEach(this.effects,function(a){a.render(1);a.cancel();a.event("beforeFinish");a.finish();a.event("afterFinish")})}});MochiKit.Visual.Opacity=function(b,a){this.__init__(b,a)};MochiKit.Visual.Opacity.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Opacity.prototype,{__init__:function(g,f){var a=MochiKit.Base;var k=MochiKit.DOM;this.element=k.getElement(g);if(a.isIE()&&(!this.element.currentStyle.hasLayout)){k.setStyle(this.element,{zoom:1})}f=a.update({from:k.getOpacity(this.element)||0,to:1},f||{});this.start(f)},update:function(a){MochiKit.DOM.setOpacity(this.element,a)}});MochiKit.Visual.Move=function(b,a){this.__init__(b,a)};MochiKit.Visual.Move.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Move.prototype,{__init__:function(b,a){this.element=MochiKit.DOM.getElement(b);a=MochiKit.Base.update({x:0,y:0,mode:"relative"},a||{});this.start(a)},setup:function(){var g=MochiKit.DOM;g.makePositioned(this.element);var b=this.element.style;var f=b.visibility;var a=b.display;if(a=="none"){b.visibility="hidden";b.display=""}this.originalLeft=parseFloat(g.getStyle(this.element,"left")||"0");this.originalTop=parseFloat(g.getStyle(this.element,"top")||"0");if(this.options.mode=="absolute"){this.options.x-=this.originalLeft;this.options.y-=this.originalTop}if(a=="none"){b.visibility=f;b.display=a}},update:function(a){MochiKit.DOM.setStyle(this.element,{left:Math.round(this.options.x*a+this.originalLeft)+"px",top:Math.round(this.options.y*a+this.originalTop)+"px"})}});MochiKit.Visual.Scale=function(b,f,a){this.__init__(b,f,a)};MochiKit.Visual.Scale.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Scale.prototype,{__init__:function(b,f,a){this.element=MochiKit.DOM.getElement(b);a=MochiKit.Base.update({scaleX:true,scaleY:true,scaleContent:true,scaleFromCenter:false,scaleMode:"box",scaleFrom:100,scaleTo:f},a||{});this.start(a)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||false;this.elementPositioning=MochiKit.DOM.getStyle(this.element,"position");var f=MochiKit.Iter.forEach;var a=MochiKit.Base.bind;this.originalStyle={};f(["top","left","width","height","fontSize"],a(function(b){this.originalStyle[b]=this.element.style[b]},this));this.originalTop=this.element.offsetTop;this.originalLeft=this.element.offsetLeft;var g=MochiKit.DOM.getStyle(this.element,"font-size")||"100%";f(["em","px","%"],a(function(b){if(g.indexOf(b)>0){this.fontSize=parseFloat(g);this.fontSizeType=b}},this));this.factor=(this.options.scaleTo-this.options.scaleFrom)/100;if(/^content/.test(this.options.scaleMode)){this.dims=[this.element.scrollHeight,this.element.scrollWidth]}else{if(this.options.scaleMode=="box"){this.dims=[this.element.offsetHeight,this.element.offsetWidth]}else{this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth]}}},update:function(a){var b=(this.options.scaleFrom/100)+(this.factor*a);if(this.options.scaleContent&&this.fontSize){MochiKit.DOM.setStyle(this.element,{fontSize:this.fontSize*b+this.fontSizeType})}this.setDimensions(this.dims[0]*b,this.dims[1]*b)},finish:function(){if(this.restoreAfterFinish){MochiKit.DOM.setStyle(this.element,this.originalStyle)}},setDimensions:function(a,g){var k={};if(this.options.scaleX){k.width=Math.round(g)+"px"}if(this.options.scaleY){k.height=Math.round(a)+"px"}if(this.options.scaleFromCenter){var f=(a-this.dims[0])/2;var b=(g-this.dims[1])/2;if(this.elementPositioning=="absolute"){if(this.options.scaleY){k.top=this.originalTop-f+"px"}if(this.options.scaleX){k.left=this.originalLeft-b+"px"}}else{if(this.options.scaleY){k.top=-f+"px"}if(this.options.scaleX){k.left=-b+"px"}}}MochiKit.DOM.setStyle(this.element,k)}});MochiKit.Visual.Highlight=function(b,a){this.__init__(b,a)};MochiKit.Visual.Highlight.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.Highlight.prototype,{__init__:function(b,a){this.element=MochiKit.DOM.getElement(b);a=MochiKit.Base.update({startcolor:"#ffff99"},a||{});this.start(a)},setup:function(){var f=MochiKit.DOM;var a=MochiKit.Base;if(f.getStyle(this.element,"display")=="none"){this.cancel();return}this.oldStyle={backgroundImage:f.getStyle(this.element,"background-image")};f.setStyle(this.element,{backgroundImage:"none"});if(!this.options.endcolor){this.options.endcolor=MochiKit.Color.Color.fromBackground(this.element).toHexString()}if(!this.options.restorecolor){this.options.restorecolor=f.getStyle(this.element,"background-color")}this._base=a.map(a.bind(function(b){return parseInt(this.options.startcolor.slice(b*2+1,b*2+3),16)},this),[0,1,2]);this._delta=a.map(a.bind(function(b){return parseInt(this.options.endcolor.slice(b*2+1,b*2+3),16)-this._base[b]},this),[0,1,2])},update:function(b){var a="#";MochiKit.Iter.forEach([0,1,2],MochiKit.Base.bind(function(f){a+=MochiKit.Color.toColorPart(Math.round(this._base[f]+this._delta[f]*b))},this));MochiKit.DOM.setStyle(this.element,{backgroundColor:a})},finish:function(){MochiKit.DOM.setStyle(this.element,MochiKit.Base.update(this.oldStyle,{backgroundColor:this.options.endcolor}))}});MochiKit.Visual.ScrollTo=function(b,a){this.__init__(b,a)};MochiKit.Visual.ScrollTo.prototype=new MochiKit.Visual.Base();MochiKit.Base.update(MochiKit.Visual.ScrollTo.prototype,{__init__:function(b,a){this.element=MochiKit.DOM.getElement(b);this.start(a||{})},setup:function(){var f=MochiKit.Position;f.prepare();var b=f.cumulativeOffset(this.element);if(this.options.offset){b.y+=this.options.offset}var a;if(window.innerHeight){a=window.innerHeight-window.height}else{if(document.documentElement&&document.documentElement.clientHeight){a=document.documentElement.clientHeight-document.body.scrollHeight}else{if(document.body){a=document.body.clientHeight-document.body.scrollHeight}}}this.scrollStart=f.windowOffset.y;this.delta=(b.y>a?a:b.y)-this.scrollStart},update:function(a){var b=MochiKit.Position;b.prepare();window.scrollTo(b.windowOffset.x,this.scrollStart+(a*this.delta))}});MochiKit.Visual.fade=function(f,b){var g=MochiKit.DOM;var a=g.getInlineOpacity(f);b=MochiKit.Base.update({from:g.getOpacity(f)||1,to:0,afterFinishInternal:function(k){if(k.options.to!==0){return}MochiKit.Style.hideElement(k.element);g.setStyle(k.element,{opacity:a})}},b||{});return new MochiKit.Visual.Opacity(f,b)};MochiKit.Visual.appear=function(f,b){var g=MochiKit.DOM;var a=MochiKit.Visual;b=MochiKit.Base.update({from:(g.getStyle(f,"display")=="none"?0:g.getOpacity(f)||0),to:1,afterFinishInternal:function(k){a.forceRerendering(k.element)},beforeSetupInternal:function(k){g.setOpacity(k.element,k.options.from);MochiKit.Style.showElement(k.element)}},b||{});return new a.Opacity(f,b)};MochiKit.Visual.puff=function(g,f){var k=MochiKit.DOM;var b=MochiKit.Visual;g=k.getElement(g);var a={opacity:k.getInlineOpacity(g),position:k.getStyle(g,"position")};f=MochiKit.Base.update({beforeSetupInternal:function(l){k.setStyle(l.effects[0].element,{position:"absolute"})},afterFinishInternal:function(l){MochiKit.Style.hideElement(l.effects[0].element);k.setStyle(l.effects[0].element,a)}},f||{});return new b.Parallel([new b.Scale(g,200,{sync:true,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new b.Opacity(g,{sync:true,to:0})],f)};MochiKit.Visual.blindUp=function(b,a){var f=MochiKit.DOM;b=f.getElement(b);f.makeClipping(b);a=MochiKit.Base.update({scaleContent:false,scaleX:false,restoreAfterFinish:true,afterFinishInternal:function(g){MochiKit.Style.hideElement(g.element);f.undoClipping(g.element)}},a||{});return new MochiKit.Visual.Scale(b,0,a)};MochiKit.Visual.blindDown=function(f,b){var g=MochiKit.DOM;f=g.getElement(f);var a=MochiKit.Style.getElementDimensions(f);b=MochiKit.Base.update({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:a.h,originalWidth:a.w},restoreAfterFinish:true,afterSetupInternal:function(k){g.makeClipping(k.element);g.setStyle(k.element,{height:"0px"});MochiKit.Style.showElement(k.element)},afterFinishInternal:function(k){g.undoClipping(k.element)}},b||{});return new MochiKit.Visual.Scale(f,100,b)};MochiKit.Visual.switchOff=function(g,f){var k=MochiKit.DOM;g=k.getElement(g);var b=k.getInlineOpacity(g);var f=MochiKit.Base.update({duration:0.3,scaleFromCenter:true,scaleX:false,scaleContent:false,restoreAfterFinish:true,beforeSetupInternal:function(l){k.makePositioned(l.element);k.makeClipping(l.element)},afterFinishInternal:function(l){MochiKit.Style.hideElement(l.element);k.undoClipping(l.element);k.undoPositioned(l.element);k.setStyle(l.element,{opacity:b})}},f||{});var a=MochiKit.Visual;return new a.appear(g,{duration:0.4,from:0,transition:a.Transitions.flicker,afterFinishInternal:function(l){new a.Scale(l.element,1,f)}})};MochiKit.Visual.dropOut=function(g,f){var k=MochiKit.DOM;g=k.getElement(g);var a={top:k.getStyle(g,"top"),left:k.getStyle(g,"left"),opacity:k.getInlineOpacity(g)};f=MochiKit.Base.update({duration:0.5,beforeSetupInternal:function(l){k.makePositioned(l.effects[0].element)},afterFinishInternal:function(l){MochiKit.Style.hideElement(l.effects[0].element);k.undoPositioned(l.effects[0].element);k.setStyle(l.effects[0].element,a)}},f||{});var b=MochiKit.Visual;return new b.Parallel([new b.Move(g,{x:0,y:100,sync:true}),new b.Opacity(g,{sync:true,to:0})],f)};MochiKit.Visual.shake=function(g,f){var k=MochiKit.DOM;var b=MochiKit.Visual;g=k.getElement(g);f=MochiKit.Base.update({x:-20,y:0,duration:0.05,afterFinishInternal:function(l){k.undoPositioned(l.element);k.setStyle(l.element,a)}},f||{});var a={top:k.getStyle(g,"top"),left:k.getStyle(g,"left")};return new b.Move(g,{x:20,y:0,duration:0.05,afterFinishInternal:function(l){new b.Move(l.element,{x:-40,y:0,duration:0.1,afterFinishInternal:function(m){new b.Move(m.element,{x:40,y:0,duration:0.1,afterFinishInternal:function(n){new b.Move(n.element,{x:-40,y:0,duration:0.1,afterFinishInternal:function(q){new b.Move(q.element,{x:40,y:0,duration:0.1,afterFinishInternal:function(r){new b.Move(r.element,f)}})}})}})}})}})};MochiKit.Visual.slideDown=function(l,k){var m=MochiKit.DOM;var f=MochiKit.Base;l=m.getElement(l);if(!l.firstChild){throw"MochiKit.Visual.slideDown must be used on a element with a child"}m.removeEmptyTextNodes(l);var a=m.getStyle(l.firstChild,"bottom")||0;var g=MochiKit.Style.getElementDimensions(l);k=f.update({scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:g.h,originalWidth:g.w},restoreAfterFinish:true,afterSetupInternal:function(b){m.makePositioned(b.element);m.makePositioned(b.element.firstChild);if(f.isOpera()){m.setStyle(b.element,{top:""})}m.makeClipping(b.element);m.setStyle(b.element,{height:"0px"});MochiKit.Style.showElement(b.element)},afterUpdateInternal:function(b){m.setStyle(b.element.firstChild,{bottom:(b.dims[0]-b.element.clientHeight)+"px"})},afterFinishInternal:function(b){m.undoClipping(b.element);if(f.isIE()){m.undoPositioned(b.element);m.undoPositioned(b.element.firstChild)}else{m.undoPositioned(b.element.firstChild);m.undoPositioned(b.element)}m.setStyle(b.element.firstChild,{bottom:a})}},k||{});return new MochiKit.Visual.Scale(l,100,k)};MochiKit.Visual.slideUp=function(k,g){var l=MochiKit.DOM;var f=MochiKit.Base;k=l.getElement(k);if(!k.firstChild){throw"MochiKit.Visual.slideUp must be used on a element with a child"}l.removeEmptyTextNodes(k);var a=l.getStyle(k.firstChild,"bottom");g=f.update({scaleContent:false,scaleX:false,scaleMode:"box",scaleFrom:100,restoreAfterFinish:true,beforeStartInternal:function(b){l.makePositioned(b.element);l.makePositioned(b.element.firstChild);if(f.isOpera()){l.setStyle(b.element,{top:""})}l.makeClipping(b.element);MochiKit.Style.showElement(b.element)},afterUpdateInternal:function(b){l.setStyle(b.element.firstChild,{bottom:(b.dims[0]-b.element.clientHeight)+"px"})},afterFinishInternal:function(b){MochiKit.Style.hideElement(b.element);l.undoClipping(b.element);l.undoPositioned(b.element.firstChild);l.undoPositioned(b.element);l.setStyle(b.element.firstChild,{bottom:a})}},g||{});return new MochiKit.Visual.Scale(k,0,g)};MochiKit.Visual.squish=function(g,f){var k=MochiKit.DOM;var a=MochiKit.Base;f=a.update({restoreAfterFinish:true,beforeSetupInternal:function(b){k.makeClipping(b.element)},afterFinishInternal:function(b){MochiKit.Style.hideElement(b.element);k.undoClipping(b.element)}},f||{});return new MochiKit.Visual.Scale(g,a.isOpera()?1:0,f)};MochiKit.Visual.grow=function(l,s){var m=MochiKit.DOM;var r=MochiKit.Visual;l=m.getElement(l);s=MochiKit.Base.update({direction:"center",moveTransition:r.Transitions.sinoidal,scaleTransition:r.Transitions.sinoidal,opacityTransition:r.Transitions.full},s||{});var g={top:l.style.top,left:l.style.left,height:l.style.height,width:l.style.width,opacity:m.getInlineOpacity(l)};var q=MochiKit.Style.getElementDimensions(l);var k,f;var b,a;switch(s.direction){case"top-left":k=f=b=a=0;break;case"top-right":k=q.w;f=a=0;b=-q.w;break;case"bottom-left":k=b=0;f=q.h;a=-q.h;break;case"bottom-right":k=q.w;f=q.h;b=-q.w;a=-q.h;break;case"center":k=q.w/2;f=q.h/2;b=-q.w/2;a=-q.h/2;break}var n=MochiKit.Base.update({beforeSetupInternal:function(u){m.setStyle(u.effects[0].element,{height:"0px"});MochiKit.Style.showElement(u.effects[0].element)},afterFinishInternal:function(u){m.undoClipping(u.effects[0].element);m.undoPositioned(u.effects[0].element);m.setStyle(u.effects[0].element,g)}},s||{});return new r.Move(l,{x:k,y:f,duration:0.01,beforeSetupInternal:function(u){MochiKit.Style.hideElement(u.element);m.makeClipping(u.element);m.makePositioned(u.element)},afterFinishInternal:function(u){new r.Parallel([new r.Opacity(u.element,{sync:true,to:1,from:0,transition:s.opacityTransition}),new r.Move(u.element,{x:b,y:a,sync:true,transition:s.moveTransition}),new r.Scale(u.element,100,{scaleMode:{originalHeight:q.h,originalWidth:q.w},sync:true,scaleFrom:MochiKit.Base.isOpera()?1:0,transition:s.scaleTransition,restoreAfterFinish:true})],n)}})};MochiKit.Visual.shrink=function(g,q){var k=MochiKit.DOM;var n=MochiKit.Visual;g=k.getElement(g);q=MochiKit.Base.update({direction:"center",moveTransition:n.Transitions.sinoidal,scaleTransition:n.Transitions.sinoidal,opacityTransition:n.Transitions.none},q||{});var f={top:g.style.top,left:g.style.left,height:g.style.height,width:g.style.width,opacity:k.getInlineOpacity(g)};var m=MochiKit.Style.getElementDimensions(g);var b,a;switch(q.direction){case"top-left":b=a=0;break;case"top-right":b=m.w;a=0;break;case"bottom-left":b=0;a=m.h;break;case"bottom-right":b=m.w;a=m.h;break;case"center":b=m.w/2;a=m.h/2;break}var l=MochiKit.Base.update({beforeStartInternal:function(r){k.makePositioned(r.effects[0].element);k.makeClipping(r.effects[0].element)},afterFinishInternal:function(r){MochiKit.Style.hideElement(r.effects[0].element);k.undoClipping(r.effects[0].element);k.undoPositioned(r.effects[0].element);k.setStyle(r.effects[0].element,f)}},q||{});return new n.Parallel([new n.Opacity(g,{sync:true,to:0,from:1,transition:q.opacityTransition}),new n.Scale(g,MochiKit.Base.isOpera()?1:0,{sync:true,transition:q.scaleTransition,restoreAfterFinish:true}),new n.Move(g,{x:b,y:a,sync:true,transition:q.moveTransition})],l)};MochiKit.Visual.pulsate=function(l,k){var q=MochiKit.DOM;var g=MochiKit.Visual;var a=MochiKit.Base;l=q.getElement(l);var f=q.getInlineOpacity(l);k=a.update({duration:3,from:0,afterFinishInternal:function(b){q.setStyle(b.element,{opacity:f})}},k||{});var n=k.transition||g.Transitions.sinoidal;var m=a.bind(function(b){return n(1-g.Transitions.pulse(b))},n);a.bind(m,n);return new g.Opacity(l,a.update({transition:m},k))};MochiKit.Visual.fold=function(g,f){var k=MochiKit.DOM;var b=MochiKit.Visual;g=k.getElement(g);var a={top:g.style.top,left:g.style.left,width:g.style.width,height:g.style.height};k.makeClipping(g);f=MochiKit.Base.update({scaleContent:false,scaleX:false,afterFinishInternal:function(l){new b.Scale(g,1,{scaleContent:false,scaleY:false,afterFinishInternal:function(m){MochiKit.Style.hideElement(m.element);k.undoClipping(m.element);k.setStyle(m.element,a)}})}},f||{});return new b.Scale(g,5,f)};MochiKit.Visual.Color=MochiKit.Color.Color;MochiKit.Visual.getElementsComputedStyle=MochiKit.DOM.computedStyle;MochiKit.Visual.__new__=function(){var a=MochiKit.Base;a.nameFunctions(this);this.EXPORT_TAGS={":common":this.EXPORT,":all":a.concat(this.EXPORT,this.EXPORT_OK)}};MochiKit.Visual.EXPORT=["roundElement","roundClass","tagifyText","multiple","toggle","Base","Parallel","Opacity","Move","Scale","Highlight","ScrollTo","fade","appear","puff","blindUp","blindDown","switchOff","dropOut","shake","slideDown","slideUp","squish","grow","shrink","pulsate","fold"];MochiKit.Visual.EXPORT_OK=["PAIRS"];MochiKit.Visual.__new__();MochiKit.Base._exportSymbols(this,MochiKit.Visual);var log4javascript;(function(){function k(){return function(){}}function n(r,q){for(var f in q){r[f]=q[f]}}var l=k();var g=k();n(g.prototype,{addAppender:l,removeAppender:l,removeAllAppenders:l,log:l,setLevel:l,getLevel:l,trace:l,debug:l,info:l,warn:l,error:l,fatal:l});var a=function(){return new g()};log4javascript={isStub:true,version:"dummy",logLog:{setQuietMode:l,setAlertAllErrors:l,debug:l,warn:l,error:l},addErrorListener:l,removeErrorListener:l,setEnabled:l,setShowStackTraces:l,isEnabled:l,evalInScope:l,getLogger:a,getDefaultLogger:a,getNullLogger:a,Level:k(),LoggingEvent:k(),Layout:k(),Appender:k()};log4javascript.LoggingEvent.prototype={getThrowableStrRep:l};log4javascript.Level.prototype={toString:l,equals:l,isGreaterOrEqual:l};var m=new log4javascript.Level();n(log4javascript.Level,{ALL:m,TRACE:m,DEBUG:m,INFO:m,WARN:m,ERROR:m,FATAL:m,OFF:m});log4javascript.Layout.prototype={defaults:{},format:l,ignoresThrowable:l,getContentType:l,allowBatching:l,getDataValues:l,setKeys:l,setCustomField:l,hasCustomFields:l};log4javascript.SimpleLayout=k();log4javascript.SimpleLayout.prototype=new log4javascript.Layout();log4javascript.XmlLayout=k();log4javascript.XmlLayout.prototype=new log4javascript.Layout();log4javascript.XmlLayout.prototype.escapeCdata=l;log4javascript.JsonLayout=k();log4javascript.JsonLayout.prototype=new log4javascript.Layout();n(log4javascript.JsonLayout.prototype,{setReadable:l,isReadable:l});log4javascript.HttpPostDataLayout=k();log4javascript.HttpPostDataLayout.prototype=new log4javascript.Layout();log4javascript.PatternLayout=k();log4javascript.PatternLayout.prototype=new log4javascript.Layout();log4javascript.NullLayout=k();log4javascript.NullLayout.prototype=new log4javascript.Layout();log4javascript.Appender=k();log4javascript.Appender.prototype={layout:new log4javascript.PatternLayout(),threshold:log4javascript.Level.ALL,doAppend:l,append:l,setLayout:l,getLayout:l,setThreshold:l,getThreshold:l,toString:l};log4javascript.AlertAppender=k();log4javascript.AlertAppender.prototype=new log4javascript.Appender();log4javascript.ArrayAppender=k();log4javascript.ArrayAppender.prototype=new log4javascript.Appender();log4javascript.AjaxAppender=k();log4javascript.AjaxAppender.prototype=new log4javascript.Appender();n(log4javascript.AjaxAppender.prototype,{isTimed:l,setTimed:l,getTimerInterval:l,setTimerInterval:l,isWaitForResponse:l,setWaitForResponse:l,getBatchSize:l,setBatchSize:l,setRequestSuccessCallback:l,setFailCallback:l,sendAll:l,defaults:{requestSuccessCallback:null,failCallback:null}});function b(){}b.prototype=new log4javascript.Appender();n(b.prototype,{create:l,isNewestMessageAtTop:l,setNewestMessageAtTop:l,isScrollToLatestMessage:l,setScrollToLatestMessage:l,getWidth:l,setWidth:l,getHeight:l,setHeight:l,getMaxMessages:l,setMaxMessages:l});log4javascript.InPageAppender=k();log4javascript.InPageAppender.prototype=new b();n(log4javascript.InPageAppender.prototype,{isInitiallyMinimized:l,setInitiallyMinimized:l,hide:l,show:l,isVisible:l,close:l,defaults:{layout:new log4javascript.PatternLayout(),maxMessages:null}});log4javascript.InlineAppender=log4javascript.InPageAppender;log4javascript.PopUpAppender=k();log4javascript.PopUpAppender.prototype=new b();n(log4javascript.PopUpAppender.prototype,{isUseOldPopUp:l,setUseOldPopUp:l,isComplainAboutPopUpBlocking:l,setComplainAboutPopUpBlocking:l,isFocusPopUp:l,setFocusPopUp:l,isReopenWhenClosed:l,setReopenWhenClosed:l,close:l,defaults:{layout:new log4javascript.PatternLayout(),maxMessages:null}});log4javascript.BrowserConsoleAppender=k();log4javascript.BrowserConsoleAppender.prototype=new log4javascript.Appender()})();var log4javascript_dummy=log4javascript;if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.external=="undefined"){bobj.external={}}if(typeof bobj.external.date=="undefined"){bobj.external.date={}}bobj.external.date.MONTH_NAMES=new Array("January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec");bobj.external.date.DAY_NAMES=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat");bobj.external.date.LZ=function(a){return(a<0||a>9?"":"0")+a};bobj.external.date.isDate=function(f,b){var a=bobj.external.date.getDateFromFormat(f,b);if(!a){return false}return true};bobj.external.date.compareDates=function(k,l,f,g){var b=bobj.external.date.getDateFromFormat(k,l);var a=bobj.external.date.getDateFromFormat(f,g);if(!b||!a){return -1}else{if(b.getTime()>a.getTime()){return 1}}return 0};bobj.external.date.formatDate=function(R,O){O=O+"";var r="";var D=0;var Q="";var g="";var q=R.getFullYear()+"";var l=R.getMonth()+1;var P=R.getDate();var v=R.getDay();var u=R.getHours();var G=R.getMinutes();var z=R.getSeconds();var B,C,b,A,S,f,N,L,I,x,U,u,T,n,a,J;var F=new Object();while(q.length<4){q="0"+q}F.y=""+q;F.yyyy=q;F.yy=q.substring(2,4);F.Y=F.y;F.YY=F.yy;F.YYYY=F.yyyy;F.M=l;F.MM=bobj.external.date.LZ(l);F.MMM=bobj.external.date.MONTH_NAMES[l-1];F.NNN=bobj.external.date.MONTH_NAMES[l+11];F.d=P;F.dd=bobj.external.date.LZ(P);F.D=F.d;F.DD=F.dd;F.E=bobj.external.date.DAY_NAMES[v+7];F.EE=bobj.external.date.DAY_NAMES[v];F.H=u;F.HH=bobj.external.date.LZ(u);if(u==0){F.h=12}else{if(u>12){F.h=u-12}else{F.h=u}}F.hh=bobj.external.date.LZ(F.h);if(u>11){F.K=u-12}else{F.K=u}F.k=u+1;F.KK=bobj.external.date.LZ(F.K);F.kk=bobj.external.date.LZ(F.k);if(u>11){F.a="PM"}else{F.a="AM"}F.m=G;F.mm=bobj.external.date.LZ(G);F.s=z;F.ss=bobj.external.date.LZ(z);while(D<O.length){Q=O.charAt(D);g="";while((O.charAt(D)==Q)&&(D<O.length)){g+=O.charAt(D++)}if(F[g]!=null){r=r+F[g]}else{r=r+g}}return r};bobj.external.date._isInteger=function(f){var b="1234567890";for(var a=0;a<f.length;a++){if(b.indexOf(f.charAt(a))==-1){return false}}return true};bobj.external.date._getInt=function(l,g,k,f){for(var a=f;a>=k;a--){var b=l.substring(g,g+a);if(b.length<k){return null}if(bobj.external.date._isInteger(b)){return b}}return null};bobj.external.date.getDateFromFormat=function(F,v){F=F+"";v=v+"";var E=0;var q=0;var A="";var g="";var D="";var l,k;var m=null;var C=null;var B=null;var a=null;var z=null;var s=null;var n="";while(q<v.length){A=v.charAt(q);g="";while((v.charAt(q)==A)&&(q<v.length)){g+=v.charAt(q++)}if(g=="yyyy"||g=="YYYY"||g=="yy"||g=="YY"||g=="y"||g=="Y"){if(g=="yyyy"||g=="YYYY"){l=4;k=4}if(g=="yy"||g=="YY"){l=2;k=2}if(g=="y"||g=="Y"){l=2;k=4}m=bobj.external.date._getInt(F,E,l,k);if(m==null){return null}E+=m.length;if(m.length==2){if(m>70){m=1900+(m-0)}else{m=2000+(m-0)}}}else{if(g=="MMM"||g=="NNN"){C=0;for(var u=0;u<bobj.external.date.MONTH_NAMES.length;u++){var b=bobj.external.date.MONTH_NAMES[u];if(F.substring(E,E+b.length).toLowerCase()==b.toLowerCase()){if(g=="MMM"||(g=="NNN"&&u>11)){C=u+1;if(C>12){C-=12}E+=b.length;break}}}if((C<1)||(C>12)){return null}}else{if(g=="EE"||g=="E"){for(var u=0;u<bobj.external.date.DAY_NAMES.length;u++){var r=bobj.external.date.DAY_NAMES[u];if(F.substring(E,E+r.length).toLowerCase()==r.toLowerCase()){E+=r.length;break}}}else{if(g=="MM"||g=="M"){C=bobj.external.date._getInt(F,E,g.length,2);if(C==null||(C<1)||(C>12)){return null}E+=C.length}else{if(g=="dd"||g=="DD"||g=="d"||g=="D"){B=bobj.external.date._getInt(F,E,g.length,2);if(B==null||(B<1)||(B>31)){return null}E+=B.length}else{if(g=="hh"||g=="h"){a=bobj.external.date._getInt(F,E,g.length,2);if(a==null||(a<1)||(a>12)){return null}E+=a.length}else{if(g=="HH"||g=="H"){a=bobj.external.date._getInt(F,E,g.length,2);if(a==null||(a<0)||(a>23)){return null}E+=a.length}else{if(g=="KK"||g=="K"){a=bobj.external.date._getInt(F,E,g.length,2);if(a==null||(a<0)||(a>11)){return null}E+=a.length}else{if(g=="kk"||g=="k"){a=bobj.external.date._getInt(F,E,g.length,2);if(a==null||(a<1)||(a>24)){return null}E+=a.length;a--}else{if(g=="mm"||g=="m"){z=bobj.external.date._getInt(F,E,g.length,2);if(z==null||(z<0)||(z>59)){return null}E+=z.length}else{if(g=="ss"||g=="s"){s=bobj.external.date._getInt(F,E,g.length,2);if(s==null||(s<0)||(s>59)){return null}E+=s.length}else{if(g=="a"){if(F.substring(E,E+2).toLowerCase()=="am"){n="AM"}else{if(F.substring(E,E+2).toLowerCase()=="pm"){n="PM"}else{return null}}E+=2}else{if(F.substring(E,E+g.length)!=g){return null}else{E+=g.length}}}}}}}}}}}}}}if(E!=F.length){return null}if(C==2){if(((m%4==0)&&(m%100!=0))||(m%400==0)){if(B>29){return null}}else{if(B>28){return null}}}if((C==4)||(C==6)||(C==9)||(C==11)){if(B>30){return null}}if(a!==null){if(a<12&&n=="PM"){a=a-0+12}else{if(a>11&&n=="AM"){a-=12}}}var f=new Date(m,C-1,B,a,z,s);f.setFullYear(m);return f};_ie=(document.all!=null)?true:false;_dom=(document.getElementById!=null)?true:false;_isQuirksMode=(document.compatMode!="CSS1Compat");_moz=_dom&&!_ie;_show="visible";_hide="hidden";_hand=_ie?"hand":"pointer";_appVer=navigator.appVersion.toLowerCase();_mac=(_appVer.indexOf("macintosh")>=0)||(_appVer.indexOf("macos")>=0);_userAgent=navigator.userAgent?navigator.userAgent.toLowerCase():null;_saf=_moz&&(_userAgent.indexOf("safari")>=0);_ctrl=0;_shift=1;_alt=2;_ie6=_ie&&(_appVer.indexOf("msie 5")<0);var docMode=document.documentMode;var _ie11Up=(docMode>=11);_small=(screen.height<=600);_curDoc=document;_curWin=self;_tooltipWin=self;_tooltipDx=0;_tooltipDy=0;_codeWinName="_CW";_leftBtn=(_ie||_saf)?1:0;_preloadArr=new Array;_widgets=new Array;_resizeW=_ie6?"col-resize":"E-resize";_resizeH=_ie6?"row-resize":"S-resize";_ddData=new Array;_dontNeedEncoding=null;_thex=null;function initDom(g,f,k,b,a){_skin=g;_lang=k;_style=f;if(b){_curWin=b;_curDoc=b.document}_tooltipWin=_curWin;if(a){_codeWinName="_CW"+a}_curWin[_codeWinName]=self}function styleSheet(){includeCSS("style")}function isLayerDisplayed(a){var b=a?a.style:null;if(b){if(b.display=="none"||b.visibility=="hidden"){return false}else{var f=a.parentNode;if(f!=null){return isLayerDisplayed(f)}else{return true}}}else{return true}}function safeSetFocus(a){if(a&&a.focus&&isLayerDisplayed(a)){a.focus()}}function newWidget(b){var a=new Object;a.id=b;a.layer=null;a.css=null;a.getHTML=Widget_getHTML;a.beginHTML=Widget_getHTML;a.endHTML=Widget_getHTML;a.write=Widget_write;a.begin=Widget_begin;a.end=Widget_end;a.init=Widget_init;a.move=Widget_move;a.resize=Widget_resize;a.setBgColor=Widget_setBgColor;a.show=Widget_show;a.getWidth=Widget_getWidth;a.getHeight=Widget_getHeight;a.setHTML=Widget_setHTML;a.setDisabled=Widget_setDisabled;a.focus=Widget_focus;a.setDisplay=Widget_setDisplay;a.isDisplayed=Widget_isDisplayed;a.appendHTML=Widget_appendHTML;a.setTooltip=Widget_setTooltip;a.initialized=Widget_initialized;a.widx=_widgets.length;_widgets[a.widx]=a;return a}function Widget_appendHTML(){append(_curDoc.body,this.getHTML())}function Widget_getHTML(){return""}function Widget_write(a){_curDoc.write(this.getHTML(a))}function Widget_begin(){_curDoc.write(this.beginHTML())}function Widget_end(){_curDoc.write(this.endHTML())}function Widget_init(){var a=this;a.layer=getLayer(a.id);a.css=a.layer.style;a.layer._widget=a.widx;if(a.initialHTML){a.setHTML(a.initialHTML)}}function Widget_move(a,f){var b=this.css;if(a!=null){if(_moz){b.left=""+a+"px"}else{b.pixelLeft=a}}if(f!=null){if(_moz){b.top=""+f+"px"}else{b.pixelTop=f}}}function Widget_focus(){safeSetFocus(this.layer)}function Widget_setBgColor(a){this.css.backgroundColor=a}function Widget_show(a){this.css.visibility=a?_show:_hide}function Widget_getWidth(){return this.layer.offsetWidth}function Widget_getHeight(){return this.layer.offsetHeight}function Widget_setHTML(a){var b=this;if(b.layer){b.layer.innerHTML=a}else{b.initialHTML=a}}function Widget_setDisplay(a){if(this.css){this.css.display=a?"":"none"}}function Widget_isDisplayed(){if(this.css.display=="none"){return false}else{return true}}function Widget_setDisabled(a){if(this.layer){this.layer.disabled=a}}function Widget_resize(a,b){if(a!=null){this.css.width=""+(Math.max(0,a))+"px"}if(b!=null){this.css.height=""+(Math.max(0,b))+"px"}}function Widget_setTooltip(a){this.layer.title=a}function Widget_initialized(){return this.layer!=null}function newGrabberWidget(a,g,m,l,n,k,f,b,q){o=newWidget(a);o.resizeCB=g;o.x=m;o.y=l;o.w=n;o.h=k;o.dx=0;o.dy=0;o.min=null;o.max=null;o.isHori=f;o.preloaded=new Image;o.preloaded.src=_skin+"../resizepattern.gif";o.buttonCB=b;o.allowGrab=true;o.collapsed=false;o.isFromButton=false;o.showGrab=GrabberWidget_showGrab;o.setCollapsed=GrabberWidget_setCollapsed;o.tooltipButton=q;o.getHTML=GrabberWidget_getHTML;o.enableGrab=GrabberWidget_enableGrab;o.setMinMax=GrabberWidget_setMinMax;if(window._allGrabbers==null){window._allGrabbers=new Array}o.index=_allGrabbers.length;_allGrabbers[o.index]=o;o.buttonLyr=null;o.setButtonImage=GrabberWidget_setButtonImage;o.getImgOffset=GrabberWidget_getImgOffset;return o}function GrabberWidget_setCollapsed(b,a){this.collapsed=b;this.setButtonImage(false,a)}function GrabberWidget_getImgOffset(a){var b=this;if(b.isHori){b.dx=(b.collapsed?12:0)+(a?6:0);b.dy=0}else{b.dy=(b.collapsed?12:0)+(a?6:0);b.dx=0}}function GrabberWidget_setButtonImage(a,b){var f=this;f.getImgOffset(a);f.tooltipButton=b;if(f.layer){if(f.buttonLyr==null){f.buttonLyr=getLayer("grabImg_"+f.id)}if(f.buttonLyr){changeSimpleOffset(f.buttonLyr,f.dx,f.dy,null,b)}}}function GrabberWidget_enableGrab(a){var b=this;b.allowGrab=a;if(b.css){b.css.cursor=b.allowGrab?(b.isHori?_resizeW:_resizeH):"default"}}function GrabberWidget_getHTML(){var g=this,f=g.isHori;var b=g.allowGrab?(f?_resizeW:_resizeH):"default";var l='onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+".GrabberWidget_down(event,'"+g.index+"',this);return false;\"";var k=_ie?('<img onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_skin+'../transp.gif" id="modal_'+g.id+'" style="z-index:10000;display:none;position:absolute;top:0px;left:0px;width:1px;height:1px;cursor:'+b+'">'):('<div onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" id="modal_'+g.id+'" style="z-index:10000;display:none;position:absolute;top:0px;left:0px;width:1px;height:1px;cursor:'+b+'"></div>');var a=g.buttonCB?(_skin+(f?"h":"v")+"grab.gif"):"";if(a){a=simpleImgOffset(a,f?6:50,f?50:6,g.dx,g.dy,"grabImg_"+g.id,'onmouseover="'+_codeWinName+".GrabberWidget_buttonover(event,'"+g.index+'\',this);return false;" onmouseout="'+_codeWinName+".GrabberWidget_buttonout(event,'"+g.index+'\',this);return false;" onmousedown="'+_codeWinName+".GrabberWidget_button(event,'"+g.index+"',this);return false;\"",g.tooltipButton,"cursor:"+_hand+";")}return getBGIframe("grabIframe_"+g.id)+k+'<table cellpadding="0" cellspacing="0" border="0" '+l+' id="'+g.id+'" style="overflow:hidden;position:absolute;left:'+g.x+"px;top:"+g.y+"px;width:"+g.w+"px;height:"+g.h+"px;cursor:"+b+'"><tr><td align="center" valign="middle">'+a+"</td></table>"}function GrabberWidget_setMinMax(b,a){this.min=b;this.max=a}function GrabberWidget_button(e,index,lyr){var o=_allGrabbers[index];o.isFromButton=true;lyr.onmouseup=eval("_curWin."+_codeWinName+".GrabberWidget_buttonup")}function GrabberWidget_buttonover(f,b,a){var g=_allGrabbers[b];g.setButtonImage(true)}function GrabberWidget_buttonout(f,b,a){var g=_allGrabbers[b];g.setButtonImage(false)}function GrabberWidget_buttonup(a){GrabberWidget_up(a)}function GrabberWidget_showGrab(){var g=this,f=g.mod,k=g.iframe,b=g.layer.style,a=f.style;k.setDisplay(true)}function GrabberWidget_down(e,index,lyr){var o=_allGrabbers[index];window._theGrabber=o;if(o.mod==null){o.mod=getLayer("modal_"+o.id);o.iframe=newWidget("grabIframe_"+o.id);o.iframe.init()}o.mod.onmousemove=eval("_curWin."+_codeWinName+".GrabberWidget_move");o.mod.onmouseup=eval("_curWin."+_codeWinName+".GrabberWidget_up");o.grabStartPosx=parseInt(lyr.style.left);o.grabStartPosy=parseInt(lyr.style.top);o.grabStartx=eventGetX(e);o.grabStarty=eventGetY(e);var mod=o.mod,ifr=o.iframe,stl=o.layer.style,st=mod.style;stl.backgroundImage="url('"+_skin+"../resizepattern.gif')";o.prevZ=stl.zIndex;stl.zIndex=9999;ifr.css.zIndex=9998;st.width="100%";st.height="100%";mod.style.display="block";var p=getPos(o.layer);ifr.move(p.x,p.y);ifr.resize(o.getWidth(),o.getHeight());if(!o.isFromButton){o.showGrab()}return false}function GrabberWidget_move(l){var f=_theGrabber,k=f.layer,n=f.mod;if(f.isFromButton){if(f.isHori){var q=eventGetX(l),g=f.grabStartx;if((q<g-3)||(q>g+3)){f.isFromButton=false}}else{var a=eventGetY(l),b=f.grabStarty;if((m<b-3)||(m>b+3)){f.isFromButton=false}}if(!f.isFromButton){f.showGrab()}}if(!f.isFromButton){if(f.allowGrab){var q=f.isHori?Math.max(0,f.grabStartPosx-f.grabStartx+eventGetX(l)):null;var m=f.isHori?null:Math.max(0,f.grabStartPosy-f.grabStarty+eventGetY(l));if(f.isHori){if(f.min!=null){q=Math.max(q,f.min)}if(f.max!=null){q=Math.min(q,f.max)}}else{if(f.min!=null){m=Math.max(m,f.min)}if(f.max!=null){m=Math.min(m,f.max)}}eventCancelBubble(l);f.move(q,m);getPos(f.layer);if(f.buttonCB){var r=f.buttonLyr.style;if(r.display!="none"){r.display="none"}}f.iframe.move(q,m)}}}function GrabberWidget_up(k){var l=_theGrabber,b=l.layer,g=l.mod,f=b.style;f.backgroundImage="";f.zIndex=l.prevZ;var m=l.iframe;m.move(-100,-100);m.resize(1,1);m.setDisplay(false);eventCancelBubble(k);var a=g.style;a.display="none";a.width="0px";a.height="0px";if(l.buttonCB){l.buttonLyr.style.display=""}if(l&&(l.isFromButton)){if(l.buttonCB){l.buttonCB()}l.isFromButton=false}if(l.allowGrab&&(!l.isFromButton)){if(l.resizeCB){l.resizeCB(parseInt(b.style.left),parseInt(b.style.top))}}}function newButtonWidget(f,u,n,g,l,A,m,q,b,v,s,z,x,r,a,y){var k=newWidget(f);k.label=u;k.cb=n;k.width=g;k.hlp=l;k.tooltip=A;k.tabIndex=m;k.isGray=false;k.isDefault=false;k.txt=null;k.icn=null;k.margin=q?q:0;k.extraStyle="";if(b){k.url=b;k.w=v;k.h=s;k.dx=z;k.dy=x;k.disDx=(a!=null)?a:z;k.disDy=(y!=null)?y:x;k.imgRight=r?true:false}k.getHTML=ButtonWidget_getHTML;k.setDisabled=ButtonWidget_setDisabled;k.setText=ButtonWidget_setText;k.changeImg=ButtonWidget_changeImg;k.oldInit=k.init;k.init=ButtonWidget_init;k.isDisabled=ButtonWidget_isDisabled;k.setDefaultButton=ButtonWidget_setDefaultButton;k.executeCB=ButtonWidget_executeCB;k.setTooltip=ButtonWidget_setTooltip;k.instIndex=ButtonWidget_currInst;ButtonWidget_inst[ButtonWidget_currInst++]=k;return k}ButtonWidget_inst=new Array;ButtonWidget_currInst=0;function ButtonWidget_getHTML(){with(this){var clk=_codeWinName+".ButtonWidget_clickCB("+this.instIndex+');return false;"';var clcbs='onclick="'+clk+'" ';if(_ie){clcbs+='ondblclick="'+clk+'" '}var isDefaultSty=(this.isDefault&&!this.isGray);clcbs+='onkeydown=" return '+_codeWinName+".ButtonWidget_keydownCB(event,"+this.instIndex+');" ';var url1=_skin+"button.gif",addPar=' style="'+extraStyle+"cursor:"+_hand+";margin-left:"+margin+"px; margin-right:"+margin+'px; "'+clcbs+" ",tip=attr("title",tooltip),idText="theBttn"+id,idIcon="theBttnIcon"+id;var bg=backImgOffset(url1,0,isDefaultSty?105:42);var lnkB="<a "+attr("id",idText)+" "+tip+" "+attr("tabindex",tabIndex)+' href="javascript:void(0)" class="wizbutton">';var l=(label!=null);var im=(this.url?('<td align="'+(l?(this.imgRight?"right":"left"):"center")+'" style="'+bg+'" width="'+(!l&&(width!=null)?width+6:w+6)+'">'+(l?"":lnkB)+simpleImgOffset(url,w,h,this.isGray?disDs:dx,this.isGray?disDy:dy,idIcon,null,(l?"":tooltip),"cursor:"+_hand)+(l?"":"</a>")+"</td>"):"");return'<table onmouseover="return true" '+attr("id",id)+" "+addPar+' border="0" cellspacing="0" cellpadding="0"><tr valign="middle"><td height="21" width="5" style="'+backImgOffset(url1,0,isDefaultSty?63:0)+'"></td>'+(this.imgRight?"":im)+(l?("<td "+attr("width",width)+attr("id","theBttnCenterImg"+id)+' align="center" class="'+(this.isGray?"wizbuttongray":"wizbutton")+'" style="padding-left:3px;padding-right:3px;'+bg+'"><nobr>'+lnkB+label+"</a></nobr></td>"):"")+(this.imgRight?im:"")+'<td height="21" width="5" style="'+backImgOffset(url1,0,isDefaultSty?84:21)+'"></td></tr></table>'}}function ButtonWidget_setDisabled(l){var k=this,g=l?"default":_hand;k.isGray=l;if(k.layer){var b=l?"wizbuttongray":"wizbutton";if(k.txt.className!=b){k.txt.className=b;k.txt.style.cursor=g;k.css.cursor=g;if(k.icn){changeSimpleOffset(k.icn,k.isGray?k.disDx:k.dx,k.isGray?k.disDy:k.dy);k.icn.style.cursor=g}if(k.isDefault){var a=!l,f=_skin+"button.gif";changeSimpleOffset(k.leftImg,0,a?63:0,f);changeOffset(k.centerImg,0,a?105:42,f);changeSimpleOffset(k.rightImg,0,a?84:21,f)}}}}function ButtonWidget_setDefaultButton(){var f=this;if(f.layer){var a=!f.isGray,b=_skin+"button.gif";changeSimpleOffset(f.leftImg,0,a?63:0,b);changeOffset(f.centerImg,0,a?105:42,b);changeSimpleOffset(f.rightImg,0,a?84:21,b)}f.isDefault=true}function ButtonWidget_isDisabled(){return this.isGray}function ButtonWidget_setText(a){this.txt.innerHTML=convStr(a)}function ButtonWidget_setTooltip(a){var b=this;b.tooltip=a;b.layer.title=a;if(b.txt){b.txt.title=a}if(b.icn){b.icn.title=a}}function ButtonWidget_init(){var b=this;b.oldInit();b.txt=getLayer("theBttn"+this.id);b.icn=getLayer("theBttnIcon"+this.id);b.leftImg=getLayer("theBttnLeftImg"+this.id);b.centerImg=getLayer("theBttnCenterImg"+this.id);b.rightImg=getLayer("theBttnRightImg"+this.id);var a=b.isGray?"wizbuttongray":"wizbutton";if(b.txt.className!=a){b.setDisabled(b.isGray)}}function ButtonWidget_changeImg(b,a,k,g,f,l){var m=this;if(f){m.url=f}if(b!=null){m.dx=b}if(a!=null){m.dy=a}if(k!=null){m.disDx=k}if(g!=null){m.disDy=g}if(l!=null){m.tooltip=l}if(m.icn){changeSimpleOffset(m.icn,m.isGray?m.disDx:m.dx,m.isGray?m.disDy:m.dy,m.url,m.tooltip)}}function ButtonWidget_clickCB(a){var b=ButtonWidget_inst[a];if(b&&!b.isGray){setTimeout("ButtonWidget_delayClickCB("+a+")",1)}}function ButtonWidget_delayClickCB(a){var b=ButtonWidget_inst[a];b.executeCB()}function ButtonWidget_executeCB(){var o=this;if(o.cb){if(typeof o.cb!="string"){o.cb()}else{eval(o.cb)}}}function ButtonWidget_keydownCB(g,b){var a=eventGetKey(g);var f=ButtonWidget_inst[b];if(a==13&&f.cb){eventCancelBubble(g)}return true}function newScrolledZoneWidget(m,f,k,b,g,a){var l=newWidget(m);l.borderW=f;l.padding=k;l.w=b;l.h=g;l.oldResize=l.resize;l.beginHTML=ScrolledZoneWidget_beginHTML;l.endHTML=ScrolledZoneWidget_endHTML;l.resize=ScrolledZoneWidget_resize;l.bgClass=(a)?a:"insetBorder";return l}function ScrolledZoneWidget_beginHTML(){var a=this.w,b=this.h;var f=_moz?2*(this.borderW+this.padding):0;if(typeof(a)=="number"){if(_moz){a=Math.max(0,a-f)}a=""+a+"px"}if(typeof(b)=="number"){if(_moz){b=Math.max(0,b-f)}b=""+b+"px"}return'<div align="left" onselectstart="return false" class="'+this.bgClass+'" id="'+this.id+'" style="border-width:'+this.borderW+"px;padding:"+this.padding+"px;"+sty("width",a)+sty("height",b)+'overflow:auto">'}function ScrolledZoneWidget_endHTML(){return"</div>"}function ScrolledZoneWidget_resize(a,b){if(_moz){var f=2*(this.borderW+this.padding);if(a!=null){a=Math.max(0,a-f)}if(b!=null){b=Math.max(0,b-f)}}this.oldResize(a,b)}function newComboWidget(l,k,a,b,f){var g=newWidget(l);g.tooltip=f;g.size=1;g.getHTML=ComboWidget_getHTML;g.beginHTML=ComboWidget_beginHTML;g.endHTML=ComboWidget_endHTML;g.changeCB=k;g.noMargin=a;g.width=b==null?null:""+b+"px";g.add=ComboWidget_add;g.del=ComboWidget_del;g.getSelection=ComboWidget_getSelection;g.select=ComboWidget_select;g.valueSelect=ComboWidget_valueSelect;g.getCount=ComboWidget_getCount;g.oldSetDisabled=g.setDisabled;g.setDisabled=ComboWidget_setDisabled;g.setUndefined=ComboWidget_setUndefined;g.delByID=ComboWidget_delByID;g.move=ComboWidget_move;g.findByValue=ComboWidget_findByValue;g.findByText=ComboWidget_findByText;g.getValue=ComboWidget_getValue;g.isGrayed=ComboWidget_isGrayed;g.isDisabled=false;g.multi=false;g.undef=false;g.isCombo=true;g.undefId=g.id+"__undef";g.disabledId=g.id+"__disabled";return g}_extrCmbS=(_moz?"font-size:12px;":"");function ComboWidget_beginHTML(){var b=this,a=((_moz&&!b.isCombo)?"font-size:12px;":"");return"<select "+(b.multi?"multiple":"")+" "+(b.noMargin?'style="'+sty("width",b.width)+a+'"':'style="'+sty("width",b.width)+"margin-left:10px;"+a+'"')+' class="listinputs" '+attr("onchange",_codeWinName+".ComboWidget_changeCB(event,this)")+attr("onclick",_codeWinName+".ComboWidget_clickCB(event,this)")+attr("ondblclick",_codeWinName+".ComboWidget_dblClickCB(event,this)")+attr("onkeyup",_codeWinName+".ComboWidget_keyUpCB(event,this)")+attr("onkeydown",_codeWinName+".ComboWidget_keyDownCB(event,this)")+attr("id",b.id)+attr("name",b.id)+attr("title",b.tooltip)+'size="'+b.size+'">'}function ComboWidget_endHTML(){return"</select>"}function ComboWidget_getHTML(a){return this.beginHTML()+(a?a:"")+this.endHTML()}function ComboWidget_add(b,l,f,m,k){var g=this.layer,a=_curDoc.createElement("option");if(_ie){g.options.add(a)}else{g.appendChild(a)}if(a.innerText!=null){a.innerText=b}else{a.innerHTML=convStr(b)}a.value=l;if(m!=null){a.id=m}if(f){a.selected=true}if(k){a.style.color="gray"}return a}function ComboWidget_move(v){var n=this.layer,f=n.selectedIndex,l=n.options.length-1,r=f+v;if((f==-1)||(r<0)||(r>l)){return false}var s=n.options[f],b=n.options[r];var u=s.value,a=s.innerHTML,k=s.id,m=b.id,g=s.style.color,q=b.style.color;s.value=b.value;s.innerHTML=b.innerHTML;b.id=null;s.id=b.id;s.style.color=q;b.value=u;b.innerHTML=a;b.id=k;b.style.color=g;n.selectedIndex=r;return true}function ComboWidget_getSelection(){var f=this.layer,b=f.selectedIndex;if(b<0){return null}var a=new Object;a.index=b;a.value=f.options[b].value;a.text=f.options[b].text;return a}function ComboWidget_select(b){var g=this,f=g.layer,a=f.options.length;if(b==null){f.selectedIndex=-1}if((b<0)||(b>=a)){b=a-1}if(b>=0){f.selectedIndex=b}g.setUndefined(false)}function ComboWidget_valueSelect(b){var l=this,k=l.layer,g=k.options,a=g.length;for(var f=0;f<a;f++){if(g[f].value==b){g[f].selected=true;l.setUndefined(false);break}}}function ComboWidget_del(a){var b=this.layer;if(a==null){b.options.length=0}else{if(_ie){b.remove(a)}else{b.options[a]=null}this.select(a)}}function ComboWidget_changeCB(b,a){var f=getWidget(a);if(f.changeCB){f.changeCB(b)}}function ComboWidget_clickCB(b,a){var f=getWidget(a);if(f.clickCB){f.clickCB(b)}}function ComboWidget_dblClickCB(b,a){var f=getWidget(a);if(f.dblClickCB){f.dblClickCB(b)}}function ComboWidget_keyUpCB(b,a){var f=getWidget(a);if(f.keyUpCB){f.keyUpCB(b)}}function ComboWidget_keyDownCB(f,a){var b=eventGetKey(f);var g=getWidget(a);if(g.isCombo&&(b==27||b==13)){eventCancelBubble(f)}else{if(b==13&&g.keyUpCB){eventCancelBubble(f)}}}function ComboWidget_getCount(){return this.layer.options.length}function ComboWidget_delByID(b){var a=getLayer(b);if(a!=null){this.del(a.index)}a=null}function ComboWidget_setDisabled(g,b){var f=this;f.oldSetDisabled(g);f.isDisabled=g;if(g==true){var a=getLayer(f.disabledId);if(a==null){f.add("","",true,f.disabledId)}else{f.layer.selectedIndex=a.index}}else{f.delByID(f.disabledId)}}function ComboWidget_setUndefined(b){var f=this;f.undef=b;if(b==true){var a=getLayer(f.undefId);if(a==null){f.add("","",true,f.undefId)}else{f.layer.selectedIndex=a.index}}else{f.delByID(f.undefId)}}function ComboWidget_findByValue(m){var l=this,k=l.layer,g=k.options,a=g.length;for(var f=0;f<a;f++){if(g[f].value==m){var b=new Object;b.index=f;b.value=k.options[f].value;b.text=k.options[f].text;return b}}return null}function ComboWidget_findByText(b){var m=this,l=m.layer,k=l.options,a=k.length;for(var g=0;g<a;g++){if(k[g].text==b){var f=new Object;f.index=g;f.value=l.options[g].value;f.text=l.options[g].text;return f}}return null}function ComboWidget_getValue(f){var l=this,k=l.layer,g=k.options,a=g.length;if(f==null||f<0||f>a){return null}var b=new Object;b.index=f;b.value=k.options[f].value;return b}function ComboWidget_isGrayed(b){var k=this,g=k.layer,f=g.options,a=f.length;if(b==null||b<0||b>a){return false}return(g.options[b].style.color=="gray")}function newListWidget(a,l,k,b,r,q,m,g,n){var f=newComboWidget(a,l,true,b,q);f.clickCB=n;f.dblClickCB=m;f.keyUpCB=g;f.size=r;f.multi=k;f.getMultiSelection=ListWidget_getMultiSelection;f.setUndefined=ListWidget_setUndefined;f.isUndefined=ListWidget_isUndefined;f.change=ListWidget_change;f.isCombo=false;return f}function ListWidget_setUndefined(a){var b=this;b.undef=a;if(a==true){b.layer.selectedIndex=-1}}function ListWidget_isUndefined(){return(this.layer.selectedIndex==-1)}function ListWidget_getMultiSelection(){var l=this.layer,k=new Array,a=l.options.length;for(var g=0;g<a;g++){var f=l.options[g];if(f.selected){var b=new Object;b.index=g;b.value=f.value;b.text=f.text;k[k.length]=b}}return k}function ListWidget_change(b,a){var f=this;if(b!=null){f.multi=b;f.layer.multiple=b}if(a!=null){f.size=a;f.layer.size=a}}function newInfoWidget(l,k,b,g,a){var f=newWidget(l);f.title=k?k:"";f.boldTitle=b?b:"";f.text=g?g:"";f.height=(a!=null)?a:55;f.getHTML=InfoWidget_getHTML;f.setText=InfoWidget_setText;f.setTitle=InfoWidget_setTitle;f.setTitleBold=InfoWidget_setTitleBold;f.oldResize=f.resize;f.resize=InfoWidget_resize;f.textLayer=null;return f}function InfoWidget_setText(g,b){var f=this;g=g?g:"";f.text=g;if(f.layer){var a=f.textLayer;if(a==null){a=f.textLayer=getLayer("infozone_"+f.id)}if(a){a.innerHTML=b?g:convStr(g,false,true)}}}function InfoWidget_setTitle(f){var b=this;f=f?f:"";b.title=f;if(b.layer){var a=b.titleLayer;if(a==null){a=b.titleLayer=getLayer("infotitle_"+b.id)}if(a){a.innerHTML=convStr(f)}}}function InfoWidget_setTitleBold(f){var b=this;f=f?f:"";b.boldTitle=f;if(b.layer){var a=b.titleLayerBold;if(a==null){a=b.titleLayerBold=getLayer("infotitlebold_"+b.id)}if(a){a.innerHTML=convStr(f)}}}function InfoWidget_getHTML(){var a=this;return'<div class="dialogzone" align="left" style="overflow:hidden;'+sty("width",a.width)+sty("height",""+a.height+"px")+'" id="'+a.id+'"><nobr>'+img(_skin+"../help.gif",16,16,"top",null,_helpLab)+'<span class="dialogzone" style="padding-left:5px" id="infotitle_'+a.id+'">'+convStr(a.title)+'</span><span style="padding-left:5px" class="dialogzonebold" id="infotitlebold_'+a.id+'">'+convStr(a.boldTitle)+"</span></nobr><br>"+getSpace(1,2)+'<div class="infozone" align="left" id="infozone_'+a.id+'" style="height:'+(a.height-18-(_moz?10:0))+"px;overflow"+(_ie?"-y":"")+':auto">'+convStr(a.text,false,true)+"</div></div>"}function InfoWidget_resize(b,f){var g=this;if(b!=null){g.w=b}if(f!=null){g.h=f}g.oldResize(b,f);if(g.layer){var a=g.textLayer;if(a==null){a=g.textLayer=getLayer("infozone_"+g.id)}if(a){if(g.h!=null){a.style.height=""+Math.max(0,g.h-(_ie?18:28))+"px"}}}}function newCheckWidget(a,n,l,k,q,m,g,f){var b=newWidget(a);b.text=n;b.convText=f;b.changeCB=l;b.idCheckbox="check_"+a;b.checkbox=null;b.kind="checkbox";b.name=b.idCheckbox;b.bold=k;b.imgUrl=q;b.imgW=m;b.imgH=g;b.getHTML=CheckWidget_getHTML;b.setText=CheckWidget_setText;b.parentInit=Widget_init;b.init=CheckWidget_init;b.check=CheckWidget_check;b.isChecked=CheckWidget_isChecked;b.setDisabled=CheckWidget_setDisabled;b.isDisabled=CheckWidget_isDisabled;b.uncheckOthers=CheckWidget_uncheckOthers;b.isIndeterminate=CheckWidget_isIndeterminate;b.setIndeterminate=CheckWidget_setIndeterminate;b.layerClass=("dialogzone"+(b.bold?"bold":""));b.nobr=true;return b}function CheckWidget_getHTML(){var b=this,a=b.layerClass;return'<table border="0" onselectstart="return false" cellspacing="0" cellpadding="0" class="'+a+'"'+attr("id",b.id)+'><tr valign="middle"><td style="height:20px;width:21px"><input style="margin:'+(_moz?3:0)+'px" onclick="'+_codeWinName+'.CheckWidget_changeCB(event,this)" type="'+b.kind+'"'+attr("id",b.idCheckbox)+attr("name",b.name)+"></td>"+(b.imgUrl?'<td><label style="padding-left:2px" for="'+b.idCheckbox+'">'+img(b.imgUrl,b.imgW,b.imgH)+"</label></td>":"")+"<td>"+(b.nobr?"<nobr>":"")+'<label style="padding-left:'+(b.imgUrl?4:2)+'px" id="label_'+b.id+'" for="'+b.idCheckbox+'">'+(b.convText?convStr(b.text):b.text)+"</label>"+(b.nobr?"</nobr>":"")+"</td></tr></table>"}function CheckWidget_setText(a){var b=this;b.text=a;if(b.layer){if(b.labelLyr==null){b.labelLyr=getLayer("label_"+b.id)}b.labelLyr.innerHTML=b.convText?convStr(a):a}}function CheckWidget_init(){this.parentInit();this.checkbox=getLayer(this.idCheckbox)}function CheckWidget_check(a){this.checkbox.checked=a;if(a){this.uncheckOthers()}}function CheckWidget_isChecked(){return this.checkbox.checked}function CheckWidget_changeCB(b,a){var f=getWidget(a);f.uncheckOthers();if(f.changeCB){f.changeCB(b)}}function CheckWidget_setDisabled(a){this.checkbox.disabled=a;if(_moz){this.checkbox.className=(a?"dialogzone":"")}}function CheckWidget_isDisabled(){return this.checkbox.disabled}function CheckWidget_uncheckOthers(){}function CheckWidget_isIndeterminate(){return this.checkbox.indeterminate}function CheckWidget_setIndeterminate(a){this.checkbox.indeterminate=a}function newRadioWidget(a,r,s,n,m,u,q,k,f){var b=newCheckWidget(a,s,n,m,u,q,k,f);b.kind="radio";b.name=r;if(_RadioWidget_groups[r]==null){_RadioWidget_groups[r]=new Array}b.groupInstance=_RadioWidget_groups[r];var l=b.groupInstance;b.groupIdx=l.length;l[l.length]=b;b.uncheckOthers=RadioWidget_uncheckOthers;return b}var _RadioWidget_groups=new Array;function RadioWidget_uncheckOthers(){var k=this.groupInstance,b=this.groupIdx,a=k.length;for(var f=0;f<a;f++){if(f!=b){var l=k[f].checkbox;if(l){l.checked=false}}}}function newTextFieldWidget(f,m,r,l,q,b,s,g,a,n){var k=newWidget(f);k.tooltip=s;k.changeCB=m;k.maxChar=r;k.keyUpCB=l;k.enterCB=q;k.noMargin=b;k.width=g==null?null:""+g+"px";k.focusCB=a;k.blurCB=n;k.disabled=false;k.getHTML=TextFieldWidget_getHTML;k.getValue=TextFieldWidget_getValue;k.setValue=TextFieldWidget_setValue;k.intValue=TextFieldWidget_intValue;k.intPosValue=TextFieldWidget_intPosValue;k.select=TextFieldWidget_select;k.setDisabled=TextFieldWidget_setDisabled;k.beforeChange=null;k.wInit=k.init;k.init=TextFieldWidget_init;k.oldValue="";k.helpTxt="";k.isHelpTxt=false;k.setHelpTxt=TextFieldWidget_setHelpTxt;k.eraseHelpTxt=TextFieldWidget_eraseHelpTxt;k.enterCancelBubble=true;return k}function TextFieldWidget_setDisabled(b){var a=this;a.disabled=b;if(a.layer){a.layer.disabled=b}}function TextFieldWidget_init(){var a=this;a.wInit();a.layer.value=""+(a.oldValue!="")?a.oldValue:"";if(a.helpTxt&&!a.oldValue){a.setHelpTxt(a.helpTxt)}}function TextFieldWidget_getHTML(){var a=this;return"<input"+(a.disabled?" disabled":"")+' oncontextmenu="event.cancelBubble=true;return true" style="'+sty("width",this.width)+(_moz?"margin-top:1px;margin-bottom:1px;padding-left:2px;padding-right:2px;":"")+(_isQuirksMode?"height:18px;":"height:14px;")+"margin-left:"+(this.noMargin?0:10)+'px" onfocus="'+_codeWinName+'.TextFieldWidget_focus(this)" onblur="'+_codeWinName+'.TextFieldWidget_blur(this)" onchange="'+_codeWinName+'.TextFieldWidget_changeCB(event,this)" onkeydown=" return '+_codeWinName+'.TextFieldWidget_keyDownCB(event,this);" onkeyup=" return '+_codeWinName+'.TextFieldWidget_keyUpCB(event,this);" onkeypress=" return '+_codeWinName+'.TextFieldWidget_keyPressCB(event,this);" type="text" '+attr("maxLength",this.maxChar)+' ondragstart="event.cancelBubble=true;return true" onselectstart="event.cancelBubble=true;return true" class="textinputs" id="'+this.id+'" name="'+this.id+'"'+attr("title",this.tooltip)+' value="">'}function TextFieldWidget_getValue(){var a=this;if(a.isHelpTxt){return""}else{return a.layer?a.layer.value:a.oldValue}}function TextFieldWidget_setValue(a){var b=this;if(b.layer){b.eraseHelpTxt();b.layer.value=""+a}else{b.oldValue=a}}function TextFieldWidget_changeCB(b,a){var f=getWidget(a);f.eraseHelpTxt();if(f.beforeChange){f.beforeChange()}if(f.changeCB){f.changeCB(b)}}function TextFieldWidget_keyPressCB(b,a){var f=getWidget(a);if(eventGetKey(b)==13){f.enterKeyPressed=true;return false}else{f.enterKeyPressed=false}return true}function TextFieldWidget_keyUpCB(b,a){var f=getWidget(a);f.eraseHelpTxt();if(eventGetKey(b)==13&&f.enterKeyPressed){if(f.beforeChange){f.beforeChange()}if(f.enterCB){if(f.enterCancelBubble){eventCancelBubble(b)}f.enterCB(b)}return false}else{if(f.keyUpCB){f.keyUpCB(b)}}f.enterKeyPressed=false;return true}function TextFieldWidget_keyDownCB(b,a){var f=getWidget(a);f.eraseHelpTxt();f.enterKeyPressed=false;if(eventGetKey(b)==13){return true}else{if(eventGetKey(b)==8){eventCancelBubble(b)}}return true}function TextFieldWidget_eraseHelpTxt(){var a=this;if(a.isHelpTxt){a.layer.value=""}a.isHelpTxt=false;a.layer.style.color="black"}function TextFieldWidget_focus(a){var b=getWidget(a);b.eraseHelpTxt();if(b.focusCB){b.focusCB()}}function TextFieldWidget_blur(a){var b=getWidget(a);if(b.beforeChange){b.beforeChange()}if(b.blurCB){b.blurCB()}}function TextFieldWidget_intValue(a){var b=parseInt(this.getValue());return isNaN(b)?a:b}function TextFieldWidget_intPosValue(a){var b=this.intValue(a);return(b<0)?a:b}function TextFieldWidget_select(){this.layer.select()}function TextFieldWidget_setHelpTxt(a){var b=this;b.helpTxt=a;if(b.layer&&(b.layer.value=="")){b.isHelpTxt=true;b.layer.value=a;b.layer.style.color="#808080"}}function newIntFieldWidget(f,m,q,l,n,b,r,g,a){var k=newTextFieldWidget(f,m,q,l,n,b,r,g);k.min=-Number.MAX_VALUE;k.max=Number.MAX_VALUE;k.customCheckCB=a;k.setMin=IntFieldWidget_setMin;k.setMax=IntFieldWidget_setMax;k.setValue=IntFieldWidget_setValue;k.beforeChange=IntFieldWidget_checkChangeCB;k.value="";return k}function IntFieldWidget_setMin(a){if(!isNaN(a)){this.min=a}}function IntFieldWidget_setMax(a){if(!isNaN(a)){this.max=a}}function IntFieldWidget_setValue(b){var f=this,a=f.layer;b=""+b;if(b==""){if(a){a.value=""}f.oldValue="";return}var g=parseInt(b);value="";if(!isNaN(g)&&(g>=f.min)&&(g<=f.max)&&((f.customCheckCB==null)||f.customCheckCB(g))){value=g;f.oldValue=value}else{if(f.oldValue){value=f.oldValue}}if(a){a.value=""+value}}function IntFieldWidget_checkChangeCB(){var a=this;a.setValue(a.layer.value)}function newFrameZoneWidget(k,a,f,b){var g=newWidget(k);g.w=(a!=null)?""+Math.max(0,a-10)+"px":null;g.h=(f!=null)?""+Math.max(0,f-10)+"px":null;g.reverse=(b!=null)?b:false;g.cont=null;g.beginHTML=FrameZoneWidget_beginHTML;g.endHTML=FrameZoneWidget_endHTML;g.oldResize=g.resize;g.resize=FrameZoneWidget_resize;return g}function FrameZoneWidget_resize(a,b){var g=this;var f=g.layer.display!="none";if(f&_moz&&!_saf){g.setDisplay(false)}g.oldResize(a,b);if(f&_moz&&!_saf){g.setDisplay(true)}}function FrameZoneWidget_beginHTML(){var a=this;return'<table  style="'+sty("width",a.w)+sty("height",a.h)+'" id="'+a.id+'" cellspacing="0" cellpadding="0" border="0"><tbody><tr height="5"><td width="5">'+imgOffset(_skin+"dialogframe.gif",5,5,a.reverse?10:0,0)+'</td><td style="'+backImgOffset(_skin+"dialogframetopbottom.gif",0,a.reverse?10:0)+'"></td><td width="5">'+imgOffset(_skin+"dialogframe.gif",5,5,a.reverse?15:5,0)+'</td></tr><tr><td style="'+backImgOffset(_skin+"dialogframeleftright.gif",a.reverse?10:0,0)+'"></td><td valign="top" class="dialogzone" id="frame_cont_'+a.id+'">'}function FrameZoneWidget_endHTML(){var a=this;return'</td><td style="'+backImgOffset(_skin+"dialogframeleftright.gif",a.reverse?15:5,0)+'"></td></tr><tr height="5"><td>'+imgOffset(_skin+"dialogframe.gif",5,5,a.reverse?10:0,5)+'</td><td style="'+backImgOffset(_skin+"dialogframetopbottom.gif",0,a.reverse?15:5)+'"></td><td>'+imgOffset(_skin+"dialogframe.gif",5,5,a.reverse?15:5,5)+"</td></tr></tbody></table>"}function arrayAdd(k,m,g,b){var l=k[m],a=l.length;if((b==null)||(typeof b!="number")){b=-1}if((b<0)||(b>a)){b=a}if(b!=a){var f=l.slice(b);l.length=b+1;l[b]=g;l=l.concat(f)}else{l[b]=g}k[m]=l;return b}function arrayRemove(g,l,a){var k=g[l],f=k.length-1;if(a==null){k.length=0;g[l]=k;return -1}if((a<0)||(a>f)){return -1}if(a==f){k.length=f}else{var b=k.slice(a+1);k.length=a;k=k.concat(b)}g[l]=k;return a}function arrayMove(k,m,g,f){var l=k[m],a=l.length;if((g<0)||(g>=a)||(f<0)||(f>=a)){return false}var b=l[g];arrayRemove(k,m,g);arrayAdd(k,m,b,f);return true}function arrayGetCopy(b){var g=new Array,a=b.length;for(var f=0;f<a;f++){g[f]=b[f]}return g}function arrayFind(k,m,f,b){var l=k[m],a=l.length;for(var g=0;g<a;g++){if(b){if(l[g][b]==f){return g}}else{if(l[g]==f){return g}}}return -1}function getFrame(name,par){if(par==null){par=self}var frames=par.frames,w=eval("frames."+name);if(w==null){return w}var l=frames.length;for(var i=0;i<l;i++){w=frames[i];try{if(w.name==name){return w}}catch(exc){}}return null}function frameNav(a,b,r,m,n){var k=null;if(n&a=="Report"){var q=getTopFrameset();k=q.getReportFrame()}else{k=getFrame(a,m)}if(k){var f=k.location;if(r){f.href=b}else{f.replace(b)}}else{var g=document.getElementById(a);if(g){g.src=b}}}function frameGetUrl(a){return a.location.href}function frameReload(a){var b=a.location;b.replace(b.href)}function setTopFrameset(){_curWin._topfs="topfs"}function getTopFrameset(a){if(a==null){a=self}if(a._topfs=="topfs"){return a}else{if(a!=top){return getTopFrameset(a.parent)}else{return null}}}function convStr(g,a,f){g=""+g;var b=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");if(a){b=b.replace(/ /g,"&nbsp;")}if(f){b=b.replace(/\n/g,"<br>")}return b}function escapeCR(b){b=""+b;var a=b.replace(/\r/g,"").replace(/\n/g,"\\n");return a}function addDblClickCB(b,a){if(b.addEventListener&&!_saf){b.addEventListener("dblclick",a,false)}else{b.ondblclick=a}}function img(k,a,f,l,b,g){b=(b?b:"");if(g==null){g=""}return"<img"+attr("width",a)+attr("height",f)+attr("src",k)+attr("alt",g)+attr("align",l)+' border="0" hspace="0" vspace="0" '+(b?b:"")+">"}function imgOffset(a,m,g,r,q,b,l,f,n,k){return img(_skin+"../transp.gif",m,g,k,(l?l:"")+" "+attr("id",b)+' style="float:left;'+backImgOffset(a,r,q)+(n?n:"")+'"',f)}function simpleImgOffset(a,m,g,r,q,b,l,f,n,k){if(_ie){if(r==null){r=0}if(q==null){q=0}return"<div "+(l?l:"")+" "+attr("id",b)+' style="position:relative;padding:0px;width:'+m+"px;height:"+g+"px;overflow:hidden;"+(n?n:"")+'">'+img(a,null,null,(k?k:"top"),'style="margin:0px;position:relative;top:'+(-q)+"px;left:"+(-r)+'px"',f)+"</div>"}else{return imgOffset(a,m,g,r,q,b,l,f,n,k)}}function changeSimpleOffset(k,b,a,g,l){if(_ie){k=k.childNodes[0];var f=k.style;if((g!=null)&&(g!=k.src)){k.src=g}if(b!=null){f.left=""+(-b)+"px"}if(a!=null){f.top=""+(-a)+"px"}if(l!=null){k.title=l;k.alt=l}}else{changeOffset(k,b,a,g,l)}}function backImgOffset(f,b,a){return"background-image:url('"+f+"');background-position:"+(-b)+"px "+(-a)+"px;"}function changeOffset(k,b,a,g,l){var f=k.style;if(f){if((b!=null)&&(a!=null)){f.backgroundPosition=""+(-b)+"px "+(-a)+"px"}if(g){f.backgroundImage="url('"+g+"')"}}if(l){k.title=l}}function includeScript(a){document.write('<script language="javascript" charset="UTF-8" src="'+a+'"><\/script>')}function includeCSS(b,f){if(typeof(_style)=="string"&&_style!=""){var a="";if(f){a=_style+"../"+b}else{a=_style+b}a+=".css";_curDoc.write('<link rel="stylesheet" type="text/css" href="'+a+'">')}}function getLayer(a){return _curDoc.getElementById(a)}function setLayerTransp(a,b){if(_ie){a.style.filter=(b==null)?"":"progid:DXImageTransform.Microsoft.Alpha( style=0,opacity="+b+")"}else{a.style.MozOpacity=(b==null)?1:b/100}}function getPos(b,a){a=a?a:null;for(var g=0,f=0;(b!=null)&&(b!=a);g+=b.offsetLeft,f+=b.offsetTop,b=b.offsetParent){}return{x:g,y:f}}function getPos2(b,a){var a=a?a:null;var g=0;var f=0;while(b.parentNode||b.offsetParent){if(b.offsetParent){g+=b.offsetLeft;f+=b.offsetTop;b=b.offsetParent}else{if(b.parentNode){if(b.style){if(b.style.left){g+=b.style.left}if(b.style.top){f+=b.style.top}}b=b.parentNode}else{break}}}if(a){relToCord=getPos2(a);g-=relToCord.x;f-=relToCord.y}return{x:g,y:f}}function getPosScrolled(f,b){b=b?b:null;if(_ie){for(var k=0,g=0;(f!=null)&&(f!=b);k+=f.offsetLeft-f.scrollLeft,g+=f.offsetTop-f.scrollTop,f=f.offsetParent){}}else{var a=f;for(var k=0,g=0;(f!=null)&&(f!=b);k+=f.offsetLeft,g+=f.offsetTop,f=f.offsetParent){}for(f=a;(f!=null)&&(f!=b);f=f.parentNode){if(f.scrollLeft!=null){k-=f.scrollLeft;g-=f.scrollTop}}}k+=getScrollX();g+=getScrollY();return{x:k,y:g}}function getWidget(b){if(b==null){return null}var a=b._widget;if(a!=null){return _widgets[a]}else{return getWidget(b.parentNode)}}function getWidgetFromID(b){if(b==null){return null}var a=getLayer(b);return getWidget(a)}function attr(a,b){return(b!=null?" "+a+'="'+b+'" ':"")}function sty(a,b){return(b!=null?a+":"+b+";":"")}function getSep(b,a){if(b==null){b=0}var f=b>0?'<td width="'+b+'">'+getSpace(b,1)+"</td>":"";return'<table style="margin-top:5px;margin-bottom:5px;" width="100%" cellspacing="0" cellpadding="0"><tr>'+f+'<td background="'+_skin+"sep"+(a?"_solid":"")+'.gif" class="smalltxt"><img alt="" src="'+_skin+'../transp.gif" width="10" height="2"></td>'+f+"</tr></table>"}function writeSep(b,a){_curDoc.write(getSep(b,a))}function getSpace(a,b){return'<table height="'+b+'" border="0" cellspacing="0" cellpadding="0"><tr><td>'+img(_skin+"../transp.gif",a,b)+"</td></tr></table>"}function writeSpace(a,b){_curDoc.write(getSpace(a,b))}function documentWidth(b){var b=b?b:_curWin;var a=Math.max(document.body.clientWidth,document.documentElement.clientWidth);a=Math.max(a,document.body.scrollWidth);return a}function documentHeight(b){var b=b?b:_curWin;var a=Math.max(document.body.clientHeight,document.documentElement.clientHeight);a=Math.max(a,document.body.scrollHeight);return a}function winWidth(b){var a;var b=b?b:_curWin;if(_ie){if(_isQuirksMode){a=b.document.body.clientWidth}else{a=b.document.documentElement.clientWidth}}else{a=b.innerWidth}return a}function winHeight(b){var b=b?b:_curWin;var a;if(_ie){if(_isQuirksMode){a=document.body.clientHeight}else{a=document.documentElement.clientHeight}}else{a=b.innerHeight}return a}function getScrollX(a){var b=0;var a=a?a:_curWin;if(typeof(a.scrollX)=="number"){b=a.scrollX}else{b=Math.max(a.document.body.scrollLeft,a.document.documentElement.scrollLeft)}return b}function getScrollY(b){var a=0;var b=b?b:_curWin;if(typeof(b.scrollY)=="number"){a=window.scrollY}else{a=Math.max(b.document.body.scrollTop,b.document.documentElement.scrollTop)}return a}function winScrollTo(a,f,b){b=b?b:_curWin;b.scrollTo(a,f)}function eventGetKey(b,a){a=a?a:_curWin;return _ie?a.event.keyCode:b.keyCode}function eventGetX(a){return _ie?_curWin.event.clientX:a.clientX?a.clientX:a.pageX}function eventGetY(a){return _ie?_curWin.event.clientY:a.clientY?a.clientY:a.pageY}function xpos(g,f,b,a){if((a==null)||(!_ie)){a=1}return((f.clientX/a)-getPos(g).x)+getScrollX()}function ypos(g,f,b,a){if((a==null)||(!_ie)){a=1}return((f.clientY/a)-getPos(g).y)+(_ie?b.body.scrollTop:0)}function absxpos(b,a){if((a==null)||(!_ie)){return b.clientX}else{return b.clientX/a}}function absypos(b,a){if((a==null)||(!_ie)){return b.clientY}else{return b.clientY/a}}function eventCancelBubble(f,b){b=b?b:_curWin;var a=_ie?b.event:f;if(a){a.cancelBubble=true;if(a.stopPropagation){a.stopPropagation()}}}function isHidden(b){if((b==null)||(b.tagName=="BODY")){return false}var a=b.style;if((a==null)||(a.visibility==_hide)||(a.display=="none")){return true}return isHidden(b.parentNode)}function opt(f,a,b){return'<option value="'+f+'" '+(b?"selected":"")+">"+convStr(""+a)+"</option>"}function lnk(f,g,a,l,b,k){if(g==null){g="return false"}b=b?b:"";return"<a"+attr("class",a)+attr("id",l)+attr("href","javascript:void(0)")+attr("onclick",g)+attr("ondblclick",k)+b+">"+f+"</a>"}_oldErrHandler=null;function localErrHandler(){return true}function canScanFrames(a){var b=true,g=null;if(_moz){_oldErrHandler=window.onerror;window.onerror=localErrHandler}try{g=a.document;b=false}catch(f){}if(_moz){window.onerror=_oldErrHandler}return(!b&&(g!=null))}function restoreAllInputs(n,a){if(_ie&&_curWin._inptStackLevel!=null){n=n?n:_curWin;if(canScanFrames(n)){if(a==null){a=--_curWin._inptStackLevel}var s=n.document.body,l=s?s.getElementsByTagName("SELECT"):null,q=l?l.length:0;for(var g=0;g<q;g++){var m=l[g];if(m._boHideLevel==a){m.style.visibility=m._boOldVis;m._boHideLevel=null}}var r=n.frames,u=r.length;for(var f=0;f<u;f++){restoreAllInputs(r[f],a)}}}}function hideAllInputs(B,z,C,m,u,a){if(_ie){u=u?u:_curWin;if(canScanFrames(u)){var A=u.document.body,n=A?A.getElementsByTagName("SELECT"):null,s=n?n.length:0;if(a==null){if(_curWin._inptStackLevel==null){_curWin._inptStackLevel=0}a=_curWin._inptStackLevel++}for(var l=0;l<s;l++){var r=n[l],q=r.style;var f=(B==null)||isLayerIntersectRect(r,B,z,C,m);if(!isHidden(r)&&f){r._boHideLevel=a;r._boOldVis=q.visibility;q.visibility=_hide}}var v=u.frames,D=v.length;for(var g=0;g<D;g++){hideAllInputs(null,null,null,null,v[g],a)}}}}function getBGIframe(a){return'<iframe id="'+a+'" name="'+a+'" style="display:none;left:0px;position:absolute;top:0px" src="'+_skin+'../../empty.html" frameBorder="0" scrolling="no"></iframe>'}function getDynamicBGIFrameLayer(){var a=false;if(_curWin.BGIFramePool){BGIFrames=_curWin.BGIFramePool.split(",");BGIFCount=BGIFrames.length;for(var b=0;b<BGIFCount;b++){if(BGIFrames[b]!="1"){a=true;break}}}else{b=0;BGIFrames=new Array}BGIFrames[b]="1";_curWin.BGIFramePool=BGIFrames.join(",");if(!a){targetApp(getBGIframe("BGIFramePool_"+b))}return getLayer("BGIFramePool_"+b)}function holdBGIFrame(b){var a=getLayer(b);if(a){a.style.display=""}id=parseInt(b.split("_")[1]);BGIFrames=_curWin.BGIFramePool.split(",");BGIFrames[id]=1;_curWin.BGIFramePool=BGIFrames.join(",")}function releaseBGIFrame(b){var a=getLayer(b);if(a){a.style.display="none"}id=parseInt(b.split("_")[1]);BGIFrames=_curWin.BGIFramePool.split(",");BGIFrames[id]=0;_curWin.BGIFramePool=BGIFrames.join(",")}function append(g,b,l){if(_ie){g.insertAdjacentHTML("BeforeEnd",b)}else{var a=l?l:_curDoc;var f=a.createRange();f.setStartBefore(g);var k=f.createContextualFragment(b);g.appendChild(k)}}function append2(g,b,l){if(_ie){g.insertAdjacentHTML("afterBegin",b)}else{var a=l?l:_curDoc;var f=a.createRange();f.setStartBefore(g);var k=f.createContextualFragment(b);g.appendChild(k)}}function insBefore(g,b,l){if(_ie){g.insertAdjacentHTML("BeforeBegin",b)}else{var a=l?l:_curDoc;var f=_curDoc.createRange();f.setEndBefore(g);var k=f.createContextualFragment(b);g.parentNode.insertBefore(k,g)}}function insBefore2(g,b,l){if(_ie){g.insertAdjacentHTML("BeforeBegin",b)}else{var a=l?l:_curDoc;var f=_curDoc.createRange();f.setStartBefore(g);var k=f.createContextualFragment(b);g.parentNode.insertBefore(k,g)}}function targetApp(a){append(_curDoc.body,a)}function getBasePath(){var b=document.location.href,a=b.lastIndexOf("?");if(a>=0){b=b.slice(0,a)}var f=b.lastIndexOf("/");return(f>=0)?b.slice(0,f+1):b}function isLayerIntersectRect(f,b,s,u,m){var k=getPos(f).x,q=getPos(f).y,g=k+f.offsetWidth,n=q+f.offsetHeight,a=b+u,r=s+m;return((b>k)||(a>k))&&((b<g)||(a<g))&&((s>q)||(r>q))&&((s<n)||(r<n))}function preloadImg(b){var a=_preloadArr[_preloadArr.length]=new Image;a.src=b}function convURL(f){if(_dontNeedEncoding==null){_dontNeedEncoding=new Array(256);for(var a=0;a<256;a++){_dontNeedEncoding[a]=false}for(var a=(new String("a")).charCodeAt(0);a<=(new String("z")).charCodeAt(0);a++){_dontNeedEncoding[a]=true}for(var a=(new String("A")).charCodeAt(0);a<=(new String("Z")).charCodeAt(0);a++){_dontNeedEncoding[a]=true}for(var a=(new String("0")).charCodeAt(0);a<=(new String("9")).charCodeAt(0);a++){_dontNeedEncoding[a]=true}_dontNeedEncoding[(new String(" ")).charCodeAt(0)]=true;_dontNeedEncoding[(new String("-")).charCodeAt(0)]=true;_dontNeedEncoding[(new String("_")).charCodeAt(0)]=true;_dontNeedEncoding[(new String(".")).charCodeAt(0)]=true;_dontNeedEncoding[(new String("*")).charCodeAt(0)]=true;_thex=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F")}var b="";for(var a=0;a<f.length;a++){b+=URLEncodeUTF8Char(f.charAt(a))}return b}function URLEncodeUTF8Char(b){var a=b.charCodeAt(0);if(a<128){if(_dontNeedEncoding[a]){return(b==" "?"+":b)}else{return("%"+_thex[a>>4]+_thex[a&15])}}else{if(a<2048){return("%"+_thex[(a>>10)|12]+_thex[(a>>6)&15]+"%"+_thex[(a>>4)&3|8]+_thex[a&15])}else{return("%"+_thex[14]+_thex[a>>12]+"%"+_thex[(a>>10)&3|8]+_thex[(a>>6)&15]+"%"+_thex[(a>>4)&3|8]+_thex[a&15])}}}function encString(g){var f="";if(g!=null){var a=g.length;for(var b=0;b<a;b++){var k=g.charAt(b);switch(k){case"$":f+="$3";break;case",":f+="$4";break;case"[":f+="$5";break;case"]":f+="$6";break;default:f+=k;break}}}return f}function enc(){var b=enc.arguments,a=b.length,g="[";if(a>0){g+=b[0]}for(var f=1;f<a;f++){g+=","+b[f]}return g+"]"}function remSpaceAround(g){var a=g.length;if(a<=0){return""}var l=0,b=a;var k=g.substr(l,1);while(k==" "&&l<a){l++;k=g.substr(l,1)}if(l<a){k=g.substr(b-1,1);while(k==" "){b--;k=g.substr(b-1,1)}}var f=g.substring(l,b);return f}function getArrows(k,a,f,b,l){if(f==null){f=false}var g="";if(f){g+="<nobr>"}g+=lnk(img(_skin+(f?"left.gif":"up.gif"),12,12,"top",null,f?"_LEFT ARROW":"_UP ARROW"),k,null,null,null,(_moz?null:k));g+=(f?"":img(_skin+"../transp.gif",1,5)+"<br>");g+=lnk(img(_skin+(f?"right.gif":"down.gif"),f?11:12,f?12:11,"top",null,f?"_RIGHT ARROW":"_LEFT ARROW"),a,null,null,null,(_moz?null:a));if(b){g+=img(_skin+"../transp.gif",1,5)+"<br>";g+=lnk(img(_skin+("node.gif"),12,12,"top",null,"_NEW NODE"),l,null,null,null,(_moz?null:l))}if(f){g+="</nobr>"}return g}_staticUnicBlockWhileWaitWidgetID="staticUnicBlockWhileWaitWidgetID";function hideBlockWhileWaitWidget(){var a=getLayer(_staticUnicBlockWhileWaitWidgetID);if(a){a.style.display="none"}}function newBlockWhileWaitWidget(a){if(window._BlockWhileWaitWidget!=null){return window._BlockWhileWaitWidget}var b=newWidget(_staticUnicBlockWhileWaitWidgetID);b.getPrivateHTML=BlockWhileWaitWidget_getPrivateHTML;b.init=BlockWhileWaitWidget_init;b.show=BlockWhileWaitWidget_show;window._BlockWhileWaitWidget=b;return b}function BlockWhileWaitWidget_init(){}function BlockWhileWaitWidget_getPrivateHTML(){return'<div id="'+this.id+'" onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0"  style="background-image:url('+_skin+'../transp.gif);z-index:5000;cursor:wait;position:absolute;top:0px;left:0px;width:100%;height:100%"></div>'}function BlockWhileWaitWidget_show(a){var b=this;if(b.layer==null){b.layer=getLayer(b.id);if(b.layer==null){targetApp(b.getPrivateHTML());b.layer=getLayer(b.id);b.css=b.layer.style}else{b.css=b.layer.style}}b.setDisplay(a)}var regLang=/^[a-zA-Z]{2}$|^[a-zA-Z]{2}_[a-zA-Z]{2}$/,regIntPos=/^\d+$/,regYes=/^yes$/,regPath=/^[\w|\/|:|.|-]+$/,regAlphanumDot=/^\w+\.+\w+$/,regAlphanumDotEx=/^\w+\.*\w+\.*\w+$/;var paramRegs=new Array();paramRegs.ID=regAlphanumDot;paramRegs.allTableCells=regYes;paramRegs.gotoPivot=regYes;paramRegs.reportIndex=regIntPos;paramRegs.fromLPane=regYes;paramRegs.skin=regPath;paramRegs.lang=regLang;paramRegs.noGrabber=regYes;paramRegs.isFormulaEdit=regYes;paramRegs.fromQuery=regYes;paramRegs.isFromHyperlinkEditor=regYes;paramRegs.iAction=regIntPos;paramRegs.callback=regAlphanumDotEx;paramRegs.callbackin=regAlphanumDotEx;paramRegs.callbackout=regAlphanumDotEx;function requestQueryString(k,f){params=k.location.search.substr(1).split("&");for(i=0;i<params.length;i++){var m=params[i].split("="),a=m[0],l=m[1];if(a==f){var b=new RegExp(paramRegs[a]);if((l=="")||(b.test(l))){return l}else{var g=getTopFrameset();if(g!=null){g._dontCloseDoc=true;g.document.location.replace(g._root+"html/badparamserror.html")}else{g=getTopFrameset(window.opener);if(g!=null){document.location.replace(g._skin+"../../../html/badparamserror.html")}}}}}}function trim(a){if(a!=null){var f=a.length;var b;for(b=0;b<f;b++){if(a.charAt(b)!=" "){break}}a=a.substring(b);f=a.length;for(b=f;b>0;b--){if(a.charAt(b-1)!=" "){break}}a=a.substring(0,b)}return a}function startsWithIgnoreCase(b,f){var a=false;if(f!=null){var g=b.substring(0,f.length);if(g.toLowerCase()==f.toLowerCase()){a=true}}return a}function endsWithIgnoreCase(b,g){var a=false;if(g!=null){var f=b.length-g.length;if(f>=0){var k=b.substring(f);if(k.toLowerCase()==g.toLowerCase()){a=true}}}return a}function isTextInput(a){var b=_ie?a.srcElement:a.target;var f=false;if(b.tagName=="TEXTAREA"){f=true}if((b.tagName=="INPUT")&&(b.type.toLowerCase()=="text")){f=true}return f}function isTextArea(a){var b=_ie?a.srcElement:a.target;if(b.tagName=="TEXTAREA"){return true}else{return false}}function shrinkTooltip(a,b){var b=b?b:360;return(a.length<b)?a:(a.substring(0,b)+"...")}function setDateValue(x,u){var a=",,";var g="";var r="";var f="";var b=u.length;var z="";for(var q=0;q<b;q++){var v=u.charAt(q);switch(v){case"/":case"-":case".":case",":case'"':z=v;break}if(z!=""){break}}if(z!=""){var s=u.split(z);var m=x.split(z);for(var q=0;q<m.length;q++){if(s[q]!=null&&typeof(s[q])!="undefined"){if(s[q].indexOf("y")>=0){var l=s[q].indexOf("y");var k=s[q].lastIndexOf("y");if(k>=0){g=s[q].substring(l,k+1);if(g.length>=m[q].length){g=m[q]}else{k=l;for(var n=l;n<m[q].length;n++){var v=m[q].charAt(n);if(v<"0"||v>"9"){break}else{k=n+1}}g=m[q].substring(l,k);if(g.length<=2){var y=parseInt(g);if(y>=70){y+=1900}else{y+=2000}g=y.toString()}}}else{return a}}else{if(s[q].indexOf("M")>=0){var l=s[q].indexOf("M");var k=s[q].lastIndexOf("M");if(k>=0){r=s[q].substring(l,k+1);if(r.length>=m[q].length){r=m[q]}else{k=l;for(var n=l;n<m[q].length;n++){var v=m[q].charAt(n);if(v<"0"||v>"9"){break}else{k=n+1}}r=m[q].substring(l,k)}}else{return a}}else{if(s[q].indexOf("d")>=0){var l=s[q].indexOf("d");var k=s[q].lastIndexOf("d");if(k>=0){f=s[q].substring(l,k+1);if(f.length>=m[q].length){f=m[q]}else{k=l;for(var n=l;n<m[q].length;n++){var v=m[q].charAt(n);if(v<"0"||v>"9"){break}else{k=n+1}}f=m[q].substring(l,k)}}else{return a}}}}}}if(r!=""&&f!=""&&g!=""&&!(isNaN(r)||isNaN(f)||isNaN(g))){a=r+","+f+","+g}}return a}function LZ(a){return(a<0||a>9?"":"0")+a}function formatDate(R,O){var O=O+"";var r="";var D=0;var Q="";var g="";var q=R.getFullYear()+"";var l=R.getMonth()+1;var P=R.getDate();var v=R.getDay();var u=R.getHours();var G=R.getMinutes();var z=R.getSeconds();var B,C,b,A,S,f,N,L,I,x,U,u,T,n,a,J;var F=new Object();if(q.length==2){if(q-0>=70){q=""+(q-0+1900)}else{q=""+(q-0+2000)}}F.y=""+q;F.yyyy=q;F.yy=q.substring(2,4);F.M=l;F.MM=LZ(l);F.MMM=_month[l-1];F.NNN=_month[l+11];F.d=P;F.dd=LZ(P);F.E=_day[v+7];F.EE=_day[v];F.H=u;F.HH=LZ(u);if(u==0){F.h=12}else{if(u>12){F.h=u-12}else{F.h=u}}F.hh=LZ(F.h);if(u>11){F.K=u-12}else{F.K=u}F.k=u+1;F.KK=LZ(F.K);F.kk=LZ(F.k);if(u>11){F.a=_PM;F.aa=_PM}else{F.a=_AM;F.aa=_AM}F.m=G;F.mm=LZ(G);F.s=z;F.ss=LZ(z);while(D<O.length){Q=O.charAt(D);g="";while((O.charAt(D)==Q)&&(D<O.length)){g+=O.charAt(D++)}if(F[g]!=null){r=r+F[g]}else{r=r+g}}return r}function newSearchWidget(k,a,g,b){var f=newWidget(k);f.bMatchCase=false;f.searchField=newTextFieldWidget(k+"_searchVal",null,50,SearchWidget_keyUpCB,SearchWidget_searchCB,true,_lovSearchFieldLab,a?(a-40):null);f.searchField.par=f;f.searchField.setHelpTxt(b?b:_lovSearchFieldLab);f.searchIcn=newIconMenuWidget(k+"_searchIcn",_skin+"../lov.gif",SearchWidget_searchCB,null,_lovSearchLab,16,16,0,0,0,0);f.searchIcn.par=f;f.searchMenu=f.searchIcn.getMenu();f.normal=f.searchMenu.addCheck(k+"normal",_lovNormalLab,SearchWidget_normalClickCB);f.matchCase=f.searchMenu.addCheck(k+"matchCase",_lovMatchCase,SearchWidget_matchCaseClickCB);f.oldInit=f.init;f.searchCB=g;f.init=SearchWidget_init;f.getHTML=SearchWidget_getHTML;f.setCaseSensitive=SearchWidget_setCaseSensitive;f.isCaseSensitive=SearchWidget_isCaseSensitive;f.updateMatchCase=SearchWidget_updateMatchCase;f.getSearchValue=SearchWidget_getSearchValue;f.setSearchValue=SearchWidget_setSearchValue;f.resize=SearchWidget_resize;return f}function SearchWidget_getHTML(){var b=this,a="";a='<table id="'+b.id+'" border="0" cellspacing="0" cellpadding="0"><tbody><tr><td>'+b.searchField.getHTML()+"</td><td>"+b.searchIcn.getHTML()+"</td></tr></tbody></table>";return a}function SearchWidget_resize(a,b){var f=this;f.searchField.resize(a-40,b)}function SearchWidget_init(){var a=this;a.oldInit();a.searchField.init();a.searchIcn.init();a.searchIcn.setDisabled((a.searchField.getValue()==""));a.updateMatchCase(a.bMatchCase)}function SearchWidget_isCaseSensitive(){return this.bMatchCase}function SearchWidget_setCaseSensitive(a){var f=this;if(f.bMatchCase!=a){f.updateMatchCase(a);f.bMatchCase=a}}function SearchWidget_updateMatchCase(a){var f=this;f.normal.check(!a);f.matchCase.check(a);if(a){f.searchIcn.icon.changeImg(55,0)}else{f.searchIcn.icon.changeImg(0,0)}}function SearchWidget_normalClickCB(){var a=this.par.parIcon.par;if(a.bMatchCase){a.bMatchCase=false}a.updateMatchCase(a.bMatchCase)}function SearchWidget_matchCaseClickCB(){var a=this.par.parIcon.par;if(!a.bMatchCase){a.bMatchCase=true}a.updateMatchCase(a.bMatchCase)}function SearchWidget_keyUpCB(){var a=this.par;a.searchIcn.setDisabled((this.getValue()==""))}function SearchWidget_searchCB(){var a=this.par;if(a.searchCB!=null){a.searchCB()}}function SearchWidget_getSearchValue(){var a=this;return a.searchField.getValue()}function SearchWidget_setSearchValue(a){var b=this;b.searchField.setValue(a)}if(bobj.crv.config.isDebug){localErrHandler=null}initDom(bobj.crvUri("../dhtmllib/images/")+bobj.crv.config.skin+"/","",bobj.crv.config.lang);styleSheet();_allBOIcons=new Array;_allBOIconsMenus=new Array;_menuType_simple=0;_menuType_color=1;_menuType_border=2;function NewLabelWidget(g,f,a){var b=newWidget(g);b.text=f;b.convBlanks=a;b.getHTML=LabelWidget_getHTML;b.setDisabled=LabelWidget_setDisabled;b.dis=false;return b}function LabelWidget_setDisabled(a){var b=this;if(b.dis!=a){b.dis=a;if(b.layer){b.layer.className="iconText"+(a?"Dis":"")}}}function LabelWidget_getHTML(){var a=this;return'<div id="'+a.id+'" class="icontext'+(a.dis?"Dis":"")+'" style="white-space:nowrap;margin-right:4px;margin-left:4px;cursor:default">'+convStr(a.text,a.convBlanks)+"</div>"}function newIconWidget(f,b,s,n,k,m,l,u,q,a,r){var g=newWidget(f);g.src=b;g.clickCB=s;g.text=n;g.alt=k;g.width=null;g.txtAlign="left";g.border=4;g.txtNoPadding=false;g.allowDblClick=false;if(b){g.w=(m!=null)?m:16;g.h=(l!=null)?l:16;g.dx=(u!=null)?u:0;g.dy=(q!=null)?q:0;g.disDx=(a!=null)?a:0;g.disDy=(r!=null)?r:0}else{g.w=1;g.h=16}g.dis=false;g.disp=true;g.margin=1;g.extraHTML="";g.imgLayer=null;g.txtLayer=null;g.overCB="IconWidget_overCB";g.outCB="IconWidget_outCB";g.isDisplayed=IconWidget_isDisplayed;g.setDisplay=IconWidget_setDisplay;g.getHTML=IconWidget_getHTML;g.getTxtWidth=IconWidget_getTxtWidth;g.index=_allBOIcons.length++;g.nocheckClass="iconnocheck";g.hoverClass="iconhover";g.checkClass="iconcheck";g.checkhoverClass="iconcheckhover";g.currentClass=g.nocheckClass;g.currentHoverClass=g.hoverClass;g.setClasses=IconWidget_setClasses;g.internalUpCB=null;g.internalDownCB=IconWidget_internalDownCB;g.internalUpCB=IconWidget_internalUpCB;g.isHover=false;g.changeTooltip=IconWidget_changeTooltip;g.changeText=IconWidget_changeText;g.changeImg=IconWidget_changeImg;g.setDisabled=IconWidget_setDisabled;g.isDisabled=IconWidget_isDisabled;g.acceptClick=IconWidget_acceptClick;_allBOIcons[g.index]=g;g.outEnable=true;g.setCrs=IconWidget_setCrs;g.oldRes=g.resize;g.resize=IconWidget_resize;g.iconOldInit=g.init;g.init=IconWidget_init;return g}function newIconMenuWidget(f,b,x,s,l,r,m,y,u,a,v,k,q,n){var g=newWidget(f);if(typeof(n)=="undefined"){n=k?_menuType_color:_menuType_simple}g.menuItemType=k?_isColor:_isNotColor;g.icon=newIconWidget("iconMenu_icon_"+f,b,IconMenuWidget_iconClickCB,s,l,r,m,y,u,a,v);g.arrow=newIconWidget("iconMenu_arrow_"+f,_skin+"menus.gif",IconMenuWidget_arrowClickCB,null,(_openMenuPart1+(s?s:(l?l:""))+_openMenuPart2),7,16,0,81,0,97);switch(n){case _menuType_color:g.menu=newMenuColorWidget("iconMenu_menu_"+f,IconMenuWidget_hideCB);break;case _menuType_border:g.menu=newMenuBordersWidget("iconMenu_menu_"+f,IconMenuWidget_hideCB,q,IconBordersMenuWidget_internalClickCB);break;default:case _menuType_simple:g.menu=newMenuWidget("iconMenu_menu_"+f,IconMenuWidget_hideCB,q);break}g.icon.par=g;g.arrow.par=g;g.menu.parIcon=g;g.icon.margin=0;g.arrow.margin=0;g.icon.overCB="IconWidget_none";g.icon.outCB="IconWidget_none";g.arrow.overCB="IconWidget_none";g.arrow.outCB="IconWidget_none";g.margin=1;g.spc=0;g.getHTML=IconMenuWidget_getHTML;g.clickCB=x;g.getMenu=IconMenuWidget_getMenu;g.menIcnOldInit=g.init;g.init=IconMenuWidget_init;g.index=_allBOIconsMenus.length++;_allBOIconsMenus[g.index]=g;g.setDisabled=IconMenuWidget_setDisabled;g.isDisabled=IconMenuWidget_isDisabled;g.disableMenu=IconMenuWidget_disableMenu;g.changeText=IconMenuWidget_changeText;g.imwpResize=g.resize;g.resize=IconMenuWidget_resize;g.focus=IconMenuWidget_focus;g.changeArrowTooltip=IconMenuWidget_changeArrowTooltip;g.disp=true;g.isDisplayed=IconWidget_isDisplayed;g.setDisplay=IconWidget_setDisplay;return g}function IconMenuWidget_changeText(a){this.icon.changeText(a)}function IconMenuWidget_changeArrowTooltip(a){this.arrow.changeTooltip(a,false)}function IconMenuWidget_resize(a,b){var g=this;if(a!=null){a=Math.max(0,a-2*g.margin)}var f=g.layer.display!="none";if(f&_moz&&!_saf){g.setDisplay(false)}g.imwpResize(a,b);if(a!=null){g.icon.resize(Math.max(0,a-13-g.spc))}if(f&_moz&&!_saf){g.setDisplay(true)}}function IconMenuWidget_setDisabled(a){var b=this;if(a){if(b.menu.isShown()){b.menu.show(false)}IconMenuWidgetOutCB(b.index)}b.icon.setDisabled(a);b.arrow.setDisabled(a)}function IconMenuWidget_isDisabled(){return(this.icon.dis==true)}function IconMenuWidget_internalCB(){var f=this,a=null;if(f.id!=null){a=(f.menuItemType!=_isLastUsedColor)?f.id.slice(6):f.color}var b=f.par.parIcon;b.oldColor=b.curColor;b.curColor=a;if(b.curColor!=null){b.showSample()}if(b.clickColor){b.clickColor()}}function IconMenuWidget_focus(){var a=this;a.arrow.focus()}function IconMenuWidget_disableMenu(a){var f=this;f.arrow.setDisabled(a);f.menu.setDisabled(a)}function IconMenuWidget_getMenu(){return this.menu}function IconWidget_none(){}function IconMenuWidget_init(){var b=this;b.menIcnOldInit();b.icon.init();b.arrow.init();b.menu.init();var a=b.layer;a.onmouseover=IconMenuWidget_OverCB;a.onmouseout=IconMenuWidget_OutCB}function IconMenuWidget_getHTML(){var b=this,a=b.disp?"":"display:none;";return'<table id="'+b.id+'" cellspacing="0" cellpadding="0" border="0" style="'+a+"margin:"+b.margin+'px"><tr><td>'+b.icon.getHTML()+'</td><td style="padding-left:'+b.spc+'px" width="'+(13+b.spc)+'">'+b.arrow.getHTML()+"</td></table>"}function IconMenuWidget_OverCB(){IconMenuWidgetOverCB(getWidget(this).index);return true}function IconMenuWidget_OutCB(){IconMenuWidgetOutCB(getWidget(this).index)}function IconMenuWidgetOverCB(a){o=_allBOIconsMenus[a];IconWidget_overCB(o.icon.index);IconWidget_overCB(o.arrow.index)}function IconMenuWidgetOutCB(a){o=_allBOIconsMenus[a];if(!o.menu.isShown()){IconWidget_outCB(o.icon.index);IconWidget_outCB(o.arrow.index)}else{IconWidget_overCB(o.icon.index);IconWidget_overCB(o.arrow.index)}}function IconMenuWidget_iconClickCB(){var f=this.par;if(f.clickCB==null){var b=f.layer;var a=getPos2(b);f.menu.show(!f.menu.isShown(),a.x,a.y+f.getHeight()+1,null,null,f);IconMenuWidgetOverCB(f.index)}else{f.clickCB()}}function IconMenuWidget_arrowClickCB(){var f=this.par,b=f.layer;var a=getPos2(b);f.menu.show(!f.menu.isShown(),a.x,a.y+f.getHeight()+1,null,null,f);IconMenuWidgetOverCB(f.index)}function IconMenuWidget_hideCB(){var a=this.parIcon;if(a.arrow){a.arrow.focus()}IconMenuWidgetOutCB(a.index)}function newIconCheckWidget(f,b,s,n,k,m,l,u,q,a,r){var g=newIconWidget(f,b,s,n,k,m,l,u,q,a,r);g.checked=false;g.internalUpCB=IconCheckWidget_internalUpCB;g.internalDownCB=IconCheckWidget_internalDownCB;g.check=IconCheckWidget_check;g.isChecked=IconCheckWidget_isChecked;g.oldInit=g.init;g.init=IconCheckWidget_init;g.isRadio=false;return g}function newPaletteContainerWidget(g,a,b){var f=newWidget(g);f.beginHTML=PaletteContainerWidget_beginHTML;f.endHTML=PaletteContainerWidget_endHTML;f.add=PaletteContainerWidget_add;f.palettes=new Array;f.contextMenu=a;f.margin=(b!=null)?b:4;return f}function newPaletteWidget(f,a){var b=newWidget(f);b.getHTML=PaletteWidget_getHTML;b.add=PaletteWidget_add;b.disableChildren=PaletteWidget_disableChildren;b.items=new Array;b.oldInit=b.init;b.init=PaletteWidget_init;b.beginRightZone=PaletteWidget_beginRightZone;b.height=a;b.rightZoneIndex=-1;b.sepCount=0;b.vertPadding=4;return b}function newPaletteSepWidget(b){var a=newWidget(b);a.getHTML=PaletteSepWidget_getHTML;a.isSeparator=true;return a}function newPaletteVerticalSepWidget(b){var a=newWidget(b);a.getHTML=PaletteVerticalSepWidget_getHTML;a.isSeparator=true;return a}function PaletteVerticalSepWidget_getHTML(){return img(_skin+"iconsep.gif",6,22,null,' id="'+this.id+'" ')}function getPaletteSep(){return img(_skin+"iconsep.gif",6,22)}function IconRadioWidget_uncheckOthers(){var k=this.groupInstance,b=this.groupIdx,a=k.length;for(var f=0;f<a;f++){if(f!=b){var l=k[f];if(l){l.check(false)}}}}function PaletteWidget_beginRightZone(){this.rightZoneIndex=this.items.length}function PaletteSepWidget_getHTML(){return'<div style="background-image:url('+_skin+'sep.gif);height:2px;padding:0px;margin-top:0px;margin-bottom:0px;margin-left:4px;margin-right:4px">'+getSpace(1,2)+"</div>"}function PaletteContainerWidget_beginHTML(){var b=this;var a=b.contextMenu?('oncontextmenu="'+_codeWinName+'.PaletteContainerWidget_contextMenu(this,event);return false"'):"";return"<div "+a+'class="palette" style="overflow:hidden;margin:'+b.margin+'px;" id="'+b.id+'">'}_delayedMenu=null;function PaletteContainerWidget_contextMenu(b,a){if(_ie){a=_curWin.event}_delayedMenu=getWidget(b).contextMenu;setTimeout("_delayedMenu.par=null;_delayedMenu.show(true,"+absxpos(a)+","+absypos(a)+")",1)}function PaletteContainerWidget_endHTML(){return"</div>"}function PaletteContainerWidget_add(a){this.palettes[this.palettes.length]=a;return a}function PaletteWidget_getHTML(){var m=this,f=m.items,b=f.length,a=new Array;j=0;a[j++]='<table style="position:relative;overflow:hidden" id="'+m.id+'" '+attr("height",m.height)+' cellspacing="0" cellpadding="0" '+(_ie?"":'width="100%"')+'><tbody><tr valign="middle">';a[j++]='<td align="left" style="padding-left:'+m.vertPadding+'px;padding-right:4px"><table cellspacing="0" cellpadding="0"><tbody><tr valign="middle">';var l=false;for(var g=0;g<b;g++){if(g==m.rightZoneIndex){a[j++]='</tr></tbody></table></td><td width="100%" align="right" style="padding-right:'+m.vertPadding+'px"><table cellspacing="0" cellpadding="0"><tbody><tr valign="middle">';l=true}var k=f[g];a[j++]="<td>"+k.getHTML()+"</td>"}if(!l){a[j++]='</tr></tbody></table></td><td width="100%" align="right" style="padding-right:4px"><table cellspacing="0" cellpadding="0"><tbody><tr valign="middle"><td></td>'}a[j++]="</tr></tbody></table></td></tr></tbody></table>";return a.join("")}function PaletteWidget_add(a){if(a==null){a=newPaletteVerticalSepWidget(this.id+"_palettesep_"+(this.sepCount++))}this.items[this.items.length]=a;return a}function PaletteWidget_disableChildren(b){var a=this.items;for(var f in a){var g=a[f];if(g&&(g.isSep!=true)){g.setDisabled(b)}}}function PaletteWidget_init(){this.oldInit();var a=this.items;for(var b in a){var f=a[b];if(f){f.init()}}}function IconWidget_isDisplayed(){return this.disp}function IconWidget_setDisplay(f){var b=this;if(b.css){var a=f?"block":"none";if(b.css.display!=a){b.css.display=a}}b.disp=f}function IconWidget_getTxtWidth(){var b=this,a=b.width;if(a!=null){a=a-(b.margin*2);a=a-(b.src?b.w+b.border:1);a=a-(b.txtNoPadding?0:((b.src?4:2)+2));if(_ie){a-=2}else{a-=2}return Math.max(0,a)}else{return -1}}function IconWidget_init(){var g=this,b=false;g.iconOldInit();var a=g.layer;a.tabIndex=g.dis?-1:0;a.title=(g.alt?g.alt:(g.text?g.text:""));if(g.clickCB){a.onclick=IconWidget_upCB;a.onmousedown=IconWidget_downCB;if(g.allowDblClick&&(_ie||_saf)){b=true;addDblClickCB(a,IconWidget_upCB)}a.onkeydown=IconWidget_keydownCB;a.onmouseover=IconWidget_realOverCB;a.onmouseout=IconWidget_realOutCB}if(!b){addDblClickCB(a,IconWidget_retFalse)}a.onselectstart=IconWidget_retFalse;var f=g.disp?"block":"none";if(g.css.display!=f){g.css.display=f}}function IconWidget_getHTML(){var k=this,b=k.src?'<div style="overflow:hidden;height:'+(k.h+k.border)+"px;width:"+(k.w+k.border)+'px;">'+simpleImgOffset(k.src,k.w,k.h,k.dis?k.disDx:k.dx,k.dis?k.disDy:k.dy,"IconImg_"+k.id,null,k.alt,"margin:2px;cursor:"+(k.clickCB?(!k.acceptClick()?"default":_hand):"default"))+k.extraHTML+"</div>":'<div class="icontext" style="width:1px;height:'+(k.h+k.border)+'px"></div>';var a='style="white-space:nowrap;',g=k.getTxtWidth();if(g>=0){a+="text-overflow:ellipsis;overflow:hidden;width:"+g+"px"}a+='"';var f=k.disp?"":"display:none;";return'<table style="'+f+"height:"+(k.h+k.border+(_moz?2:0))+"px;"+(k.width!=null?"width:"+k.width+"px;":"")+"margin:"+k.margin+'px" id="'+k.id+'" class="'+k.nocheckClass+'" cellspacing="0" cellpadding="0" border="0"><tr valign="middle"><td>'+((k.clickCB&&_ie)?lnk(b,null,null,null,' tabIndex="-1"'):b)+"</td>"+(k.text?'<td align="'+k.txtAlign+'" style="padding-left:'+(k.txtNoPadding?0:(k.src?4:2))+"px;padding-right:"+(k.txtNoPadding?0:2)+'px"><div id="IconImg_Txt_'+k.id+'" class="icontext'+(k.dis?"Dis":"")+'" '+a+">"+convStr(k.text)+"</div></td>":"")+"</tr></table>"}function IconWidget_realOutCB(){var o=getWidget(this);eval(o.outCB+"("+o.index+")")}function IconWidget_realOverCB(){var o=getWidget(this);eval(o.overCB+"("+o.index+")");return true}function IconWidget_retFalse(){return false}function IconWidget_resize(a,b){var g=this;if(g.layer){g.oldRes(a,b)}if(g.txtLayer==null){g.txtLayer=getLayer("IconImg_Txt_"+g.id)}if(a!=null){g.width=a;var f=g.getTxtWidth();if(g.txtLayer&&(f>=0)){g.txtLayer.style.width=""+f+"px"}}if(b!=null){g.h=b?(b-g.border):g.h;if(g.txtLayer&&(g.h>=0)){g.txtLayer.style.height=""+g.h+"px"}}}function IconWidget_changeTooltip(b,a){var f=this;if(b==null){return}if(!a){f.alt=b}if(f.layer){f.layer.title=b}if(f.imgLayer==null){f.imgLayer=getLayer("IconImg_"+this.id)}if(f.imgLayer){changeSimpleOffset(f.imgLayer,null,null,null,b)}}function IconWidget_changeText(a){var b=this;b.text=a;if(b.layer){if(b.txtLayer==null){b.txtLayer=getLayer("IconImg_Txt_"+b.id)}b.txtLayer.innerHTML=convStr(a)}}function IconWidget_changeImg(b,a,g){var f=this;if(g){f.src=g}if(b!=null){f.dx=b}if(a!=null){f.dy=a}if(f.layer&&(f.imgLayer==null)){f.imgLayer=getLayer("IconImg_"+this.id)}if(f.imgLayer){changeSimpleOffset(f.imgLayer,b,a,f.src)}}function IconWidget_internalDownCB(){if(!this.dis){this.currentHoverClass=this.checkhoverClass}}function IconWidget_internalUpCB(){if(!this.dis){this.currentHoverClass=this.hoverClass}}function IconWidget_setCrs(){var b=this,a=(b.clickCB?(!b.acceptClick()?"default":_hand):"default");b.css.cursor=a;if(b.src){if(b.imgLayer==null){b.imgLayer=getLayer("IconImg_"+b.id)}if(b.imgLayer){b.imgLayer.style.cursor=a}}}function IconWidget_downCB(){var a=getWidget(this);if((a.layer)&&(a.acceptClick())){a.internalDownCB();a.layer.className=a.currentHoverClass}if(_ie||_saf){return false}}function IconWidget_upCB(){var a=getWidget(this);if((a.layer)&&(a.acceptClick())){a.internalUpCB();a.layer.className=a.isHover?a.currentHoverClass:a.currentClass;a.setCrs();setTimeout("delayedClickCB("+a.index+")",1)}}function IconWidget_keydownCB(a){if(eventGetKey(a)==13){var b=getWidget(this);if((b.layer)&&(b.acceptClick())){b.internalUpCB();b.layer.className=b.isHover?b.currentHoverClass:b.currentClass;b.setCrs();setTimeout("delayedClickCB("+b.index+")",1)}eventCancelBubble(a)}}function delayedClickCB(a){var b=_allBOIcons[a];if(b.beforeClickCB){b.beforeClickCB()}if(b.clickCB){b.clickCB()}}function IconWidget_overCB(a){var b=_allBOIcons[a];b.setCrs();if((b.layer)&&(!b.dis)&&!(b.par&&b.par.checked)){b.isHover=true;b.layer.className=b.currentHoverClass}}function IconWidget_outCB(a){var b=_allBOIcons[a];if((b.layer)&&(b.outEnable)&&!(b.par&&b.par.checked)){b.isHover=false;b.layer.className=b.currentClass}}function IconCheckWidget_init(){var a=this;a.oldInit();a.check(a.checked,true)}function IconCheckWidget_internalDownCB(){var a=this;if(a.acceptClick()){a.currentHoverClass=a.checked?a.hoverClass:a.checkhoverClass}}function IconCheckWidget_internalUpCB(){var a=this;if(a.acceptClick()){a.checked=a.isRadio?true:!a.checked;a.currentClass=a.checked?this.checkClass:this.nocheckClass;a.currentHoverClass=a.checked?this.checkhoverClass:this.hoverClass}}function IconCheckWidget_check(a,b){var f=this;if((f.checked!=a)||b){f.checked=a;if(f.layer){f.layer.className=f.currentClass=f.checked?this.checkClass:this.nocheckClass;f.currentHoverClass=f.checked?this.checkhoverClass:this.hoverClass}}if(f.checked&&f.beforeClickCB){if(f.layer){f.beforeClickCB()}}}function IconCheckWidget_isChecked(){return this.checked}function IconWidget_setClasses(b,a,f,g){var k=this;k.nocheckClass=b;k.checkClass=a;k.hoverClass=f;k.checkhoverClass=g;k.currentClass=k.nocheckClass;k.currentHoverClass=k.hoverClass}function IconWidget_setDisabled(a){var b=this;if(b.dis!=a){b.dis=a;if(b.layer){b.setCrs();if(b.src){if(b.imgLayer==null){b.imgLayer=getLayer("IconImg_"+this.id)}changeSimpleOffset(b.imgLayer,a?b.disDx:b.dx,a?b.disDy:b.dy)}if(b.text){if(b.txtLayer==null){b.txtLayer=getLayer("IconImg_Txt_"+b.id)}b.txtLayer.className="iconText"+(a?"Dis":"");if(a){b.layer.className=b.currentClass}}b.layer.tabIndex=b.dis?-1:0}}}function IconWidget_isDisabled(){return this.dis?this.dis:false}function IconWidget_acceptClick(){var a=this;if(a.isDisabled()){return false}if(a.isRadio&&a.checked){return false}return true}function newCustomCombo(g,n,b,k,v,f,q,m,u,r,a,s){var l=newIconMenuWidget(g,f,null," ",v,q,m,u,r,a,s);l.icon.width=k!=null?Math.max(0,k-13):50-(2*l.margin);l.icon.setClasses("combonocheck","combocheck","combohover","combocheck");l.icon.clip;l.arrow.setClasses("iconnocheck","combobtnhover","combobtnhover","combobtnhover");l.spc=0;l.margin=2;if(f==null){l.icon.h=12;l.arrow.h=12;l.arrow.dy+=2;l.arrow.disDy+=2}l.counter=0;l.changeCB=n;l.selectedItem=null;l.setOldDid=l.setDisabled;l.disabled=false;l.ccomboOldInit=l.init;l.init=CustomCombo_init;l.add=CustomCombo_add;l.addSeparator=CustomCombo_addSeparator;l.addMenuItem=CustomCombo_addMenuItem;l.select=CustomCombo_select;l.getSelection=CustomCombo_getSelection;l.valueShow=CustomCombo_valueShow;l.valueSelect=CustomCombo_valueSelect;l.setUndefined=CustomCombo_setUndefined;l.setDisabled=CustomCombo_setDisabled;l.getVisibleItemsCount=CustomCombo_getVisibleItemsCount;l.selectItem=CustomCombo_selectItem;l.getItemByIndex=CustomCombo_getItemByIndex;l.getItemIndex=CustomCombo_getItemIndex;l.setItemDisabled=CustomCombo_setItemDisabled;return l}function CustomCombo_init(){var a=this;a.ccomboOldInit();if(a.disabled){a.icon.changeTooltip(a.icon.alt?a.icon.alt:"",true)}a.arrow.changeTooltip(_openMenuPart1+(a.icon.alt?a.icon.alt:"")+_openMenuPart2)}function CustomCombo_add(b,k,a){var g=this;var f=g.menu.addCheck(g.id+"_it_"+(g.counter++),b,CustomCombo_internalCB);f.val=""+k;f.parCombo=g;f.isComboVal=true;if((g.selectedItem==null)||a){g.selectItem(f)}}function CustomCombo_addSeparator(){this.menu.addSeparator()}function CustomCombo_addMenuItem(b,l,f,k,q,m,g,a,n){this.menu.add(b,l,f,k,q,m,g,a,n)}function CustomCombo_internalCB(){var a=this,b=a.parCombo;b.selectItem(a);if(b.changeCB){b.changeCB()}}function CustomCombo_getItemByIndex(a){var b=this.menu.items;return((a>=0)&&(a<b.length))?b[a]:null}function CustomCombo_getItemIndex(l){var b=this.menu.items,a=b.length,f=0;for(var g=0;g<a;g++){var k=b[g];if(k.isComboVal){if(k.id==l.id){return f}f++}}return -1}function CustomCombo_selectItem(a){var b=this;if(b.selectedItem){b.selectedItem.check(false)}if(a){b.val=a.val;b.icon.changeText(b.disabled?"":a.text);b.selectedItem=a;a.check(true);if(b.disabled){b.icon.changeTooltip(b.icon.alt?b.icon.alt:"",true)}else{b.icon.changeTooltip(b.icon.alt?(b.icon.alt+" ("+a.text)+")":(a.text),true)}}else{b.val=null;b.icon.changeText("");b.icon.changeTooltip(b.icon.alt?b.icon.alt:"",true);b.selectedItem=null}}function CustomCombo_setDisabled(b){var a=this;if(a.selectedItem){a.icon.changeText(b?"":a.selectedItem.text)}a.disabled=b;a.setOldDid(b);if(b){a.icon.changeTooltip(a.icon.alt?a.icon.alt:"",true)}}function CustomCombo_select(a){var f=this,b=f.getItemByIndex(a);if(b){f.selectItem(b)}}function CustomCombo_setItemDisabled(a,b){var g=this,f=g.getItemByIndex(a);if(f){f.setDisabled(b)}}function CustomCombo_getSelection(){var b=this,a=b.selectedItem;if(a){return{index:b.getItemIndex(a),value:a.val}}else{return null}}function CustomCombo_valueSelect(f){f=""+f;var l=this,b=l.menu.items,a=b.length;for(var g=0;g<a;g++){var k=b[g];if((k.isComboVal)&&(k.val==f)&&(k.isShown)){l.selectItem(k);return true}}return false}function CustomCombo_valueShow(g,b){g=""+g;var m=this,f=m.menu.items,a=f.length;for(var k=0;k<a;k++){var l=f[k];if((l.isComboVal)&&(l.val==g)){l.show(b);return}}}function CustomCombo_setUndefined(a){var b=this;if(a){b.selectItem(null)}}function CustomCombo_getVisibleItemsCount(){var k=this,b=k.menu.items,a=b.length,l=0;for(var f=0;f<a;f++){var g=b[f];if((g.isComboVal)&&(g.isShown)){l++}}return l}function newComboTextFieldWidget(f,m,r,l,q,b,s,g,a,n){var k=newTextFieldWidget(f,m,r,l,q,b,s,g,a,n);k.par=null;k.oldInit=k.init;k.init=ComboTextFieldWidget_init;k.setContentEditable=ComboTextFieldWidget_setContentEditable;k.isContentEditable=ComboTextFieldWidget_isContentEditable;k.getHTML=ComboTextFieldWidget_getHTML;k.oldSetDisabled=k.setDisabled;k.setDisabled=ComboTextFieldWidget_setDisabled;return k}function ComboTextFieldWidget_init(){var b=this;b.oldInit();var a=b.layer;if(a!=null){b.setContentEditable(true);a.onclick=ComboTextFieldWidget_onClick}}function ComboTextFieldWidget_setContentEditable(f){var b=this,a=b.layer;b.contentEditable=f;if(a){a.contentEditable=f;a.style.cursor=f?"text":_hand;a.className=f?"comboEditable":"combo"}}function ComboTextFieldWidget_isContentEditable(){var a=this;return a.contentEditable}function ComboTextFieldWidget_onClick(){var a=getWidget(this);if(a.contentEditable){return}if(a.par!=null){a.par.clickCB()}}function ComboTextFieldWidget_getHTML(){var a=this;return"<input"+(a.disabled?" disabled":"")+' oncontextmenu="event.cancelBubble=true;return true" style="'+sty("width",this.width)+(_moz?"margin-top:1px;margin-bottom:1px;padding-left:2px;padding-right:2px;":"")+(_isQuirksMode?"height:18px;":"height:14px;")+"margin-left:"+(this.noMargin?0:10)+'px" onfocus="'+_codeWinName+'.TextFieldWidget_focus(this)" onblur="'+_codeWinName+'.TextFieldWidget_blur(this)" onchange="'+_codeWinName+'.TextFieldWidget_changeCB(event,this)" onkeydown=" return '+_codeWinName+'.TextFieldWidget_keyDownCB(event,this);" onkeyup=" return '+_codeWinName+'.TextFieldWidget_keyUpCB(event,this);" onkeypress=" return '+_codeWinName+'.TextFieldWidget_keyPressCB(event,this);" type="text" '+attr("maxLength",this.maxChar)+' ondragstart="event.cancelBubble=true;return true" onselectstart="event.cancelBubble=true;return true" class="combo" id="'+this.id+'" name="'+this.id+'"'+attr("title",this.tooltip)+' value="">'}function ComboTextFieldWidget_setDisabled(b){var a=this;a.oldSetDisabled(b)}function newTextComboWidget(a,m,q,l,g,b,k,n){var f=newWidget(a);f.text=newComboTextFieldWidget((n?n:"text_"+a),TextComboWidget_checkCB,m,null,TextComboWidget_enterCB,true,q,l-13);f.arrow=newIconWidget("arrow_"+a,_skin+"menus.gif",TextComboWidget_arrowClickCB,null,(_openMenuPart1+(q?q:"")+_openMenuPart2),7,16,0,81,0,97);f.menu=newMenuWidget("menu_"+a,TextComboWidget_hideCB,k);f.arrow.setClasses("iconnocheck","combobtnhover","combobtnhover","combobtnhover");f.text.par=f;f.arrow.par=f;f.menu.parIcon=f;f.arrow.margin=0;f.arrow.overCB="IconWidget_none";f.arrow.outCB="IconWidget_none";f.margin=0;f.spc=0;f.counter=0;f.arrow.h=12;f.arrow.dy+=2;f.arrow.disDy+=2;f.index=_allBOIconsMenus.length++;_allBOIconsMenus[f.index]=f;f.menIcnOldInit=f.init;f.init=TextComboWidget_init;f.imwpResize=f.resize;f.resize=TextComboWidget_resize;f.getHTML=TextComboWidget_getHTML;f.setDisabled=TextComboWidget_setDisabled;f.isDisabled=TextComboWidget_isDisabled;f.add=TextComboWidget_add;f.addSeparator=TextComboWidget_addSeparator;f.addMenuItem=TextComboWidget_addMenuItem;f.select=TextComboWidget_select;f.getSelection=TextComboWidget_getSelection;f.valueShow=TextComboWidget_valueShow;f.valueSelect=TextComboWidget_valueSelect;f.setUndefined=TextComboWidget_setUndefined;f.setContentEditable=TextComboWidget_setContentEditable;f.isContentEditable=TextComboWidget_isContentEditable;f.changeCB=g;f.checkCB=b;f.clickCB=TextComboWidget_clickCB;f.selectItem=TextComboWidget_selectItem;f.getItemByIndex=TextComboWidget_getItemByIndex;f.getItemIndex=TextComboWidget_getItemIndex;f.setItemDisabled=TextComboWidget_setItemDisabled;f.text.enterCancelBubble=false;return f}function TextComboWidget_init(){var b=this;b.menIcnOldInit();b.text.init();b.arrow.init();b.menu.init();var a=b.layer;a.onmouseover=TextCombo_OverCB;a.onmouseout=TextCombo_OutCB}function TextComboWidget_getHTML(){var b=this,a="";a+='<table id="'+b.id+'" cellspacing="0" cellpadding="0" border="0" style="cursor:default;margin:'+b.margin+'px"><tbody><tr>';a+="<td>"+b.text.getHTML()+"</td>";a+='<td style="padding-left:'+b.spc+'px" width="'+(13+b.spc)+'">'+b.arrow.getHTML()+"</td>";a+="</tr></tbody></table>";return a}function TextComboWidget_resize(a,b){var g=this;if(a!=null){a=Math.max(0,a-2*g.margin)}var f=g.layer.display!="none";if(f&_moz&&!_saf){g.setDisplay(false)}g.imwpResize(a,b);if(f&_moz&&!_saf){g.setDisplay(true)}}function TextComboWidget_add(b,k,a){var g=this;var f=g.menu.addCheck(g.id+"_it_"+(g.counter++),b,TextComboWidget_internalCB);f.val=""+k;f.parCombo=g;f.isComboVal=true;if((g.selectedItem==null)||a){g.selectItem(f)}}function TextComboWidget_addSeparator(){this.menu.addSeparator()}function TextComboWidget_addMenuItem(b,l,f,k,q,m,g,a,n){this.menu.add(b,l,f,k,q,m,g,a,n)}function TextComboWidget_setDisabled(b){var a=this;a.text.setDisabled(b);a.arrow.setDisabled(b);a.menu.setDisabled(b);a.disabled=b}function TextComboWidget_isDisabled(){var a=this;return a.disabled}function TextComboWidget_select(a){var f=this,b=f.getItemByIndex(a);if(b){f.selectItem(b)}}function TextComboWidget_setItemDisabled(a,b){var g=this,f=g.getItemByIndex(a);if(f){f.setDisabled(b)}}function TextComboWidget_getSelection(){var f=this,b=f.selectedItem;var a=f.text.getValue();if(b){return{index:f.getItemIndex(b),value:b.val}}else{return{index:-1,value:a}}}function TextComboWidget_valueSelect(f){f=""+f;var l=this,b=l.menu.items,a=b.length;for(var g=0;g<a;g++){var k=b[g];if((k.isComboVal)&&(k.val==f)){l.selectItem(k);return}}l.text.setValue(f)}function TextComboWidget_valueShow(g,b){g=""+g;var m=this,f=m.menu.items,a=f.length;for(var k=0;k<a;k++){var l=f[k];if((l.isComboVal)&&(l.val==g)){l.show(b);return}}m.text.setValue(g);m.text.show(b)}function TextComboWidget_setUndefined(a){var b=this;if(a){b.selectItem(null)}}function TextComboWidget_setContentEditable(b){var a=this;a.text.setContentEditable(b)}function TextComboWidget_isContentEditable(){var a=this;return a.text.isContentEditable()}function TextComboWidget_selectItem(a){var b=this;if(b.selectedItem){b.selectedItem.check(false)}if(a){b.val=a.val;b.text.setValue(a.text);b.selectedItem=a;a.check(true)}else{b.val=null;b.text.setValue("");b.selectedItem=null}}function TextComboWidget_getItemByIndex(a){var b=this.menu.items;return((a>=0)&&(a<b.length))?b[a]:null}function TextComboWidget_getItemIndex(l){var b=this.menu.items,a=b.length,f=0;for(var g=0;g<a;g++){var k=b[g];if(k.isComboVal){if(k.id==l.id){return f}f++}}return -1}function TextComboWidget_changeCB(){var f=this.par;var a=true;if(f.checkCB){a=f.checkCB()}if(!a){return}if(f.changeCB){f.changeCB()}}function TextComboWidget_enterCB(){var f=this.par;if(f.selectedItem){f.selectedItem.check(false);f.selectedItem=null}var a=true;if(f.checkCB){a=f.checkCB()}if(!a){return}if(f.changeCB){f.changeCB()}}function TextComboWidget_checkCB(){var a=this.par;if(a.checkCB){a.checkCB()}}function TextComboWidget_hideCB(){var a=this.parIcon;if(a.arrow){a.arrow.focus()}TextComboOutCB(a.index)}function TextComboWidget_arrowClickCB(){this.par.clickCB()}function TextComboWidget_clickCB(){var b=this,a=b.layer;b.menu.show(!b.menu.isShown(),getPosScrolled(a).x,getPosScrolled(a).y+b.getHeight()+1,null,null,b);TextComboOverCB(b.index)}function TextCombo_OverCB(){TextComboOverCB(getWidget(this).index);return true}function TextComboOverCB(a){var b=_allBOIconsMenus[a];IconWidget_overCB(b.arrow.index)}function TextCombo_OutCB(a){TextComboOutCB(getWidget(this).index)}function TextComboOutCB(a){var b=_allBOIconsMenus[a];if(!b.menu.isShown()){IconWidget_outCB(b.arrow.index)}else{IconWidget_overCB(b.arrow.index)}}function TextComboWidget_internalCB(){var a=this,b=a.parCombo;b.selectItem(a);if(b.changeCB){b.changeCB()}}function TextComboWidget_keyUpCB(){}_menusZIndex=2000;_menusItems=new Array;_globMenuCaptured=null;_isColor=0;_isLastUsedColor=1;_isNotColor=2;_currentFocus=null;_mitemH=22;function newMenuWidget(g,a,f){var b=newWidget(g);b.items=new Array;b.par=null;b.container=null;b.currentSub=-1;b.nextSub=-1;b.zIndex=_menusZIndex;b.hideCB=a;b.beforeShowCB=f;b.init=MenuWidget_init;b.justInTimeInit=MenuWidget_justInTimeInit;b.getHTML=MenuWidget_getHTML;b.show=MenuWidget_show;b.internalAdd=b.add=MenuWidget_add;b.addCheck=MenuWidget_addCheck;b.addSeparator=MenuWidget_addSeparator;b.insert=MenuWidget_insert;b.insertCheck=MenuWidget_insertCheck;b.insertSeparator=MenuWidget_insertSeparator;b.getItem=MenuWidget_getItem;b.getItemByID=MenuWidget_getItemByID;b.isShown=MenuWidget_isShown;b.remove=MenuWidget_remove;b.removeByID=MenuWidget_removeByID;b.showSub=MenuWidget_showSub;b.captureClicks=MenuWidget_captureClicks;b.releaseClicks=MenuWidget_releaseClicks;b.focus=MenuWidget_focus;b.restoreFocus=MenuWidget_restoreFocus;b.hasVisibleItem=MenuWidget_hasVisibleItem;b.updateIndex=MenuWidget_updateIndex;b.clickCB=new Array;b.clickCBDocs=new Array;b.write=MenuWidget_write;b.alignLeft=false;b.sepCount=0;return b}function MenuWidget_captureClicks(f){var l=this;if(l.par==null){if(f==null){_globMenuCaptured=l;l.clickCB.length=0;l.clickCBDocs.length=0;f=_curWin}if(canScanFrames(f)){if(_moz){_oldErrHandler=window.onerror;window.onerror=localErrHandler}try{d=f.document;l.clickCB[l.clickCB.length]=d.onmousedown;l.clickCBDocs[l.clickCBDocs.length]=d;d.onmousedown=MenuWidget_globalClick;var b=f.frames,a=b.length;for(var g=0;g<a;g++){l.captureClicks(b[g])}}catch(k){}if(_moz){window.onerror=_oldErrHandler}}}}function MenuWidget_releaseClicks(){var g=this;if(g.par==null){var a=g.clickCB.length;for(var b=0;b<a;b++){try{g.clickCBDocs[b].onmousedown=g.clickCB[b]}catch(f){}g.clickCB[b]=null;g.clickCBDocs[b]=null}g.clickCB.length=0;g.clickCBDocs.length=0}}_menuItem=null;function MenuWidget_focus(){var g=this,b=g.items,a=b.length;for(var f=0;f<a;f++){if(b[f].isShown&&!b[f].isSeparator){_menuItem=b[f];setTimeout("_menuItem.focus()",1);if(g.endLink){g.endLink.show(true)}if(g.startLink){g.startLink.show(true)}break}}}function MenuWidget_keepFocus(b){var a=getWidget(getLayer(b));if(a){a.focus()}}function MenuWidget_restoreFocus(){var a=this;if(a.endLink){a.endLink.show(false)}if(a.startLink){a.startLink.show(false)}if(a.parIcon){a.parIcon.focus()}else{if(a.par){a.par.focus()}else{if(a.parCalendar){a.parCalendar.focus()}}}}function MenuWidget_keyDown(g,b){var f=getWidget(getLayer(g));var a=eventGetKey(b);if(a==27&&f){f.restoreFocus();f.show(false);if(f.par&&f.par.par){f.par.par.currentSub=-1}f.currentSub=-1;eventCancelBubble(b)}else{if(f&&(a==109||a==37)){if(f.par&&f.par.par){f.restoreFocus();f.show(false);f.par.par.currentSub=-1;f.currentSub=-1}}else{if(a==13){eventCancelBubble(b)}}}}function MenuWidget_globalClick(){var a=_globMenuCaptured;if(a!=null){_globMenuCaptured=null;a.releaseClicks();a.show(false)}}function MenuWidget_add(b,r,g,q,v,s,k,a,u,m){var f=this,l=f.items.length;var n=f.items[l]=newMenuItem(f,b,r,g,q,v,s,k,a,u,false,m);n.menuIndex=l;n.dynHTML();return n}function MenuWidget_addCheck(b,r,g,q,v,s,k,a,u,m){var f=this,l=f.items.length;var n=f.items[l]=newMenuItem(f,b,r,g,q,v,s,k,a,u,true,m);n.menuIndex=l;n.dynHTML();return n}function MenuWidget_addSeparator(){var a=this.internalAdd("_menusep_"+(this.sepCount++));a.isSeparator=true;return a}function MenuWidget_insert(m,b,q,g,n,v,s,k,a,u,l){var f=this,r=newMenuItem(f,b,q,g,n,v,s,k,a,u,false,l);arrayAdd(f,"items",r,m);f.updateIndex();r.dynHTML();return r}function MenuWidget_insertCheck(m,b,q,g,n,v,s,k,a,u,l){var f=this,r=newMenuItem(f,b,q,g,n,v,s,k,a,u,true,l);arrayAdd(f,"items",r,m);f.updateIndex();r.dynHTML();return r}function MenuWidget_insertSeparator(a){var b=newMenuItem(this,"_menusep_"+(this.sepCount++));b.isSeparator=true;arrayAdd(this,"items",b,a);this.updateIndex();b.dynHTML();return b}function MenuWidget_init(){}function MenuWidget_getItem(b){var f=this,a=f.items;if((b>=0)&&(b<a.length)){return a[b]}return null}function MenuWidget_getItemByID(g){var f=this,a=f.items;for(var b in a){if(a[b].id==g){return a[b]}}return null}function MenuWidget_removeByID(g){var f=this;var b=f.getItemByID(g);if(b){arrayRemove(f,"items",b.menuIndex);f.updateIndex();if(f.layer==null){return}var a=f.layer.childNodes[0];a.deleteRow(b.menuIndex)}}function MenuWidget_remove(b){var f=this;if(b!=null){arrayRemove(f,"items",b);f.updateIndex()}else{f.items.length=0}if(f.layer==null){return}if(b!=null){var a=f.layer.childNodes[0];a.deleteRow(b)}}function MenuWidget_updateIndex(){var b=this.items,a=b.length;for(var f=0;f<a;f++){b[f].menuIndex=f}}function MenuWidget_showSub(){var b=this;if(b.nextSub!=-1){if(b.nextSub!=b.currentSub){var n=b.items[b.currentSub];if(n&&n.sub){n.sub.show(false);b.currentSub=-1}var a=b.items[b.nextSub];if(a&&a.sub){var g=a.layer;var l=parseInt(b.css.left);var k=parseInt(b.css.top);for(var f=0;f<b.nextSub;f++){var q=b.items[f];if(q.isShown){if((q.icon!=null)||(q.text!=null)){k+=_mitemH}else{k+=3}}}var m=b.getWidth();l=l+m-4;a.attachSubMenu(a.sub);a.sub.show(true,l,k,false,m);b.currentSub=b.nextSub}}}else{if(b.currentSub!=-1){var n=b.items[b.currentSub];if(n&&n.sub){n.sub.show(false);b.currentSub=-1}}}}function MenuWidget_write(){}function MenuWidget_justInTimeInit(){var f=this;f.layer=getLayer(f.id);if(f.layer==null){targetApp(f.getHTML());f.layer=getLayer(f.id)}f.layer._widget=f.widx;f.css=f.layer.style;f.endLink=newWidget("endLink_"+f.id);f.endLink.init();f.startLink=newWidget("startLink_"+f.id);f.startLink.init();var a=f.items;for(var b in a){a[b].init()}}function MenuWidget_getHTML(){var k=this,b=k.items;var a=' onkeydown="'+_codeWinName+".MenuWidget_keyDown('"+k.id+"',event);return true\" ";var g='<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="startLink_'+k.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+k.id+'\');return false;" ></a><table style="display:none;" class="menuFrame" id="'+k.id+'" cellspacing="0" cellpadding="0" border="0" '+a+' dir="ltr"><tbody>';for(var f in b){g+=b[f].getHTML()}g+='</tbody></table><a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="endLink_'+k.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+k.id+"');return false;\" ></a>";return g}function MenuWidget_show(u,r,n,k,f,q){var b=this;if(b.layer==null){b.justInTimeInit()}var l=b.css;if(u){b.iframeLyr=getDynamicBGIFrameLayer();b.iframeCss=b.iframeLyr.style;if(b.beforeShowCB){b.beforeShowCB()}if(!b.hasVisibleItem()){return}b.captureClicks();l.display="block";l.zIndex=(b.zIndex+1);l.visibility="hidden";l.left="-1000px";l.top="-1000px";var s=b.getWidth();var g=b.getHeight();if(b.alignLeft){r-=s}if(q){var v=q.getWidth();if(v>s){r=r+v-s}}var a=r+s+4,m=n+g+4;if(a-getScrollX()>winWidth()){if(q){r=Math.max(0,winWidth()-s)}else{r=Math.max(0,r-4-(s+((f!=null)?f-12:0)))}}if(m-getScrollY()>winHeight()){n=Math.max(0,n-4-g+(f!=null?30:0))}l.left=""+r+"px";l.top=""+n+"px";l.visibility="visible";iCss=b.iframeCss;iCss.left=""+r+"px";iCss.top=""+n+"px";iCss.width=""+s+"px";iCss.height=""+g+"px";iCss.zIndex=b.zIndex-1;iCss.display="block";if(_ie){n-=2;r-=2}b.nextSub=-1;b.showSub();b.focus()}else{if(k&&b.par&&b.par.par){b.par.par.show(u,r,n,k)}if(b.iframeLyr){releaseBGIFrame(b.iframeLyr.id)}l.display="none";if(b.iframeCss){b.iframeCss.display="none"}b.nextSub=-1;b.showSub();if(b.hideCB){b.hideCB()}b.releaseClicks()}}function MenuWidget_isShown(){var a=this;if(a.layer==null){return false}else{return(a.css.display=="block")}}function MenuWidget_hasVisibleItem(){var g=this;if(g.isMenuColor||g.isCalendar){return true}var a=g.items;for(var b in a){var f=a[b];if(f&&!(f.isSeparator==true)&&f.isShown){return true}}return false}function newMenuItem(n,f,r,k,q,v,s,l,b,u,a,m){var g=new Object;g.par=n;g.id=f;g.text=r;g.cb=k;g.icon=q;g.dx=(v==null)?0:v;g.dy=(s==null)?0:s;g.disDx=(b==null)?g.dx:b;g.disDy=(u==null)?g.dy:u;g.sub=null;g.layer=null;g.iconTDLayer=null;g.iconLayer=null;g.textLayer=null;g.textOnlyLayer=null;g.accel=null;g.accelLayer=null;g.hasNoLayer=false;g.isSeparator=false;g.disabled=(l!=null)?l:false;g.isShown=true;g.alt=m;g.index=_menusItems.length;_menusItems[g.index]=g;g.menuIndex=-1;g.isCheck=a;g.checked=false;g.menuItemType=_isNotColor;g.init=MenuItem_init;g.leftZoneClass="menuLeftPart";g.leftZoneSelClass="menuLeftPartSel";g.attachSubMenu=MenuItem_attachSubMenu;g.getHTML=MenuItem_getHTML;g.getHTMLPart=MenuItem_getHTMLPart;g.dynHTML=MenuItem_dynHTML;g.setDisabled=MenuItem_setDisabled;g.check=MenuItem_check;g.isChecked=MenuItem_isChecked;g.show=MenuItem_show;g.setText=MenuItem_setText;g.setIcon=MenuItem_setIcon;g.setAccelerator=MenuItem_setAccelerator;g.focus=MenuItem_focus;return g}function MenuItem_init(){if(!this.hasNoLayer){var a=this,b=a.par.id;a.layer=getLayer(b+"_item_"+a.id);a.layer._boIndex=a.index;if(!a.isSeparator){if((a.icon!=null)||(a.isCheck)){a.iconLayer=getLayer(b+"_item_icon_"+a.id);a.iconTDLayer=getLayer(b+"_item_td_"+a.id)}a.textLayer=getLayer(b+"_text_"+a.id);a.textOnlyLayer=getLayer(b+"_span_text_"+a.id);a.accelLayer=getLayer(b+"_accel_"+a.id);if(a.textOnlyLayer){a.textOnlyLayer.title=a.checked?a.textOnlyLayer.innerText+" "+_menuCheckLab:"";if(a.disabled){a.textOnlyLayer.title+=" "+_menuDisableLab}}}if(a.isCheck){a.check(a.checked,true)}}}function MenuItem_attachSubMenu(f){var b=this;b.sub=f;f.par=b;f.zIndex=b.par.zIndex+2;if(b.layer){if(b.arrowLayer==null){b.arrowLayer=getLayer(b.par.id+"_item_arrow_"+b.id)}var a=b.disabled;changeSimpleOffset(b.arrowLayer,a?7:0,a?81:64)}return f}function MenuItem_check(a,f){var g=this;if((g.checked!=a)||f){g.checked=a;if(g.par.layer){var b=g.layer;if(b){if(g.icon==null){changeSimpleOffset(g.iconLayer,0,(g.checked?48:0),null,(g.checked?_menuCheckLab:""))}changeOffset(g.iconTDLayer,0,(g.checked?96:0));if(g.checkFrame==null){g.checkFrame=getLayer(g.par.id+"_item_check_"+g.id)}g.checkFrame.className="menuIcon"+(g.checked?"Check":"");if(g.textOnlyLayer){g.textOnlyLayer.title=g.checked?g.textOnlyLayer.innerText+" "+_menuCheckLab:""}}}}}function MenuItem_setDisabled(a){var f=this;if(f.disabled!=a){f.disabled=a;if(f.par.layer){var b=f.layer;if(b){b.style.cursor=a?"default":_hand;if(f.icon){changeSimpleOffset(f.iconLayer,a?f.disDx:f.dx,a?f.disDy:f.dy)}var g="menuTextPart"+(f.disabled?"Disabled":"");if(g!=f.textLayer.className){f.textLayer.className=g}if(f.accel&&(g!=f.accelLayer.className)){f.accelLayer.className=g}if(f.sub){if(f.arrowLayer==null){f.arrowLayer=getLayer(f.par.id+"_item_arrow_"+f.id)}changeSimpleOffset(f.arrowLayer,a?7:0,a?81:64)}if(f.textOnlyLayer){f.textOnlyLayer.title=f.disabled?f.textOnlyLayer.innerText+" "+_menuDisableLab:""}}}}}function _mii(k,l){var n=k.childNodes,q=0,m=n.length,r=k._boIndex;var b=_menusItems[r];if(b.disabled){l=0}else{if(l){b.par.nextSub=b.menuIndex;MenuItem_callShowSub(r,true);if(b.par.par){if(b.par.par.par){b.par.par.par.nextSub=b.par.par.menuIndex}}}}var f=0;for(var g=0;g<m;g++){var a=n[g];if(a.tagName!=null){if(f==0){a.className=l?b.leftZoneSelClass:b.leftZoneClass}else{if(f==1){a.className="menuTextPart"+(l?"Sel":"")+(b.disabled?"Disabled":"")}else{if(b.accel&&(f==2)){a.className="menuTextPart"+(l?"Sel":"")+(b.disabled?"Disabled":"");break}else{a.className="menuRightPart"+(l?"Sel":"")}}}f++}}}function MenuItem_getHTMLPart(b){var m=this;switch(b){case 0:var a=null,l=' class="menuIcon'+(m.checked?"Check":"")+'"';if(m.isCheck&&(m.icon==null)){a=simpleImgOffset(_skin+"menus.gif",16,16,0,m.checked?48:0,(m.par.id+"_item_icon_"+m.id),null,(m.checked?_menuCheckLab:""))}else{a=m.icon?simpleImgOffset(m.icon,16,16,m.disabled?m.disDx:m.dx,m.disabled?m.disDy:m.dy,(m.par.id+"_item_icon_"+m.id),null,m.alt?m.alt:""):(getSpace(16,16))}if(m.isCheck){var g=_ie?18:16;a='<div id="'+m.par.id+"_item_check_"+m.id+'" class="menuIcon'+(m.checked?"Check":"")+'" style="width:'+g+"px;height:"+g+'px;padding:1px">'+a+"</div>"}return a;case 1:var k=_saf?'<div style="height:19px;padding-top:5px">':"",f=_saf?"</div>":"";return k+'<span id="'+(m.par.id+"_span_text_"+m.id)+'" tabIndex="0">'+convStr(m.text)+"</span>"+f;case 2:return simpleImgOffset(_skin+"menus.gif",16,16,m.sub?(m.disabled?7:0):0,m.sub?(m.disabled?81:64):0,m.par.id+"_item_arrow_"+m.id,null,null,null,"right");case 3:return'<table width="100%" height="3" cellpadding="0" cellspacing="0" border="0" style="'+backImgOffset(_skin+"menus.gif",0,80)+';"><tbody><tr><td></td></tr></tbody></table>';case 4:return convStr(m.accel)}}function MenuItem_getHTML(){var k=this;if((k.icon!=null)||(k.text!=null)){var g=' onclick="'+_codeWinName+'._micl(this,event);return true" oncontextmenu="'+_codeWinName+'._micl(this,event);return false" onmouseover="'+_codeWinName+'._mii(this,1)" onmouseout="'+_codeWinName+'._mii(this,0);" ';var a=' onkeydown="'+_codeWinName+'._mikd(this,event);return true" ';var b=new Array(),f=0;b[f++]='<tr onmousedown="'+_codeWinName+'._minb(event)" onmouseup="'+_codeWinName+'._minb(event)" id="'+(k.par.id+"_item_"+k.id)+'" style="'+(!k.isShown?"display:none;":"")+"height:"+_mitemH+"px;width:24px;cursor:"+(k.disabled?"default":_hand)+'" '+g+a+' valign="middle">';b[f++]='<td id="'+(k.par.id+"_item_td_"+k.id)+'" style="width:23px;height:'+_mitemH+'px;" align="center" class="'+k.leftZoneClass+'">';b[f++]=k.getHTMLPart(0);b[f++]="</td>";b[f++]="<td "+(k.centered?' align="center" ':"")+' style="height:'+_mitemH+'px" id="'+(k.par.id+"_text_"+k.id)+'" class="menuTextPart'+(k.disabled?"Disabled":"")+'">';b[f++]=k.getHTMLPart(1);b[f++]="</td>";if(k.accel!=null){b[f++]='<td class="menuTextPart'+(k.disabled?"Disabled":"")+'" id="'+(k.par.id+"_accel_"+k.id)+'" align="right" style="height:'+_mitemH+'px"  tabIndex="-1">';b[f++]=k.getHTMLPart(4);b[f++]="</td>"}else{b[f++]='<td class="menuRightPart" align="right" style="width:40px;height:'+_mitemH+'px;" >';b[f++]=k.getHTMLPart(2);b[f++]="</td>"}b[f++]="</tr>";return b.join("")}else{return'<tr onmousedown="'+_codeWinName+'._minb(event)" onclick="'+_codeWinName+'._minb(event)" id="'+(k.par.id+"_item_"+k.id)+'" onmouseup="'+_codeWinName+'._minb(event)" style="height:3px"><td class="'+k.leftZoneClass+'" style="width:24px;height:3px;border:0px"></td><td colspan="2" style="padding-left:5px;padding-right:5px;border:0px">'+k.getHTMLPart(3)+"</td></tr>"}}function MenuItem_dynHTML(){var a=this;if(a.par.layer==null){return}var l=a.par.layer.childNodes[0],q=l.insertRow(a.menuIndex),r=q.style;q.onmousedown=_minb;q.onmouseup=_minb;q.id=(a.par.id+"_item_"+a.id);if((a.icon!=null)||(a.text!=null)){var g=q.insertCell(0),f=q.insertCell(1),b=q.insertCell(2),n=g.style,m=f.style,k=b.style;q.onclick=MenuItem_clickCallTrue;q.oncontextmenu=MenuItem_clickCallFalse;q.onmouseover=MenuItem_invertCall1;q.onmouseout=MenuItem_invertCall0;r.height=""+_mitemH+"px";r.width="24px";r.cursor=(a.disabled?"default":_hand);g.id=(a.par.id+"_item_td_"+a.id);n.width="23px";n.height=""+_mitemH+"px";g.innerHTML=a.getHTMLPart(0);g.align="center";g.className=a.leftZoneClass;if(a.centered){f.align="center"}m.height=""+_mitemH+"px";f.id=(a.par.id+"_text_"+a.id);f.className="menuTextPart"+(a.disabled?"Disabled":"");f.innerHTML=a.getHTMLPart(1);if(a.accel){b.className="menuTextPart"+(a.disabled?"Disabled":"");b.align="right";k.height=""+_mitemH+"px";b.innerHTML=a.getHTMLPart(4)}else{b.className="menuRightPart";b.align="right";k.width="40px";k.height=""+_mitemH+"px";changeOffset(b,0,0,_skin+"menus.gif");b.innerHTML=a.getHTMLPart(2)}a.init()}else{q.onclick=_minb;q.style.height="3px";var g=q.insertCell(0),f=q.insertCell(1),n=g.style,m=f.style;g.className=a.leftZoneClass;n.width="24px";n.height="3px";n.border="0px";f.colSpan="2";m.paddingLeft="5px";m.paddingRight="5px";f.innerHTML=a.getHTMLPart(3)}}function MenuItem_isChecked(){return this.checked}function MenuItem_setText(a){var b=this,f=b.par.id;b.text=a;if(b.textLayer){b.textLayer.innerHTML=b.getHTMLPart(1);b.textOnlyLayer=getLayer(f+"_span_text_"+b.id)}}function MenuItem_setAccelerator(b,a){var f=this,g=f.par.id;f.accel=((a!=null)?_modifiers[a]:"")+b;if(f.accelLayer){f.accelLayer.innerHTML=f.getHTMLPart(4)}}function MenuItem_setIcon(b,a,k,g,f){var l=this;l.url=f?f:l.url;l.dx=(b!=null)?b:l.dx;l.dy=(a!=null)?a:l.dy;l.disDx=(k!=null)?k:l.disDx;l.disDy=(g!=null)?g:l.disDy;if(l.icon&&l.iconLayer){changeSimpleOffset(l.iconLayer,l.disabled?l.disDx:l.dx,l.disabled?l.disDy:l.dy,l.url)}}function MenuItem_show(a){var b=this;b.isShown=a;if(b.layer!=null){b.layer.style.display=a?"":"none"}}function _micl(b,f){eventCancelBubble(f);var a=b._boIndex,g=_menusItems[a];g.layer=b;if(!g.disabled){if(g.sub){g.par.nextSub=g.menuIndex;MenuItem_callShowSub(a)}else{g.par.show(false,0,0,true);if(g.isCheck){if(g.par.uncheckAll){g.par.uncheckAll()}g.check(!g.checked)}if(g.par.container&&g.par.container.updateButton){g.par.container.updateButton(a)}_mii(b,0,a);g.par.nextSub=-1;if(g.cb){setTimeout("MenuItem_delayedClick("+a+")",1)}}}}function _mikd(l,n){var b=l._boIndex,q=_menusItems[b];q.layer=l;var g=eventGetKey(n);switch(g){case 13:_micl(l,n);break;case 107:case 39:if(!q.disabled&&q.sub){_micl(l,n)}break;case 109:case 37:break;case 40:var f=q.par.items,a=f.length;for(var m=q.menuIndex+1;m<a;m++){if(f[m].isShown&&!f[m].isSeparator){f[m].focus();break}}break;case 38:var f=q.par.items,a=f.length;for(var m=q.menuIndex-1;m>=0;m--){if(f[m].isShown&&!f[m].isSeparator){f[m].focus();break}}break}}function MenuItem_callShowSub(a,b){var f=_menusItems[a];if(b){setTimeout("MenuItem_delayedShowSub("+a+")",500)}else{MenuItem_delayedShowSub(a)}}function MenuItem_delayedShowSub(a){var b=_menusItems[a];b.par.showSub()}function _minb(a){eventCancelBubble(a)}function MenuItem_delayedClick(a){var b=_menusItems[a];if(b.cb){b.cb()}}function MenuItem_clickCallTrue(a){_micl(this,a);return true}function MenuItem_clickCallFalse(a){_micl(this,a);return false}function MenuItem_invertCall0(a){_mii(this,0)}function MenuItem_invertCall1(a){_mii(this,1)}function MenuItem_focus(){var a=this;if(isLayerDisplayed(a.layer)&&a.textOnlyLayer&&a.textOnlyLayer.focus){a.textOnlyLayer.focus()}}function newMenuColorWidget(f,a){var b=newMenuWidget(f,a);b.addSeparator=null;b.lastUsedTxt="";b.lastUsedColorsAr=null;b.addColor=MenuColorWidget_addColor;b.addLastUsed=MenuColorWidget_addLastUsed;b.getHTML=MenuColorWidget_getHTML;b.uncheckAll=MenuColorWidget_uncheckAll;b.isMenuColor=true;return b}function MenuColorWidget_addColor(k,b,a){var l=this,g=l.items.length;var f=l.items[g]=newColorMenuItem(l,b,k,a);f.menuIndex=g;return f}function MenuColorWidget_addLastUsed(k,b,a,m){var g=this;g.lastUsedTxt=k;g.lastUsedColorsAr=b;g.beforeShowCB=MenuColorWidget_beforeShowCB;colorsMax=8;len=g.items.length;var f=null;for(var l=0;l<colorsMax;l++){f=newLastUsedColorMenuItem(g,l,b[l],"",a);f.isLast=(l==colorsMax-1)?true:false;g.items[len+l]=f}}function MenuColorWidget_getHTML(){var a=this,k=a.items;var b=0;var m=' onkeydown="'+_codeWinName+".MenuWidget_keyDown('"+a.id+"',event);return true\" ";var n=new Array;n[b++]='<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="startLink_'+a.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+a.id+"');return false;\" ></a>";n[b++]='<table style="display:none;" class="menuFrame" id="'+a.id+'" cellspacing="0" cellpadding="0" border="0"'+m+"><tbody>";var q='<tr style="height:3px"><td colspan="8" style="padding-left:5px;padding-right:5px;"><table width="100%" height="3" cellpadding="0" cellspacing="0" border="0" style="'+backImgOffset(_skin+"menus.gif",0,80)+';"><tbody><tr><td></td></tr></tbody></table></td></tr>';var g=k.length;lastUsedCol="";lastUsedColIconsNb=0;lastUsedColIconsMaxLine=3;for(var f in k){var l=k[f];switch(l.menuItemType){case _isColor:n[b++]=l.getHTML();break;case _isLastUsedColor:lastUsedCol+=l.getHTML();lastUsedCol+=(lastUsedColIconsNb++==lastUsedColIconsMaxLine)?"</tr><tr>":"";if(l.isLast){n[b++]=q;n[b++]='<tr><td colspan="8">';n[b++]='<table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody><tr>';n[b++]='<td width="50%" class="menuTextPart">'+convStr(a.lastUsedTxt)+"</td>";n[b++]='<td><table border="0" cellspacing="0" cellpadding="0"><tbody><tr>';n[b++]=lastUsedCol;n[b++]="</tr></tbody></table></td>";n[b++]="</tr></tbody></table>";n[b++]="</td></tr>";n[b++]=q}break;case _isNotColor:l.leftZoneClass="menuLeftPartColor";l.leftZoneSelClass="menuLeftPartSel";l.centered=true;n[b++]='<tr><td colspan="8"><table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody><tr>'+l.getHTML()+"</tr></tbody></table></td></tr>";n[b++]=(f==0)?q:""}}n[b++]='</tbody></table><a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="endLink_'+a.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+a.id+"');return false;\" ></a>";return n.join("")}function MenuColorWidget_beforeShowCB(){var k=this,a=0;lenLastUsed=k.lastUsedColorsAr.length;if((lenLastUsed==1)&&((k.lastUsedColorsAr[0].length==0)||(k.lastUsedColorsAr[0]=="null"))){lenLastUsed=0;k.lastUsedColorsAr.length=0}for(var f in k.items){var g=k.items[f];if(g.menuItemType==_isLastUsedColor){if(a<lenLastUsed){g.init();var l=k.lastUsedColorsAr[a++];g.color=l;g.layer.childNodes[0].childNodes[0].style.backgroundColor="rgb("+l+")";var b=_colorsArr[""+l+""];g.text=(b)?b:(_RGBTxtBegin+l+_RGBTxtEnd);g.layer.childNodes[0].childNodes[0].childNodes[0].title=g.text;g.show(true)}else{g.show(false)}}}}function MenuColor_invert(b,a){var f=_menusItems[b._boIndex];if(f&&f.checked){a=1}b.childNodes[0].className="menuColor"+(a?"sel":"")}function MenuColor_out(){MenuColor_invert(this,0)}function _Mcov(a){a.onmouseout=MenuColor_out;MenuColor_invert(a,1)}function MenuColorWidget_uncheckAll(){var g=this,a=g.items;for(var b in a){var f=a[b];if(f.checked){f.check(false)}}}function _mcc(b,f){eventCancelBubble(f);var a=b._boIndex,g=_menusItems[a];g.par.uncheckAll();MenuColor_invert(b,1,a);g.checked=true;g.par.show(false,0,0,true);if(g.cb){setTimeout("MenuItem_delayedClick("+a+")",1)}}function newColorMenuItem(f,b,k,a){var g=newMenuItem(f,"color_"+b,k,a);g.color=b;g.attachSubMenu=null;g.getHTML=ColorMenuItem_getHTML;g.check=ColorMenuItem_check;g.menuItemType=_isColor;return g}function ColorMenuItem_check(a){var b=this;if(b.checked!=a){b.checked=a;if(b.layer){MenuColor_invert(b.layer,b.checked?1:0)}}}function ColorMenuItem_getHTML(){var a=this,v="",q=_moz?10:12,k=a.par.items.length,l=a.menuIndex-1;col=l%8;var m=0;for(var f=0;f<k;f++){if(a.par.items[f].menuItemType==_isColor){m++}}var g=(col==0);var u=(col==7);var r=(l<8);var n=(l>=(Math.floor((m-1)/8)*8));var b=' onclick="'+_codeWinName+'._mcc(this,event);return true" oncontextmenu="'+_codeWinName+'._mcc(this,event);return false" onmousedown="'+_codeWinName+'._minb(event)" onmouseup="'+_codeWinName+'._minb(event)" onmouseover="'+_codeWinName+'._Mcov(this)" ';if(g){v+='<tr valign="middle" align="center">'}v+='<td id="'+(a.par.id+"_item_"+a.id)+'" '+b+' style="padding-top:'+(r?2:0)+"px;padding-bottom:"+(n?2:0)+"px;padding-left:"+(g?3:1)+"px;padding-right:"+(u?3:1)+'px"><div class="menuColor'+(a.checked?"Sel":"")+'"><div style="cursor:'+_hand+";border:1px solid #4A657B;width:"+q+"px;height:"+q+"px;background-color:rgb("+a.color+');">'+img(_skin+"../transp.gif",10,10,null,null,a.text)+"</div></div></td>";if(u){v+="</tr>"}return v}function newLastUsedColorMenuItem(g,b,f,l,a){var k=newMenuItem(g,"color_"+b,l,a);k.idx=b;k.color=f;k.menuItemType=_isLastUsedColor;k.attachSubMenu=null;k.check=ColorMenuItem_check;k.getHTML=LastUsedColorMenuItem_getHTML;k.init=LastUsedColorMenuItem_init;return k}function LastUsedColorMenuItem_getHTML(){var g=this,b="",f=_moz?10:12;var a=' onclick="'+_codeWinName+'._mcc(this,event);return true" oncontextmenu="'+_codeWinName+'._mcc(this,event);return false" onmousedown="'+_codeWinName+'._minb(event)" onmouseup="'+_codeWinName+'._minb(event)" onmouseover="'+_codeWinName+'._Mcov(this)" ';b+='<td id="'+(g.par.id+"_item_"+g.id)+'" width="18" '+a+' style="padding-top:0px;padding-bottom:0px;padding-left:1px;padding-right:1px"><div class="menuColor'+(g.checked?"sel":"")+'"><div style="cursor:'+_hand+";border:1px solid #4A657B;width:"+f+"px;height:"+f+"px;background-color:rgb("+g.color+');">'+img(_skin+"../transp.gif",10,10,null,null,g.text)+"</div></div></td>";return b}function LastUsedColorMenuItem_init(){if(!this.hasNoLayer){var a=this,b=a.par.id;a.layer=getLayer(b+"_item_"+a.id);a.layer._boIndex=a.index;if(a.isCheck){a.check(a.checked,true)}}}function newScrollMenuWidget(a,q,n,b,x,v,s,m,l,r,g,u,k){var f=newWidget(a);f.list=newListWidget("list_"+a,ScrollMenuWidget_changeCB,n,b,x,v,ScrollMenuWidget_dblClickCB,ScrollMenuWidget_keyUpCB,ScrollMenuWidget_clickCB);f.list.par=f;f.label=NewLabelWidget("label_"+a,r,g);f.showLabel=l;f.changeCB=q;f.menuClickCB=k;f.dblClickCB=s;f.keyUpCB=m;f.beforeShowCB=u;f.zIndex=_menusZIndex;f.init=ScrollMenuWidget_init;f.justInTimeInit=ScrollMenuWidget_justInTimeInit;f.setDisabled=ScrollMenuWidget_setDisabled;f.write=ScrollMenuWidget_write;f.getHTML=ScrollMenuWidget_getHTML;f.show=ScrollMenuWidget_show;f.add=ScrollMenuWidget_add;f.del=ScrollMenuWidget_del;f.getSelection=ScrollMenuWidget_getSelection;f.select=ScrollMenuWidget_select;f.valueSelect=ScrollMenuWidget_valueSelect;f.getCount=ScrollMenuWidget_getCount;f.isShown=MenuWidget_isShown;f.captureClicks=MenuWidget_captureClicks;f.releaseClicks=MenuWidget_releaseClicks;f.clickCB=new Array;f.clickCBDocs=new Array;return f}function ScrollMenuWidget_init(){}function ScrollMenuWidget_justInTimeInit(){var a=this;a.layer=getLayer(a.id);if(a.layer==null){append2(_curDoc.body,a.getHTML());a.layer=getLayer(a.id)}a.layer._widget=a.widx;a.css=a.layer.style;a.css.visibility="hidden";a.list.init();a.label.init()}function ScrollMenuWidget_setDisabled(){}function ScrollMenuWidget_write(){}function ScrollMenuWidget_getHTML(){var b=this;var a="";a+='<table dir="ltr" onmousedown="event.cancelBubble=true" id="'+b.id+'" style="display:none;" class="menuFrame" cellspacing="0" cellpadding="0" border="0"><tbody>';a+='<tr><td align="center">'+b.list.getHTML()+"</td></tr>";a+='<tr><td align="center">'+b.label.getHTML()+"</td></tr>";a+="</tbody></table>";return a}function ScrollMenuWidget_show(n,m,l){var b=this;if(b.layer==null){b.justInTimeInit()}var g=b.css;if(n){if(b.beforeShowCB){b.beforeShowCB()}b.captureClicks();g.display="block";g.zIndex=(b.zIndex+1);g.visibility="hidden";g.left="-1000px";g.top="-1000px";var q=b.getWidth();var f=b.getHeight();if(b.alignLeft){m-=q}var a=m+q+4,k=l+f+4;if(a>winWidth()){m=Math.max(0,m-4-q)}if(k>winHeight()){l=Math.max(0,l-4-f)}g.left=""+m+"px";g.top=""+l+"px";g.visibility="visible";b.iframeLyr=getDynamicBGIFrameLayer();b.iframeCss=b.iframeLyr.style;iCss=b.iframeCss;iCss.left=""+m+"px";iCss.top=""+l+"px";iCss.width=""+q+"px";iCss.height=""+f+"px";iCss.zIndex=b.zIndex-1;iCss.display="block";if(_ie){l-=2;m-=2}}else{releaseBGIFrame(b.iframeLyr.id);g.display="none";iCss.display="none";b.releaseClicks()}}function ScrollMenuWidget_add(a,g,b,k){var f=this;if(f.layer==null){f.justInTimeInit()}f.list.add(a,g,b,k)}function ScrollMenuWidget_del(a){var b=this;if(b.layer==null){b.justInTimeInit()}b.list.del(a)}function ScrollMenuWidget_getSelection(){var a=this;if(a.layer==null){a.justInTimeInit()}return a.list.getSelection()}function ScrollMenuWidget_select(a){var b=this;if(b.layer==null){b.justInTimeInit()}b.list.select(a)}function ScrollMenuWidget_valueSelect(a){var b=this;if(b.layer==null){b.justInTimeInit()}b.list.valueSelect(a)}function ScrollMenuWidget_getCount(){var a=this;if(a.layer==null){a.justInTimeInit()}return a.list.getCount()}function ScrollMenuWidget_changeCB(){var a=this;if(a.par.changeCB){a.par.changeCB()}}function ScrollMenuWidget_clickCB(){var a=this;a.par.show(false);if(a.par.menuClickCB){a.par.menuClickCB()}}function ScrollMenuWidget_dblClickCB(){var a=this;a.par.show(false);if(a.par.dblClickCB){a.par.dblClickCB()}}function ScrollMenuWidget_keyUpCB(f){var l=13,b=27;var g=this;var a=eventGetKey(f);if(a==l||a==b){g.par.show(false)}if(g.par.keyUpCB){g.par.keyUpCB()}}function newButtonScrollMenuWidget(a,x,u,m,g,s,q,r,A,l,v,n,z,k,f,y){var b=newButtonWidget(a,x,ButtonScrollMenuWidget_clickCB,u,null,m,g,0,_skin+"menus.gif",7,16,0,81,true,0,97);b.menu=newScrollMenuWidget("scrollMenu_menu_"+a,s,q,r,A,l,v,n,z,k,f,y);b.getMenu=IconMenuWidget_getMenu;b.add=ButtonScrollMenuWidget_add;return b}function ButtonScrollMenuWidget_clickCB(){var b=this,a=b.layer;b.menu.show(!b.menu.isShown(),getPosScrolled(a).x,getPosScrolled(a).y+b.getHeight(),null,null,b)}function ButtonScrollMenuWidget_add(a,f,b,g){this.menu.add(a,f,b,g)}function newBorderMenuItem(k,b,a,g,f){var l=newMenuItem(k,"border_"+b,null,a);l.idx=b;l.isLabel=g?g:false;l.label=f?f:null;l.attachSubMenu=null;l.getHTML=BorderMenuItem_getHTML;l.check=BorderMenuItem_check;l.menuItemType=_isNotColor;return l}function BorderMenuItem_check(a){var b=this;if(b.checked!=a){b.checked=a;if(b.layer){BorderMenuItem_invert(b.layer,b.checked?1:0)}}}function BorderMenuItem_getHTML(){var n=this,l="",m=_moz?10:12,k=n.par.items.length,f=n.menuIndex-1;col=f%8;var b=' onclick="'+_codeWinName+'.MenuBordersWidget_onclickCB(this,event);return true" oncontextmenu="'+_codeWinName+'.MenuBordersWidget_onclickCB(this,event);return false" onmousedown="'+_codeWinName+'._minb(event)" onmouseup="'+_codeWinName+'._minb(event)" onmouseover="'+_codeWinName+'.MenuBordersWidget_onmouseOverCB(this)" ';var g=(n.isLabel?' colspan="4"':"");var a="menuiconborders"+(n.checked?"Sel":"");l+="<td "+g+' id="'+(n.par.id+"_item_"+n.id)+'" '+b+' align="center"><div class="'+a+'">';l+=n.isLabel?convStr(n.label):simpleImgOffset(_skin+"../borders.gif",16,16,16*n.idx,0,"IconImg_"+n.id,null,_bordersTooltip[n.idx],"margin:2px;cursor:default");l+="</div></td>";return l}function BorderMenuItem_invert(b,a){var f=_menusItems[b._boIndex];if(f&&f.checked){a=1}b.childNodes[0].className="menuiconborders"+(a?"Sel":"")}function newMenuBordersWidget(m,b,l,f){var k=newMenuWidget(m,b,l);k.items=new Array;for(var g=0;g<12;g++){k.items[g]=newBorderMenuItem(k,g,f)}var a=k.items.length;k.items[a]=newBorderMenuItem(k,12,f,true,_bordersMoreColorsLabel);k.clickCB=f;k.getHTML=MenuBordersWidget_getHTML;k.hasVisibleItem=MenuBordersWidget_hasVisibleItem;k.uncheckAll=MenuBordersWidget_uncheckAll;return k}function MenuBordersWidget_getHTML(){var k=this,b=k.items;var a=' onkeydown="'+_codeWinName+".MenuWidget_keyDown('"+k.id+"',event);return true\" ";var g='<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="startLink_'+k.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+k.id+"');return false;\" ></a>";g+='<table style="display:none;" class="menuFrame" id="'+k.id+'" cellspacing="0" cellpadding="0" border="0" '+a+"><tbody>";g+="<tr>";for(var f=0;f<=3;f++){g+=b[f].getHTML()}g+="</tr>";g+="<tr>";for(var f=4;f<=7;f++){g+=b[f].getHTML()}g+="</tr>";g+="<tr>";for(var f=8;f<=11;f++){g+=b[f].getHTML()}g+="</tr>";g+="<tr>"+b[12].getHTML()+"</tr>";g+='</tbody></table><a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="endLink_'+k.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".MenuWidget_keepFocus('"+k.id+"');return false;\" ></a>";return g}function MenuBordersWidget_hasVisibleItem(){return true}function MenuBordersWidget_uncheckAll(){var g=this,a=g.items;for(var b in a){var f=a[b];if(f.checked){f.check(false)}}}function MenuBordersWidget_onclickCB(b,f){eventCancelBubble(f);var a=b._boIndex,g=_menusItems[a];g.par.uncheckAll();BorderMenuItem_invert(b,1,a);g.checked=true;g.par.show(false,0,0,true);if(g.cb){setTimeout("MenuItem_delayedClick("+a+")",1)}}function MenuBordersWidget_out(){BorderMenuItem_invert(this,0)}function MenuBordersWidget_onmouseOverCB(a){a.onmouseout=MenuBordersWidget_out;BorderMenuItem_invert(a,1)}_boAllTabs=new Array;function newTabWidget(b,r,a,k,v,s,f,u,q,n,l,m){var g=newWidget(b);g.isTop=r;g.isSelected=false;g.lnkLayer=null;g.leftImgLayer=null;g.rightImgLayer=null;g.midImgLayer=null;g.imgImgLayer=null;g.iconLayer=null;g.tabBar=null;g.getHTML=TabWidget_getHTML;g.select=TabWidget_select;g.change=TabWidget_change;g.changeContent=TabWidget_changeContent;g.change(a,k,v,s,f,u,q,n,l,m);_boAllTabs[b]=g;return g}function TabWidget_getHTML(){var a=this;var l=a.isSelected?0:72;if(!a.isTop){l+=144}var q="thumbtxt"+(a.isSelected?"sel":"");var f=_codeWinName+".TabWidget_clickCB('"+a.id+"');return false";var g=_codeWinName+".TabWidget_dblclickCB('"+a.id+"');return false";var n=_codeWinName+".TabWidget_keyDownCB('"+a.id+"',event);";var b=_codeWinName+".TabWidget_contextMenuCB('"+a.id+"',event);return false";var m=a.icon?a.icon:_skin+"../transp.gif";var k=a.icon?3:0;return'<table onmouseover="return true" onclick="'+f+'" id="'+this.id+'" ondblclick="'+g+'" onkeydown="'+n+'" oncontextmenu="'+b+'" id="'+this.id+'" style="cursor:'+_hand+'" cellspacing="0" cellpadding="0" border="0"><tbody><tr valign="middle" height="24"><td width="15">'+imgOffset(_skin+"tabs.gif",15,24,0,l,"tabWidgetLeft_"+a.id)+'</td><td id="tabWidgetImg_'+a.id+'" style="'+(a.isTop?"padding-top:2px;":"padding-bottom:2px;")+" padding-right:"+k+"px; "+backImgOffset(_skin+"tabs.gif",0,l+24)+'" width="'+(a.iconW+k)+'" align="left">'+imgOffset(m,a.iconW,a.iconH,a.iconOffX,a.iconOffY,"tabWidgetIcon_"+a.id,null,a.iconAlt)+'</td><td  width="50" id="tabWidgetMid_'+a.id+'" style="'+(a.isTop?"padding-top:3px;":"padding-bottom:3px;")+backImgOffset(_skin+"tabs.gif",0,l+24)+'"><span style="white-space:nowrap">'+lnk(convStr(a.name,true),null,q,"tabWidgetLnk_"+a.id)+'</span></td><td width="15">'+imgOffset(_skin+"tabs.gif",15,24,0,l+48,"tabWidgetRight_"+a.id)+"</td></tr></tbody></table>"}function TabWidget_clickCB(a){setTimeout("TabWidget_delayedClickCB('"+a+"')",1)}function TabWidget_dblclickCB(a){setTimeout("TabWidget_delayedDblClickCB('"+a+"')",1)}function TabWidget_keyDownCB(f,b){var a=eventGetKey(b);if(eventGetKey(b)==13){eventCancelBubble(b)}}function TabWidget_contextMenuCB(g,f){if(_ie){f=_curWin.event}var b=_boAllTabs[g],a=b.tabBar;if((b)&&(b.cb)){b.cb()}if((a)&&(a.showMenu)){a.showMenu(f)}}function TabWidget_delayedClickCB(b){var a=_boAllTabs[b];if((a)&&(a.cb)){a.cb()}}function TabWidget_delayedDblClickCB(b){var a=_boAllTabs[b];if((a)&&(a.dblclick)){a.dblclick()}}function TabWidget_changeContent(b){var f=this;if(f.lnkLayer==null){f.lnkLayer=getLayer("tabWidgetLnk_"+f.id);f.leftImgLayer=getLayer("tabWidgetLeft_"+f.id);f.rightImgLayer=getLayer("tabWidgetRight_"+f.id);f.midImgLayer=getLayer("tabWidgetMid_"+f.id);f.imgImgLayer=getLayer("tabWidgetImg_"+f.id);f.iconLayer=getLayer("tabWidgetIcon_"+f.id)}if(!b){f.lnkLayer.innerHTML=convStr(f.name,true);changeOffset(f.iconLayer,f.iconOffX,f.iconOffY,f.icon?f.icon:_skin+"../transp.gif");f.iconLayer.alt=f.iconAlt;f.iconLayer.style.width=""+f.iconW+"px";f.iconLayer.style.height=""+f.iconH+"px";var k=f.icon?3:0,a=f.imgImgLayer;a.style.paddingRight=""+k+"px";a.style.width=""+(k+(((f.icon!=null)&&(f.iconW!=null))?f.iconW:0))+"px";if(_moz&&!_saf){a.width=(k+(((f.icon!=null)&&(f.iconW!=null))?f.iconW:0))}}var g=f.isSelected?0:72;if(!f.isTop){g+=144}changeOffset(f.leftImgLayer,0,g);changeOffset(f.midImgLayer,0,g+24);changeOffset(f.imgImgLayer,0,g+24);changeOffset(f.rightImgLayer,0,g+48);f.lnkLayer.className="thumbtxt"+(f.isSelected?"sel":"")}function TabWidget_select(a){var b=this;b.isSelected=a;if(b.layer!=null){b.changeContent(true)}}function TabWidget_change(a,g,s,q,b,r,n,m,k,l){var f=this;if(a!=null){f.name=a}if(g!=null){f.cb=g}if(k!=null){f.dblclick=k}if(s!=null){f.value=s}if(q!=null){f.icon=q}f.iconW=b?b:0;f.iconH=r?r:0;f.iconOffX=n?n:0;f.iconOffY=m?m:0;if(l!=null){f.iconAlt=l}if(f.layer!=null){f.changeContent(false)}}function newTabBarWidget(a,l,g,q,k,m,b){var f=newWidget(a);var n;f.isTop=l;f.cb=g;f.dblclick=k;f.menu=newMenuWidget("menu_"+a,null,m);f.st=q;f.counter=0;f.items=new Array;f.selIndex=-1;f.leftLimit=0;f.trLayer=null;f.showIcn=b==null?false:b;n=f.firstIcn=newIconWidget("firstIcn_"+a,_skin+"scroll_icon.gif",TabBarWidget_firstCB,null,_scroll_first_tab,5,8,0,0,0,8);n.par=f;n.margin=0;n.allowDblClick=true;n=f.previousIcn=newIconWidget("previousIcn_"+a,_skin+"scroll_icon.gif",TabBarWidget_prevCB,null,_scroll_previous_tab,5,8,7,0,7,8);n.par=f;n.margin=0;n.allowDblClick=true;n=f.nextIcn=newIconWidget("nextIcn_"+a,_skin+"scroll_icon.gif",TabBarWidget_nextCB,null,_scroll_next_tab,5,8,13,0,13,8);n.par=f;n.margin=0;n.allowDblClick=true;n=f.lastIcn=newIconWidget("lastIcn_"+a,_skin+"scroll_icon.gif",TabBarWidget_lastCB,null,_scroll_last_tab,5,8,21,0,21,8);n.par=f;n.margin=0;n.allowDblClick=true;f.showContextMenuAllowed=true;f.oldInit=f.init;f.init=TabBarWidget_init;f.getHTML=TabBarWidget_getHTML;f.add=TabBarWidget_add;f.remove=TabBarWidget_remove;f.removeAll=TabBarWidget_removeAll;f.select=TabBarWidget_select;f.getSelection=TabBarWidget_getSelection;f.getMenu=TabBarWidget_getMenu;f.showMenu=TabBarWidget_showMenu;f.showTab=TabBarWidget_showTab;f.getCount=TabBarWidget_getCount;f.oldResize=f.resize;f.resize=TabBarWidget_resize;f.getItemXPos=TabBarWidget_getItemXPos;f.scroll=TabBarWidget_scroll;f.setIconState=TabBarWidget_setIconState;f.setShowContextMenuAllowed=TabBarWidget_setShowContextMenuAllowed;return f}function TabBarWidget_init(){var g=this,a=g.items;g.oldInit();if(g.showIcn){g.firstIcn.init();g.previousIcn.init();g.nextIcn.init();g.lastIcn.init()}g.trLayer=getLayer("tr_"+g.id);g.tabsLayer=getLayer("tabs_"+g.id);for(var b in a){var f=a[b];f.init();f.select(b==g.selIndex)}}function TabBarWidget_getSelection(){var f=this,a=f.selIndex;if(a>=0){var b=new Object;b.index=a;b.valueOf=f.items[a].value;b.name=f.items[a].name;return b}else{return null}}function TabBarWidget_getHTML(){var k=this,b=k.items,a=b.length;var g='<div id="'+this.id+'" style="height:24px;overflow:hidden;'+(k.st?k.st:"")+'">';g+='<table cellspacing="0" cellpadding="0" border="0"><tbody><tr valign="top" height="24">';if(k.showIcn){g+='<td><table class="palette" cellspacing="0" cellpadding="0" border="0"><tbody><tr>';g+="<td>"+k.firstIcn.getHTML()+"</td>";g+="<td>"+k.previousIcn.getHTML()+"</td>";g+="<td>"+k.nextIcn.getHTML()+"</td>";g+="<td>"+k.lastIcn.getHTML()+"</td>";g+="</tr></tbody></table></td>"}g+='<td><div style="overflow:'+(true?"hidden":"scroll")+'" id="tabs_'+this.id+'"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr id="tr_'+this.id+'">';for(var f in b){g+="<td>"+b[f].getHTML()+"</td>"}g+="</tr></tbody></table></div></td>";g+="</tr></tbody></table></div>";return g}function TabBarWidget_select(f){var g=this,b=g.items,a=b.length;if(f==-1){f=a-1}if((f>=0)&&(f<a)){if((g.selIndex>=0)&&(g.selIndex!=f)&&(g.selIndex<a)){b[g.selIndex].select(false)}g.selIndex=f;b[f].select(true);g.scroll(g.selIndex)}}function TabBarWidget_resize(a,b){var g=this;var f=isHidden(g.layer);if(f&_moz&&!_saf){g.setDisplay(false)}g.oldResize(a,b);if(a!=null){g.tabsLayer.style.width=""+Math.max(0,a-54)}if(f&_moz&&!_saf){g.setDisplay(true)}g.setIconState()}function TabBarWidget_showTab(g,b){var k=this,f=k.items,a=f.length;if((g>=0)||(g<a)){f[g].setDisplay(b)}}function TabBarWidget_add(b,x,y,u,f,v,s,r,q){var g=this,a=g.counter++;var n=newTabWidget(g.id+"_tab"+a,g.isTop,b,TabBarWidget_itemClick,x,u,f,v,s,r,TabBarWidget_itemDblClick,q);n.tabBar=g;n.idx=a;arrayAdd(g,"items",n,y);var m=g.trLayer;if(m!=null){var k=document.createElement("td");k.innerHTML=n.getHTML();m.appendChild(k);n.init()}return n}function TabBarWidget_remove(b){var m=this,g=m.items,a=g.length;if((b>=0)&&(b<a)){var k=g[b];var f=k.layer;arrayRemove(m,"items",b);g=m.items;a=g.length;if(f!=null){f=f.parentNode;f.parentNode.removeChild(f)}if(m.selIndex>b){m.select(m.selIndex-1)}else{if((m.selIndex==b)&&(a>0)){m.select(Math.min(b,a-1))}}}}function TabBarWidget_removeAll(){var g=this,b=g.items,a=b.length;for(var f=a-1;f>=0;f--){g.remove(f)}}function TabBarWidget_itemClick(){var k=this.tabBar,b=k.items,a=b.length,f=-1;for(var g=0;g<a;g++){if(b[g].idx==this.idx){k.select(g);f=g;break}}if(k.cb){k.cb(f)}}function TabBarWidget_itemDblClick(){var k=this.tabBar,b=k.items,a=b.length,f=-1;for(var g=0;g<a;g++){if(b[g].idx==this.idx){f=g;break}}if(k.dblclick){k.dblclick(f)}}function TabBarWidget_getMenu(){return this.menu}function TabBarWidget_setShowContextMenuAllowed(a){this.showContextMenuAllowed=a}function TabBarWidget_showMenu(a){if(this.showContextMenuAllowed==false){return}if(_ie){a=event}this.menu.show(true,eventGetX(a),eventGetY(a))}function TabBarWidget_getCount(){return this.items.length}function TabBarWidget_scroll(b,k){var a=this;if(a.tabsLayer==null){return}var f=a.tabsLayer;var l=f.scrollLeft,g=f.offsetWidth,r=f.scrollWidth,n=r-g;if(b=="first"){f.scrollLeft=l=0;a.leftLimit=0}if(b=="previous"){a.leftLimit=a.leftLimit-1;var q=a.getItemXPos(a.leftLimit);f.scrollLeft=l=q}if(b=="next"){if(a.leftLimit>a.getCount()-1){return}a.leftLimit+=1;var q=a.getItemXPos(a.leftLimit);if(q<n){f.scrollLeft=l=q}else{f.scrollLeft=l=n}}if(b=="last"){for(var m=0;m<a.getCount();m++){var q=a.getItemXPos(m);if(q>n){break}}f.scrollLeft=l=Math.max(0,n);a.leftLimit=m}if(b==null){var q=getItemXPos(k);if(q<n){f.scrollLeft=l=q}else{f.scrollLeft=l=n}for(var m=0;m<a.getCount();m++){var q=a.getItemXPos(m);if(q>n){break}}a.leftLimit=m}a.setIconState()}function TabBarWidget_getItemXPos(b){var g=this;var a=0;for(var f=0;f<b;f++){a+=parseInt(g.items[f].getWidth())}return a}function TabBarWidget_setIconState(){var l=this;if(l.tabsLayer==null){return}var g=l.tabsLayer;var b=g.scrollLeft,k=g.offsetWidth,a=g.scrollWidth,f=a-k;if(b==f){l.nextIcn.setDisabled(true);l.lastIcn.setDisabled(true)}else{l.nextIcn.setDisabled(false);l.lastIcn.setDisabled(false)}if(b==0){l.firstIcn.setDisabled(true);l.previousIcn.setDisabled(true)}else{l.firstIcn.setDisabled(false);l.previousIcn.setDisabled(false)}}function TabBarWidget_firstCB(){var a=this.par;a.scroll("first")}function TabBarWidget_prevCB(){var a=this.par;a.scroll("previous")}function TabBarWidget_nextCB(){var a=this.par;a.scroll("next")}function TabBarWidget_lastCB(){var a=this.par;a.scroll("last")}function newTabbedZone(k,a,b,f){var g=newFrameZoneWidget(k,b,f);g.w=b;g.h=f;g.cb=a;g.zoneLayers=new Array;g.oldIndex=-1;g.tzOldInit=g.init;g.add=TabbedZoneWidget_add;g.select=TabbedZoneWidget_select;g.getTabCSS=TabbedZoneWidget_getTabCSS;g.init=TabbedZoneWidget_init;g.beginHTML=TabbedZoneWidget_beginHTML;g.oldFrameZoneEndHTML=g.endHTML;g.endHTML=TabbedZoneWidget_endHTML;g.tabs=newTabBarWidget("tzone_tabs_"+k,true,TabbedZone_itemClick);g.tabs.parentTabbedZone=g;g.beginTabHTML=TabbedZoneWidget_beginTabHTML;g.endTabHTML=TabbedZoneWidget_endTabHTML;g.beginTab=TabbedZoneWidget_beginTab;g.endTab=TabbedZoneWidget_endTab;g.showTab=TabbedZoneWidget_showTab;g.tzOldResize=g.resize;g.resize=TabbedZoneWidget_resize;return g}function TabbedZone_itemClick(){var b=this.parentTabbedZone,a=this.getSelection().index;b.select(a);if(b.cb){b.cb(a)}}function TabbedZoneWidget_add(b,k,f,n,a,l,g){var m=this;m.tabs.add(b,k,-1,f,n,a,l,g);m.zoneLayers[m.zoneLayers.length]=null}function TabbedZoneWidget_init(){var a=this;a.tzOldInit();a.tabs.init();a.select(0)}function TabbedZoneWidget_getTabCSS(f){var g=this,b=g.zoneLayers,a=b[f];if(a==null){a=b[f]=getLayer("tzone_tab_"+f+"_"+g.id)}return a?a.style:null}function TabbedZoneWidget_showTab(b,a){var f=this.tabs.items[b];if(f){f.setDisplay(a)}}function TabbedZoneWidget_select(b){var l=this,g=l.tabs,k=g.getSelection(),n=l.oldIndex,m;l.tabs.select(b);if(n!=-1){m=l.getTabCSS(n);if(m){m.display="none"}}else{var a=l.zoneLayers.length;for(var f=0;f<a;f++){m=l.getTabCSS(f);if(m){m.display="none"}}}l.oldIndex=b;m=l.getTabCSS(b);if(m){m.display="";l.resize(l.w,l.h)}}function TabbedZoneWidget_beginHTML(){var a=this;return'<table id="'+this.id+'" cellspacing="0" cellpadding="0" border="0"><tbody><tr valign="bottom" height="28"><td>'+imgOffset(_skin+"dialogframe.gif",5,5,0,0)+'</td><td valign="top" align="left" style="'+backImgOffset(_skin+"tabs.gif",0,288)+'">'+a.tabs.getHTML()+"</td><td>"+imgOffset(_skin+"dialogframe.gif",5,5,5,0)+'</td></tr><tr><td style="'+backImgOffset(_skin+"dialogframeleftright.gif",0,0)+'"></td><td class="dialogzone"><div id="'+a.id+'_container" style="'+sty("width",a.w)+sty("height",a.h)+'">'}function TabbedZoneWidget_endHTML(){return"</div>"+this.oldFrameZoneEndHTML()}function TabbedZoneWidget_beginTabHTML(a){var b=this;return'<div id="tzone_tab_'+a+"_"+b.id+'" style="display:none;'+sty("width",b.w)+sty("height",b.h)+'">'}function TabbedZoneWidget_endTabHTML(){return"</div>"}function TabbedZoneWidget_beginTab(a){_curDoc.write(this.beginTabHTML(a))}function TabbedZoneWidget_endTab(){_curDoc.write(this.endTabHTML())}function TabbedZoneWidget_resize(b,g){var k=this;if(b!=null){k.w=b;b=b+10}if(g!=null){k.h=g;g=g+33}k.tzOldResize(b,g);var a=getLayer(k.id+"_container");if(a){a.style.width=k.w+"px";a.style.height=k.h+"px"}if(k.oldIndex!=null){var f=getLayer("tzone_tab_"+k.oldIndex+"_"+k.id);if(f){f.style.width=k.w+"px";f.style.height=k.h+"px"}}}_trIndent=18;function newTreeWidget(a,q,g,s,v,f,m,u,n,l,r,k){var b=newScrolledZoneWidget(a,2,4,q,g,m);b.icns=s;b.sub=new Array;b.clickCB=v;b.doubleClickCB=f;b.expandCB=u;b.collapseCB=n;b.deleteCB=l;b.minIcon=r;b.plusIcon=k;b.mouseOverCB=null;b.rightClickMenuCB=null;b.mouseOverTooltip=false;b.dragDrop=null;b.oldInit=b.init;b.init=TreeWidget_init;b.getHTML=TreeWidget_getHTML;b.getSelections=TreeWidget_getSelections;b.getSelectedItem=TreeWidget_getSelectedItem;b.getSelectedItems=TreeWidget_getSelectedItems;b.getCheckedItems=TreeWidget_getCheckedItems;b.setDragDrop=TreeWidget_setDragDrop;b.setFocus=TreeWidget_setFocus;b.add=TreeWidget_add;b.setRightClickMenuCB=TreeWidget_setRightClickMenuCB;b.findByData=TreeWidget_findByData;b.findById=TreeWidget_findById;b.findInName=TreeWidget_findInName;b.selectByData=TreeWidget_selectByData;b.selectById=TreeWidget_selectById;b.unselect=TreeWidget_unselect;b.search=TreeWidget_search;b.treeLyr=null;b.elems=new Array;b.elemCount=0;b.selId=-1;b.selIds=new Array;b.multiSelection=false;b.hlPath=false;b.hlElems=new Array;b.iconOrientVertical=true;b.deleteAll=TreeWidget_deleteAll;b.rebuildHTML=TreeWidget_rebuildHTML;b.iconW=16;b.iconH=16;b.initialIndent=0;b.buildElems=TreeWidget_buildElems;b.getCount=TreeWidget_getCount;if(window._TreeWidgetElemInstances==null){window._TreeWidgetElemInstances=new Array}b.dispIcnFuncName="dispIcn";b.setTooltipOnMouseOver=TreeWidget_setTooltipOnMouseOver;b.setMouseOverCB=TreeWidget_setMouseOverCB;b.setMultiSelection=TreeWidget_setMultiSelection;b.setHighlightPath=TreeWidget_setHighlightPath;b.highlightPath=TreeWidget_highlightPath;b.unhlPath=TreeWidget_unhlPath;return b}function TreeWidget_unselect(){var g=this;if(g.selId>=0){var f=_TreeWidgetElemInstances[g.selId];f.unselect();g.selId=-1}if(g.multiSelection){var a=g.selIds.length,k;for(var b=a-1;b>=0;b--){var f=_TreeWidgetElemInstances[g.selIds[b]];if(f){f.unselect()}}g.selIds.length=0;g.layer._BOselIds=""}g.unhlPath()}function TreeWidget_selectByData(f,a){var g=this,b=g.findByData(f);if(b){b.select(a)}}function TreeWidget_selectById(g,a){var f=this,b=f.findById(g);if(b){b.select(a)}}function TreeWidget_findByData(g){var k=this,b=k.sub,f=null;for(var a in b){f=b[a].findByData(g);if(f){return f}}return null}function TreeWidget_findById(k){var g=this,b=g.sub,f=null;for(var a in b){f=b[a].findById(k);if(f){return f}}return null}function TreeWidget_findInName(q,v,k,B,r,m,f){if(q==""||q==null){return null}var s=this,z=null,y=null,u=false;var C=0,b=0;var n=v?v:false;var A=k?k:false;var l=(!r)?r:true;var g=f?f:false;var x=s.elems.length;if(x==0){s.buildElems();x=s.elems.length;if(x==0){return}}var a=s.getSelections();if(a.length>0){C=a[0].elemPos+(l?1:-1);if((C<0)&&!l){C=x-1}if((C==x)&&l){C=0}}else{if(B=="begin"){C=0}else{if(B=="end"){C=x-1}}}b=C;while((b>=0)&&(b<x)){y=s.elems[b];u=y.getHiddenParent();if((g&&!u)||(!g)){z=y.findInName(q,n,A,l,m)}if(z!=null){break}b=b+(l?1:-1);if((b<0)&&!l){b=x-1}if((b==x)&&l){b=0}if(b==C){break}}return z}function TreeWidget_search(r,g,k,q,n,b,l,f,m){var a=this,s=null;if(r==""||r==null){return}s=a.findInName(r,g,k,q,n,l,f);if(s){a.unselect();s.select(m)}else{if(b){b()}}}function TreeWidget_add(g,b){var k=this,f=k.sub,a=f.length;g.treeView=k;f[a]=g;g.expanded=(a==0);if(b){g.extraIndent=b}return g}function TreeWidget_getHTML(){var m=this,l=m.sub,b=l.length,f=new Array(b+3),g=0;f[g++]=m.beginHTML()+'<span id="treeCont_'+m.id+'" onkeydown="return '+_codeWinName+'.TreeWidget_keyDownCB(this,event)" >';for(var k in l){f[g++]=l[k].getHTML(m.initialIndent,k==0)}f[g++]="</span>"+m.endHTML();return f.join("")}function TreeWidget_deleteAll(){var b=this.sub;for(var a in b){b[a].deleteAll();b[a]=null}b.length=0;if(this.elems){this.elems.length=0}}function TreeWidget_rebuildHTML(){var n=this,m=n.sub,b=m.length,f=new Array(b),g=0,l=n.initialIndent;for(var k in m){f[g++]=m[k].getHTML(l,k==0)}n.treeLyr.innerHTML=f.join("");n.selId=-1;n.layer._BOselId=-1;n.selIds.length=0;n.layer._BOselIds="";this.buildElems()}function TreeWidget_init(){this.oldInit();var b=this.treeLyr=getLayer("treeCont_"+this.id);if(this.dragDrop){this.dragDrop.attachCallbacks(this.layer)}var a=this.layer._BOselId;if(a!=null){this.selId=a}var g=this.layer._BOselIds;if(g!=null&&g!=""){this.selIds.length=0;this.selIds=g.split(";")}var f=this.sub}function TreeWidget_buildElems(elem){with(this){if(elem==null){elem=this}else{var pos=elems.length;elems[pos]=elem;elem.elemPos=pos}var subArr=elem.sub,len=subArr.length;for(var i=0;i<len;i++){buildElems(subArr[i])}}}function TreeWidget_getSelectedItem(){var a=this.selId;return(a>=0)?_TreeWidgetElemInstances[a]:null}function TreeWidget_getSelections(){var f=this;if(f.multiSelection){return f.getSelectedItems()}else{var a=f.getSelectedItem(),b=new Array;if(a!=null){b[0]=a}return b}}function TreeWidget_setFocus(a){var b=_TreeWidgetElemInstances[a];if(b!=null){b.init();safeSetFocus(b.domElem)}}function TreeWidget_keyPressCB(f,n){if(getWidget(f).multiSelection){return TreeWidget_multiSelKeyPress(f,n)}var q=getWidget(f).selId;if(q>=0){var g=_TreeWidgetElemInstances[q];var b=g.treeView;var m=TreeIdToIdx(_ie?_curWin.event.srcElement:n.target);var a=eventGetKey(n),l=_ie?_curWin.event.ctrlKey:n.ctrlKey;if(a==13){if(m!=q){TreeWidget_clickCB(m,false,null);TreeWidgetElem_UpdateTooltip(m,true)}else{if((m==q)&&(b.doubleClickCB)){b.doubleClickCB(g.userData)}}}if((a==10)&&l&&(m==_codeWinName+"trLstElt"+q)){if(g.sub.length>0){TreeWidget_toggleCB(q);TreeWidgetElem_UpdateTooltip(m)}if(g.isIncomplete&&g.querycompleteCB){g.querycompleteCB();TreeWidgetElem_UpdateTooltip(m)}return false}}else{var m=TreeIdToIdx(_ie?_curWin.event.srcElement:n.target);var a=eventGetKey(n);if(a==13){TreeWidget_clickCB(m,false,null);TreeWidgetElem_UpdateTooltip(m,true)}}}function TreeWidget_multiSelKeyPress(g,s){var m=getWidget(g);var r=m.selIds.length;if(r>0){var a=TreeIdToIdx(_ie?_curWin.event.srcElement:s.target);var n=eventGetKey(s),b=_ie?_curWin.event.ctrlKey:s.ctrlKey;var l=null;for(var q=0;q<r;q++){var f=m.selIds[q];if(a==f){l=_TreeWidgetElemInstances[f];break}}if(n==13){if(l==null){TreeWidget_clickCB(a,false,_ie?_curWin.event:s);TreeWidgetElem_UpdateTooltip(a,true)}else{if(l&&(m.doubleClickCB)){m.doubleClickCB(l.userData)}}}if((n==10)&&b&&l){if(l.sub.length>0){TreeWidget_toggleCB(f);TreeWidgetElem_UpdateTooltip(a)}if(l.isIncomplete&&l.querycompleteCB){l.querycompleteCB();TreeWidgetElem_UpdateTooltip(a)}return false}}else{var a=TreeIdToIdx(_ie?_curWin.event.srcElement:s.target);var n=eventGetKey(s);if(n==13){TreeWidget_clickCB(a,false,null);TreeWidgetElem_UpdateTooltip(a,true)}}return true}t=0;function TreeWidget_keyDownCB(m,n){if(getWidget(m).multiSelection){return TreeWidget_multiSelKeyDown(m,n)}var b=getWidget(m).selId;var l=eventGetKey(n);if(b>=0){var f=_TreeWidgetElemInstances[b];if(f!=null){var g=f.treeView;var a=TreeIdToIdx(_ie?_curWin.event.srcElement:n.target);switch(l){case 107:case 39:if((f.sub.length>0)&&(!f.expanded)){TreeWidget_toggleCB(b);TreeWidgetElem_UpdateTooltip(a)}if(f.isIncomplete&&f.querycompleteCB){f.querycompleteCB();TreeWidgetElem_UpdateTooltip(a)}break;case 109:case 37:if((f.sub.length>0)&&(f.expanded)){TreeWidget_toggleCB(b);TreeWidgetElem_UpdateTooltip(a)}break;case 40:case 38:var r=f.getNextPrev(l==40?1:-1);if(r!=null){r.select(null,null,null,true);safeSetFocus(r.domElem)}return false;break;case 46:if(g.deleteCB){g.deleteCB(f.userData)}break;default:var q=String.fromCharCode(l);if(q){g.search(q,false,false,null,true,null,true,true,true)}break}}}if(l==13){eventCancelBubble(n)}}function TreeWidget_multiSelKeyDown(g,u){var n=getWidget(g);var s=n.selIds.length;var q=eventGetKey(u);if(s>0){var a=_ie?_curWin.event.ctrlKey:u.ctrlKey;var l=_ie?_curWin.event.shiftKey:u.shiftKey;var b=TreeIdToIdx(_ie?_curWin.event.srcElement:u.target);var m=null,f;for(var r=0;r<s;r++){f=n.selIds[r];if(b==f){m=_TreeWidgetElemInstances[f];break}}if(m){switch(q){case 107:case 39:if((m.sub.length>0)&&(!m.expanded)){TreeWidget_toggleCB(f);TreeWidgetElem_UpdateTooltip(b)}if(m.isIncomplete&&m.querycompleteCB){m.querycompleteCB();TreeWidgetElem_UpdateTooltip(b)}break;case 109:case 37:if((m.sub.length>0)&&(m.expanded)){TreeWidget_toggleCB(f);TreeWidgetElem_UpdateTooltip(b)}break;case 40:case 38:var x=m.getNextPrev(q==40?1:-1);if(x!=null){x.select(null,_ie?_curWin.event:u,null,true);safeSetFocus(x.domElem)}return false;break;case 46:if(n.deleteCB){n.deleteCB(m.userData)}break;default:var v=String.fromCharCode(q);if(v){n.search(v,false,false,null,true,null,true,true,true)}break}}}if(q==13){eventCancelBubble(u)}}function TreeWidget_setDragDrop(f,b,a,g){this.dragCB=f;this.acceptDropCB=b;this.dropCB=a;this.dragEndCB=g;this.dragDrop=newDragDropData(this,TreeWidget_dragStartCB,TreeWidget_dragCB,TreeWidget_dragEndCB,TreeWidget_acceptDropCB,TreeWidget_leaveDropCB,TreeWidget_dropCB)}function TreeWidget_dragStartCB(k){var f=k.getSelections(),b=k.iconOrientVertical;k.dragCB(k);if(f&&f.length==1){var g=f[0];var a=g.iconId;newTooltipWidget().show(true,g.getDragTooltip(),a>=0?k.icns:null,k.iconW,k.iconH,b?0:k.iconW*a,b?k.iconH*a:0)}}function TreeWidget_setRightClickMenuCB(a){this.rightClickMenuCB=a}function TreeWidget_getCount(){var a=this;if(a.sub!=null){return a.sub.length}else{return 0}}function TreeWidget_setTooltipOnMouseOver(a){this.mouseOverTooltip=a}function TreeWidget_setMouseOverCB(a){this.mouseOverCB=a}function TreeWidget_dragCB(a){newTooltipWidget().setPos()}function TreeWidget_dragEndCB(a){newTooltipWidget().show(false);if(a.dragEndCB){a.dragEndCB()}}function TreeWidget_dragOverEnterCB(a,g){var b=_TreeWidgetElemInstances[g];if(a.ondrop==null){b.treeView.dragDrop.attachCallbacks(a,true);a.domEltID=g}var f=_ddData[a._dragDropData],b=_curWin.event;b.dataTransfer.dropEffect=b.ctrlKey?"copy":"move";if(f.acceptDropCB(window._globalDDD,f.widget,b.ctrlKey,b.ctrlKey?false:b.shiftKey,a,false)){b.returnValue=false}b.cancelBubble=true}function TreeWidget_acceptDropCB(k,g,f,a,b){return g.acceptDropCB(k,g,f,a,b)}function TreeWidget_leaveDropCB(g,f,b,a){if(f.dropWidget&&f.dropWidget.layer){if(f.dropWidget.layer.className!=f.dropWidget.nonselectedClass){f.dropWidget.layer.className=f.dropWidget.nonselectedClass}}}function TreeWidget_dropCB(l,g,f,a,b,k){newTooltipWidget().show(false);g.dropCB(l,g,f,a)}function TreeWidget_setMultiSelection(a){if((!this.multiSelection&&a)||(this.multiSelection&&!a)){this.unselect()}this.multiSelection=a}function TreeWidget_getSelectedItems(){var g=new Array;var a=this.selIds.length,k,f=0;for(var b=0;b<a;b++){k=this.selIds[b];if(k>=0){g[f]=_TreeWidgetElemInstances[k];f++}}return g}function TreeWidget_getCheckedItems(){var f=new Array;var a=_TreeWidgetElemInstances.length,g=0;for(var b=0;b<a;b++){elem=_TreeWidgetElemInstances[b];if(elem.isChecked()){f[g]=elem;g++}}return f}function TreeWidget_setHighlightPath(a){this.hlPath=a;if(!a){this.unhlPath()}}function TreeWidget_unhlPath(){var g=this,a=g.hlElems.length;var f,k;if(a>0){for(var b=0;b<a;b++){f=g.hlElems[b];f.init();k=f.domElem;if(k==null){return}if(f.isSelected()){k.className=f.selectedClass}else{k.className=f.nonselectedClass}}g.hlElems.length=0}}function TreeWidget_highlightPath(g){var f=this;if(!f.hlPath){return}f.unhlPath();var a=_TreeWidgetElemInstances[g];f.hlElems[f.hlElems.length]=a;a.domElem.className=a.selectedClass;if(a.elemPos==-1){f.buildElems()}var b=a.par;while(b){b.init();b.domElem.className=b.hlClass;f.hlElems[f.hlElems.length]=b;b=b.par}if(a.isNode()){hlVisibleChildren(a,f.hlElems)}}function hlVisibleChildren(k,b){if(k.expanded&&!k.isIncomplete){var a=k.sub.length;for(var f=0;f<a;f++){var g=k.sub[f];b[b.length]=g;g.init();g.domElem.className=g.hlClass;if(g.isNode()){hlVisibleChildren(g,b)}}}}function newTreeWidgetElem(m,a,b,g,n,r,k,q,l){var f=new Object;f.elemPos=-1;if(window._TreeWidgetElemInstances==null){window._TreeWidgetElemInstances=new Array}f.expanded=false;f.generated=false;f.iconId=m;f.iconSelId=n?n:m;f.tooltip=r;f.customTooltip=false;f.iconAlt=k;f.isHTML=false;f.isCheck=false;f.checked=false;f.check=TreeWidgetElem_check;f.isChecked=TreeWidgetElem_isChecked;f.checkCB=null;f.name=a;f.par=null;f.userData=b;f.sub=new Array;f.treeView=null;f.id=_TreeWidgetElemInstances.length;f.layer=null;f.plusLyr=null;f.icnLyr=null;f.checkElem=null;f.domElem=null;f.toggleLyr=null;f.blackTxt=(q)?q:"treeNormal";f.grayTxt="treeGray";f.selectedClass=(l)?l:"treeSelected";f.nonselectedClass=f.blackTxt;f.feedbackDDClass="treeFeedbackDD";f.hlClass="treeHL";f.help=g;_TreeWidgetElemInstances[f.id]=f;f.getHTML=TreeWidgetElem_getHTML;f.init=TreeWidgetElem_init;f.add=TreeWidgetElem_add;f.select=TreeWidgetElem_select;f.unselect=TreeWidgetElem_unselect;f.getNextPrev=TreeWidgetElem_getNextPrev;f.getHiddenParent=TreeWidgetElem_getHiddenParent;f.nodeIndent=0;f.getTooltip=TreeWidgetElem_getTooltip;f.getDragTooltip=TreeWidgetElem_getDragTooltip;f.change=TreeWidgetElem_change;f.deleteAll=TreeWidget_deleteAll;f.setGrayStyle=TreeWidgetElem_setGrayStyle;f.isGrayStyle=TreeWidgetElem_isGrayStyle;f.findByData=TreeWidgetElem_findByData;f.findById=TreeWidgetElem_findById;f.findInName=TreeWidgetElem_findInName;f.isIncomplete=false;f.querycompleteCB=null;f.setIncomplete=TreeWidgetElem_setIncomplete;f.finishComplete=TreeWidgetElem_finishComplete;f.setEditable=TreeWidgetElem_setEditable;f.showEditInput=TreeWidgetElem_showEditInput;f.isLeaf=TreeWidgetElem_isLeaf;f.isNode=TreeWidgetElem_isNode;f.isSelected=TreeWidgetElem_isSelected;f.htmlWritten=false;f.showCustomTooltipCB=null;f.hideCustomTooltipCB=null;return f}function TreeWidgetElem_checkCB(a,f){var b=_TreeWidgetElemInstances[f];b.checked=a.checked;if(b.checkCB){b.checkCB(b,f)}}function TreeWidgetElem_isChecked(){var a=this;return(a.isCheck?a.checked:false)}function TreeWidgetElem_check(a){var b=this;if(b.isCheck){b.checked=a;if(b.htmlWritten){b.init();b.checkElem.checked=a}}}function TreeWidgetElem_EditNormalBehaviour(a){eventCancelBubble(a);return true}function TreeWidgetElem_EditBlurCB(){setTimeout("TreeWidgetElem_EditKeyCancel("+this.widID+")",1)}_globTreeTxtvalue="";function TreeWidgetElem_EditKeyDown(b){eventCancelBubble(b);var a=eventGetKey(b),f=_TreeWidgetElemInstances[this.widID];if(a==27){setTimeout("TreeWidgetElem_EditKeyCancel("+this.widID+")",1)}else{if(a==13){_globTreeTxtvalue=this.value;setTimeout("TreeWidgetElem_EditKeyAccept("+this.widID+")",1)}}}function TreeWidgetElem_EditKeyCancel(b){var a=_TreeWidgetElemInstances[b];a.showEditInput(false)}function TreeWidgetElem_EditKeyAccept(b){var a=_TreeWidgetElemInstances[b];if(a.validChangeNameCB){if(a.validChangeNameCB(_globTreeTxtvalue)==false){return}}a.change(null,_globTreeTxtvalue);a.showEditInput(false);if(a.changeNameCB){a.changeNameCB()}}_globTreeTxt=null;function TreeWidgetElem_showEditInput(m){var a=this;a.init();var f=a.domElem,k=f.style;if(m&&(k.display!="none")){var l=f.parentNode,n=f.offsetWidth,g=f.offsetHeight;k.display="none";var q=_globTreeTxt=_curDoc.createElement("INPUT");q.type="text";q.className="textinputs";q.value=a.name;q.ondragstart=TreeWidgetElem_EditNormalBehaviour;q.onselectstart=TreeWidgetElem_EditNormalBehaviour;q.onblur=TreeWidgetElem_EditBlurCB;q.onkeydown=TreeWidgetElem_EditKeyDown;q.widID=a.id;var b=q.style;b.width=""+(n+20)+"px";l.appendChild(q);q.focus();q.select()}if((m!=true)&&(k.display=="none")){var q=_globTreeTxt;if(q){q.parentNode.removeChild(q);k.display="";_globTreeTxt=null}}}function TreeWidgetElem_setEditable(a,g,b){var f=this;if(a){f.changeNameCB=g;f.validChangeNameCB=b}f.isEditable=a}function TreeWidgetElem_triggerDD(){var g=_treeWClickedW,f=_curWin.event;if(g&&(g.clicked)&&(f.button==_leftBtn)){if(g.initialX!=null){var b=eventGetX(f),k=eventGetY(f),a=3;if((b<(g.initialX-a))||(b>(g.initialX+a))||(k<(g.initialY-a))||(k>(g.initialY+a))){this.dragDrop();g.clicked=false}}}}function TreeWidgetElem_mouseUp(){var b=_treeWClickedW,a=_curWin.event;b.select(null,a);b.domElem.onmouseup=null}function TreeWidgetElem_init(){var l=this;if(l.layer==null){var f=l.sub,a=f.length,k=(a>0)||l.isIncomplete;l.layer=getLayer(_codeWinName+"TWe_"+l.id);if(l.layer==null){return}var m=l.layer.childNodes,g=m.length;l.plusLyr=k?m[0].childNodes[1]:null;l.icnLyr=(l.iconId>-1)?m[k?1:0]:null;l.checkElem=l.isCheck?m[g-2]:null;l.domElem=m[g-1];l.toggleLyr=getLayer(_codeWinName+"trTog"+l.id);if(l.treeView.mouseOverTooltip||l.treeView.mouseOverCB){l.domElem.onmouseout=TreeFuncMouseout}if(k){addDblClickCB(l.plusLyr,_tpdb)}if(k&&l.generated){for(var b in f){f[b].init()}}addDblClickCB(l.domElem,_tpdb)}}function TreeIdToIdx(b){if(b){var f=b.id;if(f){var a=f.lastIndexOf("TWe_");if(a>=0){return parseInt(f.slice(a+4))}else{return -1}}else{return TreeIdToIdx(b.parentNode)}}return -1}function TreeFuncMouseout(a){_tmoc(this,TreeIdToIdx(this),false,a)}function _tmvc(a,b){_tmoc(a,TreeIdToIdx(a),true,b)}function _tpl(a,b){TreeWidget_clickCB(TreeIdToIdx(a),true,b,true);return false}function _tkl(a,f){var b=eventGetKey(f);if(b==13){return _tpl(a,f)}}function _tkt(a,f){var b=eventGetKey(f);if(b==13){return _tpt(a,f)}}function _tpt(a,b){TreeWidget_clickCB(TreeIdToIdx(a),false,b,true);return false}function _tpdb(a){treeDblClickCB(TreeIdToIdx(this),_ie?event:a);return false}function _tfcc(a,b){treeFCCB(a,TreeIdToIdx(a),true,b);a.onblur=_tblc}function _tblc(a){treeFCCB(this,TreeIdToIdx(this),false,a)}function TreeWidgetElem_getHTML(indent,isFirst){var s="";with(this){htmlWritten=true,isRoot=(par==null);var len=sub.length,exp=(len>0)||isIncomplete,a=new Array,i=0;if(this.extraIndent){indent+=_trIndent*extraIndent}var keyCB='onkeydown=" return '+_codeWinName+'._tkt(this,event)" ';var mouseCB='onfocus="'+_codeWinName+'._tfcc(this,event)" onclick="return '+_codeWinName+'._tpt(this,event)" ';if(treeView.mouseOverTooltip||treeView.mouseOverCB){mouseCB+='onmouseover="'+_codeWinName+'._tmvc(this,event)" '}var contextMenu="";if(treeView.rightClickMenuCB!=null){contextMenu=' oncontextmenu="'+_codeWinName+".treeContextMenuCB('"+id+"', event);return false\" "}var acceptDD="";if((treeView.acceptDropCB!=null)&&(_ie)){acceptDD=' ondragenter="'+_codeWinName+".TreeWidget_dragOverEnterCB(this,'"+id+"');\" ";acceptDD+=' ondragover="'+_codeWinName+".TreeWidget_dragOverEnterCB(this,'"+id+"');\" "}a[i++]='<div id="'+_codeWinName+"TWe_"+id+'"'+contextMenu+" class=trElt>";var onkeydown='onkeydown="return '+_codeWinName+'._tkl(this,event)" ';var onclick='onclick="return '+_codeWinName+'._tpl(this,event)" ';if(exp){var expIcon;var iconTooltip;if(expanded){if(treeView.minIcon!=null){expIcon=treeView.minIcon}else{expIcon=_skin+"../min.gif"}iconTooltip=_collapseNode.replace("%1",name)}else{if(treeView.plusIcon!=null){expIcon=treeView.plusIcon}else{expIcon=_skin+"../plus.gif"}iconTooltip=_expandNode.replace("%1",name)}a[i++]="<a tabindex=1 "+onclick+" "+onkeydown+' href="javascript:doNothing();"><span style="display:none">'+iconTooltip+'</span><img class=trPlus src="'+expIcon+'"/></a>'}if(iconId>-1){a[i++]="<img tabindex=1 "+mouseCB+" "+keyCB+"class=trIcn"+(exp||isRoot?"Plus":"")+" "+attr("src",_skin+"../transp.gif")+attr("alt",iconAlt)+' align=top style="'+backImgOffset(treeView.icns,(treeView.iconOrientVertical?0:treeView.iconW*(expanded?iconSelId:iconId)),(treeView.iconOrientVertical?treeView.iconH*(expanded?iconSelId:iconId):0))+'" >'}else{if(!exp&&!isRoot){a[i++]="<img tabindex=1 class=trSep "+attr("src",_skin+"../transp.gif")+">"}}if(isCheck){a[i++]='<input type=checkbox style="margin:0px;" onclick="'+_codeWinName+".TreeWidgetElem_checkCB(this,'"+id+"')\""+(this.checked?" checked":"")+">"}a[i++]='<a href="javascript:doNothing();" '+mouseCB+" "+keyCB+" tabindex=1 "+acceptDD+" class="+nonselectedClass+">";a[i++]=(isHTML?name:convStr(name));a[i++]="</a>";a[i++]="</div>";if(exp){a[i++]='<div id="'+_codeWinName+"trTog"+id+'" style="margin-left:18px;display:'+(expanded?"":"none")+'">'}if(expanded){generated=true;for(var j=0;j<len;j++){a[i++]=sub[j].getHTML(0,j==0)}}if(exp){nodeIndent=indent;a[i++]="</div>"}}return a.join("")}function TreeWidgetElem_setGrayStyle(b){var f=this,a=b?f.grayTxt:f.blackTxt;if(a!=f.nonselectedClass){f.nonselectedClass=a;f.init();if(f.domElem&&(f.domElem.className!=f.selectedClass)){f.domElem.className=a}}}function TreeWidgetElem_isGrayStyle(){return this.nonselectedClass==this.grayTxt}function TreeWidgetElem_setIncomplete(a){this.isIncomplete=true;this.querycompleteCB=a}function TreeWidgetElem_finishComplete(){this.isIncomplete=false;TreeWidget_toggleCB(this.id);this.treeView.buildElems()}function TreeWidgetElem_findByData(g){var k=this;if(k.userData==g){return k}var b=k.sub;for(var a in b){var f=b[a].findByData(g);if(f!=null){return f}}return null}function TreeWidgetElem_findInName(q,f,g,m,k){var b=this,a=b.name;if(q==""||q==null){return}if(!f||(f==null)){a=a.toLowerCase();q=q.toLowerCase()}if(g){var r=a.split(" ");for(var l=0;l<r.length;l++){if(r[l]==q){return b}}}else{var n=a.indexOf(q);if(k==true){if(n==0){return b}}else{if(n>-1){return b}}}return null}function TreeWidgetElem_findById(k){var g=this;if(g.id==k){return g}var b=g.sub;for(var a in b){var f=b[a].findById(k);if(f!=null){return f}}return null}function TreeWidgetElem_change(m,a,b,k,n,q){var f=this,g=f.treeView;if(m!=null){f.iconId=m}if(a!=null){f.name=a}f.userData=b;if(k!=null){f.help=k}f.iconSelId=(n!=null)?n:f.iconId;if(q!=null){f.tooltip=q}f.init();if(f.domElem){f.domElem.innerHTML=convStr(f.name)}if(f.icnLyr){if(f.icnLyr.childNodes.length>0){var l=f.icnLyr.childNodes[f.sub.length>0?1:0];changeOffset(l,g.iconOrientVertical?0:f.treeView.iconW*(f.expanded?f.iconSelId:f.iconId),g.iconOrientVertical?f.treeView.iconH*(f.expanded?f.iconSelId:f.iconId):0)}}}function treeInitDropFunc(a,f){var b=_TreeWidgetElemInstances[f];if(a.ondrop==null){b.treeView.dragDrop.attachCallbacks(a,true);a.domEltID=f}}function TreeWidget_toggleCB(g,b){var f=_TreeWidgetElemInstances[g];if(f.sub.length==0){f.plusLyr.style.visibility="hidden";return}f.expanded=!f.expanded;f.init();if(b){dispIcn(g)}else{setTimeout(f.treeView.dispIcnFuncName+"("+g+")",1)}var a=f.treeView;if(f.expanded&&a.expandCB){a.expandCB(f.userData)}if(!f.expanded&&a.collapseCB){a.collapseCB(f.userData)}}function dispIcn(eId){var e=_TreeWidgetElemInstances[eId];with(e){if(expanded&&!generated){generated=true;var a=new Array,i=0,len=sub.length,newInd=nodeIndent+_trIndent;for(var j=0;j<len;j++){a[i++]=sub[j].getHTML(newInd,j==0)}toggleLyr.innerHTML=a.join("")}toggleLyr.style.display=expanded?"block":"none";if(expanded){if(treeView.minIcon!=null){plusLyr.src=treeView.minIcon}else{plusLyr.src=_skin+"../min.gif"}}else{if(treeView.plusIcon!=null){plusLyr.src=treeView.plusIcon}else{plusLyr.src=_skin+"../plus.gif"}}plusLyr.title=expanded?_expandedLab:_collapsedLab;if(icnLyr&&icnLyr.childNodes&&icnLyr.childNodes.length>1){var iconL=icnLyr.childNodes[1];changeOffset(iconL,treeView.iconOrientVertical?0:treeView.iconW*(expanded?iconSelId:iconId),treeView.iconOrientVertical?treeView.iconH*(expanded?iconSelId:iconId):0)}}}function TreeWidgetElem_add(elem){with(this){elem.treeView=treeView;elem.par=this;sub[sub.length]=elem}return elem}function TreeWidgetElem_getHiddenParent(){var a=this.par;if(a==null){return null}if(!a.expanded){return a}return;a.getHiddenParent()}function TreeWidgetElem_getNextPrev(delta){with(this){if(elemPos==-1){treeView.buildElems()}var newPos=elemPos+delta;if((newPos>=0)&&(newPos<treeView.elems.length)){var ret=treeView.elems[newPos];var hidden=ret.getHiddenParent();if(hidden!=null){return ret.getNextPrev(delta)}else{return ret}}else{return null}}}function TreeWidgetElem_scroll(k,a){var f=Math.max(0,a.offsetHeight-20),l=a.scrollTop;var b=getPos(k,a);var m=b.offsetTop,g=k.offsetHeight;if((m-l+g)>f){a.scrollTop=m+g-f}if((m-l)<0){a.scrollTop=m}}function TreeWidgetElem_unselect(){var o=this;with(o){init();if(domElem){domElem.className=o.nonselectedClass}treeView.selId=-1;if(treeView.multiSelection){var idx=arrayFind(treeView,"selIds",id);if(idx>-1){arrayRemove(treeView,"selIds",idx);treeView.layer._BOselIds="";var len=treeView.selIds.length;for(var i=0;i<len;i++){if(treeView.layer._BOselIds==""){treeView.layer._BOselIds=""+treeView.selIds[i]}else{treeView.layer._BOselIds+=";"+treeView.selIds[i]}}}}}}function TreeWidgetElem_select(setFocus,ev,noSendClickCB,isFromKeybArrow){var coll=new Array;var par=this.par;while(par){if(!par.expanded){coll[coll.length]=par}par=par.par}var cLen=coll.length;for(var i=cLen-1;i>=0;i--){TreeWidget_toggleCB(coll[i].id,true)}if(cLen>0){this.select(setFocus,ev,noSendClickCB,isFromKeybArrow)}if(this.treeView.multiSelection){TreeWidgetElem_multiSelect(this,setFocus,ev,noSendClickCB,isFromKeybArrow);return}if(noSendClickCB==null){noSendClickCB=false}with(this){if(treeView.selId!=id){if(treeView.selId>=0){var prev=_TreeWidgetElemInstances[treeView.selId];prev.init();if(prev.domElem){prev.domElem.className=prev.nonselectedClass}}treeView.selId=id;init();treeView.layer._BOselId=id;var de=domElem;if(de==null){return}if(treeView.hlPath){treeView.highlightPath(id)}else{de.className=selectedClass}if(setFocus){safeSetFocus(de)}TreeWidgetElem_scroll(de,treeView.layer)}if((treeView.clickCB)&&(!noSendClickCB)){treeView.clickCB(userData,isFromKeybArrow!=null?isFromKeybArrow:false)}}}_startShift=null;function TreeWidgetElem_multiSelect(o,setFocus,ev,noSendClickCB,isFromKeybArrow){if(noSendClickCB==null){noSendClickCB=false}with(o){init();var de=domElem;if(de==null){return}if(treeView.hlPath){treeView.unhlPath()}if(ev==null){var idx=arrayFind(treeView,"selIds",id);if(idx==-1){treeView.selIds[treeView.selIds.length]=id;if(treeView.layer._BOselIds==""){treeView.layer._BOselIds=""+id}else{treeView.layer._BOselIds+=";"+id}de.className=selectedClass}_startShift=null}else{var idx=arrayFind(treeView,"selIds",id);var ctrl=_ie?_curWin.event.ctrlKey:ev.ctrlKey;var shift=_ie?_curWin.event.shiftKey:ev.shiftKey;var typeEvt=_ie?_curWin.event.type:ev.type;if(ctrl&&!shift){if(idx==-1){treeView.selIds[treeView.selIds.length]=id;if(treeView.layer._BOselIds==""){treeView.layer._BOselIds=""+id}else{treeView.layer._BOselIds+=";"+id}de.className=selectedClass}else{unselect()}_startShift=o}if(shift){var lastSelId=-1,lastSel=null;if(treeView.selIds.length>0){lastSelId=treeView.selIds[treeView.selIds.length-1];lastSel=_TreeWidgetElemInstances[lastSelId];if(_startShift==null){_startShift=lastSel}if(!ctrl){treeView.unselect()}TreeWidgetElem_multiSelectShift(_startShift.id,id)}else{treeView.unselect();treeView.selIds[0]=id;treeView.layer._BOselIds=""+id;if(treeView.hlPath){treeView.highlightPath(id)}else{de.className=selectedClass}_startShift=null}}if(!ctrl&&!shift){var idx=arrayFind(treeView,"selIds",id);if(_ie&&typeEvt=="mousedown"&&idx>-1){window._treeWClickedW=o;de.onmouseup=TreeWidgetElem_mouseUp}else{treeView.unselect();treeView.selIds[0]=id;treeView.layer._BOselIds=""+id;if(treeView.hlPath){treeView.highlightPath(id)}else{de.className=selectedClass}_startShift=null}}}if(setFocus){safeSetFocus(de)}TreeWidgetElem_scroll(de,treeView.layer);if((treeView.clickCB)&&(!noSendClickCB)){treeView.clickCB(userData,isFromKeybArrow!=null?isFromKeybArrow:false)}}}function TreeWidgetElem_multiSelectCtrl(){}function TreeWidgetElem_multiSelectShift(n,m){var r=_TreeWidgetElemInstances[n];var q=_TreeWidgetElemInstances[m];var f=r?r.treeView:null;if(f==null){return}if(r.elemPos==-1||q.elemPos==-1){f.buildElems()}var l=(r.elemPos<q.elemPos)?r.elemPos:q.elemPos;var a=(r.elemPos>q.elemPos)?r.elemPos:q.elemPos;if((l>=0)&&(a<f.elems.length)){for(var g=l;g<=a;g++){var b=f.elems[g];var k=b.getHiddenParent();if((k==null)&&(arrayFind(f,"selIds",b.id)==-1)){f.selIds[f.selIds.length]=b.id;if(f.layer._BOselIds==""){f.layer._BOselIds=""+b.id}else{f.layer._BOselIds+=";"+b.id}b.init();if(b.domElem){b.domElem.className=b.selectedClass}}}}}function TreeWidget_clickCB(k,f,b,a){eventCancelBubble(b);var g=_TreeWidgetElemInstances[k];if(g==null){return}g.init();if(f&&(g.sub.length>0)){TreeWidget_toggleCB(k)}else{if(f&&g.isIncomplete&&g.querycompleteCB){g.querycompleteCB()}else{g.select(null,b)}}if(_curDoc.onmousedown){_curDoc.onmousedown(b)}if(a&&_ie){window._treeWClickedW=g;g.init();g.clicked=true;g.initialX=eventGetX(b);g.initialY=eventGetY(b);if(_ie&&g.domElem){g.domElem.onmousemove=TreeWidgetElem_triggerDD}}if(_moz&&g.domElem){setTimeout("_TreeWidgetElemInstances["+k+"].domElem.focus()",1)}return false}function treeDblClickCB(g,b){eventCancelBubble(b);var f=_TreeWidgetElemInstances[g],a=f.treeView;if(f.sub.length>0){TreeWidget_toggleCB(g)}else{if(f.isIncomplete&&f.querycompleteCB){f.querycompleteCB();return}}if(f.isEditable){f.showEditInput(true)}else{if(a.doubleClickCB){a.doubleClickCB(f.userData)}}}function TreeWidgetElem_UpdateTooltip(a,b){var f=_TreeWidgetElemInstances[a];if(f){f.init();if(f.domElem!=null){f.domElem.title=f.getTooltip(b)}}}function TreeWidgetElem_getDragTooltip(){var a=this;if(a.obj&&a.obj.getDragTooltip){return a.obj.getDragTooltip()}return a.name}function TreeWidgetElem_getTooltip(a){var f="",g=this;var b=false;if(g.treeView.multiSelection){b=(arrayFind(g.treeView,"selIds",g.id)>-1)}else{b=(g.treeView.selId==g.id)}if(a||b){f=_selectedLab+" "}f+=g.name;if((g.sub.length>0)||(g.isIncomplete)){if(g.expanded){f+=" "+_expandedLab+" "}else{f+=" "+_collapsedLab+" "}}if(g.advTooltip){f+=" ("+g.advTooltip+")"}return f}function treeFCCB(g,k,a,f){var b=_TreeWidgetElemInstances[k];if((b==null)||b.treeView.mouseOverTooltip){return}if(a){if(b.customTooltip&&b.showCustomTooltipCB){b.showCustomTooltipCB(b.userData,f);b.init()}else{g.title=b.getTooltip()}}else{if(b.customTooltip&&b.hideCustomTooltipCB){b.hideCustomTooltipCB()}else{g.title=""}}}function _tmoc(g,k,f,b){g.style.cursor=_hand;var a=_TreeWidgetElemInstances[k];if(a==null){return}if(a.treeView.mouseOverTooltip){if(f){if(a.customTooltip&&a.showCustomTooltipCB){a.showCustomTooltipCB(a.userData,b);a.init()}else{g.title=a.tooltip?a.tooltip:""}}else{if(a.customTooltip&&a.hideCustomTooltipCB){a.hideCustomTooltipCB()}else{g.title=""}}}if(a.treeView.mouseOverCB){a.treeView.mouseOverCB(a)}}function treeContextMenuCB(f,b){var a=_TreeWidgetElemInstances[f];if(a){a.treeView.rightClickMenuCB(f,_ie?_curWin.event:b)}}function TreeWidgetElem_isLeaf(){return(this.sub.length==0&&!this.isIncomplete)}function TreeWidgetElem_isNode(){return(!this.isLeaf())}function TreeWidgetElem_isSelected(){var b=this;if(b.treeView.multi){var a=arrayFind(b.treeView,"selIds",b.id);return(a>=0)}else{return(b.id==b.treeView.selId)}}DialogBoxWidget_modals=new Array;DialogBoxWidget_instances=new Array;DialogBoxWidget_current=null;_promptDlgInfo=0;_promptDlgWarning=1;_promptDlgCritical=2;function newDialogBoxWidget(n,l,g,a,b,m,f){var k=newWidget(n);k.title=l;k.width=g;k.height=a;k.defaultCB=b;k.cancelCB=m;k.noCloseButton=f?f:false;k.resizeable=false;k.oldMouseDown=null;k.oldCurrent=null;k.modal=null;k.hiddenVis=new Array;k.lastLink=null;k.firstLink=null;k.titleLayer=null;k.defaultBtn=null;k.divLayer=null;k.oldInit=k.init;k.oldShow=k.show;k.init=DialogBoxWidget_init;k.setResize=DialogBoxWidget_setResize;k.beginHTML=DialogBoxWidget_beginHTML;k.endHTML=DialogBoxWidget_endHTML;k.show=DialogBoxWidget_Show;k.center=DialogBoxWidget_center;k.focus=DialogBoxWidget_focus;k.setTitle=DialogBoxWidget_setTitle;k.getContainerWidth=DialogBoxWidget_getContainerWidth;k.getContainerHeight=DialogBoxWidget_getContainerHeight;DialogBoxWidget_instances[n]=k;k.modal=newWidget("modal_"+n);k.placeIframe=DialogBoxWidget_placeIframe;k.oldResize=k.resize;k.resize=DialogBoxWidget_resize;k.attachDefaultButton=DialogBoxWidget_attachDefaultButton;k.unload=DialogBoxWidget_unload;if(!_ie){if(k.width!=null){k.width=Math.max(0,g+4)}if(k.height!=null){k.height=Math.max(0,a+4)}}return k}function DialogBoxWidget_setResize(a,f,g,b,l){var k=this;k.resizeable=true;k.resizeCB=a;k.minWidth=f?f:50;k.minHeight=g?g:50;k.noResizeW=b;k.noResizeH=l}function DialogBoxWidget_setTitle(b){var a=this;a.title=b;if(a.titleLayer==null){a.titleLayer=getLayer("titledialog_"+this.id)}a.titleLayer.innerHTML=convStr(b)}function DialogBoxWidget_setCloseIcon(a,b){changeOffset(a,0,(b==1?0:18))}function DialogBoxWidget_beginHTML(){with(this){var moveableCb=' onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+".DialogBoxWidget_down(event,'"+id+"',this,false);return false;\" ";var mdl='<div onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_skin+'../transp.gif" id="modal_'+id+'" style="position:absolute;top:0px;left:0px;width:1px;height:1px">'+(_ie?img(_skin+"../transp.gif","100%","100%",null):"")+"</div>";var titleBG="background-image:url("+_skin+"dialogtitle.gif)";return mdl+'<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="firstLink_'+this.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".DialogBoxWidget_keepFocus('"+this.id+'\');return false;" ></a><table dir="ltr" border="0" cellspacing="0" cellpadding="2" id="'+id+'" style="display:none;padding:0px;visibility:'+_hide+";position:absolute;"+sty("width",width?(""+width+"px"):null)+sty("height",height?(""+height+"px"):null)+'"><tr><td id="td_dialog_'+id+'" onresize="'+_codeWinName+".DialogBoxWidget_resizeIframeCB('"+id+'\',this)" class="dialogbox" valign="top"><table width="100%" style="margin-bottom:4px" border="0" cellspacing="0" cellpadding="0"><tr valign="top"><td '+moveableCb+' style="cursor:move;'+titleBG+'" class="titlezone">'+getSpace(5,18)+"</td><td "+moveableCb+' style="cursor:move;'+titleBG+'" class="titlezone" width="100%" valign="middle" align="left"><nobr><span id="titledialog_'+id+'" tabIndex="0" class="titlezone">'+convStr(title)+'</span></nobr></td><td class="titlezone" style="'+titleBG+'">'+(noCloseButton?"":'<a href="javascript:void(0)" onclick="'+_codeWinName+".DialogBoxWidget_close('"+id+'\');return false;" title="'+_closeDialog+'">'+imgOffset(_skin+"dialogelements.gif",18,18,0,18,"dialogClose_"+this.id,'onmouseover="'+_codeWinName+'.DialogBoxWidget_setCloseIcon(this,1)" onmouseout="'+_codeWinName+'.DialogBoxWidget_setCloseIcon(this,0)" ',_closeDialog,"cursor:"+_hand)+"</a>")+'</td></tr></table><div id="div_dialog_'+id+'">'}}function DialogBoxWidget_endHTML(){return'</div></td></tr></table><a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="lastLink_'+this.id+'" href="javascript:void(0)" onfocus="'+_codeWinName+".DialogBoxWidget_keepFocus('"+this.id+"');return false;\" ></a>"}function DialogBoxWidget_getContainerWidth(){var a=this;return a.width-(2+2)}function DialogBoxWidget_getContainerHeight(){var a=this;return a.height-(2+18+2+2+2)}function DialogBoxWidget_close(b){var a=DialogBoxWidget_instances[b];if(a){a.show(false);if(a.cancelCB!=null){a.cancelCB()}}}function DialogBoxWidget_resizeIframeCB(b,a){DialogBoxWidget_instances[b].placeIframe()}function DialogBoxWidget_placeIframe(){var b=this;if(b.iframe){var a=b.td_lyr;if(a==null){b.td_lyr=a=getLayer("td_dialog_"+b.id)}b.iframe.resize(a.offsetWidth,a.offsetHeight);b.iframe.move(b.layer.offsetLeft,b.layer.offsetTop)}}function DialogBoxWidget_resize(a,b){var f=this;f.oldResize(a,b);if(f.iframe){f.iframe.resize(a,b)}}function DialogBoxWidget_init(){if(this.layer!=null){return}var a=this;a.oldInit();a.modal.init();a.lastLink=newWidget("lastLink_"+a.id);a.firstLink=newWidget("firstLink_"+a.id);a.lastLink.init();a.firstLink.init();if(!a.noCloseButton){a.closeButton=getLayer("dialogClose_"+a.id);DialogBoxWidget_setCloseIcon(a.closeButton,false)}}function DialogBoxWidget_attachDefaultButton(a){this.defaultBtn=a;this.defaultBtn.setDefaultButton()}_theLYR=null;_dlgResize=null;function DialogBoxWidget_down(e,id,obj,isResize){_dlgResize=isResize;var o=DialogBoxWidget_instances[id],lyr=o.layer,mod=o.modal.layer;lyr.onmousemove=mod.onmousemove=eval("_curWin."+_codeWinName+".DialogBoxWidget_move");lyr.onmouseup=mod.onmouseup=eval("_curWin."+_codeWinName+".DialogBoxWidget_up");lyr.dlgStartPosx=mod.dlgStartPosx=parseInt(lyr.style.left);lyr.dlgStartPosy=mod.dlgStartPosy=parseInt(lyr.style.top);lyr.dlgStartx=mod.dlgStartx=eventGetX(e);lyr.dlgStarty=mod.dlgStarty=eventGetY(e);lyr.dlgStartw=mod.dlgStartw=o.getWidth();lyr.dlgStarth=mod.dlgStarth=o.getHeight();lyr._widget=mod._widget=o.widx;_theLYR=lyr;eventCancelBubble(e);if(lyr.setCapture){lyr.setCapture(true)}}function DialogBoxWidget_move(f){var k=_theLYR,g=getWidget(k);if(_dlgResize){var m=Math.max(g.minWidth,k.dlgStartw+eventGetX(f)-k.dlgStartx);var b=Math.max(g.minHeight,k.dlgStarth+eventGetY(f)-k.dlgStarty);g.resize(g.noResizeW?null:m,g.noResizeH?null:b);if(g.firstTR){if(!g.noResizeW){g.firstTR.style.width=m-4}if(!g.noResizeH){g.secondTR.style.height=b-44}}if(g.resizeCB){g.resizeCB(m,b)}}else{var a=Math.max(0,k.dlgStartPosx-k.dlgStartx+eventGetX(f));var l=Math.max(0,k.dlgStartPosy-k.dlgStarty+eventGetY(f));g.iframe.move(a,l);g.move(a,l)}eventCancelBubble(f);return false}function DialogBoxWidget_up(f){var g=getWidget(_theLYR),a=g.layer,b=g.modal.layer;a.onmousemove=b.onmousemove=null;a.onmouseup=b.onmouseup=null;if(a.releaseCapture){a.releaseCapture()}_theLYR=null}function DialogBoxWidget_keypress(a){eventCancelBubble(a);var b=DialogBoxWidget_current;if(b!=null){switch(eventGetKey(a)){case 13:if(b.yes&&!b.no){if(b.defaultCB){b.defaultCB()}return false}if(isTextArea(_ie?_curWin.event:a)){return true}if(b.defaultBtn!=null&&!b.defaultBtn.isDisabled()){b.defaultBtn.executeCB();return false}break;case 27:b.show(false);hideBlockWhileWaitWidget();if(b.cancelCB!=null){b.cancelCB()}return false;break;case 8:return isTextInput(_ie?_curWin.event:a);break}}}function DialogBoxWidgetResizeModals(b){for(var a in DialogBoxWidget_modals){m_sty=DialogBoxWidget_modals[a];m_sty.width=documentWidth()+"px";m_sty.height=documentHeight()+"px"}}function DialogBoxWidget_center(){var n=this;var l={modalDisplay:n.modal.css.display,layerDisplay:n.css.display};n.modal.css.display="none";n.css.display="none";var b=getScrollY(),f=getScrollX();n.modal.css.display=l.modalDisplay;n.css.display="block";var a=n.layer.offsetHeight,k=n.layer.offsetWidth;n.css.display=l.layerDisplay;var m=(winHeight()-a)/2;m=(m<0)?0:m;var g=(winWidth()-k)/2;g=(g<0)?0:g;n.move(Math.max(0,f+g),Math.max(0,b+m));n.placeIframe()}function DialogBoxWidget_Show(sh){with(this){m_sty=modal.css;l_sty=css;if(sh){if(!this.iframe){this.iframe=newWidget(getDynamicBGIFrameLayer().id);this.iframe.init()}oldCurrent=DialogBoxWidget_current;DialogBoxWidget_current=this;if(_ie){layer.onkeydown=eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress");modal.layer.onkeydown=eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress")}else{_curDoc.addEventListener("keydown",eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress"),false)}oldMouseDown=_curDoc.onmousedown;_curDoc.onmousedown=null;hideBlockWhileWaitWidget()}else{DialogBoxWidget_current=oldCurrent;oldCurrent=null;if(_ie){layer.onkeydown=null;modal.layer.onkeydown=null}else{_curDoc.removeEventListener("keydown",eval("_curWin."+_codeWinName+".DialogBoxWidget_keypress"),false)}_curDoc.onmousedown=oldMouseDown}var sameState=(layer.isShown==sh);if(sameState){return}layer.isShown=sh;if(sh){if(_curWin.DialogBoxWidget_zindex==null){_curWin.DialogBoxWidget_zindex=1000}this.iframe.css.zIndex=_curWin.DialogBoxWidget_zindex++;m_sty.zIndex=_curWin.DialogBoxWidget_zindex++;l_sty.zIndex=_curWin.DialogBoxWidget_zindex++;DialogBoxWidget_modals[DialogBoxWidget_modals.length]=m_sty;m_sty.display="";l_sty.display="block";this.iframe.setDisplay(true);holdBGIFrame(this.iframe.id);DialogBoxWidgetResizeModals();this.height=layer.offsetHeight;this.width=layer.offsetWidth;if(_small&&height){if(divLayer==null){divLayer=getLayer("div_dialog_"+id)}if(divLayer){divLayer.style.overflow="auto";divLayer.style.height=(winHeight()<height)?(winHeight()-40):getContainerHeight();divLayer.style.width=(_moz?width+20:getContainerWidth())}resize(null,((winHeight()<height)?(winHeight()-10):null))}if(isHidden(layer)){this.center()}if(!_small&&this.resizeCB){this.resizeCB(width,height)}}else{var l=DialogBoxWidget_modals.length=Math.max(0,DialogBoxWidget_modals.length-1);m_sty.width="1px";m_sty.height="1px";m_sty.display="none";l_sty.display="none";if(this.iframe!=null){this.iframe.setDisplay(false);releaseBGIFrame(this.iframe.id)}}modal.show(sh);firstLink.show(sh);lastLink.show(sh);oldShow(sh);if(DialogBoxWidget_current!=null&&sh==true){DialogBoxWidget_current.focus()}}}function DialogBoxWidget_unload(){if(this.iframe){releaseBGIFrame(this.iframe.id)}}function DialogBoxWidget_keepFocus(b){var a=DialogBoxWidget_instances[b];if(a){a.focus()}}function DialogBoxWidget_focus(){with(this){if(titleLayer==null){titleLayer=getLayer("titledialog_"+id)}if(titleLayer.focus){titleLayer.focus()}}}function newPromptDialog(a,m,q,l,g,n,r,f,k){var b=newDialogBoxWidget(a,m,300,null,PromptDialog_defaultCB,PromptDialog_cancelCB,k);b.text=q;b.getHTML=PromptDialog_getHTML;b.yes=l?newButtonWidget(a+"_yesBtn",l,'PromptDialog_yesCB("'+b.id+'")',70):null;b.no=g?newButtonWidget(a+"_noBtn",g,'PromptDialog_noCB("'+b.id+'")',70):null;b.yesCB=r;b.noCB=f;b.promptType=n;b.txtLayer=null;b.imgLayer=null;b.setPromptType=PromptDialog_setPromptType;b.setText=PromptDialog_setText;if(b.yes){b.attachDefaultButton(b.yes)}else{if(b.no){b.attachDefaultButton(b.no)}}return b}function PromptDialog_getimgPath(b){var a=_skin;switch(b){case _promptDlgInfo:a+="information_icon.gif";break;case _promptDlgWarning:a+="warning_icon.gif";break;default:a+="critical_icon.gif";break}return a}function PromptDialog_getimgAlt(b){var a="";return a}function PromptDialog_setPromptType(b){var a=this;if(a.imgLayer==null){a.imgLayer=getLayer("dlg_img_"+a.id)}a.imgLayer.src=PromptDialog_getimgPath(b);a.imgLayer.alt=PromptDialog_getimgAlt(b)}function PromptDialog_setText(b){var a=this;a.text=b;if(a.txtLayer==null){a.txtLayer=getLayer("dlg_txt_"+a.id)}a.txtLayer.innerHTML=convStr(b,false,true)}function PromptDialog_getHTML(){var f=this;var b=PromptDialog_getimgPath(f.promptType);var a=PromptDialog_getimgAlt(f.promptType);return f.beginHTML()+'<table class="dialogzone" width="290" cellpadding="0" cellspacing="5" border="0"><tr><td><table class="dialogzone" cellpadding="5" cellspacing="0" border="0"><tr><td align="right" width="32" >'+img(b,32,32,null,'id="dlg_img_'+f.id+'"',a)+'</td><td></td><td id="dlg_txt_'+f.id+'" align="left" tabindex="0">'+convStr(f.text,false,true)+"</td></tr></table></td></tr><tr><td>"+getSep()+'</td></tr><tr><td align="right"><table cellpadding="5" cellspacing="0" border="0"><tr>'+(f.yes?"<td>"+f.yes.getHTML()+"</td>":"")+(f.no?"<td>"+f.no.getHTML()+"</td>":"")+"</tr></table></td></tr></table>"+f.endHTML()}function PromptDialog_defaultCB(){var o=this;if(o.yesCB){if(typeof o.yesCB!="string"){o.yesCB()}else{eval(o.yesCB)}}this.show(false)}function PromptDialog_cancelCB(){var o=this;if(o.noCB){if(typeof o.noCB!="string"){o.noCB()}else{eval(o.noCB)}}this.show(false)}function PromptDialog_yesCB(a){DialogBoxWidget_instances[a].defaultCB()}function PromptDialog_noCB(a){DialogBoxWidget_instances[a].cancelCB()}function newWaitDialogBoxWidget(b,r,m,n,g,q,u,s){var k=250;var v=150;if(r<k){r=k}if(m<v){m=v}var f=newDialogBoxWidget(b,n,r,m,null,WaitDialogBoxWidget_cancelCB,false);f.pad=5;var l=f.getContainerWidth()-10;var a=f.getContainerHeight()-(2*f.pad+21+10);f.frZone=newFrameZoneWidget(b+"_frZone",l,a);f.frZone.beginHTML=WaitDialog_FrameZoneWidget_beginHTML;f.frZone.endHTML=WaitDialog_FrameZoneWidget_endHTML;f.showLabel=(u!=null)?u:false;f.showCancel=(g!=null)?g:false;f.label=newWidget(b+"_label");f.label.text=s;if(f.showCancel){f.cancelButton=newButtonWidget(b+"_cancelButton",_cancelButtonLab,CancelButton_cancelCB);f.cancelButton.par=f}else{f.cancelButton={};f.cancelButton.init=function(){};f.cancelButton.setDisplay=function(y){};f.cancelButton.setDisabled=function(y){};f.cancelButton.getHTML=function(){return""}}f.cancelCB=q;f.oldDialogBoxInit=f.init;f.init=WaitDialogBoxWidget_init;f.oldShow2=f.show;f.show=WaitDialogBoxWidget_show;f.getHTML=WaitDialogBoxWidget_getHTML;f.setShowCancel=WaitDialogBoxWidget_setShowCancel;f.setShowLabel=WaitDialogBoxWidget_setShowLabel;return f}function WaitDialogBoxWidget_init(){var a=this;a.oldDialogBoxInit();a.frZone.init();a.label.init();a.label.setDisplay(a.showLabel);a.cancelButton.init();a.cancelButton.setDisplay(a.showCancel)}function WaitDialogBoxWidget_getHTML(){var b=this,a="";a+=b.beginHTML();a+='<table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody>';a+='<tr><td align="center" valign="top">'+b.frZone.beginHTML();a+='<table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody><tr><td align="center" style="padding-top:5px;">'+img(_skin+"wait01.gif",200,40)+'</td></tr><tr><td align="left" style="padding-left:2px;padding-right:2px;padding-top:5px;"><div id="'+b.label.id+'" class="icontext" style="wordWrap:break_word;">'+convStr(b.label.text,false,true)+"</div></td></tr></tbody></table>";a+=b.frZone.endHTML()+"</td></tr>";a+='<tr><td align="center" valign="middle" style="padding-top:5px;"><div id="cancelDiv'+b.id+'">'+b.cancelButton.getHTML()+"</div></td></tr>";a+="</tbody></table>";a+=b.endHTML();return a}function WaitDialog_FrameZoneWidget_beginHTML(){var a=this;return'<table class="waitdialogzone" style="'+sty("width",a.w)+sty("height",a.h)+'" id="'+a.id+'" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td valign="top" class="dialogzone" id="frame_cont_'+a.id+'">'}function WaitDialog_FrameZoneWidget_endHTML(){var a=this;return"</td></tr></tbody></table>"}function WaitDialogBoxWidget_setShowCancel(a,f){var b=this;b.showCancel=a;b.cancelButton.setDisabled(false);b.cancelButton.setDisplay(a);b.cancelCB=f}function WaitDialogBoxWidget_setShowLabel(a,f){var b=this;b.showLabel=a;b.label.text=f;b.label.setHTML(f);b.label.setDisplay(a)}function WaitDialogBoxWidget_cancelCB(){var a=this;if(a.cancelCB!=null){a.cancelCB();a.cancelButton.setDisabled(true)}}function CancelButton_cancelCB(){var a=this;if(a.par.cancelCB!=null){a.par.cancelCB();a.par.cancelButton.setDisabled(true)}}function WaitDialogBoxWidget_show(a){var b=this;if(a){if(b.showCancel){b.frZone.resize(null,b.getContainerHeight()-(2*b.pad+21+10))}else{b.frZone.resize(null,b.getContainerHeight()-10)}}b.oldShow2(a)}var swfobject=function(){var Z="undefined",P="object",B="Shockwave Flash",h="ShockwaveFlash.ShockwaveFlash",W="application/x-shockwave-flash",K="SWFObjectExprInst",G=window,g=document,N=navigator,f=[],H=[],Q=null,L=null,T=null,S=false,C=false;var a=function(){var l=typeof g.getElementById!=Z&&typeof g.getElementsByTagName!=Z&&typeof g.createElement!=Z&&typeof g.appendChild!=Z&&typeof g.replaceChild!=Z&&typeof g.removeChild!=Z&&typeof g.cloneNode!=Z,t=[0,0,0],n=null;if(typeof N.plugins!=Z&&typeof N.plugins[B]==P){n=N.plugins[B].description;if(n){n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1");t[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10);t[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10);t[2]=/r/.test(n)?parseInt(n.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof G.ActiveXObject!=Z){var o=null,s=false;try{o=new ActiveXObject(h+".7")}catch(k){try{o=new ActiveXObject(h+".6");t=[6,0,21];o.AllowScriptAccess="always"}catch(k){if(t[0]==6){s=true}}if(!s){try{o=new ActiveXObject(h)}catch(k){}}}if(!s&&o){try{n=o.GetVariable("$version");if(n){n=n.split(" ")[1].split(",");t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]}}catch(k){}}}}var v=N.userAgent.toLowerCase(),j=N.platform.toLowerCase(),r=/webkit/.test(v)?parseFloat(v.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,i=false,q=j?/win/.test(j):/win/.test(v),m=j?/mac/.test(j):/mac/.test(v);
/*@cc_on i=true;@if(@_win32)q=true;@elif(@_mac)m=true;@end@*/
return{w3cdom:l,pv:t,webkit:r,ie:i,win:q,mac:m}}();var e=function(){if(!a.w3cdom){return}J(I);if(a.ie&&a.win){try{g.write("<script id=__ie_ondomload defer=true src=//:><\/script>");var i=c("__ie_ondomload");if(i){i.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);V()}}}}catch(j){}}if(a.webkit&&typeof g.readyState!=Z){Q=setInterval(function(){if(/loaded|complete/.test(g.readyState)){V()}},10)}if(typeof g.addEventListener!=Z){g.addEventListener("DOMContentLoaded",V,null)}M(V)}();function V(){if(S){return}if(a.ie&&a.win){var m=Y("span");try{var l=g.getElementsByTagName("body")[0].appendChild(m);l.parentNode.removeChild(l)}catch(n){return}}S=true;if(Q){clearInterval(Q);Q=null}var j=f.length;for(var k=0;k<j;k++){f[k]()}}function J(i){if(S){i()}else{f[f.length]=i}}function M(j){if(typeof G.addEventListener!=Z){G.addEventListener("load",j,false)}else{if(typeof g.addEventListener!=Z){g.addEventListener("load",j,false)}else{if(typeof G.attachEvent!=Z){G.attachEvent("onload",j)}else{if(typeof G.onload=="function"){var i=G.onload;G.onload=function(){i();j()}}else{G.onload=j}}}}}function I(){var l=H.length;for(var j=0;j<l;j++){var m=H[j].id;if(a.pv[0]>0){var k=c(m);if(k){H[j].width=k.getAttribute("width")?k.getAttribute("width"):"0";H[j].height=k.getAttribute("height")?k.getAttribute("height"):"0";if(O(H[j].swfVersion)){if(a.webkit&&a.webkit<312){U(k)}X(m,true)}else{if(H[j].expressInstall&&!C&&O("6.0.65")&&(a.win||a.mac)){D(H[j])}else{d(k)}}}}else{X(m,true)}}}function U(m){var k=m.getElementsByTagName(P)[0];if(k){var p=Y("embed"),r=k.attributes;if(r){var o=r.length;for(var n=0;n<o;n++){if(r[n].nodeName.toLowerCase()=="data"){p.setAttribute("src",r[n].nodeValue)}else{p.setAttribute(r[n].nodeName,r[n].nodeValue)}}}var q=k.childNodes;if(q){var s=q.length;for(var l=0;l<s;l++){if(q[l].nodeType==1&&q[l].nodeName.toLowerCase()=="param"){p.setAttribute(q[l].getAttribute("name"),q[l].getAttribute("value"))}}}m.parentNode.replaceChild(p,m)}}function F(i){if(a.ie&&a.win&&O("8.0.0")){G.attachEvent("onunload",function(){var k=c(i);if(k){for(var j in k){if(typeof k[j]=="function"){k[j]=function(){}}}k.parentNode.removeChild(k)}})}}function D(j){C=true;var o=c(j.id);if(o){if(j.altContentId){var l=c(j.altContentId);if(l){L=l;T=j.altContentId}}else{L=b(o)}if(!(/%$/.test(j.width))&&parseInt(j.width,10)<310){j.width="310"}if(!(/%$/.test(j.height))&&parseInt(j.height,10)<137){j.height="137"}g.title=g.title.slice(0,47)+" - Flash Player Installation";var n=a.ie&&a.win?"ActiveX":"PlugIn",k=g.title,m="MMredirectURL="+G.location+"&MMplayerType="+n+"&MMdoctitle="+k,p=j.id;if(a.ie&&a.win&&o.readyState!=4){var i=Y("div");p+="SWFObjectNew";i.setAttribute("id",p);o.parentNode.insertBefore(i,o);o.style.display="none";G.attachEvent("onload",function(){o.parentNode.removeChild(o)})}R({data:j.expressInstall,id:K,width:j.width,height:j.height},{flashvars:m},p)}}function d(j){if(a.ie&&a.win&&j.readyState!=4){var i=Y("div");j.parentNode.insertBefore(i,j);i.parentNode.replaceChild(b(j),i);j.style.display="none";G.attachEvent("onload",function(){j.parentNode.removeChild(j)})}else{j.parentNode.replaceChild(b(j),j)}}function b(n){var m=Y("div");if(a.win&&a.ie){m.innerHTML=n.innerHTML}else{var k=n.getElementsByTagName(P)[0];if(k){var o=k.childNodes;if(o){var j=o.length;for(var l=0;l<j;l++){if(!(o[l].nodeType==1&&o[l].nodeName.toLowerCase()=="param")&&!(o[l].nodeType==8)){m.appendChild(o[l].cloneNode(true))}}}}}return m}function R(AE,AC,q){var p,t=c(q);if(typeof AE.id==Z){AE.id=q}if(a.ie&&a.win){var AD="";for(var z in AE){if(AE[z]!=Object.prototype[z]){if(z=="data"){AC.movie=AE[z]}else{if(z.toLowerCase()=="styleclass"){AD+=' class="'+AE[z]+'"'}else{if(z!="classid"){AD+=" "+z+'="'+AE[z]+'"'}}}}}var AB="";for(var y in AC){if(AC[y]!=Object.prototype[y]){AB+='<param name="'+y+'" value="'+AC[y]+'" />'}}t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AD+">"+AB+"</object>";F(AE.id);p=c(AE.id)}else{if(a.webkit&&a.webkit<312){var AA=Y("embed");AA.setAttribute("type",W);for(var x in AE){if(AE[x]!=Object.prototype[x]){if(x=="data"){AA.setAttribute("src",AE[x])}else{if(x.toLowerCase()=="styleclass"){AA.setAttribute("class",AE[x])}else{if(x!="classid"){AA.setAttribute(x,AE[x])}}}}}for(var w in AC){if(AC[w]!=Object.prototype[w]){if(w!="movie"){AA.setAttribute(w,AC[w])}}}t.parentNode.replaceChild(AA,t);p=AA}else{var s=Y(P);s.setAttribute("type",W);for(var v in AE){if(AE[v]!=Object.prototype[v]){if(v.toLowerCase()=="styleclass"){s.setAttribute("class",AE[v])}else{if(v!="classid"){s.setAttribute(v,AE[v])}}}}for(var u in AC){if(AC[u]!=Object.prototype[u]&&u!="movie"){E(s,u,AC[u])}}t.parentNode.replaceChild(s,t);p=s}}return p}function E(k,i,j){var l=Y("param");l.setAttribute("name",i);l.setAttribute("value",j);k.appendChild(l)}function c(i){return g.getElementById(i)}function Y(i){return g.createElement(i)}function O(k){var j=a.pv,i=k.split(".");i[0]=parseInt(i[0],10);i[1]=parseInt(i[1],10);i[2]=parseInt(i[2],10);return(j[0]>i[0]||(j[0]==i[0]&&j[1]>i[1])||(j[0]==i[0]&&j[1]==i[1]&&j[2]>=i[2]))?true:false}function A(m,j){if(a.ie&&a.mac){return}var l=g.getElementsByTagName("head")[0],k=Y("style");k.setAttribute("type","text/css");k.setAttribute("media","screen");if(!(a.ie&&a.win)&&typeof g.createTextNode!=Z){k.appendChild(g.createTextNode(m+" {"+j+"}"))}l.appendChild(k);if(a.ie&&a.win&&typeof g.styleSheets!=Z&&g.styleSheets.length>0){var i=g.styleSheets[g.styleSheets.length-1];if(typeof i.addRule==P){i.addRule(m,j)}}}function X(k,i){var j=i?"visible":"hidden";if(S){c(k).style.visibility=j}else{A("#"+k,"visibility:"+j)}}return{registerObject:function(l,i,k){if(!a.w3cdom||!l||!i){return}var j={};j.id=l;j.swfVersion=i;j.expressInstall=k?k:false;H[H.length]=j;X(l,false)},getObjectById:function(l){var i=null;if(a.w3cdom&&S){var j=c(l);if(j){var k=j.getElementsByTagName(P)[0];if(!k||(k&&typeof j.SetVariable!=Z)){i=j}else{if(typeof k.SetVariable!=Z){i=k}}}}return i},embedSWF:function(n,u,r,t,j,m,k,p,s){if(!a.w3cdom||!n||!u||!r||!t||!j){return}r+="";t+="";if(O(j)){X(u,false);var q=(typeof s==P)?s:{};q.data=n;q.width=r;q.height=t;var o=(typeof p==P)?p:{};if(typeof k==P){for(var l in k){if(k[l]!=Object.prototype[l]){if(typeof o.flashvars!=Z){o.flashvars+="&"+l+"="+k[l]}else{o.flashvars=l+"="+k[l]}}}}J(function(){R(q,o,u);if(q.id==u){X(u,true)}})}else{if(m&&!C&&O("6.0.65")&&(a.win||a.mac)){X(u,false);J(function(){var i={};i.id=i.altContentId=u;i.width=r;i.height=t;i.expressInstall=m;D(i)})}}},getFlashPlayerVersion:function(){return{major:a.pv[0],minor:a.pv[1],release:a.pv[2]}},hasFlashPlayerVersion:O,createSWF:function(k,j,i){if(a.w3cdom&&S){return R(k,j,i)}else{return undefined}},createCSS:function(j,i){if(a.w3cdom){A(j,i)}},addDomLoadEvent:J,addLoadEvent:M,getQueryParamValue:function(m){var l=g.location.search||g.location.hash;if(m==null){return l}if(l){var k=l.substring(1).split("&");for(var j=0;j<k.length;j++){if(k[j].substring(0,k[j].indexOf("="))==m){return k[j].substring((k[j].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(C&&L){var i=c(K);if(i){i.parentNode.replaceChild(L,i);if(T){X(T,true);if(a.ie&&a.win){L.style.display="block"}}L=null;T=null;C=false}}}}}();var PE_VALUE_DESC_SEPARATOR=" - ";if(typeof(_pe)=="undefined"){_pe=new function(){var a=this;a._ie=(document.all!=null)?true:false;a._dom=(document.getElementById!=null)?true:false;a._isQuirksMode=(document.compatMode!="CSS1Compat");a._moz=a._dom&&!a._ie;a._appVer=navigator.appVersion.toLowerCase();a._mac=(a._appVer.indexOf("macintosh")>=0)||(a._appVer.indexOf("macos")>=0);a._userAgent=navigator.userAgent?navigator.userAgent.toLowerCase():null;a._saf=a._moz&&(a._userAgent.indexOf("safari")>=0);a._ie6=a._ie&&(a._appVer.indexOf("msie 6")>=0);a._root="";a._images=a._root+"/images/";a._prompts=new Array;a._lovBS=1000;a._st="s";a._nm="n";a._cy="c";a._bo="b";a._da="d";a._tm="t";a._dt="dt";_BlockWaitWidgetID="PEBlockWidgetID";a._theLYR=null;a._dlgResize=null;a._widgets=new Array;a.DlgBox_modals=new Array;a.DlgBox_instances=new Array;a.DlgBox_current=null;a._show="visible";a._hide="hidden";a._hand=a._ie?"hand":"pointer";a.init=PE_init;a.canSubmit=PE_canSubmit;a.beginBlocking=PE_beginBlocking;a.endBlocking=PE_endBlocking;a.setLOVMsg=PE_setLOVMsg}}function PE_init(b,a){var f=this;if(b&&b.length>0){if(b.charAt(b.length-1)!="/"){b+="/"}f._root=b;f._images=b+"images/"}else{f._root=null;f._images=null}if(a>0){f._lovBS=a}}function PE_canSubmit(){return(this.DlgBox_current)?false:true}function PE_setLOVMsg(f,a,b){var g=document.getElementById(a);var k=g.value;if(k.length>0){k+="&"}k+="cmd=1&ap="+b;g.value=k}var DateTimeFormatSetting={datePattern:"Y-M-D",isTwoDigitMonth:true,isTwoDigitDay:true,dateRegex:null,dateTimeRegex:null};function promptengine_getDatePattern(){return DateTimeFormatSetting.datePattern}function promptengine_setDatePattern(a){DateTimeFormatSetting.datePattern=a}function promptengine_getIsTwoDigitMonth(){return DateTimeFormatSetting.isTwoDigitMonth}function promptengine_setIsTwoDigitMonth(a){DateTimeFormatSetting.isTwoDigitMonth=a}function promptengine_getIsTwoDigitDay(){return DateTimeFormatSetting.isTwoDigitDay}function promptengine_setIsTwoDigitDay(a){DateTimeFormatSetting.isTwoDigitDay=a}function promptengine_getDateRegex(){return DateTimeFormatSetting.dateRegex}function promptengine_setDateRegex(a){DateTimeFormatSetting.dateRegex=a}function promptengine_getDateTimeRegex(){return DateTimeFormatSetting.dateTineRegex}function promptengine_setDateTimeRegex(a){DateTimeFormatSetting.dateTineRegex=a}function _convStr(g,a,f){g=""+g;var b=g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");if(a){b=b.replace(/ /g,"&nbsp;")}if(f){b=b.replace(/\n/g,"<br>")}return b}function _opt(f,a,b){return'<option value="'+_convStr(f)+'" '+(b?"selected":"")+">"+_convStr(a)+"</option>"}function _canScanFrames(a){var b=true,g=null;if(_pe._moz){_oldErrHandler=window.onerror;window.onerror=localErrHandler}try{g=a.document;b=false}catch(f){}if(_pe._moz){window.onerror=_oldErrHandler}return(!b&&(g!=null))}function _restoreAllDisabledInputs(n,a){if(_pe._ie&&window._peInputStackLevel!=null){n=n?n:window;if(_canScanFrames(n)){if(a==null){a=--window._peInputStackLevel}var s=n.document.body,l=s?s.getElementsByTagName("SELECT"):null,q=l?l.length:0;for(var g=0;g<q;g++){var m=l[g];if(m._peDisableLevel==a){m.disabled=false;m._peDisableLevel=null}}var r=n.frames,u=r.length;for(var f=0;f<u;f++){_restoreAllDisabledInputs(r[f],a)}}}}function _disableAllInputs(A,v,B,m,s,a){if(_pe._ie){s=s?s:window;if(_canScanFrames(s)){var z=s.document.body,n=z?z.getElementsByTagName("SELECT"):null,r=n?n.length:0;if(a==null){if(window._peInputStackLevel==null){window._peInputStackLevel=0}a=window._peInputStackLevel++}for(var l=0;l<r;l++){var q=n[l];var f=(A==null)||_isLayerIntersectRect(q,A,v,B,m);if(!q.disabled&&f){q._peDisableLevel=a;q.disabled=true}}var u=s.frames,C=u.length;for(var g=0;g<C;g++){_disableAllInputs(null,null,null,null,u[g],a)}}}}function _getBGIframe(a){return'<iframe id="'+a+'" style="display:none;left:0px;position:absolute;top:0px" src="'+_pe._images+'transp.gif" frameBorder="0" scrolling="no"></iframe>'}function _eventCancelBubble(b,a){a=a?a:window;_pe._ie?a.event.cancelBubble=true:b.cancelBubble=true}function _append(g,b){if(_pe._ie){g.insertAdjacentHTML("BeforeEnd",b)}else{var a=document;var f=a.createRange();f.setStartBefore(g);var k=f.createContextualFragment(b);g.appendChild(k)}}function _targetApp(a){_append(document.body,a)}function _isLayerIntersectRect(f,b,s,u,m){var k=_getPos(f).x,q=_getPos(f).y,g=k+f.offsetWidth,n=q+f.offsetHeight,a=b+u,r=s+m;return((b>k)||(a>k))&&((b<g)||(a<g))&&((s>q)||(r>q))&&((s<n)||(r<n))}function _getPos(b,a){a=a?a:null;for(var g=0,f=0;(b!=null)&&(b!=a);g+=b.offsetLeft,f+=b.offsetTop,b=b.offsetParent){}return{x:g,y:f}}function _getLayer(a){return document.getElementById(a)}function _getWidget(b){if(b==null){return null}var a=b._widget;if(a!=null){return _pe._widgets[a]}else{return _getWidget(b.parentNode)}}function _isHidden(b){if((b==null)||(b.tagName=="BODY")){return false}var a=b.style;if((a==null)||(a.visibility==_pe._hide)||(a.display=="none")){return true}return _isHidden(b.parentNode)}function _attr(a,b){return(b!=null?" "+a+'="'+b+'" ':"")}function _img(k,a,f,l,b,g){b=(b?b:"");if(g==null){g=""}return"<img"+_attr("width",a)+_attr("height",f)+_attr("src",k)+_attr(_pe._ie?"alt":"title",g)+_attr("align",l)+' border="0" hspace="0" vspace="0" '+(b?b:"")+">"}function _imgOffset(a,m,g,r,q,b,l,f,n,k){return _img(_pe._images+"transp.gif",m,g,k,(l?l:"")+" "+_attr("id",b)+' style="'+_backImgOffset(a,r,q)+(n?n:"")+'"',f)}function _changeOffset(k,b,a,g,l){var f=k.style;if(f){if((b!=null)&&(a!=null)){f.backgroundPosition=""+(-b)+"px "+(-a)+"px"}if(g){f.backgroundImage="url('"+g+"')"}}if(l){k.alt=l}}function _simpleImgOffset(a,m,g,r,q,b,l,f,n,k){if(_pe._ie){if(r==null){r=0}if(q==null){q=0}return"<div "+(l?l:"")+" "+_attr("id",b)+' style="position:relative;padding:0px;width:'+m+"px;height:"+g+"px;overflow:hidden;"+(n?n:"")+'">'+_img(a,null,null,"top",'style="margin:0px;position:relative;top:'+(-q)+"px;left:"+(-r)+'px"',f)+"</div>"}else{return _imgOffset(a,m,g,r,q,b,l,f,n,k)}}function _changeSimpleOffset(k,b,a,g,l){if(_pe._ie){k=k.childNodes[0];var f=k.style;if((g!=null)&&(g!=k.src)){k.src=g}if(b!=null){f.left=""+(-b)+"px"}if(a!=null){f.top=""+(-a)+"px"}if(l!=null){k.alt=l}}else{_changeOffset(k,b,a,g,l)}}function _backImgOffset(f,b,a){return"background-image:url('"+f+"');background-position:"+(-b)+"px "+(-a)+"px;"}function _sty(a,b){return(b!=null?a+":"+b+";":"")}function _getSpace(a,b){return'<table height="'+b+'" border="0" cellspacing="0" cellpadding="0"><tr><td>'+_img(_pe._images+"transp.gif",a,b)+"</td></tr></table>"}function _isTextInput(a){var b=_pe._ie?a.srcElement:a.target;var f=false;if(b.tagName=="TEXTAREA"){f=true}if((b.tagName=="INPUT")&&(b.type.toLowerCase()=="text")){f=true}return f}function _documentWidth(b){var b=b?b:window;var a=Math.max(document.body.clientWidth,document.documentElement.clientWidth);a=Math.max(a,document.body.scrollWidth);return a}function _documentHeight(b){var b=b?b:window;var a=Math.max(document.body.clientHeight,document.documentElement.clientHeight);a=Math.max(a,document.body.scrollHeight);return a}function _winWidth(b){var b=b?b:window;var a;if(_pe._ie){if(_pe._isQuirksMode){a=b.document.body.clientWidth}else{a=b.document.documentElement.clientWidth}}else{a=b.innerWidth}return a}function _winHeight(b){var b=b?b:window;var a;if(_pe._ie){if(_pe._isQuirksMode){a=document.body.clientHeight}else{a=document.documentElement.clientHeight}}else{a=b.innerHeight}return a}function _getScrollX(a){var b=0;var a=a?a:window;if(typeof(a.scrollX)=="number"){b=a.scrollX}else{b=Math.max(a.document.body.scrollLeft,a.document.documentElement.scrollLeft)}return b}function _getScrollY(b){var a=0;var b=b?b:window;if(typeof(b.scrollY)=="number"){a=window.scrollY}else{a=Math.max(b.document.body.scrollTop,b.document.documentElement.scrollTop)}return a}function _eventGetX(a){return _pe._ie?window.event.clientX:a.clientX?a.clientX:a.pageX}function _eventGetY(a){return _pe._ie?window.event.clientY:a.clientY?a.clientY:a.pageY}function _eventGetKey(b,a){a=a?a:window;return _pe._ie?a.event.keyCode:b.keyCode}function _isLayerDisplayed(a){var b=a?a.style:null;if(b){if(b.display=="none"||b.visibility=="hidden"){return false}else{var f=a.parentNode;if(f!=null){return _isLayerDisplayed(f)}else{return true}}}else{return true}}function _safeSetFocus(a){if(a&&a.focus&&_isLayerDisplayed(a)&&!a.disabled){a.focus()}}function PE_getLB(a){var b=new Object;b.lyr=a;b.arr=new Array;b.size=0;b.add=LB_add;b.update=LB_update;return b}function LB_add(g,a,b){var f=this;f.arr[++f.size]=_opt(g,a,b)}function LB_update(){var m=this;var b=m.arr;if(!m.lyr){return}var l=m.lyr.parentNode;var g=l.innerHTML;var f=g.indexOf(">");if(f==-1){return}var k=g.lastIndexOf("<");if(k<=f){return}b[0]=g.substring(0,f+1);b[m.size+1]=g.substr(k);l.innerHTML=b.join("")}function newUnits(a,b){var f=new Object;f.parr=new Array;if(b){f.idh=b}else{f.idh=""}f.num=a;f.init=Units_init;f.show=Units_show;f.toggle=Units_toggle;f.updateForm=Units_updateForm;f.activate=Units_activate;f.addP=Units_addP;return f}function Units_init(a){var b=this;b.toggle(a)}function Units_show(k,a){var m=this;var f=document.getElementById(m.idh+k+"_PU");if(f){var g=f.style;if(a){g.display=""}else{g.display="none"}}}function Units_activate(k){var n=this;var a=document.getElementById(n.idh+k+"_PU");if(a){var b=_getScrollY(),g=_getScrollX();var m=a.offsetHeight,f=_winHeight(),q=_getPos(a).y;if(q<b){window.scrollTo(g,q)}else{if(q+m>b+f){window.scrollTo(g,Math.max(q,q+m-f))}}}}function Units_toggle(b){var f=this,g=f.num;for(var a=0;a<g;a++){f.show(a,true)}f.activate(b)}function Units_addP(b){var f=this;var a=f.parr;a[a.length]=b}function Units_updateForm(k,a,b){var m=this,g=m.parr;for(var f in g){var l=g[f];if(l){if(!l.updateForm(k,a,b)){m.toggle(l.uid);return false}}}return true}function P_updateForm(k,f,g){var l=this,a=false;if(l.readonly==true){return true}if(l.mul){a=promptengine_updateMultiValue(k,f,l.id,l.vt,g,l.valueRequired)}else{if(l.rn){a=promptengine_updateRangeValue(k,f,l.id,l.vt,g,l.valueRequired)}else{a=promptengine_updateDiscreteValue(k,f,l.id,l.vt,g,l.valueRequired)}}return a}function P_addV(b,g){var f=this;if(f.vl==null){f.vl=new Array;if(g){f.dl=new Array}}var a=f.vl.length;f.vl[a]=b;if(f.dl){f.dl[a]=g}}function P_findBatch(l,f){if(!f){return(-1)}var m=this;var k=m.vl;if(l){var a=m.lov[l];if(a&&a.vl){k=a.vl}}if(k){for(var g in k){var b=k[g];if(b&&b==f){return(Math.floor(g/_pe._lovBS))}}}return(-1)}function P_updateLOVNB(k,u){var g=this;var n=g.id;var a=document.getElementById(n+k+"Batch");if(!a){return}var s=g.lov[k];if(u){var f=a.options;f.length=0;var l=g.vl,m=0;if(s.vl){l=s.vl}var q=Math.ceil(l.length/_pe._lovBS);while(m<q){var r=m+1;if(s.sidx==m){r+="*"}f[f.length]=new Option(r,m,false,false);m++}}if(s.bidx>=0){a.selectedIndex=s.bidx}}function P_updateLOV(z,b){var q=this;var n=q.id;var g=n+z;var s=document.getElementById(g);if(!s){return}var a=q.lov[z];var u=null;var D=q.vl;var x=q.dl;var E=-1;if(a){u=a.sel;if(a.vl){D=a.vl;x=a.dl}}var m=PE_getLB(s);if(b){m.add("","...")}var r=a.sidx;if(a.bidx<0){a.sidx=q.findBatch(z,u);if(a.sidx>=0){a.bidx=a.sidx}else{a.bidx=0}r=-2}var f=a.bidx;var A=f*_pe._lovBS,B=D.length,y=0;while(A<B){if(y>=_pe._lovBS){break}var k=D[A];var C=null;if(x){C=x[A];if(C==""){C=k}else{if(q.dop==0){C=k+PE_VALUE_DESC_SEPARATOR+C}}}else{C=k}if(u&&u==k){E=y;q.sidx=f}m.add(k,C);A++;y++}m.update();s=document.getElementById(g);if(E!=-1){if(b){E++}s.selectedIndex=E}q.updateLOVNB(z,r!=a.sidx)}function P_getDesc(a){if(!a){return null}var l=this;var k=l.vl;var f=l.dl;if(!f){return null}var b=-1;for(var g in k){if(k[g]==a){b=g;break}}if(b>=0){return f[b]}return null}function P_updateSLOV(){var a=this;var s=a.id;var r=document.getElementById(s+"ListBox");if(!r){return}var b=a.sl;if(typeof(b)!="object"){return}var x=PE_getLB(r);var k=a.vl;var u=a.dl;for(var q in b){var A=b[q];if(typeof(A)=="string"){var z=a.getDesc(A);var n;if(z&&z!=""){if(a.dop){n=z}else{n=A+PE_VALUE_DESC_SEPARATOR+z}}else{n=A}x.add(A,n,false)}else{var y=A.l;var m=A.u;var l=A.lt;var g=A.ut;var f=null;var n=null;if(l==0||l==1){f="(";n="("}else{f="[";n="["}if(l){f+=y;var z=a.getDesc(y);if(z&&z!=""){if(a.dop){n+=z}else{n+=y+PE_VALUE_DESC_SEPARATOR+z}}else{n+=y}}f+="_crRANGE_";n+="  ..  ";if(g){f+=m;var z=a.getDesc(m);if(z&&z!=""){if(a.dop){n+=z}else{n+=m+PE_VALUE_DESC_SEPARATOR+z}}else{n+=m}}if(g==0||g==1){f+=")";n+=")"}else{f+="]";n+="]"}x.add(f,n,false)}}x.update()}function P_update(a){var b=this;if(a){if(a=="AvailableList"){b.updateLOV(a)}else{if(a=="ListBox"){b.updateSLOV()}else{b.updateLOV(a,true)}}}else{b.updateLOV("SelectValue",true);b.updateLOV("AvailableList");b.updateLOV("SelectLowerRangeValue",true);b.updateLOV("SelectUpperRangeValue",true);b.updateSLOV()}}function P_setLOV(b,a){var f=this;f.vl=b;if(b){if(!a||b.length!=a.length){f.dl=null}else{f.dl=a}}else{f.dl=null}}function P_setInitSel(b){var f=this;var a=f.lov.SelectValue;a.sel=b}function P_setInitSelList(a){this.sl=a}function P_setInitBound(b,a){var k=this;var g=k.lov.SelectLowerRangeValue;g.sel=b;var f=k.lov.SelectUpperRangeValue;f.sel=a}function P_back(f){var g=this;var a=g.lov[f];if(!a){return}var b=a.bidx;if(b>0){b--;if(b<0){b=0}a.bidx=b;g.update(f)}}function P_next(g){var k=this;var b=k.lov[g];if(!b){return}var a=((b.vl)?b.vl.length:k.vl.length);var f=b.bidx;if((f+1)*_pe._lovBS<a){b.bidx=f+1;k.update(g)}}function newLOV(){var a=new Object;a.bidx=-1;a.sidx=-1;a.sel=null;a.filter=null;a.vl=null;a.dl=null;return a}function newP(q,n,b,s,k,r,m,g,l,a){var f=new Object;f.id=b;f.vt=s;f.mul=k;f.di=r;f.rn=m;f.dop=g;f.readonly=l;f.valueRequired=a;f.units=q;f.uid=n;f.lov=new Array;f.lov.SelectValue=newLOV();f.lov.AvailableList=newLOV();f.lov.SelectLowerRangeValue=newLOV();f.lov.SelectUpperRangeValue=newLOV();f.vl=null;f.dl=null;f.sl=null;f.addV=P_addV;f.update=P_update;f.setLOV=P_setLOV;f.updateLOV=P_updateLOV;f.updateSLOV=P_updateSLOV;f.updateLOVNB=P_updateLOVNB;f.getDesc=P_getDesc;f.findBatch=P_findBatch;f.back=P_back;f.next=P_next;f.showFilter=P_showFilter;f.applyFilter=P_applyFilter;f.setInitSel=P_setInitSel;f.setInitBound=P_setInitBound;f.setInitSelList=P_setInitSelList;f.updateForm=P_updateForm;_pe._prompts[b]=f;if(q){q.addP(f)}return f}function P_navigateCB(k,a,f,b){var g=_pe._prompts[a];if(!g){return}if(b=="p"){g.back(f)}else{if(b=="n"){g.next(f)}}}function P_selectCB(g,b,m,l){var n=_pe._prompts[b];if(!n){return}var f=b+l;var k=b+m;promptengine_selectValue(g,k,f);var a=n.lov[m];a.sel=document.getElementById(f).value;if(!a.sel||a.sel==""){a.sidx=-1;a.sel=null}else{if(a.sidx!=a.bidx){a.sidx=a.bidx}}n.updateLOVNB(m,true)}function P_batchCB(m,b,k){var l=_pe._prompts[b];var g=document.getElementById(b+k+"Batch");if(!l||!g){return}var f=g.selectedIndex;if(f>=0){var a=l.lov[k];if(!a){return}a.bidx=f;l.update(k)}}function P_applyFilter(g,b){if(b==null){return}var f=this;var k=f.vl;var r=f.dl;if(!k||k.constructor!=Array||k.length==0){return}var q=true;if(!r||r.constructor!=Array){q=false}var v=f.lov[g];if(!v){return}var z=v.filter;if(!z){z=""}if(b==z){return}var a=null;var m=null;if(b==""){b=null}else{a=[];if(q){m=[]}b=b.replace(String.fromCharCode(160)," ");var l=0;for(var n=0,u=k.length;n<u;n++){var y=k[n];var s=(q?r[n]:"");var x="";if(f.dop==1){if(s==""){x=y}else{x=s}}else{x=y;if(s!=""){x+=PE_VALUE_DESC_SEPARATOR;x+=s}}x=x.replace(String.fromCharCode(160)," ");if(x&&x.toLowerCase().indexOf(b.toLowerCase())!=-1){a[l]=y;if(q){m[l]=r[n]}l++}}}v.filter=b;v.vl=a;v.dl=m;v.bidx=-1;v.sidx=-1;f.updateLOV(g,true)}function P_promptFilter(l,g,n){var f=_pe._prompts[l];if(!f){return}var k=f.vl;var m=f.dl;if(!k||k.length==0){return}var s=f.lov[g];if(!s){return}var b=s.filter;if(!b){b=""}var a=n.target?n.target:n.srcElement;var r=_findPos(a);var u=r.x+a.offsetWidth;var q=r.y+a.offsetHeight;f.showFilter(g,b,u,q)}function P_promptClearFilter(a,f,b){var g=_pe._prompts[a];if(!g){return}if(g.filterDlg){g.filterDlg.setValue("");g.applyFilter(f,"")}}function P_showFilter(f,b,a,l){var k=this;if(!k.filterDlg){k.filterDlg=newFilterDlg(k.id)}var g=k.filterDlg;g.wty=f;g.setValue(b);g.show(true);g.initDlg(a,l)}function _findPos(b,a){var a=a?a:null;var g=0;var f=0;while(b.parentNode||b.offsetParent){if(b.offsetParent){g+=b.offsetLeft;f+=b.offsetTop;b=b.offsetParent}else{if(b.parentNode){if(b.style){if(b.style.left){g+=b.style.left}if(b.style.top){f+=b.style.top}}b=b.parentNode}else{break}}}if(a){relToCord=getPos2(a);g-=relToCord.x;f-=relToCord.y}return{x:g,y:f}}function FilterDlg_okCB(b){var g=this;if(b){g=_getWidget(_getLayer(b))}if(g){var f=_pe._prompts[g.promptid];var a=g.getValue();g.show(false);f.applyFilter(g.wty,a)}}function FilterDlg_cancelCB(a){var b=this;if(a){b=_getWidget(_getLayer(a))}if(b){b.show(false)}}function FilterDlg_enterCB(){}function newFilterDlg(l){var q=60;var s=52;var g=300;var r=100;var m=0.9*g;var b="filterDlg"+l;var a=newDlgBox(b,L_SetFilter,g,r,FilterDlg_okCB,FilterDlg_cancelCB,false);a.promptid=l;a.setValue=FilterDlg_setValue;a.getValue=FilterDlg_getValue;a.initDlg=FilterDlg_initDlg;var n=newBtn(b+"_okBtn",L_OK,"FilterDlg_okCB('"+b+"')",q,"OK","OK",0,0);var f=newBtn(b+"_cancelBtn",L_Cancel,"FilterDlg_cancelCB('"+b+"')",q,"Cancel","Cancel",0,0);var k=newTextField(b+"_textFld",null,null,null,FilterDlg_enterCB,true,null,m);_targetApp(a.beginHTML()+'<table cellspacing="0" cellpadding="5" border="0"><tbody><tr><td><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td><div style="overflow:auto">'+k.getHTML()+'</div></td></tr></tbody></table></td></tr><tr><td align="center" valign="right"></td></tr><tr><td align="right" valign="center"><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td>'+n.getHTML()+"</td><td>"+_getSpace(5,1)+"</td><td>"+f.getHTML()+"</td></tr></tbody></table></td></tr></table>"+a.endHTML());a.init();n.init();f.init();k.init();a.textField=k;return a}function FilterDlg_setValue(a){var b=this;b.textField.setValue(a)}function FilterDlg_getValue(){var a=this;if(a.textField){return a.textField.getValue()}return null}function FilterDlg_initDlg(a,k){var g=this;if(a+g.getWidth()>_winWidth()+_getScrollX()){a=Math.max(0,_winWidth()+_getScrollX()-g.getWidth()-10)}if(k+g.getHeight()>_winHeight()+_getScrollY()){k=Math.max(0,_winHeight()+getScrollY()-g.getHeight()-10)}g.move(a,k);g.placeIframe(true,true);var b=g.textField;b.select();b.focus()}function newCtl(b){var a=new Object;a.id=b;a.layer=null;a.css=null;a.getHTML=Ctl_getHTML;a.beginHTML=Ctl_getHTML;a.endHTML=Ctl_getHTML;a.write=Ctl_write;a.begin=Ctl_begin;a.end=Ctl_end;a.init=Ctl_init;a.move=Ctl_move;a.resize=Ctl_resize;a.setBgColor=Ctl_setBgColor;a.show=Ctl_show;a.getWidth=Ctl_getWidth;a.getHeight=Ctl_getHeight;a.setHTML=Ctl_setHTML;a.setDisabled=Ctl_setDisabled;a.focus=Ctl_focus;a.setDisplay=Ctl_setDisplay;a.isDisplayed=Ctl_isDisplayed;a.setTooltip=Ctl_setTooltip;a.initialized=Ctl_initialized;a.widx=_pe._widgets.length;_pe._widgets[a.widx]=a;return a}function Ctl_getHTML(){return""}function Ctl_write(b){var a=this.getHTML(b);if(parent.writeSource){parent.writeSource(a)}document.write(a)}function Ctl_begin(){document.write(this.beginHTML())}function Ctl_end(){document.write(this.endHTML())}function Ctl_init(){var a=this;a.layer=_getLayer(a.id);a.css=a.layer.style;a.layer._widget=a.widx;if(a.initialHTML){a.setHTML(a.initialHTML)}}function Ctl_move(a,b){c=this.css;if(a!=null){if(_pe._moz){c.left=""+a+"px"}else{c.pixelLeft=a}}if(b!=null){if(_pe._moz){c.top=""+b+"px"}else{c.pixelTop=b}}}function Ctl_focus(){_safeSetFocus(this.layer)}function Ctl_setBgColor(a){this.css.backgroundColor=a}function Ctl_show(a){this.css.visibility=a?_pe._show:_pe._hide}function Ctl_getWidth(){return this.layer.offsetWidth}function Ctl_getHeight(){return this.layer.offsetHeight}function Ctl_setHTML(a){var b=this;if(b.layer){b.layer.innerHTML=a}else{b.initialHTML=a}}function Ctl_setDisplay(a){this.css.display=a?"":"none"}function Ctl_isDisplayed(){if(this.css.display=="none"){return false}else{return true}}function Ctl_setDisabled(a){if(this.layer){this.layer.disabled=a}}function Ctl_resize(a,b){if(a!=null){this.css.width=""+(Math.max(0,a))+"px"}if(b!=null){this.css.height=""+(Math.max(0,b))+"px"}}function Ctl_setTooltip(a){this.layer.title=a}function Ctl_initialized(){return this.layer!=null}function PE_beginBlocking(){var a=newBlockWidget();a.show(true)}function PE_endBlocking(){var a=_getLayer(_BlockWaitWidgetID);if(a){a.style.display="none"}}function newBlockWidget(){if(window._PEBlockWidget!=null){return window._PEBlockWidget}var a=newCtl(_BlockWaitWidgetID);a.getPrivateHTML=BlockWidget_getPrivateHTML;a.init=BlockWidget_init;a.show=BlockWidget_show;window._PEBlockWidget=a;return a}function BlockWidget_init(){}function BlockWidget_getPrivateHTML(){return'<div id="'+this.id+'" onselectstart="return false" ondragstart="return false" onmousedown="_eventCancelBubble(event)" border="0" hspace="0" vspace="0"  style="background-image:url(\''+_pe._images+'transp.gif\')";z-index:6000;cursor:wait;position:absolute;top:0px;left:0px;width:100%;height:100%"></div>'}function BlockWidget_show(a){var b=this;if(b.layer==null){b.layer=_getLayer(b.id);if(b.layer==null){_targetApp(b.getPrivateHTML());b.layer=_getLayer(b.id);b.css=b.layer.style}else{b.css=b.layer.style}}b.setDisplay(a)}function newBtn(f,u,n,g,l,A,m,q,b,v,s,z,x,r,a,y){var k=newCtl(f);k.label=u;k.cb=n;k.width=g;k.hlp=l;k.tooltip=A;k.tabIndex=m;k.isGray=false;k.txt=null;k.icn=null;k.margin=q?q:0;k.extraStyle="";if(b){k.url=b;k.w=v;k.h=s;k.dx=z;k.dy=x;k.disDx=(a!=null)?a:z;k.disDy=(y!=null)?y:x;k.imgRight=r?true:false}k.getHTML=Btn_getHTML;k.setDisabled=Btn_setDisabled;k.setText=Btn_setText;k.changeImg=Btn_changeImg;k.oldInit=k.init;k.init=Btn_init;k.isDisabled=Btn_isDisabled;k.instIndex=Btn_currInst;Btn_inst[Btn_currInst++]=k;return k}Btn_inst=new Array;Btn_currInst=0;function Btn_getHTML(){with(this){var clk="Btn_clickCB("+this.instIndex+');return false;"';var clcbs='onclick="'+clk+'" ';if(_pe._ie){clcbs+='ondblclick="'+clk+'" '}var url1=_pe._images+"button.gif",addPar=' style="'+extraStyle+"cursor:"+_pe._hand+";margin-left:"+margin+"px; margin-right:"+margin+'px; "'+clcbs+" ",tip=_attr("title",tooltip),idText="theBttn"+id,bg=_backImgOffset(url1,0,42),idIcon="theBttnIcon"+id;var lnkB="<a "+_attr("id",idText)+" "+tip+" "+_attr("tabindex",tabIndex)+' href="javascript:void(0)" class="wizbutton">';var l=(label!=null);var im=(this.url?('<td align="'+(l?(this.imgRight?"right":"left"):"center")+'" style="'+bg+'" width="'+(!l&&(width!=null)?width+6:w+6)+'">'+(l?"":lnkB)+_simpleImgOffset(url,w,h,this.isGray?disDs:dx,this.isGray?disDy:dy,idIcon,null,(l?"":tooltip),"cursor:"+_pe._hand)+(l?"":"</a>")+"</td>"):"");return"<table "+_attr("id",id)+" "+addPar+' border="0" cellspacing="0" cellpadding="0"><tr valign="middle"><td width="5">'+_simpleImgOffset(url1,5,21,0,0)+"</td>"+(this.imgRight?"":im)+(l?("<td "+_attr("width",width)+' align="center" class="'+(this.isGray?"wizbuttongray":"wizbutton")+'" style="padding-left:3px;padding-right:3px;'+bg+'"><nobr>'+lnkB+label+"</a></nobr></td>"):"")+(this.imgRight?im:"")+'<td width="5">'+_simpleImgOffset(url1,5,21,0,21)+"</td></tr></table>"}}function Btn_setDisabled(f){var b=this,a=f?"default":_pe._hand;b.isGray=f;if(b.layer){b.txt.className=f?"wizbuttongray":"wizbutton";b.txt.style.cursor=a;b.css.cursor=a;if(b.icn){_changeSimpleOffset(b.icn,b.isGray?b.disDx:b.dx,b.isGray?b.disDy:b.dy);b.icn.style.cursor=a}}}function Btn_isDisabled(){return this.isGray}function Btn_setText(a){this.txt.innerHTML=convStr(a)}function Btn_init(){var b=this;b.oldInit();b.txt=_getLayer("theBttn"+this.id);b.icn=_getLayer("theBttnIcon"+this.id);var a=b.isGray?"wizbuttongray":"wizbutton";if(b.txt.className!=a){b.txt.className=a}}function Btn_changeImg(b,a,k,g,f,l){var m=this;if(f){m.url=f}if(b!=null){m.dx=b}if(a!=null){m.dy=a}if(k!=null){m.disDx=k}if(g!=null){m.disDy=g}if(l!=null){m.tooltip=l}if(m.icn){_changeSimpleOffset(m.icn,m.isGray?m.disDx:m.dx,m.isGray?m.disDy:m.dy,m.url,m.tooltip)}}function Btn_clickCB(a){var b=Btn_inst[a];if(b&&!b.isGray){setTimeout("Btn_delayClickCB("+a+")",1)}}function Btn_delayClickCB(index){var btn=Btn_inst[index];if(btn.cb){if(typeof btn.cb!="string"){btn.cb()}else{eval(btn.cb)}}}function newTextField(f,m,r,l,q,b,s,g,a,n){var k=newCtl(f);k.tooltip=s;k.changeCB=m;k.maxChar=r;k.keyUpCB=l;k.enterCB=q;k.noMargin=b;k.width=g==null?null:""+g+"px";k.focusCB=a;k.blurCB=n;k.getHTML=TextField_getHTML;k.getValue=TextField_getValue;k.setValue=TextField_setValue;k.intValue=TextField_intValue;k.intPosValue=TextField_intPosValue;k.select=TextField_select;k.beforeChange=null;k.wInit=k.init;k.init=TextField_init;k.oldValue="";return k}function TextField_init(){var a=this;a.wInit();a.layer.value=""+a.oldValue}function TextField_getHTML(){return'<input oncontextmenu="event.cancelBubble=true;return true" style="'+_sty("width",this.width)+(_pe._moz?"padding-left:3px;padding-right:3px;":"")+"margin-left:"+(this.noMargin?0:10)+'px" onfocus="TextField_focus(this)" onblur="TextField_blur(this)" onchange="TextField_changeCB(event,this)" onkeyup="TextField_keyUpCB(event,this);return true" type="text" '+_attr("maxLength",this.maxChar)+' ondragstart="event.cancelBubble=true;return true" onselectstart="event.cancelBubble=true;return true" class="textinputs" id="'+this.id+'" name="'+this.id+'"'+_attr("title",this.tooltip)+' value="">'}function TextField_getValue(){return this.layer.value}function TextField_setValue(a){if(this.layer){this.layer.value=""+a}else{this.oldValue=a}}function TextField_changeCB(b,a){var f=_getWidget(a);if(f.beforeChange){f.beforeChange()}if(f.changeCB){f.changeCB(b)}}function TextField_keyUpCB(b,a){var f=_getWidget(a);if(_eventGetKey(b)==13){if(f.beforeChange){f.beforeChange()}if(f.enterCB){f.enterCB(b)}return false}else{if(f.keyUpCB){f.keyUpCB(b);return true}}}function TextField_focus(a){var b=_getWidget(a);if(b.focusCB){b.focusCB()}}function TextField_blur(a){var b=_getWidget(a);if(b.beforeChange){b.beforeChange()}if(b.blurCB){b.blurCB()}}function TextField_intValue(a){var b=parseInt(this.getValue());return isNaN(b)?a:b}function TextField_intPosValue(a){var b=this.intValue(a);return(b<0)?a:b}function TextField_select(){this.layer.select()}function newDlgBox(n,l,g,a,b,m,f){var k=newCtl(n);k.title=l;k.width=g;k.height=a;k.defaultCB=b;k.cancelCB=m;k.noCloseButton=f?f:false;k.resizeable=false;k.oldKeyPress=null;k.oldMouseDown=null;k.oldCurrent=null;k.modal=null;k.hiddenVis=new Array;k.lastLink=null;k.firstLink=null;k.titleLayer=null;k.oldInit=k.init;k.oldShow=k.show;k.init=DlgBox_init;k.setResize=DlgBox_setResize;k.beginHTML=DlgBox_beginHTML;k.endHTML=DlgBox_endHTML;k.show=DlgBox_Show;k.center=DlgBox_center;k.focus=DlgBox_focus;k.setTitle=DlgBox_setTitle;k.getContainerWidth=DlgBox_getContainerWidth;k.getContainerHeight=DlgBox_getContainerHeight;_pe.DlgBox_instances[n]=k;k.modal=newCtl("modal_"+n);k.placeIframe=DlgBox_placeIframe;k.oldResize=k.resize;k.resize=DlgBox_resize;return k}function DlgBox_setResize(a,f,g,b,l){var k=this;k.resizeable=true;k.resizeCB=a;k.minWidth=f?f:50;k.minHeight=g?g:50;k.noResizeW=b;k.noResizeH=l}function DlgBox_setTitle(b){var a=this;a.title=b;if(a.titleLayer==null){a.titleLayer=_getLayer("titledialog_"+this.id)}a.titleLayer.innerHTML=_convStr(b)}function DlgBox_setCloseIcon(a,b){_changeOffset(a,0,(b==1?0:18))}function DlgBox_beginHTML(){with(this){var moveableCb=' onselectstart="return false" ondragstart="return false" onmousedown="DlgBox_down(event,\''+id+"',this,false);return false;\" ";var mdl=_pe._ie?('<img onselectstart="return false" ondragstart="return false" onmousedown="_eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_pe._images+'transp.gif" id="modal_'+id+'" style="display:none;position:absolute;top:0px;left:0px;width:1px;height:1px">'):('<div onselectstart="return false" ondragstart="return false" onmousedown="_eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_pe._images+'transp.gif" id="modal_'+id+'" style="position:absolute;top:0px;left:0px;width:1px;height:1px"></div>');var titleBG="background-image:url('"+_pe._images+"dialogtitle.gif')";return mdl+'<a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="firstLink_'+this.id+'" href="javascript:void(0)" onfocus="DlgBox_keepFocus(\''+this.id+"');return false;\" ></a>"+_getBGIframe("dlgIF_"+id)+'<table  border="0" cellspacing="0" cellpadding="2" id="'+id+'" class="dialogbox" style="display:none;padding:0px;visibility:'+_pe._hide+";position:absolute;top:-2000px;left:-2000px;"+_sty("width",width?(""+width+"px"):null)+_sty("height",height?(""+height+"px"):null)+'"><tr><td id="dlgFirstTr_'+id+'" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr valign="top"><td '+moveableCb+' style="cursor:move;'+titleBG+'" class="titlezone">'+_getSpace(5,18)+"</td><td "+moveableCb+' style="cursor:move;'+titleBG+'" class="titlezone" width="100%" valign="middle" align="left"><nobr><span id="titledialog_'+id+'" tabIndex="0" class="titlezone">'+_convStr(title)+'</span></nobr></td><td class="titlezone" style="'+titleBG+'">'+(noCloseButton?"":'<a href="javascript:void(0)" onclick="DlgBox_close(\''+id+'\');return false;" title="'+L_closeDialog+'">'+_imgOffset(_pe._images+"dialogelements.gif",18,18,0,18,"dialogClose_"+this.id,'onmouseover="DlgBox_setCloseIcon(this,1)" onmouseout="DlgBox_setCloseIcon(this,0)" ',L_closeDialog,"cursor:"+_pe._hand)+"</a>")+'</td></tr></table></td></tr><tr valign="top" height="100%"><td id="dlgSecTr_'+id+'" >'}}function DlgBox_endHTML(){var b=' onselectstart="return false" ondragstart="return false" onmousedown="DlgBox_down(event,\''+this.id+"',this,true);return false;\" ";var a=this.resizeable?('<tr  onselectstart="return false" height="18" valign="bottom" align="right"><td>'+_img(_pe._images+"resize.gif",14,14,null,b+' style="cursor:NW-resize" ')+"</td></tr>"):"";return"</td></tr>"+a+'</table><a style="position:absolute;left:-30px;top:-30px; visibility:hidden" id="lastLink_'+this.id+'" href="javascript:void(0)" onfocus="DlgBox_keepFocus(\''+this.id+"');return false;\" ></a>"}function DlgBox_getContainerWidth(){var a=this;return a.width-(2+2)}function DlgBox_getContainerHeight(){var a=this;return a.height-(2+18+2+2+2)}function DlgBox_close(b){var a=_pe.DlgBox_instances[b];if(a){a.show(false);if(a.cancelCB!=null){a.cancelCB()}}}function DlgBox_resizeIframeCB(a){_pe.DlgBox_instances[a].placeIframe(true,false)}function DlgBox_placeIframe(b,a){var f=this;if(f.iframe){if(b){f.iframe.resize(f.getWidth(),f.getHeight())}if(a){f.iframe.move(f.layer.offsetLeft,f.layer.offsetTop)}}}function DlgBox_resize(a,b){var f=this;f.oldResize(a,b);if(f.iframe){f.iframe.resize(a,b);if(f.firstTR){if(a!=null){f.firstTR.style.width=a-4}if(b!=null){f.secondTR.style.height=b-44}}}}function DlgBox_init(){if(this.layer!=null){return}var a=this;a.oldInit();a.modal.init();a.lastLink=newCtl("lastLink_"+a.id);a.firstLink=newCtl("firstLink_"+a.id);a.lastLink.init();a.firstLink.init();if(!a.noCloseButton){a.closeButton=_getLayer("dialogClose_"+a.id);DlgBox_setCloseIcon(a.closeButton,false)}if(_pe._moz&&!_pe._saf){a.firstTR=_getLayer("dlgFirstTr_"+a.id);a.secondTR=_getLayer("dlgSecTr_"+a.id)}a.iframe=newCtl("dlgIF_"+a.id);a.iframe.init()}function DlgBox_down(e,id,obj,isResize){_pe._dlgResize=isResize;var o=_pe.DlgBox_instances[id],lyr=o.layer,mod=o.modal.layer;lyr.onmousemove=mod.onmousemove=eval("DlgBox_move");lyr.onmouseup=mod.onmouseup=eval("DlgBox_up");lyr.dlgStartPosx=mod.dlgStartPosx=parseInt(lyr.style.left);lyr.dlgStartPosy=mod.dlgStartPosy=parseInt(lyr.style.top);lyr.dlgStartx=mod.dlgStartx=_eventGetX(e);lyr.dlgStarty=mod.dlgStarty=_eventGetY(e);lyr.dlgStartw=mod.dlgStartw=o.getWidth();lyr.dlgStarth=mod.dlgStarth=o.getHeight();lyr._widget=mod._widget=o.widx;_pe._theLYR=lyr;_eventCancelBubble(e);if(lyr.setCapture){lyr.setCapture(true)}}function DlgBox_move(f){var k=_pe._theLYR,g=_getWidget(k);if(g){if(_pe._dlgResize){var m=Math.max(g.minWidth,k.dlgStartw+_eventGetX(f)-k.dlgStartx);var b=Math.max(g.minHeight,k.dlgStarth+_eventGetY(f)-k.dlgStarty);g.resize(g.noResizeW?null:m,g.noResizeH?null:b);if(g.firstTR){if(!g.noResizeW){g.firstTR.style.width=m-4}if(!g.noResizeH){g.secondTR.style.height=b-44}}if(g.resizeCB){g.resizeCB(m,b)}}else{var a=Math.max(0,k.dlgStartPosx-k.dlgStartx+_eventGetX(f));var l=Math.max(0,k.dlgStartPosy-k.dlgStarty+_eventGetY(f));a=Math.min(Math.max(10,_winWidth()-10),a);l=Math.min(Math.max(10,_winHeight()-18),l);g.iframe.move(a,l);g.move(a,l)}}_eventCancelBubble(f);return false}function DlgBox_up(f){var g=_getWidget(_pe._theLYR),a=g.layer,b=g.modal.layer;a.onmousemove=b.onmousemove=null;a.onmouseup=b.onmouseup=null;if(a.releaseCapture){a.releaseCapture()}_pe._theLYR=null}function DlgBox_keypress(b){var f=_pe.DlgBox_current;if(f!=null){switch(_eventGetKey(b)){case 13:var a=_pe._ie?window.event.srcElement.id:b.target.id;if((a=="insRepText"||a=="renRepText")&&(f.defaultCB!=null)){f.defaultCB();return false}if(f.yes&&!f.no){f.defaultCB();return false}break;case 27:f.show(false);if(f.cancelCB!=null){f.cancelCB()}return false;break;case 8:return _isTextInput(_pe._ie?window.event:b);break}}}function DlgBoxResizeModals(b){for(var a in _pe.DlgBox_modals){m_sty=_pe.DlgBox_modals[a];m_sty.width=_documentWidth();m_sty.height=_documentHeight()}}function DlgBox_center(){var f=this,a=_getScrollY(),b=_getScrollX();f.height=f.layer.offsetHeight;f.width=f.layer.offsetWidth;f.move(Math.max(0,b+(_winWidth()-f.width)/2),Math.max(0,a+(_winHeight()-f.height)/2));f.placeIframe(true,true)}function DlgBox_Show(sh){with(this){m_sty=modal.css;l_sty=css;if(sh){oldCurrent=_pe.DlgBox_current;_pe.DlgBox_current=this;if(_pe._ie){oldKeyPress=document.onkeydown;document.onkeydown=eval("window.DlgBox_keypress")}else{document.addEventListener("keydown",eval("window.DlgBox_keypress"),false)}oldMouseDown=document.onmousedown;document.onmousedown=null;_disableAllInputs()}else{_pe.DlgBox_current=oldCurrent;oldCurrent=null;if(_pe._ie){document.onkeydown=oldKeyPress}else{document.removeEventListener("keydown",eval("window.DlgBox_keypress"),false)}document.onmousedown=oldMouseDown;_restoreAllDisabledInputs()}var sameState=(layer.isShown==sh);if(sameState){return}layer.isShown=sh;if(sh){if(window.DialogBoxWidget_zindex==null){window.DialogBoxWidget_zindex=1000}this.iframe.css.zIndex=window.DialogBoxWidget_zindex++;m_sty.zIndex=window.DialogBoxWidget_zindex++;l_sty.zIndex=window.DialogBoxWidget_zindex++;_pe.DlgBox_modals[_pe.DlgBox_modals.length]=m_sty;m_sty.display="";l_sty.display="block";this.iframe.setDisplay(true);DlgBoxResizeModals();this.height=layer.offsetHeight;this.width=layer.offsetWidth;if(_isHidden(layer)){this.center()}if(this.firstTR){this.firstTR.style.width=this.getWidth()-4;this.secondTR.style.height=this.getHeight()-44}if(this.resizeCB){this.resizeCB(this.width,this.height)}}else{var l=_pe.DlgBox_modals.length=Math.max(0,_pe.DlgBox_modals.length-1);m_sty.width="1px";m_sty.height="1px";m_sty.display="none";l_sty.display="none";move(-2000,-2000);this.iframe.setDisplay(false)}modal.show(sh);firstLink.show(sh);lastLink.show(sh);oldShow(sh);if(_pe.DlgBox_current!=null&&sh==true){_pe.DlgBox_current.focus()}}}function DlgBox_keepFocus(b){var a=_pe.DlgBox_instances[b];if(a){a.focus()}}function DlgBox_focus(){with(this){if(titleLayer==null){titleLayer=_getLayer("titledialog_"+id)}if(titleLayer.focus){titleLayer.focus()}}}var isJava=false;var isNetscape=navigator.appName.indexOf("Netscape")!=-1;var LEFT_ARROW_KEY=37;var RIGHT_ARROW_KEY=39;var ENTER_KEY=13;function promptengine_encodePrompt(a){if(isJava){return encodeURIComponent(a)}else{return promptengine_urlEncode(a)}}function promptengine_addDiscreteValue(g,q,n){var b=document.getElementById(g);var m=document.getElementById(n+"DiscreteValue");var a=m;var s=m.type.toLowerCase();var r=false;if(s!="text"&&s!="hidden"&&s!="password"){a=m.options[m.selectedIndex];r=true}var f=a.value;if(!promptengine_checkValue(f,q)){_safeSetFocus(m);return false}var k=document.getElementById(n+"ListBox");PE_clearSel(k);var l=promptengine_findOptionInList(k,f);if(l<0){l=k.length;k.options[l]=new Option(((a.text)?a.text:f),f,false,false)}k.options[l].selected=true;_safeSetFocus(m);if(m.select){m.select()}if(r&&m.selectedIndex<m.length-1){m.selectedIndex=m.selectedIndex+1}}function PE_clearSel(b){var a=0,f=b.length;if(b.type=="select-one"){a=b.selectedIndex;if(a<0){return}f=a+1}while(a<f){b.options[a++].selected=false}}function promptengine_addValueFromPickList(f,b,a){return PE_addValues(f,b,a,false)}function promptengine_addAllValues(f,b,a){return PE_addValues(f,b,a,true)}function PE_addValues(f,k,x,g){var z=document.getElementById(x+"AvailableList");var D=document.getElementById(x+"ListBox");var l=z.length;if(l==0){return false}var r=D.length;var m=z.options;var u=D.options;var y=new Array(l);var C=new Array(r);var A=false;var b=-1;for(var B=0;B<l;B++){if(g||m[B].selected){var s=m[B].value;var E=promptengine_findOptionInList(D,s,m[B].text);if(E<0){y[B]=s}else{C[E]=s}A=true;if(!g){b=B}}}if(!A){return false}var q=PE_getLB(D);for(var B=0;B<r;B++){var a=u[B];q.add(a.value,a.text,C[B]!=null)}var n=false;for(var B=0;B<l;B++){if(y[B]){var a=m[B];q.add(a.value,a.text,true);n=true}}q.update();if(!g&&b>=0&&b+1<l){PE_clearSel(z);m[b+1].selected=true}return n}function promptengine_addRangeValue(a,k,s){var f=document.getElementById(s+"SelectLowerRangeValue");var q=document.getElementById(s+"SelectUpperRangeValue");lowerBound=document.getElementById(s+"LowerBound");upperBound=document.getElementById(s+"UpperBound");if(lowerBound.type.toLowerCase()!="text"&&lowerBound.type.toLowerCase()!="hidden"&&lowerBound.type.toLowerCase()!="password"){lowerBound=lowerBound.options[lowerBound.selectedIndex];upperBound=upperBound.options[upperBound.selectedIndex]}lowerUnBounded=document.getElementById(s+"NoLBoundCheck").checked;upperUnBounded=document.getElementById(s+"NoUBoundCheck").checked;lvalue=uvalue="";if(!lowerUnBounded){if(!promptengine_checkRangeBoundValue(lowerBound.value,k)){if(lowerBound.focus&&lowerBound.type.toLowerCase()!="hidden"){lowerBound.focus()}return false}lvalue=lowerBound.value}if(!upperUnBounded){if(!promptengine_checkRangeBoundValue(upperBound.value,k)){if(upperBound.focus&&upperBound.type.toLowerCase()!="hidden"){upperBound.focus()}return false}uvalue=upperBound.value}var b="";var g="";var u=false;if(f!=null&&lvalue!=null&&lvalue.length>0){var n=f.length;for(var r=0;r<n;r++){var m=f.options[r].value;if(m!=null&&m.length>0&&m==lvalue){b=f.options[r].text;u=true;break}}}if(!u){b=(lowerBound.text&&!lowerUnBounded)?lowerBound.text:lvalue}u=false;if(q!=null&&uvalue!=null&&uvalue.length>0){var n=q.length;for(var r=0;r<n;r++){var m=q.options[r].value;if(m!=null&&m==uvalue){g=q.options[r].text;u=true;break}}}if(!u){g=(upperBound.text&&!upperUnBounded)?upperBound.text:uvalue}lowerChecked=document.getElementById(s+"LowerCheck").checked;upperChecked=document.getElementById(s+"UpperCheck").checked;m=(lowerChecked&&!lowerUnBounded)?"[":"(";if(!lowerUnBounded){m+=(lvalue)}m+="_crRANGE_";if(!upperUnBounded){m+=(uvalue)}m+=(upperChecked&&!upperUnBounded)?"]":")";display=(lowerChecked&&!lowerUnBounded)?"[":"(";display+=b;display+=" .. ";display+=g;display+=(upperChecked&&!upperUnBounded)?"]":")";promptEntry=new Option(display,m,false,false);theList=document.getElementById(s+"ListBox");var l=promptengine_findOptionInList(theList,m);if(l>-1){theList.selectedIndex=l}else{theList.options[theList.length]=promptEntry}return true}function promptengine_findOptionInList(k,f){if(k==null||f==null){return -1}var g=k.length,b=k.options;for(var a=0;a<g;a++){if(b[a].value==f){return a}}return -1}function promptengine_onNoBoundCheckClicked(b,a,f){if(f==0){if(document.getElementById(a+"NoLBoundCheck").checked){document.getElementById(a+"NoUBoundCheck").disabled=true;document.getElementById(a+"LowerCheck").disabled=true;document.getElementById(a+"LowerBound").disabled=true;if(document.getElementById(a+"SelectLowerRangeValue")!=null){document.getElementById(a+"SelectLowerRangeValue").disabled=true}}else{document.getElementById(a+"NoUBoundCheck").disabled=false;document.getElementById(a+"LowerCheck").disabled=false;document.getElementById(a+"LowerBound").disabled=false;if(document.getElementById(a+"SelectLowerRangeValue")!=null){document.getElementById(a+"SelectLowerRangeValue").disabled=false}}}else{if(f==1){if(document.getElementById(a+"NoUBoundCheck").checked){document.getElementById(a+"NoLBoundCheck").disabled=true;document.getElementById(a+"UpperCheck").disabled=true;document.getElementById(a+"UpperBound").disabled=true;if(document.getElementById(a+"SelectUpperRangeValue")!=null){document.getElementById(a+"SelectUpperRangeValue").disabled=true}}else{document.getElementById(a+"NoLBoundCheck").disabled=false;document.getElementById(a+"UpperCheck").disabled=false;document.getElementById(a+"UpperBound").disabled=false;if(document.getElementById(a+"SelectUpperRangeValue")!=null){document.getElementById(a+"SelectUpperRangeValue").disabled=false}}}}}function promptengine_onSetNullCheckClicked(b,a){if(document.getElementById(a+"NULL").checked){if(document.getElementById(a+"DiscreteValue")!=null){document.getElementById(a+"DiscreteValue").disabled=true}if(document.getElementById(a+"SelectValue")!=null){document.getElementById(a+"SelectValue").disabled=true}}else{if(document.getElementById(a+"DiscreteValue")!=null){document.getElementById(a+"DiscreteValue").disabled=false}if(document.getElementById(a+"SelectValue")!=null){document.getElementById(a+"SelectValue").disabled=false}}}function promptengine_selectValue(b,a,g){if(document.getElementById(a).selectedIndex<0){return false}selectedOption=document.getElementById(a).options[document.getElementById(a).selectedIndex];if(selectedOption.value==null&&document.getElementById(g).value==null){return false}var f=true;if(selectedOption.value==document.getElementById(g).value){f=false}document.getElementById(g).value=selectedOption.value;return f}function promptengine_hasValueInTextBox(b,a){if(document.getElementById(a).value==null){return false}return true}function promptengine_setCascadingPID(f,a,b){valueField=document.getElementById(a);curVal=valueField.value;if(curVal.length>0){curVal+="&"}curVal+="cascadingPID="+b;valueField.value=curVal;return true}function PE_removeValue(f,m,s){var l=document.getElementById(m+"ListBox");var a=l.options;var q=l.length;if(q==0){return false}var k=false;var r=-1;var n=PE_getLB(l);for(var g=0;g<q;g++){if(!s){var b=a[g];if(!b.selected){n.add(b.value,b.text);continue}r=g}k=true}if(!k){return false}n.update();if(r>=0){l=document.getElementById(m+"ListBox");if(r<l.length){l.options[r].selected=true}else{if(r==l.length&&r>0){l.options[r-1].selected=true}}}return true}function promptengine_removeValue(b,a){return PE_removeValue(b,a,false)}function promptengine_onRemoveValue(b,a){promptengine_removeValue(b,a)}function promptengine_removeAllValues(b,a){return PE_removeValue(b,a,true)}function promptengine_onRemoveAllValues(b,a){promptengine_removeAllValues(b,a)}function promptengine_updateValueField(f,a,b,g){valueField=document.getElementById(a);curVal=valueField.value;if(curVal.length>0){curVal+="&"}var k=promptengine_encodeValueField(g);curVal+=b+"="+k;valueField.value=curVal;return true}function promptengine_resetValueField(b,a){valueField=document.getElementById(a);valueField.value=""}function promptengine_updateDiscreteValue(m,a,b,k,g,l){var n="";if(document.getElementById(b+"NULL")!=null&&document.getElementById(b+"NULL").checked){n="_crNULL_"}else{valueField=document.getElementById(b+"DiscreteValue");if(valueField.type.toLowerCase()!="text"&&valueField.type.toLowerCase()!="hidden"&&valueField.type.toLowerCase()!="password"){n=valueField.options[valueField.selectedIndex].value}else{n=valueField.value}if(!l&&(n==null||n.length==0)){return promptengine_updateValueField(m,a,b,"")}if(g&&!promptengine_checkValue(n,k)){if(valueField.focus&&valueField.type.toLowerCase()!="hidden"){valueField.focus()}else{var f=document.getElementById(b+"SelectValue");if(f!=null&&f.focus){f.focus()}}return false}}return promptengine_updateValueField(m,a,b,n)}function promptengine_updateRangeValue(m,a,b,k,g,l){if(document.getElementById(b+"NULL")!=null&&document.getElementById(b+"NULL").checked){value="_crNULL_"}else{lowerBound=document.getElementById(b+"LowerBound");upperBound=document.getElementById(b+"UpperBound");if(lowerBound.type.toLowerCase()!="text"&&lowerBound.type.toLowerCase()!="hidden"&&lowerBound.type.toLowerCase()!="password"){lowerBound=lowerBound.options[lowerBound.selectedIndex];upperBound=upperBound.options[upperBound.selectedIndex]}lowerUnBounded=document.getElementById(b+"NoLBoundCheck").checked;upperUnBounded=document.getElementById(b+"NoUBoundCheck").checked;lowerChecked=document.getElementById(b+"LowerCheck").checked;upperChecked=document.getElementById(b+"UpperCheck").checked;uvalue=lvalue="";if(!l&&(lowerBound.value==null||lowerBound.value.length==0||lowerUnBounded)&&(upperBound.value==null||upperBound.value.length==0||upperUnBounded)){return promptengine_updateValueField(m,a,b,"")}if(!lowerUnBounded){if(g&&!promptengine_checkRangeBoundValue(lowerBound.value,k)){if(lowerBound.focus&&lowerBound.type.toLowerCase()!="hidden"){lowerBound.focus()}else{var f=document.getElementById(b+"SelectLowerRangeValue");if(f!=null&&f.focus){f.focus()}}return false}lvalue=lowerBound.value}if(!upperUnBounded){if(g&&!promptengine_checkRangeBoundValue(upperBound.value,k)){if(upperBound.focus&&upperBound.type.toLowerCase()!="hidden"){upperBound.focus()}else{var f=document.getElementById(b+"SelectUpperRangeValue");if(f!=null&&f.focus){f.focus()}}return false}uvalue=upperBound.value}value=(lowerChecked&&!lowerUnBounded)?"[":"(";if(!lowerUnBounded){value+=lvalue}value+="_crRANGE_";if(!upperUnBounded){value+=uvalue}value+=(upperChecked&&!upperUnBounded)?"]":")"}return promptengine_updateValueField(m,a,b,value)}function promptengine_updateMultiValue(m,a,b,k,g,l){values=document.getElementById(b+"ListBox").options;value="";if(document.getElementById(b+"NULL")!=null&&document.getElementById(b+"NULL").checked){value="_crNULL_"}else{if(values.length==0){if(g&&l){var f=document.getElementById(b+"ListBox");if(f!=null&&f.focus){f.focus()}return false}value="_crEMPTY_"}else{for(i=0;i<values.length;i++){if(i!=0){value+="_crMULT_"}value+=values[i].value}}}return promptengine_updateValueField(m,a,b,value)}var regNumber=/^(\+|-)?((\d+(\.|,|'| |\xA0)?\d*)+|(\d*(\.|,| |\xA0)?\d+)+)$/;var regCurrency=regNumber;var regDate=/^(D|d)(A|a)(T|t)(E|e) *\( *\d{4} *, *(0?[1-9]|1[0-2]) *, *((0?[1-9]|[1-2]\d)|3(0|1)) *\)$/;var regDateTime=/^(D|d)(A|a)(T|t)(E|e)(T|t)(I|i)(M|m)(E|e) *\( *\d{4} *, *(0?[1-9]|1[0-2]) *, *((0?[1-9]|[1-2]\d)|3(0|1)) *, *([0-1]?\d|2[0-3]) *, *[0-5]?\d *, *[0-5]?\d *\)$/;var regTime=/^(T|t)(I|i)(M|m)(E|e) *\( *([0-1]?\d|2[0-3]) *, *[0-5]?\d *, *[0-5]?\d *\)$/;var regDateTimeHTML=/^ *\d{4} *- *(0?[1-9]|1[0-2]) *- *((0?[1-9]|[1-2]\d)|3(0|1)) *  *([0-1]?\d|2[0-3]) *: *[0-5]?\d *: *[0-5]?\d *$/;var regDateHTML=/^ *\d{4} *- *(0?[1-9]|1[0-2]) *- *((0?[1-9]|[1-2]\d)|3(0|1)) *$/;var regTimeHTML=/^ *([0-1]?\d|2[0-3]) *: *[0-5]?\d *: *[0-5]?\d *$/;function promptengine_getDateSpec(){var a=promptengine_getDatePattern();a=a.replace("Y",L_YYYY);a=a.replace("M",L_MM);a=a.replace("D",L_DD);return a}function promptengine_checkValue(k,f){if(k==null){return false}if(k=="_crNULL_"){return true}if(f==_pe._nm&&!regNumber.test(k)){if(k.length>0){alert(L_BadNumber)}return false}else{if(f==_pe._cy&&!regCurrency.test(k)){if(k.length>0){alert(L_BadCurrency)}return false}else{if(f==_pe._da){var g=promptengine_getDateRegex();if((g==null||!g.test(k))&&!regDate.test(k)&&!regDateHTML.test(k)){if(k.length>0){var a=L_BadDate.replace("%1",promptengine_getDateSpec());alert(a)}return false}}else{if(f==_pe._dt){var g=promptengine_getDateTimeRegex();if((g==null||!g.test(k))&&!regDateTime.test(k)&&!regDateTimeHTML.test(k)){if(k.length>0){var b=L_BadDateTime.replace("%1",promptengine_getDateSpec());alert(b)}return false}}else{if(f==_pe._tm&&!regTime.test(k)&&!regTimeHTML.test(k)){if(k.length>0){alert(L_BadTime)}return false}}}}}return true}function promptengine_checkRangeBoundValue(b,a){if(b==null||b.length==0){return false}return promptengine_checkValue(b,a)}function promptengine_isSubmitEvent(f){var a=false;if(isNetscape){if(f.which==ENTER_KEY&&(f.target.type=="text"||f.target.type=="password")){a=true}}else{if(window.event.keyCode==ENTER_KEY&&(window.event.srcElement.type=="text"||window.event.srcElement.type=="password")){a=true}}if(a){_eventCancelBubble(f)}return a}function promptengine_isEnterKey(f){var a=false;if(isNetscape){if(f.which==ENTER_KEY&&f.target.tagName.toLowerCase()!="a"){a=true}}else{if(window.event.keyCode==ENTER_KEY&&window.event.srcElement.tagName.toLowerCase()!="a"){a=true}}if(a){_eventCancelBubble(f)}return a}function promptengine_urlEncode(a){var f=new String("");for(var b=0;b<a.length;b++){var g=a.charAt(b);switch(g){case"%":f+="%25";break;case"+":f+="%2B";break;case" ":f+="%20";break;case"<":f+="%3C";break;case">":f+="%3E";break;case'"':f+="%22";break;case"'":f+="%27";break;case"#":f+="%23";break;case"{":f+="%7B";break;case"}":f+="%7D";break;case"|":f+="%7C";break;case"\\":f+="%5C";break;case"^":f+="%5E";break;case"~":f+="%7E";break;case"`":f+="%60";break;case"[":f+="%5B";break;case"]":f+="%5D";break;case";":f+="%3B";break;case"/":f+="%2F";break;case"?":f+="%3F";break;case":":f+="%3A";break;case"@":f+="%40";break;case"=":f+="%3D";break;case"&":f+="%26";break;default:f+=g;break}}return f}function promptengine_CancelRightClick(a){if(isNetscape){if(a.target.type!="text"&&a.target.type!="textarea"){a.preventDefault();a.cancelBubble=true;return true}}else{if(window.event.srcElement.type!="text"&&window.event.srcElement.type!="textarea"){window.event.cancelBubble=true;window.event.returnValue=false}}}function promptengine_showHidePromptByKey(b,g,m,l,a){var f=false;var k=document.getElementById(b);if(k==null){return}if(isNetscape){if((a.which==LEFT_ARROW_KEY&&k.style.display=="")||(a.which==RIGHT_ARROW_KEY&&k.style.display=="none")){f=true}}else{if((window.event.keyCode==LEFT_ARROW_KEY&&k.style.display=="")||(window.event.keyCode==RIGHT_ARROW_KEY&&k.style.display=="none")){f=true}}if(f==true){promptengine_showHidePrompt(b,g,m,l,a)}}function promptengine_showHidePrompt(b,f,m,l,a){var k;k=document.getElementById(f);if(k!=null&&b!=null){if(!k.origImage){k.origImage=k.src}var g=document.getElementById(b);if(g!=null){if(g.style.display==""){g.style.display="none"}else{g.style.display=""}if(!k.changed||k.changed==false){k.src=l;k.changed=true}else{k.src=m;k.changed=false}}}}function promptengine_scrollTo(g){if(!g){return}var a=_getScrollY(),f=_getScrollX();var k=g.offsetHeight,b=_winHeight(),l=_getPos(g).y;if(l<a){window.scrollTo(f,l)}else{if(l+k>a+b){window.scrollTo(f,Math.max(l,l+k-b))}}}function doNothing(){}function promptengine_anchorOnKeyPress(f){var a=f?f:window.event;var b=a.srcElement?a.srcElement:a.target;if(a.keyCode==13&&b.onclick){b.onclick.apply(b,[f])}return true}function promptengine_encodeUTF8(b){var a=[];var k=b.length;for(var g=0;g<k;g++){var l=b.charCodeAt(g);if(l<128){a.push(l)}else{if(l<2048){a.push((l>>6)|192);a.push(l&63|128)}else{if(l<55296||l>=57344){a.push((l>>12)|224);a.push((l>>6)&63|128);a.push(l&63|128)}else{if(l<56320){var f=b.charCodeAt(g+1);if(isNaN(f)||f<56320||f>=57344){a.push(239,191,189);continue}g++;val=((l&1023)<<10)|(f&1023);val+=65536;a.push((val>>18)|240);a.push((val>>12)&63|128);a.push((val>>6)&63|128);a.push(val&63|128)}else{a.push(239,191,189)}}}}}return a}function promptengine_encodeBASE64(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var m=[];var l,g,f,u,r,q,n;var k=0,s=a.length;while(k<s){l=a[k++];g=a[k++];f=a[k++];u=l>>2;r=((l&3)<<4)|(g>>4);q=((g&15)<<2)|(f>>6);n=f&63;if(isNaN(g)){q=n=64}else{if(isNaN(f)){n=64}}m.push(b.charAt(u));m.push(b.charAt(r));m.push(b.charAt(q));m.push(b.charAt(n))}return m.join("")}function promptengine_encodeValueField(a){return promptengine_encodePrompt(promptengine_encodeBASE64(promptengine_encodeUTF8(a)))}if(typeof(bobj)=="undefined"){bobj={}}if(typeof(bobj.prompt)=="undefined"){bobj.prompt={}}bobj.prompt.Calendar=function(g,b,a,f){this.locale=a;this.crystalreportviewerPath=f+"/../";this.loadFiles();this.formName=g;this.dateFormat=b;this.dateTimeFormat=b+" H:mm:ss";this.isDateTime=false};bobj.prompt.Calendar.prototype={show:function(f,a){this.calendar=bobj.crv.Calendar.getInstance();this.input=document.getElementById(a);var b=f.target?f.target:f.srcElement;var g=this._getPosition(b);this._setValue(this.input.value);this._setSignals(true);this.calendar.setShowTime(this.isDateTime);this.calendar.show(true,g.x,g.y)},setIsDateTime:function(a){this.isDateTime=a},_getPosition:function(a){return MochiKit.Style.getElementPosition(a)},_setValue:function(b){var a=this._getDateValue(b);if(!a){a=new Date()}this.calendar.setDate(a)},_onOkayClick:function(a){this._setFieldValue(a)},_setFieldValue:function(a){if(this.input){this.input.value=this._getStringValue(a)}},_onHide:function(){this._removeSignals()},_getStringValue:function(a){var b=this.isDateTime?this.dateTimeFormat:this.dateFormat;return bobj.external.date.formatDate(a,b)},_getDateValue:function(a){var b=this.isDateTime?this.dateTimeFormat:this.dateFormat;return bobj.external.date.getDateFromFormat(a,b)},_setSignals:function(b){var a=b?MochiKit.Signal.connect:MochiKit.Signal.disconnect;a(this.calendar,this.calendar.Signals.OK_CLICK,this,"_onOkayClick");a(this.calendar,this.calendar.Signals.ON_HIDE,this,"_onHide")},_removeSignals:function(){this._setSignals(false)},loadJsResources:function(){var b=["js/external/date.js","js/MochiKit/Base.js","js/MochiKit/DOM.js","js/MochiKit/Style.js","js/MochiKit/Signal.js","js/dhtmllib/dom.js","prompting/js/initDhtmlLib.js","js/dhtmllib/palette.js","js/dhtmllib/menu.js","js/crviewer/html.js","js/crviewer/common.js","js/crviewer/Calendar.js"];for(var a=0;a<b.length;a++){this.loadJsFile(b[a])}},loadJsFile:function(a){document.write('<script src="'+this.crystalreportviewerPath+a+'" language="javascript"><\/script>')},loadLocaleStrings:function(){var a=["js/dhtmllib/language/en/labels.js","js/crviewer/strings_en.js"];var g="_";if(this.locale.indexOf("-")>0){g="-"}var f=this.locale.split(g);if(f.length>=1){a.push("js/dhtmllib/language/"+f[0]+"/labels.js");a.push("js/crviewer/strings_"+f[0]+".js")}if(f.length>=2){a.push("js/dhtmllib/language/"+f[0]+"_"+f[1]+"/labels.js");a.push("js/crviewer/strings_"+f[0]+"_"+f[1]+".js")}for(var b=0;b<a.length;b++){this.loadJsFile(a[b])}},loadFiles:function(){if(typeof(bobj.crv)=="undefined"){window.promptengine_skin=this.crystalreportviewerPath+"js/dhtmllib/images/skin_standard/";window.promptengine_style=this.crystalreportviewerPath+"js/crviewer/images/";window.promptengine_lang=this.locale;this.loadLocaleStrings();this.loadJsResources()}}};if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.constants=="undefined"){bobj.constants={modalLayerIndex:1000}}bobj.uniqueId=function(){return"bobjid_"+(++bobj.uniqueId._count)};if(typeof bobj.uniqueId._count=="undefined"){bobj.uniqueId._count=new Date().getTime()}bobj.updateIf=function(n,f,l){if(f===null){f={}}for(var g=1,a=arguments.length;g<a;g++){var m=arguments[g];if(typeof(m)!="undefined"&&m!==null){for(var b in m){if(n(f,l,b)){f[b]=m[b]}}}}return f};bobj.fillIn=MochiKit.Base.partial(bobj.updateIf,function(b,f,a){return(typeof(b[a])=="undefined")});bobj.isObject=function(a){return(a&&typeof a=="object")};bobj.isArray=function(a){return(bobj.isObject(a)&&a.constructor==Array)};bobj.isString=function(a){return(typeof(a)=="string")};bobj.isNumber=function(a){return typeof(a)=="number"&&isFinite(a)};bobj.isBoolean=function(a){return typeof a=="boolean"};bobj.isFunction=function(a){return typeof(a)=="function"};bobj.isBorderBoxModel=function(){if(typeof bobj.isBorderBoxModel._cachedValue=="undefined"){if(document.body){var a=document.createElement("div");a.style.width="10px";a.style.padding="1px";a.style.position="absolute";a.style.visibility="hidden";document.body.appendChild(a);bobj.isBorderBoxModel._cachedValue=(a.offsetWidth==10);document.body.removeChild(a)}else{return _ie&&bobj.isQuirksMode()}}return bobj.isBorderBoxModel._cachedValue};bobj.isQuirksMode=function(){return(document.compatMode!="CSS1Compat")};bobj.setVisualStyle=function(b,f){if(b===null||f===null){return}var a=b.style;if(f.className){b.className=f.className}if(f.backgroundColor){a.backgroundColor=f.backgroundColor}if(f.borderWidth){a.borderWidth=f.borderWidth}if(f.borderStyle){a.borderStyle=f.borderStyle}if(f.borderColor){a.borderColor=f.borderColor}if(f.fontFamily){a.fontFamily=f.fontFamily}if(f.fontWeight){a.fontWeight=f.fontWeight}if(f.textDecoration){a.textDecoration=f.textDecoration}if(f.color){a.color=f.color}if(f.width){a.width=f.width}if(f.height){a.height=f.height}if(f.fontStyle){a.fontStyle=f.fontStyle}if(f.fontSize){a.fontSize=f.fontSize}if(f.left){a.left=f.left}if(f.top){a.top=f.top}};bobj.setOuterSize=function(k,b,g,f){var m=null;var a=k.style;if(a.display=="none"){m={visibility:a.visibility,position:a.position,display:"none"};a.visibility="hidden";a.position="absolute";a.display=""}function l(n){var q=MochiKit.DOM.getStyle(k,n);if(bobj.isString(q)&&q.substring(q.length-2=="px")){return(parseInt(q,10)||0)}return 0}if(bobj.isNumber(b)){if(!bobj.isBorderBoxModel()){b-=l("border-left-width");b-=l("border-right-width");b-=l("padding-left");b-=l("padding-right");if(f){b-=l("margin-left");b-=l("margin-right")}}a.width=Math.max(0,b)+"px"}if(bobj.isNumber(g)){if(!bobj.isBorderBoxModel()){if(f){g-=l("margin-top");g-=l("margin-bottom")}g-=l("border-top-width");g-=l("border-bottom-width");g-=l("padding-top");g-=l("padding-bottom")}a.height=Math.max(0,g)+"px"}if(m){a.display=m.display;a.position=m.position;a.visibility=m.visibility}};bobj.placeElement=function(g,q,n,f,A){var u=g.style;var a=u.visibility||"visible";u.visibility="hidden";u.position="absolute";var b=u.display;u.display="";var l=q;var k=n;var m=g.offsetWidth;var v=g.offsetHeight;var s=getScrollX();var r=getScrollX()+winWidth();var D=getScrollY();var C=getScrollY()+winHeight();var z;if(f&&((q-s)>m)){z=false}else{if((r-q)>m){z=true}else{z=(r-q)>(q-s)}}var B;if(A&&((n-D)>v)){B=false}else{if((C-n)>v){B=true}else{B=(C-n)>(n-D)}}if(!z){l-=m}if(!B){k-=v}if((l+m)>r){l=r-m}if((k+v)>C){k=C-v}l=Math.max(s,l);k=Math.max(D,k);u.left=l+"px";u.top=k+"px";u.visibility=a;u.display=b};bobj.getContainer=function(a){if(a&&a.layer){return a.layer.parentNode}return null};bobj.checkParent=function(g,b){var a=false;if(g&&b){b=b.toUpperCase();var f=g.parentNode;while(f){if(f.tagName==b){a=true;break}f=f.parentNode}}return a};bobj.slice=function(a,l,f){if(bobj.isArray(a)){return a.slice(l,f)}else{if(MochiKit.Base.isArrayLike(a)){var b=[];var k=a.length;if(bobj.isNumber(f)&&f<k){k=f}l=Math.max(l,0);for(var g=l;g<k;++g){b.push(a[g])}return b}}return null};bobj.extractRange=function(g,m,a){if(g&&bobj.isNumber(m)){if(!bobj.isNumber(a)||a>g.length){a=g.length}m=Math.max(0,m);if(m<a){var f=0,l=m;var b=a,k=g.length;if(g.substring){return(g.substring(f,l)+g.substring(b,k))}else{return bobj.slice(g,f,l).concat(bobj.slice(g,b,k))}}}return g};bobj.unitValue=function(b,a){if(bobj.isNumber(b)){return b+(a||"px")}return b};bobj.evalInWindow=function(expression){if(window.execScript){return window.execScript(expression)}else{return MochiKit.Base.bind(eval,window,expression).call()}};bobj.trimLeft=function(a){a=a||"";return a.replace(/^\s+/g,"")};bobj.trimRight=function(a){a=a||"";return a.replace(/\s+$/g,"")};bobj.trim=function(a){return bobj.trimLeft(bobj.trimRight(a))};bobj.equals=function(b,a){if(typeof(b)!=typeof(a)){return false}if(bobj.isObject(b)){var g=true;for(var f in b){g=g&&bobj.equals(b[f],a[f])}return g}else{return b==a}};bobj.includeLink=function(b){var f=document.getElementsByTagName("head")[0];var a=document.body;var g=document.createElement("link");g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");g.setAttribute("href",b);if(f){f.appendChild(g)}else{if(a){a.appendChild(g)}}};bobj.addStyleSheet=function(f,k){var g=document.createElement("style");g.setAttribute("type","text/css");if(k){g.setAttribute("id",k)}if(g.styleSheet){g.styleSheet.cssText=f}else{g.appendChild(document.createTextNode(f))}var b=document.getElementsByTagName("head");var a=document.getElementsByTagName("body");if(b&&b[0]){b[0].appendChild(g)}else{if(a&&a[0]){a[0].appendChild(g)}}};bobj.removeAllChildElements=function(a){if(a){while(a.firstChild){bobj.removeAllChildElements(a.firstChild);a.removeChild(a.firstChild)}}};bobj.getValueHashCode=function(f,a){var b=bobj.crv.params.DataTypes;switch(f){case b.BOOLEAN:case b.CURRENCY:case b.NUMBER:case b.STRING:return""+a;case b.TIME:return""+a.h+","+a.min+","+a.s+","+a.ms;case b.DATE:return""+a.y+","+a.m+","+a.d;case b.DATE_TIME:return""+a.y+","+a.m+","+a.d+","+a.h+","+a.min+","+a.s+","+a.ms}};bobj.encodeUTF8=function(b){var a=[];var k=b.length;for(var g=0;g<k;g++){var l=b.charCodeAt(g);if(l<128){a.push(l)}else{if(l<2048){a.push((l>>6)|192);a.push(l&63|128)}else{if(l<55296||l>=57344){a.push((l>>12)|224);a.push((l>>6)&63|128);a.push(l&63|128)}else{if(l<56320){var f=b.charCodeAt(g+1);if(isNaN(f)||f<56320||f>=57344){a.push(239,191,189);continue}g++;val=((l&1023)<<10)|(f&1023);val+=65536;a.push((val>>18)|240);a.push((val>>12)&63|128);a.push((val>>6)&63|128);a.push(val&63|128)}else{a.push(239,191,189)}}}}}return a};bobj.encodeBASE64=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var m=[];var l,g,f,u,r,q,n;var k=0,s=a.length;while(k<s){l=a[k++];g=a[k++];f=a[k++];u=l>>2;r=((l&3)<<4)|(g>>4);q=((g&15)<<2)|(f>>6);n=f&63;if(isNaN(g)){q=n=64}else{if(isNaN(f)){n=64}}m.push(b.charAt(u));m.push(b.charAt(r));m.push(b.charAt(q));m.push(b.charAt(n))}return m.join("")};bobj.getElementByIdOrName=function(b){if(!b){return null}var f=document.getElementById(b);if(f){return f}var a=document.getElementsByName(b);if(a&&a.length>0){return a[0]}return null};bobj.getRect=function(g,b,a,f){return"rect("+g+"px, "+b+"px,"+a+"px,"+f+"px)"};bobj.getBodyScrollDimension=function(){var a=0;var f=0;var b=document.getElementsByTagName("Body");if(b&&b[0]){a=b[0].scrollWidth;f=b[0].scrollHeight}return{w:a,h:f}};if(typeof(bobj.html)=="undefined"){bobj.html={}}bobj.html.openTag=function(b,n){var l="<"+b;for(var g in n){if(g in Object.prototype){continue}l+=" "+g+'="';var m=n[g];if(bobj.isArray(m)){m=m.join(" ")}else{if(bobj.isObject(m)){var a="";for(var f in m){if(f in Object.prototype){continue}a+=f+":"+m[f]+";"}m=a}}l+=m+'"'}return l+">"};bobj.html.closeTag=function(a){return"</"+a+">"};bobj.html.createHtml=function(a,k,b){var g=bobj.html.openTag(a,k);for(var f=2;f<arguments.length;++f){g+=arguments[f]}g+=bobj.html.closeTag(a);return g};bobj.html.TABLE=MochiKit.Base.partial(bobj.html.createHtml,"table");bobj.html.UL=MochiKit.Base.partial(bobj.html.createHtml,"ul");bobj.html.OL=MochiKit.Base.partial(bobj.html.createHtml,"ol");bobj.html.LI=MochiKit.Base.partial(bobj.html.createHtml,"li");bobj.html.TD=MochiKit.Base.partial(bobj.html.createHtml,"td");bobj.html.TR=MochiKit.Base.partial(bobj.html.createHtml,"tr");bobj.html.TBODY=MochiKit.Base.partial(bobj.html.createHtml,"tbody");bobj.html.THEAD=MochiKit.Base.partial(bobj.html.createHtml,"thead");bobj.html.TFOOT=MochiKit.Base.partial(bobj.html.createHtml,"tfoot");bobj.html.TABLE=MochiKit.Base.partial(bobj.html.createHtml,"table");bobj.html.TH=MochiKit.Base.partial(bobj.html.createHtml,"th");bobj.html.INPUT=MochiKit.Base.partial(bobj.html.createHtml,"input");bobj.html.SPAN=MochiKit.Base.partial(bobj.html.createHtml,"span");bobj.html.A=MochiKit.Base.partial(bobj.html.createHtml,"a");bobj.html.DIV=MochiKit.Base.partial(bobj.html.createHtml,"div");bobj.html.IMG=MochiKit.Base.partial(bobj.html.createHtml,"img");bobj.html.BUTTON=MochiKit.Base.partial(bobj.html.createHtml,"button");bobj.html.TT=MochiKit.Base.partial(bobj.html.createHtml,"tt");bobj.html.PRE=MochiKit.Base.partial(bobj.html.createHtml,"pre");bobj.html.H1=MochiKit.Base.partial(bobj.html.createHtml,"h1");bobj.html.H2=MochiKit.Base.partial(bobj.html.createHtml,"h2");bobj.html.H3=MochiKit.Base.partial(bobj.html.createHtml,"h3");bobj.html.BR=MochiKit.Base.partial(bobj.html.createHtml,"br");bobj.html.HR=MochiKit.Base.partial(bobj.html.createHtml,"hr");bobj.html.LABEL=MochiKit.Base.partial(bobj.html.createHtml,"label");bobj.html.TEXTAREA=MochiKit.Base.partial(bobj.html.createHtml,"textarea");bobj.html.FORM=MochiKit.Base.partial(bobj.html.createHtml,"form");bobj.html.P=MochiKit.Base.partial(bobj.html.createHtml,"p");bobj.html.SELECT=MochiKit.Base.partial(bobj.html.createHtml,"select");bobj.html.OPTION=MochiKit.Base.partial(bobj.html.createHtml,"option");bobj.html.OPTGROUP=MochiKit.Base.partial(bobj.html.createHtml,"optgroup");bobj.html.LEGEND=MochiKit.Base.partial(bobj.html.createHtml,"legend");bobj.html.FIELDSET=MochiKit.Base.partial(bobj.html.createHtml,"fieldset");bobj.html.STRONG=MochiKit.Base.partial(bobj.html.createHtml,"strong");bobj.html.CANVAS=MochiKit.Base.partial(bobj.html.createHtml,"canvas");bobj.html.IFRAME=MochiKit.Base.partial(bobj.html.createHtml,"iframe");bobj.html.SCRIPT=MochiKit.Base.partial(bobj.html.createHtml,"script");bobj.html.extractScripts=function(m){var l=/(?:<script([^>]*)\/>|<script([^>]*)>([\s\S]*?)<\/script>)/i;var g=/src=\"([^\"]*)\"/i;var a=[];var k=null;while(k=l.exec(m)){var f={src:null,text:null};var b=k[1]||k[2];if(b=g.exec(b)){f.src=b[1]}if(k[3]){f.text=k[3]}a.push(f);m=bobj.extractRange(m,k.index,k.index+k[0].length)}return{scripts:a,html:m}};bobj.html.extractHtml=function(a){var g=bobj.html.extractScripts(a);var f=bobj.html.extractLinks(g.html);var b=bobj.html.extractStyles(f.html);return{scripts:g.scripts,html:b.html,links:f.links,styles:b.styles}};bobj.html.extractLinks=function(k){var g=/<link([^>]*)>/i;var l=/href=\"([^\"]*)\"/i;var b=[];var f=null;while(f=g.exec(k)){var a=l.exec(f);if(a&&a.length>0){b.push(a[1])}k=bobj.extractRange(k,f.index,f.index+f[0].length)}return{links:b,html:k}};bobj.html.extractStyles=function(l){var f=/<style([^>]*)>([\s\S]*?)<\/style>/i;var q=/type=\"([^\"]*)\"/i;var k=/media=\"([^\"]*)\"/i;var n=[];var m=null;while(m=f.exec(l)){var b={media:null,type:null,text:m[2]};var a=q.exec(m[1]);if(a){b.type=a[1]}var g=k.exec(m[1]);if(g){b.media=g[1]}n.push(b);l=bobj.extractRange(l,m.index,m.index+m[0].length)}return{styles:n,html:l}};if(typeof(bobj.crv.Toolbar)=="undefined"){bobj.crv.Toolbar={}}if(typeof(bobj.crv.ToolbarButton)=="undefined"){bobj.crv.ToolbarButton={}}if(typeof(bobj.crv.SelectPageControl)=="undefined"){bobj.crv.SelectPageControl={}}if(typeof(bobj.crv.ZoomControl)=="undefined"){bobj.crv.ZoomControl={}}if(typeof(bobj.crv.SearchTextControl)=="undefined"){bobj.crv.SearchTextControl={}}bobj.crv.toolbarImageY=function(a){return a*22+3};bobj.crv.exportIconIndex=0;bobj.crv.printIconIndex=1;bobj.crv.groupTreeIconIndex=2;bobj.crv.paramPanelIconIndex=3;bobj.crv.firstIconIndex=4;bobj.crv.prevIconIndex=5;bobj.crv.nextIconIndex=6;bobj.crv.lastIconIndex=7;bobj.crv.refreshIconIndex=8;bobj.crv.searchIconIndex=9;bobj.crv.newToolbar=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId(),visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:null,height:null,fontStyle:null,fontSize:null}},a);var b=newPaletteContainerWidget(a.id);b.margin=0;bobj.fillIn(b,a);b._rightZoneWgts=[];b.widgetType="Toolbar";b.initOld=b.init;f(b,bobj.crv.Toolbar);b.palette=newPaletteWidget(b.id+"_palette");b.add(b.palette);return b};bobj.crv.Toolbar.addChild=function(f){var b=MochiKit.Signal.signal;var g=MochiKit.Base.partial;var a=MochiKit.Base.bind;switch(f.widgetType){case"ExportButton":this.exportButton=f;f.clickCB=g(b,this,"export");break;case"PrintButton":this.printButton=f;f.clickCB=g(b,this,"print");break;case"ParamPanelToggleButton":this.paramPanelToggleButton=f;f.toggleCB=a(this._onToggleButtonClick,this,f);break;case"GroupPanelToggleButton":this.groupPanelToggleButton=f;f.toggleCB=a(this._onToggleButtonClick,this,f);break;case"FirstPageButton":this.firstPageButton=f;f.clickCB=g(b,this,"firstPage");break;case"PrevPageButton":this.prevPageButton=f;f.clickCB=g(b,this,"prevPage");break;case"NextPageButton":this.nextPageButton=f;f.clickCB=g(b,this,"nextPage");break;case"LastPageButton":this.lastPageButton=f;f.clickCB=g(b,this,"lastPage");break;case"RefreshButton":this.refreshButton=f;f.clickCB=g(b,this,"refresh");break;case"ZoomControl":this.zoomControl=f;f.zoomCB=g(b,this,"zoom");break;case"SelectPageControl":this.selectPageControl=f;f.selectPageCB=g(b,this,"selectPage");break;case"SearchTextControl":this.searchTextControl=f;f.searchTextCB=g(b,this,"search");break;case"DrillUpButton":this.drillUpButton=f;f.clickCB=g(b,this,"drillUp");break;default:break}if(f.layoutAlign=="right"){this._rightZoneWgts.push(f)}else{this.palette.add(f)}};bobj.crv.Toolbar.init=function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);this.palette.init();this._updateNavButtons()};bobj.crv.Toolbar.write=function(){this._addRightZone();this.begin();this.palette.write();this.end();document.write(bobj.crv.getInitHTML(this.widx))};bobj.crv.Toolbar.beginHTML=function(){return bobj.html.openTag("div",{id:this.id,"class":"dialogzone",style:{overflow:"hidden",margin:this.margin+"px"}})};bobj.crv.Toolbar.getHTML=function(){this._addRightZone();return(this.beginHTML()+this.palette.getHTML()+this.endHTML()+bobj.crv.getInitHTML(this.widx))};bobj.crv.Toolbar.getWidth=function(){var k;var g=0;var b=this.palette.items;for(var f=0,a=b.length;f<a;f++){k=b[f].layer;if(k.offsetWidth){g+=k.offsetWidth}if(k.offsetLeft){g+=(k.offsetLeft*2)}}return g};bobj.crv.Toolbar._addRightZone=function(){this.palette.beginRightZone();var a=null;while(a=this._rightZoneWgts.pop()){this.palette.add(a)}delete this._rightZoneWgts};bobj.crv.Toolbar._updateNavButtons=function(){if(this.selectPageControl){var g=this.selectPageControl.getCurrentPage();if(this.firstPageButton){this.firstPageButton.setDisabled(g==1)}if(this.prevPageButton){this.prevPageButton.setDisabled(g==1)}var b=this.selectPageControl.getNumPages();var a=b.indexOf("+")==-1;var f=parseInt(b,10);var k=a&&f==g;if(this.nextPageButton){this.nextPageButton.setDisabled(k)}if(this.lastPageButton){this.lastPageButton.setDisabled(k)}}};bobj.crv.Toolbar._onToggleButtonClick=function(b,f){var a=(f?L_bobj_crv_Hide:L_bobj_crv_Show);if(this.paramPanelToggleButton===b){if(this.groupPanelToggleButton){this.groupPanelToggleButton.check(false);this.groupPanelToggleButton.changeTooltip(L_bobj_crv_Show+" "+L_bobj_crv_GroupTree)}this.paramPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_ParamPanel);MochiKit.Signal.signal(this,"showParamPanel",f)}else{if(this.groupPanelToggleButton===b){if(this.paramPanelToggleButton){this.paramPanelToggleButton.check(false);this.paramPanelToggleButton.changeTooltip(L_bobj_crv_Show+" "+L_bobj_crv_ParamPanel)}this.groupPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_GroupTree);MochiKit.Signal.signal(this,"showGroupTree",f)}}};bobj.crv.Toolbar.setPageNumber=function(b,a){if(this.selectPageControl){if(b){this.selectPageControl.setCurrentPage(b)}if(a){this.selectPageControl.setNumPages(a)}this._updateNavButtons()}};bobj.crv.Toolbar.updateToolPanelButtons=function(f){var g=bobj.crv.ToolPanelType;var k=false;var b=false;if(g.GroupTree==f){k=true}else{if(g.ParameterPanel==f){b=true}}if(this.groupPanelToggleButton){this.groupPanelToggleButton.check(k);var a=k?L_bobj_crv_Hide:L_bobj_crv_Show;this.groupPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_GroupTree)}if(this.paramPanelToggleButton){this.paramPanelToggleButton.check(b);var a=b?L_bobj_crv_Hide:L_bobj_crv_Show;this.paramPanelToggleButton.changeTooltip(a+" "+L_bobj_crv_ParamPanel)}};bobj.crv.Toolbar.update=function(g,a){if(g){for(var b in g.children){var f=g.children[b];if(f){switch(f.cons){case"bobj.crv.newSelectPageControl":if(this.selectPageControl){this.selectPageControl.update(f,a);this._updateNavButtons()}break;case"bobj.crv.newSearchTextControl":if(this.searchTextControl){this.searchTextControl.update(f,a)}break}}}}};bobj.crv.newToolbarButton=function(b){b=MochiKit.Base.update({id:bobj.uniqueId(),icon:null,tooltip:null,text:null,isDisabled:false,isToggleButton:false,isChecked:false,clickCB:null,width:16,height:16,dx:3,dy:3,disDx:25,disDy:3},b);var a=b.isToggleButton?newIconCheckWidget:newIconWidget;var f=a.call(null,b.id,b.icon,b.clickCB,b.text,b.tooltip,b.width,b.height,b.dx,b.dy,b.disDx,b.disDy);f._tbBtnOldInit=f.init;f._tbBtnKwArgs=b;MochiKit.Base.update(f,bobj.crv.ToolbarButton);return f};bobj.crv.ToolbarButton.init=function(){this._tbBtnOldInit();var a=this._tbBtnKwArgs;this.setDisabled(a.isDisabled)};bobj.crv.newFirstPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_FirstPage,dy:bobj.crv.toolbarImageY(bobj.crv.firstIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.firstIconIndex)},a));b.widgetType="FirstPageButton";return b};bobj.crv.newPrevPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_PrevPage,dy:bobj.crv.toolbarImageY(bobj.crv.prevIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.prevIconIndex)},a));b.widgetType="PrevPageButton";return b};bobj.crv.newNextPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_NextPage,dy:bobj.crv.toolbarImageY(bobj.crv.nextIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.nextIconIndex)},a));b.widgetType="NextPageButton";return b};bobj.crv.newLastPageButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_LastPage,dy:bobj.crv.toolbarImageY(bobj.crv.lastIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.lastIconIndex)},a));b.widgetType="LastPageButton";return b};bobj.crv.newDrillUpButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/up.gif"),tooltip:L_bobj_crv_DrillUp},a));b.widgetType="DrillUpButton";return b};bobj.crv.newPanelToggleButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),text:L_bobj_crv_Parameters,isToggleButton:true,clickCB:function(){if(this.toggleCB){this.toggleCB(this.isChecked())}},dy:bobj.crv.toolbarImageY(bobj.crv.paramPanelIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.paramPanelIconIndex)},a));b.widgetType="ParamPanelToggleButton";return b};bobj.crv.newGroupTreeToggleButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),text:L_bobj_crv_GroupTree,isToggleButton:true,clickCB:function(){if(this.toggleCB){this.toggleCB(this.isChecked())}},dy:bobj.crv.toolbarImageY(bobj.crv.groupTreeIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.groupTreeIconIndex)},a));b.widgetType="GroupPanelToggleButton";return b};bobj.crv.newRefreshButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_Refresh,dy:bobj.crv.toolbarImageY(bobj.crv.refreshIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.refreshIconIndex)},a));b.widgetType="RefreshButton";return b};bobj.crv.newExportButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_Export,dy:bobj.crv.toolbarImageY(bobj.crv.exportIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.exportIconIndex)},a));b.widgetType="ExportButton";return b};bobj.crv.newPrintButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/toolbar.gif"),tooltip:L_bobj_crv_Print,dy:bobj.crv.toolbarImageY(bobj.crv.printIconIndex),disDy:bobj.crv.toolbarImageY(bobj.crv.printIconIndex)},a));b.widgetType="PrintButton";return b};bobj.crv.newLogoButton=function(a){var b=bobj.crv.newToolbarButton(MochiKit.Base.update({icon:bobj.crvUri("images/logo.gif"),tooltip:"SAP Crystal Reports",clickCB:function(){window.location.href="http://www.businessobjects.com/ipl/default.asp?destination=ViewerLogoLink&product=crystalreports&version=12.0"},width:120,height:20,dx:0,dy:0,disDx:0,disDy:0},a));b.layoutAlign="right";b.widgetType="LogoButton";return b};bobj.crv.newToolbarSeparator=function(){return newPaletteVerticalSepWidget(bobj.uniqueId())};bobj.crv.newZoomControl=function(g){var m=MochiKit.Base.update;g=m({initialZoom:"100%",id:bobj.uniqueId()},g);if(bobj.isNumber(g.initialZoom)){g.initialZoom=g.initialZoom+"%"}var l=newTextComboWidget(g.id,5,L_bobj_crv_Zoom,60,bobj.crv.ZoomControl._zoomChangeCB,null,null,null);var b=["400%","300%","200%","150%","125%","100%","75%","50%","25%"];for(var f=0,a=b.length;f<a;++f){var k=b[f];l.add(k,k,(k==g.initialZoom))}l.text.setValue(g.initialZoom);l.zoomCB=null;l.widgetType="ZoomControl";l.initOld=l.init;l._initZoom=g.initialZoom;m(l,bobj.crv.ZoomControl);return l};bobj.crv.ZoomControl.init=function(){this.initOld();this.setZoom(this._initZoom)};bobj.crv.ZoomControl.setZoom=function(b){var f=parseInt(b,10);if(bobj.isNumber(f)){f+="%";this.valueSelect(f);var a=this.selectedItem;if(a&&a.val!=f){a.check(false);this.selectedItem=null}this._lastValue=f;return true}return false};bobj.crv.ZoomControl._zoomChangeCB=function(){var a=parseInt(this.text.getValue(),10);if(bobj.isNumber(a)){if(a<10){a=10}else{if(a>400){a=400}}}if(!this.setZoom(a)){this.setZoom(this._lastValue)}else{if(this.zoomCB){this.zoomCB(a)}}};bobj.crv.newSelectPageControl=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId()},a);var b=newWidget(a.id);b.curPage=a.curPage;b.numPages=a.numPages;b.margin=1;b.space=0;b.fieldWidth=30;b.labelWidth=13+b.space;b.intField=newIntFieldWidget(b.id+"_intField",null,null,null,function(){if(b.selectPageCB){b.selectPageCB(b.getCurrentPage())}},true,L_bobj_crv_SelectPage,b.fieldWidth);b.label=NewLabelWidget(b.id+"_label"," / "+b.numPages);b.initOld=b.init;b.selectPageCB=null;f(b,bobj.crv.SelectPageControl);b.widgetType="SelectPageControl";return b};bobj.crv.SelectPageControl.update=function(b,a){if(b&&b.cons=="bobj.crv.newSelectPageControl"){this.setCurrentPage(b.args.curPage);this.setNumPages(b.args.numPages)}};bobj.crv.SelectPageControl.getHTML=function(){var b=bobj.html;var a={cursor:"default","padding-left":this.space+"px",width:this.labelWidth+"px"};return b.TABLE({id:this.id,cellspacing:0,cellpadding:0,border:0,style:{margin:this.margin+"px"}},b.TBODY(null,b.TR(null,b.TD(null,this.intField.getHTML()),b.TD({style:a},this.label.getHTML()))))};bobj.crv.SelectPageControl.getCurrentPage=function(){return this.intField.getValue()};bobj.crv.SelectPageControl.setCurrentPage=function(a){this.intField.setValue(a)};bobj.crv.SelectPageControl.getNumPages=function(){var a=this.label.text||"";return a.substring(3)};bobj.crv.SelectPageControl.setNumPages=function(b){this.label.text=" / "+b;var a=getLayer(this.label.id);a.innerHTML=convStr(this.label.text,false)};bobj.crv.SelectPageControl.init=function(){this.initOld();this.intField.init();this.intField.setMin(1);this.intField.setValue(this.curPage);this.label.init()};bobj.crv.newSearchTextControl=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId()},a);var b=newWidget(a.id);bobj.fillIn(b,a);b.textField=newTextFieldWidget(b.id+"_textField",null,null,null,MochiKit.Base.bind(bobj.crv.SearchTextControl._searchTextCB,b),true,L_bobj_crv_SearchText,100);b.searchButton=newIconWidget(b.id+"_button",bobj.crvUri("images/toolbar.gif"),MochiKit.Base.bind(bobj.crv.SearchTextControl._searchTextCB,b),null,L_bobj_crv_SearchText,16,16,3,bobj.crv.toolbarImageY(bobj.crv.searchIconIndex),bobj.crv.toolbarImageY(bobj.crv.searchIconIndex),3);b.initOld=b.init;b.searchTextCB=null;f(b,bobj.crv.SearchTextControl);b.widgetType="SearchTextControl";return b};bobj.crv.SearchTextControl.update=function(b,a){if(b&&b.cons=="bobj.crv.newSearchTextControl"){this.textField.setValue(b.args.searchText)}};bobj.crv.SearchTextControl.init=function(){this.initOld();this.textField.init();this.textField.setValue(this.searchText);this.searchButton.init()};bobj.crv.SearchTextControl.getHTML=function(){var b=bobj.html;var a={cursor:"default","padding-left":this.space+"px",width:this.labelWidth+"px"};return b.TABLE({id:this.id,cellspacing:0,cellpadding:0,border:0,style:{margin:this.margin+"px"}},b.TBODY(null,b.TR(null,b.TD(null,this.textField.getHTML()),b.TD(null,this.searchButton.getHTML()))))};bobj.crv.SearchTextControl._searchTextCB=function(){var a=this.textField.getValue();if((a!==""||this.searchText!=a)&&bobj.isFunction(this.searchTextCB)){this.searchTextCB(a)}};if(typeof(bobj.crv.ToolPanel)=="undefined"){bobj.crv.ToolPanel={}}if(typeof(bobj.crv.GroupTree)=="undefined"){bobj.crv.GroupTree={}}if(typeof(bobj.crv.GroupTreeNode)=="undefined"){bobj.crv.GroupTreeNode={}}bobj.crv.ToolPanelType={None:"None",GroupTree:"GroupTree",ParameterPanel:"ParameterPanel"};bobj.crv.newToolPanel=function(a){a=MochiKit.Base.update({id:bobj.uniqueId()+"_toolPanel",width:"300px",height:"100%",initialViewType:bobj.crv.ToolPanelType.None},a);var b=newWidget(a.id);bobj.fillIn(b,a);b.widgetType="ToolPanel";b._children=[];b._selectedChild=null;b.initOld=b.init;b.resizeOld=b.resize;MochiKit.Base.update(b,bobj.crv.ToolPanel);return b};bobj.crv.ToolPanel.addChild=function(k){if(!k){return}var f=MochiKit.Signal.connect;var b=MochiKit.Base.partial;var g=MochiKit.Signal.signal;var a=bobj.crv.ToolPanelType;if(k.widgetType=="GroupTree"){this._groupTree=k;f(this._groupTree,"grpDrilldown",b(g,this,"grpDrilldown"));f(this._groupTree,"grpNodeRetrieveChildren",b(g,this,"grpNodeRetrieveChildren"));f(this._groupTree,"grpNodeCollapse",b(g,this,"grpNodeCollapse"));f(this._groupTree,"grpNodeExpand",b(g,this,"grpNodeExpand"));if(this.initialViewType==a.GroupTree){this._selectedChild=k}}else{if(k.widgetType=="ParameterPanel"){this._paramPanel=k;if(this.initialViewType==a.ParameterPanel){this._selectedChild=k}}}this._children.push(k)};bobj.crv.ToolPanel.setView=function(b){if(this._selectedChild){bobj.getContainer(this._selectedChild).style.display="none"}var f=bobj.crv.ToolPanelType;if(f.GroupTree==b){this._selectedChild=this._groupTree}else{if(f.ParameterPanel==b){this._selectedChild=this._paramPanel}else{this._selectedChild=null}}var a=bobj.getContainer(this._selectedChild);if(a){a.style.display=""}this._doLayout()};bobj.crv.ToolPanel.getHTML=function(){var l=bobj.html;var q="";var f=this._children;for(var g=0,m=f.length;g<m;++g){var a=f[g];var r=a===this._selectedChild?"":"none";q+=l.DIV({style:{display:r}},a.getHTML())}var b=(bobj.crv.ToolPanelType.None!==this.initialViewType);var n={id:this.id,"class":"palette",style:{position:"absolute",margin:"0",width:this.width,height:this.height,overflow:"hidden",display:b?"":"none"}};var k=l.DIV(n,q);return k+bobj.crv.getInitHTML(this.widx)};bobj.crv.ToolPanel.init=function(){this.initOld();var f=this._children;for(var b=0,a=f.length;b<a;++b){f[b].init()}};bobj.crv.ToolPanel.update=function(g,a){if(g&&g.cons=="bobj.crv.newToolPanel"){for(var b in g.children){var f=g.children[b];if(f){switch(f.cons){case"bobj.crv.newGroupTree":if(this._groupTree&&a.updateGroupTree()){this._groupTree.update(f,a)}break;case"bobj.crv.newParameterPanel":break}}}}};bobj.crv.ToolPanel._doLayout=function(){var a=this.layer.clientWidth;var b=this.layer.clientHeight;if(this._selectedChild){this._selectedChild.setDisplay(true);this._selectedChild.resize(a,b)}};bobj.crv.ToolPanel.resize=function(a,b){bobj.setOuterSize(this.layer,a,b);this._doLayout();MochiKit.Signal.signal(this,"resize",this.layer.offsetWidth,this.layer.offsetHeight)};bobj.crv.ToolPanel.getParameterPanel=function(){return this._paramPanel};bobj.crv.newGroupTree=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId(),visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:null,height:null,fontStyle:null,fontSize:null},icns:bobj.crvUri("images/magnify.gif"),minIcon:bobj.crvUri("images/min.gif"),plusIcon:bobj.crvUri("images/plus.gif")},a);var b=newTreeWidget(a.id+"_tree","100%","100%",a.icns,null,null,null,bobj.crv.GroupTree._expand,bobj.crv.GroupTree._collapse,null,a.minIcon,a.plusIcon);b._children=[];bobj.fillIn(b,a);b.widgetType="GroupTree";b.initOld=b.init;f(b,bobj.crv.GroupTree);return b};bobj.crv.GroupTree.addChild=function(a){var b=MochiKit.Signal.connect;a.expandPath=this._children.length+"";this._children.push(a);a._updateProperty(this.enableDrilldown,this.enableNavigation);this.add(a);a.delayedAddChild(this.enableDrilldown,this.enableNavigation);b(a,"grpDrilldown",MochiKit.Base.partial(MochiKit.Signal.signal,this,"grpDrilldown"));b(a,"grpNodeRetrieveChildren",MochiKit.Base.partial(MochiKit.Signal.signal,this,"grpNodeRetrieveChildren"))};bobj.crv.GroupTree.init=function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);var f=this._children;for(var b=0,a=f.length;b<a;b++){f[b].init()}};bobj.crv.GroupTree.update=function(n,a){if(n&&a){var k=a.groupTreePath();if(k.length>0){var m=k.split("-");var f=n;var l=this;for(var g=0,b=m.length;g<b;g++){if(f&&l){f=f.children[0];l=l._children[parseInt(m[g])]}}if(f&&l&&f.args.groupPath==l.groupPath){if(l._children&&l._children.length==0){this.updateNode(f,l);l.delayedAddChild(n.args.enableDrilldown,n.args.enableNavigation)}l.expand()}}}};bobj.crv.GroupTree.updateNode=function(b,g){if(b&&g){for(var a in b.children){var f=bobj.crv.createWidget(b.children[a]);g.addChild(f)}}};bobj.crv.GroupTree._collapse=function(a){MochiKit.Signal.signal(this,"grpNodeCollapse",a)};bobj.crv.GroupTree._expand=function(a){MochiKit.Signal.signal(this,"grpNodeExpand",a)};bobj.crv.GroupTree.resize=function(b,a){bobj.setOuterSize(this.layer,b,a)};bobj.crv.newGroupTreeNode=function(b){var k=MochiKit.Base.update;b=k({id:bobj.uniqueId()},b);var a=null;var f=-1;if(!b.isVisible){f=0;a=L_bobj_crv_Tree_Drilldown_Node.replace("%1",b.groupName)}var g=newTreeWidgetElem(f,b.groupName,b.groupPath,null,null,null,a);g._children=[];bobj.fillIn(g,b);g.widgetType="GroupTreeNode";g.initOld=g.init;g.selectOld=g.select;g.select=bobj.crv.GroupTreeNode._drilldown;k(g,bobj.crv.GroupTreeNode);return g};bobj.crv.GroupTreeNode.init=function(){this.initOld();this._setVisualStyle();if(this.isStatic){var a=MochiKit.DOM.getElementsByTagAndClassName("span","treeNormal",this.layer);if(a&&a.length>0){a[0].style.cursor="text"}}};bobj.crv.GroupTreeNode.expand=function(){var a=TreeIdToIdx(this.layer);_TreeWidgetElemInstances[a].expanded=false;TreeWidget_toggleCB(a)};bobj.crv.GroupTreeNode.collapse=function(){var a=TreeIdToIdx(this.layer);_TreeWidgetElemInstances[a].expanded=true;TreeWidget_toggleCB(a)};bobj.crv.GroupTreeNode._setVisualStyle=function(){try{var k=this.layer.lastChild;var a=this.treeView}catch(f){return}var b=a.visualStyle;var g=k.style;if(b.fontFamily){g.fontFamily=b.fontFamily}if(b.fontWeight){g.fontWeight=b.fontWeight}if(b.textDecoration){g.textDecoration=b.textDecoration}if(b.color){g.color=b.color}if(b.fontStyle){g.fontStyle=b.fontStyle}if(b.fontSize){g.fontSize=b.fontSize}};bobj.crv.GroupTreeNode.delayedAddChild=function(q,n){var g=MochiKit.Signal.connect;var m=MochiKit.Signal.signal;var b=MochiKit.Base.partial;var k=this._children.length;if(k>0){this.expanded=true}else{this.expanded=false;if(!this.leaf){this.setIncomplete(bobj.crv.GroupTreeNode._getChildren)}}var f=this._children;for(var l=0;l<k;l++){var a=f[l];a.expandPath=this.expandPath+"-"+l;a._updateProperty(q,n);this.add(a);g(a,"grpDrilldown",b(m,this,"grpDrilldown"));g(a,"grpNodeRetrieveChildren",b(m,this,"grpNodeRetrieveChildren"));a.delayedAddChild(q,n)}};bobj.crv.GroupTreeNode.addChild=function(a){this._children.push(a)};bobj.crv.GroupTreeNode._drilldown=function(){this.selectOld();MochiKit.Signal.signal(this,"grpDrilldown",this.groupName,this.groupPath,this.isVisible)};bobj.crv.GroupTreeNode._getChildren=function(){this.plusLyr.src=_skin+"../loading.gif";MochiKit.Signal.signal(this,"grpNodeRetrieveChildren",this.expandPath)};bobj.crv.GroupTreeNode._updateProperty=function(b,f){var a=false;if(this.isVisible&&!f){a=true}else{if(!this.isVisible&&!b){a=true}}if(a){this.select=function(){}}this.isStatic=a};if(typeof(bobj.crv.ReportPage)=="undefined"){bobj.crv.ReportPage={}}bobj.crv.ReportPage.DocumentView={WEB_LAYOUT:"weblayout",PRINT_LAYOUT:"printlayout"};bobj.crv.newReportPage=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),bgColor:"#FFFFFF",width:720,height:984,topMargin:0,rightMargin:0,leftMargin:0,bottomMargin:0,documentView:bobj.crv.ReportPage.DocumentView.PRINT_LAYOUT},a);var b=newWidget(a.id);b.widgetType="ReportPage";bobj.fillIn(b,a);b.initOld=b.init;b.resizeOld=b.resize;MochiKit.Base.update(b,bobj.crv.ReportPage);return b};bobj.crv.ReportPage.setHTML=function(f){var b=this._pageNode;bobj.removeAllChildElements(b);if(bobj.isString(f)){b.innerHTML=f}else{if(bobj.isObject(f)){b.appendChild(f);var a=f.style;a.display="block";a.visibility="visible"}}};bobj.crv.ReportPage.update=function(b,a){if(b&&b.cons=="bobj.crv.newReportPage"){this.updateSize({width:b.args.width,height:b.args.height,leftMargin:b.args.leftMargin,rightMargin:b.args.rightMargin,topMargin:b.args.topMargin,bottomMargin:b.args.bottomMargin});this.updateHTML(b.args.content);this.layer.scrollLeft=0;this.layer.scrollTop=0}};bobj.crv.ReportPage.loadContent=function(){if(this.content){this.updateHTML(this.content)}};bobj.crv.ReportPage.updateHTML=function(r){var a=this.id+"_stylesheet";var x=getLayer(a);var b="";if(r){var g=bobj.html.extractHtml(r);var z=g.links;for(var y=0,s=z.length;y<s;++y){bobj.includeLink(z[y])}var b="";for(var n=0,q=g.styles.length;n<q;n++){b+=g.styles[n].text+"\n"}if(x){MochiKit.DOM.removeElement(x)}bobj.addStyleSheet(b,a);this.setHTML(g.html);var l=g.scripts;for(var f=0,m=l.length;f<m;++f){var v=l[f];if(!v){continue}if(v.text){try{bobj.evalInWindow(v.text)}catch(k){}}}var u=this._pageNode.getElementsByTagName("div");if(u&&u[0]){u[0].style.position="relative";u[0].style.visibility="visible"}}};bobj.crv.ReportPage.updateSize=function(l){if(l){this.width=(l.width!=undefined)?l.width:this.width;this.height=(l.height!=undefined)?l.height:this.height;this.leftMargin=(l.leftMargin!=undefined)?l.leftMargin:this.leftMargin;this.rightMargin=(l.rightMargin!=undefined)?l.rightMargin:this.rightMargin;this.topMargin=(l.topMargin!=undefined)?l.topMargin:this.topMargin;this.bottomMargin=(l.bottomMargin!=undefined)?l.bottomMargin:this.bottomMargin}var g=bobj.isBorderBoxModel();var f=this.height+this.topMargin+this.bottomMargin;var a=this.width+this.leftMargin+this.rightMargin;var k=g?f:this.height;var b=g?a:this.width;if(this._pageCtnNode){this._pageCtnNode.style.width=a+"px";this._pageCtnNode.style.height=f+"px"}if(this._pageNode){this._pageNode.style.width=b+"px";this._pageNode.style.height=k+"px";this._pageNode.style.paddingTop=this.topMargin+"px";this._pageNode.style.paddingRight=this.rightMargin+"px";this._pageNode.style.paddingLeft=this.leftMargin+"px";this._pageNode.style.paddingBottom=this.bottomMargin+"px"}if(this._shadowNode){this._shadowNode.style.width=a+"px";this._shadowNode.style.height=f+"px"}};bobj.crv.ReportPage.getHTML=function(){var r=bobj.html;var f=bobj.isBorderBoxModel();var g={width:"100%",height:"100%",overflow:"auto",position:"absolute"};var m=this.height+this.topMargin+this.bottomMargin;var n=this.width+this.leftMargin+this.rightMargin;var u=f?m:this.height;var b=f?n:this.width;var a={left:"4px",width:n+"px",height:m+"px","text-align":"left",top:"4px",overflow:"visible",position:"relative"};if(_saf){a.display="table"}var s={position:"relative",width:b+"px",height:u+"px","z-index":1,"border-width":"1px","border-style":"solid","background-color":this.bgColor,"padding-top":this.topMargin+"px","padding-right":this.rightMargin+"px","padding-left":this.leftMargin+"px","padding-bottom":this.bottomMargin+"px"};var l={position:"absolute",filter:"progid:DXImageTransform.Microsoft.Blur(PixelRadius='2', MakeShadow='false', ShadowOpacity='0.75')","z-index":0,width:n+"px",height:m+"px",margin:"0 auto",left:(f?2:6)+"px",top:(f?2:6)+"px"};var k="";if(this.documentView.toLowerCase()==bobj.crv.ReportPage.DocumentView.PRINT_LAYOUT){g["background-color"]="#8E8E8E";s["border-color"]="#000000";l["background-color"]="#737373";k=r.DIV({id:this.id+"_shadow","class":"menuShadow",style:l});g["text-align"]="center";a.margin="0 auto"}else{g["background-color"]="#FFFFFF";s["border-color"]="#FFFFFF";a.margin="0"}var q=r.DIV({id:this.id,style:g,"class":"insetBorder"},r.DIV({id:this.id+"_pageCtn",style:a},r.DIV({id:this.id+"_page",style:s}),k));return q+bobj.crv.getInitHTML(this.widx)};bobj.crv.ReportPage.init=function(){this._pageCtnNode=getLayer(this.id+"_pageCtn");this._pageNode=getLayer(this.id+"_page");this._shadowNode=getLayer(this.id+"_shadow");this.initOld()};bobj.crv.ReportPage.resize=function(a,b){bobj.setOuterSize(this.layer,a,b);if(_moz){this.css.clip=bobj.getRect(0,a,b,0)}};bobj.crv.ReportPage.getBestFitSize=function(){var a=this._pageNode;return{width:a.offsetWidth+30,height:a.offsetHeight+30}};if(typeof(bobj.crv.ReportView)=="undefined"){bobj.crv.ReportView={}}bobj.crv.newReportView=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),viewStateId:null,isMainReport:false},a);var b=newWidget(a.id);bobj.fillIn(b,a);b.widgetType="ReportView";b.toolPanel=null;b.reportPage=null;b.grabber=null;b._lastPanelWidth=null;b.initOld=b.init;b.isMainReportFlag=b.isMainReport;b.setDisplayOld=b.setDisplay;MochiKit.Base.update(b,bobj.crv.ReportView);return b};bobj.crv.ReportView.init=function(){var b=MochiKit.Signal.connect;var f=MochiKit.Signal.signal;var a=MochiKit.Base.partial;this.initOld();if(this.toolPanel){b(this.toolPanel,"grpDrilldown",a(f,this,"grpDrilldown"));b(this.toolPanel,"grpNodeRetrieveChildren",a(f,this,"grpNodeRetrieveChildren"));b(this.toolPanel,"grpNodeCollapse",a(f,this,"grpNodeCollapse"));b(this.toolPanel,"grpNodeExpand",a(f,this,"grpNodeExpand"));b(this.toolPanel,"paramAdvanced",a(f,this,"paramAdvanced"));b(this.toolPanel,"paramApply",a(f,this,"paramApply"))}if(this.grabber){this.grabber.init();if(!this.toolPanel.isDisplayed()){this.grabber.setDisplay(false)}}};bobj.crv.ReportView.addChild=function(b){var f=MochiKit.Base;var a=MochiKit.Signal;if(b.widgetType=="ToolPanel"){this.toolPanel=b;a.connect(this.toolPanel,"resize",f.partial(a.signal,this,"resizeToolPanel"))}else{if(b.widgetType=="ReportPage"){this.reportPage=b}}};bobj.crv.ReportView.update=function(g,a){if(g&&g.cons=="bobj.crv.newReportView"){for(var b in g.children){var f=g.children[b];if(f){switch(f.cons){case"bobj.crv.newToolPanel":if(this.toolPanel&&a.updateToolPanel()){this.toolPanel.update(f,a)}break;case"bobj.crv.newReportPage":if(this.reportPage&&a.updateReportPage()){this.reportPage.update(f,a)}break}}}}};bobj.crv.ReportView.getHTML=function(){var b=bobj.html;if(this.toolPanel&&this.reportPage){this.grabber=newGrabberWidget(this.id+"_grabber",MochiKit.Base.bind(bobj.crv.ReportView._grabberCB,this),0,0,4,1,true)}var f={width:"100%",height:"100%",overflow:"hidden",position:"relative"};var a=b.DIV({id:this.id,style:f},this.toolPanel?this.toolPanel.getHTML():"",this.grabber?this.grabber.getHTML():"",this.reportPage?this.reportPage.getHTML():"");return a+bobj.crv.getInitHTML(this.widx)};bobj.crv.ReportView._doLayout=function(){if(!this.isDisplayed()){return}var b=this.toolPanel&&this.toolPanel.isDisplayed()?this.toolPanel.getWidth():0;var f=this.grabber&&this.grabber.isDisplayed()?this.grabber.getWidth():0;var a=this.getHeight();if(this.reportPage){this.reportPage.resize(this.getWidth()-b-f,a);this.reportPage.move(b+f,0)}if(this.grabber&&this.grabber.isDisplayed()){this.grabber.resize(null,a);this.grabber.move(b,0)}if(this.toolPanel&&this.toolPanel.isDisplayed()){this.toolPanel.resize(null,a)}};bobj.crv.ReportView.isMainReport=function(){return this.isMainReportFlag};bobj.crv.ReportView._grabberCB=function(a,b){this.toolPanel.resize(a);this._doLayout()};bobj.crv.ReportView.setDisplay=function(a){this.setDisplayOld(a);if(a){this._doLayout()}};bobj.crv.ReportView.resize=function(){this._doLayout()};bobj.crv.ReportView.getBestFitSize=function(){var b=0;var f=0;var a=this.reportPage?this.reportPage.getBestFitSize():null;if(a){b+=a.width;f+=a.height}else{if(this.toolPanel){f+=this.toolPanel.getHeight()}}if(this.toolPanel){b+=this.toolPanel.getWidth()}if(this.grabber){b+=this.grabber.getWidth()}return{width:b,height:f}};bobj.crv.ReportView.setDisplayToolPanel=function(a){if(this.toolPanel){this.toolPanel.setDisplay(a);if(this.grabber){this.grabber.setDisplay(a)}this._doLayout();MochiKit.Signal.signal(this,a?"showToolPanel":"hideToolPanel")}};bobj.crv.ReportView.hasContent=function(){return this.toolPanel||this.reportPage};function GrabberWidget_getHTML(){var b=this;var a=b.isHori?_resizeW:_resizeH;var g='onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+".GrabberWidget_down(event,'"+b.index+"',this);return false;\"";var f=_ie?('<img onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" src="'+_skin+'../transp.gif" id="modal_'+b.id+'" style="z-index:10000;display:none;position:absolute;top:0px;left:0px;width:1px;height:1px;cursor:'+a+'">'):('<div onselectstart="return false" ondragstart="return false" onmousedown="'+_codeWinName+'.eventCancelBubble(event)" border="0" hspace="0" vspace="0" id="modal_'+b.id+'" style="z-index:10000;display:none;position:absolute;top:0px;left:0px;width:1px;height:1px;cursor:'+a+'"></div>');return getBGIframe("grabIframe_"+b.id)+f+'<table cellpadding="0" cellspacing="0" border="0" '+g+' id="'+b.id+'" style="overflow:hidden;position:absolute;left:'+b.x+"px;top:"+b.y+"px;width:"+b.w+"px;height:"+b.h+"px;cursor:"+a+'"><tr><td></td></tr></table>'}if(typeof(bobj.crv.ReportAlbum)=="undefined"){bobj.crv.ReportAlbum={}}if(typeof(bobj.crv.Tab)=="undefined"){bobj.crv.Tab={}}if(typeof(bobj.crv.TabBar)=="undefined"){bobj.crv.TabBar={}}if(typeof(bobj.crv.ButtonList)=="undefined"){bobj.crv.ButtonList={}}bobj.crv.newReportAlbum=function(f){var l=MochiKit.Base;var k=l.update;var b=l.bind;var a=bobj.crv.ReportAlbum;f=k({id:bobj.uniqueId(),initTabIdx:0,width:800,height:500,displayDrilldownTab:true},f);var g=newTabbedZone(f.id,null,f.width,f.height);g.tabs=bobj.crv.newTabBar({displayDrilldownTab:f.displayDrilldownTab});g.tabs.removeCB=b(a._onCloseTab,g);g.tabs.selectCB=b(a._onSelectTab,g);bobj.fillIn(g,f);g.widgetType="ReportAlbum";g._children=[];g._curView=null;g._curSigs=[];g.selectOld=g.select;k(g,a);return g};bobj.crv.ReportAlbum.init=function(){var b=MochiKit.Signal.connect;var f=MochiKit.Signal.signal;var a=MochiKit.Base.partial;this.tzOldInit();this.tabs.init();if(this._children.length){if(this.initTabIdx<0||this.initTabIdx>=this._children.length){this.initTabIdx=0}this.select(this.initTabIdx);b(this._curView,"grpDrilldown",a(f,this,"grpDrilldown"));b(this._curView,"grpNodeRetrieveChildren",a(f,this,"grpNodeRetrieveChildren"));b(this._curView,"grpNodeCollapse",a(f,this,"grpNodeCollapse"));b(this._curView,"grpNodeExpand",a(f,this,"grpNodeExpand"));b(this._curView,"paramAdvanced",a(f,this,"paramAdvanced"));b(this._curView,"paramApply",a(f,this,"paramApply"))}};bobj.crv.ReportAlbum.update=function(f,a){if(f&&f.cons=="bobj.crv.newReportAlbum"&&this.getSelectedView()){var b=f.children[f.args.initTabIdx];if(b){if(b.args.viewStateId==this.getSelectedView().viewStateId){this.getSelectedView().update(b,a)}}}};bobj.crv.ReportAlbum.addChild=function(a){if(a){this._children.push(a);this.add(a.label,a.tooltip)}};bobj.crv.ReportAlbum.getHTML=function(){var g=this.beginHTML();var f=this._children;for(var b=0,a=f.length;b<a;++b){g+=this.beginTabHTML(b);g+=f[b].getHTML();g+=this.endTabHTML()}g+=this.endHTML();return g+bobj.crv.getInitHTML(this.widx)};bobj.crv.ReportAlbum.resizeOuter=function(a,f){var b=bobj.isNumber;if(b(a)){a=Math.max(0,a-10)}if(b(f)){f=Math.max(0,f-33)}this.resize(a,f);this.tabs.resize(a);if(this._curView){this._curView.resize()}};bobj.crv.ReportAlbum.getBestFitSize=function(){var a=10;var b=33;if(this._curView){var f=this._curView.getBestFitSize();a+=f.width;b+=f.height}return{width:a,height:b}};bobj.crv.ReportAlbum.beginTabHTML=function(a){return bobj.html.openTag("div",{id:"tzone_tab_"+a+"_"+this.id,style:{display:"none",width:this.w+"px",height:this.h+"px",position:"relative"}})};bobj.crv.ReportAlbum.getSelectedView=function(){return this._curView};bobj.crv.ReportAlbum.isToolPanelDisplayed=function(){return this._curView&&this._curView.toolPanel&&this._curView.toolPanel.isDisplayed()};bobj.crv.ReportAlbum.setDisplayToolPanel=function(a){if(this._curView){this._curView.setDisplayToolPanel(a)}};bobj.crv.ReportAlbum.select=function(f){var b=MochiKit.Signal;var g=b.disconnect;var m=b.connect;var l=b.signal;if(f>=0&&f<this._children.length){var k=this._curSigs;while(k.length){g(k.pop())}this._curView=this._children[f];var a=this;k.push(m(this._curView,"hideToolPanel",function(){l(a,"hideToolPanel")}));k.push(m(this._curView,"resizeToolPanel",function(n){l(a,"resizeToolPanel",n)}));this.selectOld(f)}};bobj.crv.ReportAlbum.remove=function(a){var f=this.zoneLayers[a];if(f&&f.parentNode){f.parentNode.removeChild(f)}arrayRemove(this,"zoneLayers",a);arrayRemove(this,"_children",a);var b=this.tabs.getSelection();if(b>=0){this.select(b)}};bobj.crv.ReportAlbum._onCloseTab=function(f,b){var g=MochiKit.Signal.signal;var a=this._children[b];this.remove(b);g(this,"removeView",a);g(this,"selectView",this._curView)};bobj.crv.ReportAlbum._onSelectTab=function(b,a){this.select(a);MochiKit.Signal.signal(this,"selectView",this._curView)};bobj.crv.newTab=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId(),hasCloseBtn:true,closeCB:null,tabWidth:50},a);a.isTop=true;var b=newTabWidget(a.id,a.isTop,a.label,a.clickCB,a.value,a.icon,a.iconW,a.iconH,a.iconOffX,a.iconOffY,a.dblClickCB,a.alt);b._crvTabOldInit=b.init;b._closeBtn=null;bobj.fillIn(b,a);f(b,bobj.crv.Tab);return b};bobj.crv.Tab._imageOffsets={closeBtn:{normal:{x:0,y:18,w:18,h:18},mouseOver:{x:0,y:0,w:18,h:18}},tab:{top:{selected:{left:{x:0,y:0,w:15,h:24},middle:{x:0,y:24},right:{normal:{x:0,y:48,w:15,h:24},narrow:{x:10,y:48,w:5,h:24}}},unselected:{left:{x:0,y:72,w:15,h:24},middle:{x:0,y:96},right:{normal:{x:0,y:120,w:15,h:24},narrow:{x:10,y:120,w:5,h:24}}}}}};bobj.crv.Tab.init=function(){var f=MochiKit.Base.bind;var a=bobj.crv.Tab;this._crvTabOldInit();var b=getLayer("tabWidgetCloseBtn_"+this.id);if(b){b.onmouseover=f(a._onCloseBtnMouseOver,this);b.onmouseout=f(a._onCloseBtnMouseOut,this);b.parentNode.onclick=f(a._onCloseBtnClick,this)}this._closeBtn=b};bobj.crv.Tab._onCloseBtnMouseOver=function(){var a=this._imageOffsets.closeBtn.mouseOver;changeOffset(this._closeBtn,a.x,a.y)};bobj.crv.Tab._onCloseBtnMouseOut=function(){var a=this._imageOffsets.closeBtn.normal;changeOffset(this._closeBtn,a.x,a.y)};bobj.crv.Tab._onCloseBtnClick=function(){if(this.closeCB){this.closeCB()}};bobj.crv.Tab.getHTML=function(){var v=this;var n=MochiKit.Base.update;var A=bobj.html;var E=this._imageOffsets;var f="thumbtxt"+(v.isSelected?"sel":"");var u=_codeWinName+".TabWidget_clickCB('"+v.id+"');return false";var x=_codeWinName+".TabWidget_dblclickCB('"+v.id+"');return false";var s=_codeWinName+".TabWidget_keyDownCB('"+v.id+"',event);";var b=_codeWinName+".TabWidget_contextMenuCB('"+v.id+"',event);return false";var C=v.icon?v.icon:_skin+"../transp.gif";var g=v.icon?3:0;var D=E.tab[this.isTop?"top":"bottom"];D=D[this.selected?"selected":"unselected"];var m=D.left;var k=D.right[this.hasCloseBtn?"narrow":"normal"];var r=D.middle;var l=E.closeBtn.normal;var B={onmouseover:"return true;",onclick:u,id:this.id,ondblclick:x,onkeydown:s,oncontextmenu:b,style:{cursor:_hand},cellspacing:"0",cellpadding:"0",border:"0"};var z={"background-image":"url('"+_skin+"tabs.gif')","background-position":(-r.x)+"px "+(-r.y)+"px"};if(this.isTop){z["padding-top"]="1px"}else{z["padding-bottom"]="3px"}var a=n({"padding-right:":g+"px",width:(this.iconW+g),align:"left"},z);if(this.isTop){a["padding-top"]="1px"}else{a["padding-bottom"]="2px"}var y=n({display:this.hasCloseBtn?"":"none"},z);var q=A.TABLE(B,A.TBODY(null,A.TR({valign:"middle",height:m.h},A.TD({width:m.w},imgOffset(_skin+"tabs.gif",m.w,m.h,m.x,m.y,"tabWidgetLeft_"+v.id)),A.TD({id:"tabWidgetImg_"+v.id,style:a},imgOffset(C,v.iconW,v.iconH,v.iconOffX,v.iconOffY,"tabWidgetIcon_"+v.id,null,v.iconAlt)),A.TD({width:v.tabWidth,id:"tabWidgetMid_"+this.id,style:z},A.SPAN({style:{"white-space":"nowrap"}},lnk(convStr(v.name,true),null,f,"tabWidgetLnk_"+v.id))),A.TD({width:l.w,id:"tabWidgetClose_"+v.id,style:y},A.A({href:"javascript:void(0)",title:L_bobj_crv_Close},imgOffset(_skin+"dialogelements.gif",l.w,l.h,l.x,l.y,"tabWidgetCloseBtn_"+v.id))),A.TD({width:k.w},imgOffset(_skin+"tabs.gif",k.w,k.h,k.x,k.y,"tabWidgetRight_"+v.id)))));return q};bobj.crv.Tab.changeContent=function(k){var b=this;if(!b.lnkLayer){b.lnkLayer=getLayer("tabWidgetLnk_"+b.id);b.leftImgLayer=getLayer("tabWidgetLeft_"+b.id);b.rightImgLayer=getLayer("tabWidgetRight_"+b.id);b.midImgLayer=getLayer("tabWidgetMid_"+b.id);b.imgImgLayer=getLayer("tabWidgetImg_"+b.id);b.closeImgLayer=getLayer("tabWidgetClose_"+b.id);b.iconLayer=getLayer("tabWidgetIcon_"+b.id)}if(!k){b.lnkLayer.innerHTML=convStr(b.name,true);var r=b.iconLayer;changeOffset(r,b.iconOffX,b.iconOffY,b.icon?b.icon:_skin+"../transp.gif");r.alt=b.iconAlt;r.style.width=""+b.iconW+"px";r.style.height=""+b.iconH+"px";var m=b.icon?3:0;var f=b.imgImgLayer;f.style.paddingRight=""+m+"px";f.style.width=""+(m+((b.icon&&bobj.isNumber(b.iconW))?b.iconW:0))+"px";if(_moz&&!_saf){f.width=(m+((b.icon&&bobj.isNumber(b.iconW))?b.iconW:0))}}var g=this._imageOffsets;var q=g.tab[this.isTop?"top":"bottom"];q=q[this.isSelected?"selected":"unselected"];var a=q.left;var l=q.right[this.hasCloseBtn?"narrow":"normal"];var n=q.middle;changeOffset(b.leftImgLayer,a.x,a.y);changeOffset(b.midImgLayer,n.x,n.y);changeOffset(b.closeImgLayer,n.x,n.y);changeOffset(b.imgImgLayer,n.x,n.y);changeOffset(b.rightImgLayer,l.x,l.y);b.lnkLayer.className="thumbtxt"+(b.isSelected?"sel":"")};bobj.crv.newTabBar=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId(),removeCB:null,selectCB:null,displayDrilldownTab:true},a);a.isTop=true;var b=newWidget(a.id);bobj.fillIn(b,a);b.widgetType="TabBar";b._tabs=[];b._tabRowLayer=null;b._tabBarLayer=null;b._selIndex=0;b._tabBarOldInit=b.init;b._tabBarOldResize=b.resize;b._selTabXOffset=0;b._menuBtnWidth=24;var g=MochiKit.Base.bind;b._tabMenuBtn=bobj.crv.newButtonList({id:b.id+"_sel",buttonWidth:b._menuBtnWidth,changeCB:g(bobj.crv.TabBar._onMenuChange,b)});f(b,bobj.crv.TabBar);return b};bobj.crv.TabBar.init=function(){this._tabBarOldInit();if(this._tabMenuBtn){this._tabMenuBtn.init()}if(this.displayDrilldownTab===false){this.hide()}this._tabRowLayer=getLayer(this.id+"_tabRow");this._tabBarLayer=getLayer(this.id+"_tabBar");this._tabCtnLayer=this._tabBarLayer.parentNode;this._tabSelLayer=getLayer(this.id+"_tabSel");for(var a=0;a<this._tabs.length;++a){var b=this._tabs[a];b.init();b.select(a==this._selIndex)}setTimeout(MochiKit.Base.bind(this._setMenuVis,this),0)};bobj.crv.TabBar.add=function(n,r,s,l,a,q,k,g,f,m){var b={label:n,value:r,idx:s,icon:l,iconW:a,iconH:q,iconOffX:k,iconOffY:g,alt:f,isTop:this.isTop};if(bobj.isBoolean(m)){b.hasCloseBtn=m}else{b.hasCloseBtn=(this._tabs.length?true:false)}return this.kwAdd(b)};bobj.crv.TabBar.kwAdd=function(a){var f=MochiKit.Base.bind;a.id=bobj.uniqueId();var b=bobj.crv.newTab(a);b.cb=f(this._onTabClick,this,b);b.closeCB=f(this._onTabCloseBtnClick,this,b);this._tabs.push(b);this._tabMenuBtn.add(a.label);return b};bobj.crv.TabBar.remove=function(k){var n=this;var g=n._tabs;var b=g.length;var a=bobj.isNumber(k)?k:this.getIndex(k);if(a>=0&&a<b){var m=g[a];var f=m.layer;arrayRemove(n,"_tabs",a);n._tabMenuBtn.getMenu().del(a);g=n._tabs;b=g.length;if(f){f.parentNode.style.display="none"}n._setMenuVis();if(n._selIndex>a){n.select(n._selIndex-1)}else{if(n._selIndex==a&&b>0){n.select(Math.min(a,b-1))}else{n.select(n._selIndex)}}}};bobj.crv.TabBar.hide=function(){try{var b=this.layer.parentNode;var a=b.parentNode;a.style.display="none"}catch(f){if(bobj.crv.config.isDebug){throw f}}};bobj.crv.TabBar.getIndex=function(a){return MochiKit.Base.findIdentical(this._tabs,a)};bobj.crv.TabBar.getSelection=function(){return this._selIndex};bobj.crv.TabBar.getCount=function(){return this._tabs.length};bobj.crv.TabBar.getTabAt=function(a){return this._tabs[a]};bobj.crv.TabBar.select=function(f){if(!bobj.isNumber(f)){f=this.getIndex(f)}if(bobj.isNumber(f)){var b=f;var a=this._tabs.length;if(b==-1){if(this._selIndex>=0&&this._selIndex<a){return}b=0}if(b>=0&&b<a){if(this._selIndex>=0&&this._selIndex!=b&&this._selIndex<a){this._tabs[this._selIndex].select(false)}this._selIndex=b;this._tabs[b].select(true);if(this._tabMenuBtn){this._tabMenuBtn.getMenu().select(b)}this.scroll(null,this._selIndex)}}};bobj.crv.TabBar.resize=function(a,b){this._tabBarOldResize(a,b);if(bobj.isNumber(a)&&this._tabBarLayer){this._tabCtnLayer.style.width=Math.max(0,a)+"px";this._setMenuVis();this.scroll(this._selIndex)}};bobj.crv.TabBar._setMenuVis=function(){var b=this._tabBarLayer;var a=this._tabCtnLayer;var f=this._tabSelLayer;if(b&&a&&f){if(a.offsetWidth<b.offsetWidth){f.style.display=""}else{f.style.display="none"}}};bobj.crv.TabBar.scroll=function(f,q){if(!this._tabBarLayer){return}q=bobj.isNumber(q)?q:-1;if(bobj.isString(f)){if(f=="first"){q=0}else{if(f=="previous"){q=this._selIndex-1}else{if(f=="next"){q=this._selIndex+1}else{if(f=="last"){q=this.getCount()-1}}}}}else{if(bobj.isNumber(f)){q=f}else{if(f){q=this.getIndex(f)}}}if(q>=0&&q<this.getCount()){var m=this._tabBarLayer;var g=m.parentNode;var s=m.style;var b=parseInt(s.left,10)||0;var k=b+m.offsetWidth;var r=this._getItemXPos(q)+b;var l=r+this.getTabAt(q).getWidth();var a=g.offsetWidth-this._tabMenuBtn.getWidth();var n=0;if(r<0){n=(-1*r)}else{if(l>a){n=-(l-a)}else{if(k<a&&b<0){n=Math.min(a-k,-b)}}}if(n){s.left=(b+n)+"px"}}};bobj.crv.TabBar.getHTML=function(){var k=bobj.html;var n=24;var b={height:n+"px",overflow:"hidden",width:"100%",position:"relative"};var g={position:"relative"};var m={width:this._menuBtnWidth+"px",height:n+"px",display:"none",position:"absolute",top:"0px",right:"0px","padding-top":"3px"};var a="";for(var f=0;f<this._tabs.length;++f){a+=k.TD(null,this._tabs[f].getHTML())}var l=k.DIV({id:this.id,style:b},k.TABLE({cellspacing:"0",cellpadding:"0",border:"0",style:{width:"100%"}},k.TBODY(null,k.TR({valign:"bottom",height:n},k.TD(null,k.DIV({style:{overflow:"hidden",position:"relative"}},k.TABLE({id:this.id+"_tabBar",style:g,cellspacing:"0",cellpadding:"0",border:"0"},k.TBODY(null,k.TR({id:this.id+"_tabRow"},a)))))))),k.DIV({id:this.id+"_tabSel","class":"panelzone",style:m},this._tabMenuBtn.getHTML()));return l};bobj.crv.TabBar._onTabClick=function(b){var a=this.getIndex(b);if(a<0){return}this.select(a);if(this.selectCB){this.selectCB(b,a)}};bobj.crv.TabBar._onTabCloseBtnClick=function(b){var a=this.getIndex(b);this.remove(a);if(this.removeCB){this.removeCB(b,a)}};bobj.crv.TabBar._onMenuChange=function(){var b=this._tabMenuBtn.getMenu();if(b){var a=b.getSelection();if(a){this.select(a.index);if(this.selectCB){this.selectCB(this.getTabAt(a.index),a.index)}}}};bobj.crv.TabBar._getItemXPos=function(b){var a=0;for(var f=0;f<b;f++){a+=parseInt(this._tabs[f].getWidth(),10)}return a};bobj.crv.newButtonList=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),numLines:null,buttonWidth:24,buttonTooltip:L_bobj_crv_TabList,changeCB:null,label:null,tabIndex:0,multiSelect:false,menuWidth:null,menuTooltip:null},a);var b=newButtonWidget(a.id,a.label,bobj.crv.ButtonList._onClick,a.buttonWidth,null,a.buttonTooltip,a.tabIndex,0,_skin+"menus.gif",7,16,0,81,true,0,97);b._menu=newListWidget(a.id+"_menu",MochiKit.Base.bind(bobj.crv.ButtonList._onChange,b),a.multiSelect,a.menuWidth,a.numLines||2,a.menuTooltip,null,null);b._listItems=[];b._blOldInit=b.init;b._blOldGetHTML=b.getHTML;b._menuDiv=null;b._captureClicks=MenuWidget_captureClicks;b._releaseClicks=MenuWidget_releaseClicks;bobj.fillIn(b,a);b.widgetType="ButtonList";MochiKit.Base.update(b,bobj.crv.ButtonList);return b};bobj.crv.ButtonList.getMenu=function(){return this._menu};bobj.crv.ButtonList.add=function(b,f,a,g){if(this._menu&&this._menu.layer){this._menu.add(b,f,a,g)}else{this._listItems.push({lbl:b,val:f,sel:a,id:g})}};bobj.crv.ButtonList.init=function(){var k=this._menu;this._blOldInit();k.init();this._menuDiv=getLayer(this.id+"_menuDiv");var g=this._listItems;for(var b=0,a=g.length;b<a;++b){var f=g[b];k.add(f.lbl,f.val,f.sel,f.id)}this._listItems=[]};bobj.crv.ButtonList.getHTML=function(){var a=bobj.html;var b={id:this.id+"_menuDiv",onmousedown:"event.cancelBubble=true","class":"menuFrame",style:{visibility:"hidden",position:"absolute","z-index":5000}};return this._blOldGetHTML()+a.DIV(b,this._menu.getHTML())};bobj.crv.ButtonList.isMenuShowing=function(){return this._menuDiv&&this._menuDiv.style.visibility!="hidden"};bobj.crv.ButtonList.hideMenu=function(){if(this._menuDiv){this._menuDiv.style.visibility="hidden"}};bobj.crv.ButtonList.showMenu=function(){if(this._menuDiv){this._captureClicks();var n=document.body;if(this._menuDiv.parentNode!==n){n.appendChild(this._menuDiv)}var b=this._menuDiv.style;b.left="-1000px";b.top="-1000px";b.visibility="visible";var f=MochiKit.Style.getViewportDimensions();var u=this._menu.layer.offsetWidth;var m=this._menu.getHeight();if(!this.numLines){m=Math.min(this._menu.layer.scrollHeight+10,f.h-10);this._menu.resize(null,m)}var a=getPosScrolled(this.layer);var s=a.x;var r=a.y+this.getHeight();var k=s+u+4;var q=r+m+4;var l=f.w+n.scrollLeft-Math.max(0,(f.w-n.offsetWidth));if(k>l){s=Math.max(0,s-(k-l))}var g=f.h+n.scrollTop;if(q>g){r=Math.max(0,r-(q-g))}b.left=s+"px";b.top=r+"px"}};bobj.crv.ButtonList._captureClicks=function(){var b=MochiKit.Base.bind;try{this.layer.onmousedown=b(this._onCaptureClick,this,true);this._oldMousedown=document.onmousedown;document.onmousedown=b(this._onCaptureClick,this,false)}catch(a){if(bobj.crv.config.isDebug){throw a}}};bobj.crv.ButtonList._releaseClicks=function(){if(this.layer.onmousedown){this.layer.onmousedown=null;document.onmousedown=this._oldMousedown}};bobj.crv.ButtonList._onClick=function(){if(!this._cancelNextClick){this.showMenu()}this._cancelNextClick=false};bobj.crv.ButtonList._onChange=function(){this._releaseClicks();this.hideMenu();if(this.changeCB){this.changeCB()}};bobj.crv.ButtonList._onCaptureClick=function(a,b){this._cancelNextClick=a;eventCancelBubble(b);this.hideMenu();this._releaseClicks()};if(typeof(bobj.crv.Separator)=="undefined"){bobj.crv.Separator={}}bobj.crv.newSeparator=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId(),marginLeft:4,marginRight:4,marginTop:0,marginBottom:2},a);var b=newWidget(a.id);bobj.fillIn(b,a);b.widgetType="Separator";f(b,bobj.crv.Separator);return b};bobj.crv.Separator.getHTML=function(){var b=bobj.html;var a="";if(bobj.isBorderBoxModel()){a=b.IMG({id:this.id,src:bobj.skinUri("sep.gif"),style:{height:2+"px",width:"100%","margin-left":this.marginLeft+"px","margin-right":this.marginRight+"px","margin-top":this.marginTop+"px","margin-bottom":this.marginBottom+"px"}})}else{a=b.DIV({id:this.id,style:{height:2+"px","margin-left":this.marginLeft+"px","margin-right":this.marginRight+"px","margin-top":this.marginTop+"px","margin-bottom":this.marginBottom+"px","background-image":"url("+bobj.skinUri("sep.gif")+")","background-repeat":"repeat-x",overflow:"hidden"}})}return a+bobj.crv.getInitHTML(this.widx)};bobj.crv.Separator.getHeight=function(){return this.layer.offsetHeight+this.marginTop+this.marginBottom};if(typeof(bobj.crv.Viewer)=="undefined"){bobj.crv.Viewer={}}bobj.crv.Viewer.LayoutTypes={FIXED:"fixed",CLIENT:"client",FITREPORT:"fitreport"};bobj.crv.Viewer.PromptingTypes={HTML:"html",FLEX:"flex"};bobj.crv.newViewer=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),promptingType:bobj.crv.Viewer.LayoutTypes.HTML,layoutType:bobj.crv.Viewer.LayoutTypes.FIXED,visualStyle:{className:null,backgroundColor:null,borderWidth:null,borderStyle:null,borderColor:null,fontFamily:null,fontWeight:null,textDecoration:null,color:null,width:"800px",height:"600px",fontStyle:null,fontSize:null,top:"0px",left:"0px"}},a);var b=newWidget(a.id);bobj.fillIn(b,a);b.widgetType="Viewer";b._topToolbar=null;b._botToolbar=null;b._reportAlbum=null;b._separator=null;b._print=null;b._export=null;b._promptDlg=null;b._reportProcessing=null;b._eventListeners=[];b.initOld=b.init;b.boundaryControl=new bobj.crv.BoundaryControl(a.id+"_bc");MochiKit.Base.update(b,bobj.crv.Viewer);return b};bobj.crv.Viewer.addChild=function(a){if(a.widgetType=="ReportAlbum"){this._reportAlbum=a}else{if(a.widgetType=="Toolbar"){if(a.layoutAlign=="bottom"){this._botToolbar=a}else{this._topToolbar=a;this._separator=bobj.crv.newSeparator()}}else{if(a.widgetType=="PrintUI"){this._print=a}else{if(a.widgetType=="ExportUI"){this._export=a}else{if(a.widgetType=="ReportProcessingUI"){this._reportProcessing=a}}}}}};bobj.crv.Viewer.removeFlashActivations=function(){if(_ie&&this.layer&&this.layer.getElementsByTagName){var g=this.layer.getElementsByTagName("object");for(var a=0;a<g.length;a++){var f=g[a];var l=f.cloneNode(true);var k=f.parentNode;var b=f.nextSibling;if(k&&l){k.removeChild(f);k.insertBefore(l,b);l.outerHTML=l.outerHTML}}}};bobj.crv.Viewer.getHTML=function(){var b=bobj.html;var f={overflow:"hidden",position:"relative",left:this.visualStyle.left,top:this.visualStyle.top};var a=b.DIV({dir:"ltr",id:this.id,style:f,"class":"dialogzone"},this._topToolbar?this._topToolbar.getHTML():"",this._separator?this._separator.getHTML():"",this._reportAlbum?this._reportAlbum.getHTML():"",this._botToolbar?this._botToolbar.getHTML():"");return a+bobj.crv.getInitHTML(this.widx)};bobj.crv.Viewer._onWindowResize=function(){if(this._currWinSize.w!=winWidth()||this._currWinSize.h!=winHeight()){this._doLayout();this._currWinSize.w=winWidth();this._currWinSize.h=winHeight()}};bobj.crv.Viewer.init=function(){this.initOld();bobj.setVisualStyle(this.layer,this.visualStyle);this._currWinSize={w:winWidth(),h:winHeight()};var f=MochiKit.Signal.connect;var g=MochiKit.Signal.signal;var b=MochiKit.Base.partial;if(this.layoutType.toLowerCase()==bobj.crv.Viewer.LayoutTypes.CLIENT){f(window,"onresize",this,"_onWindowResize")}if(this.layer&&_ie&&bobj.checkParent(this.layer,"TABLE")){f(window,"onload",this,"_doLayoutOnLoad");this._oldCssVisibility=this.css.visibility;this.css.visibility="hidden"}else{this._doLayout()}if(this._topToolbar){f(this._topToolbar,"showGroupTree",this,"_onShowGroupTreeClick");f(this._topToolbar,"showParamPanel",this,"_onShowParamPanelClick");f(this._topToolbar,"zoom",b(g,this,"zoom"));f(this._topToolbar,"drillUp",b(g,this,"drillUp"));f(this._topToolbar,"firstPage",b(g,this,"firstPage"));f(this._topToolbar,"prevPage",b(g,this,"prevPage"));f(this._topToolbar,"nextPage",b(g,this,"nextPage"));f(this._topToolbar,"lastPage",b(g,this,"lastPage"));f(this._topToolbar,"selectPage",b(g,this,"selectPage"));f(this._topToolbar,"refresh",b(g,this,"refresh"));f(this._topToolbar,"search",b(g,this,"search"));f(this._topToolbar,"export",b(g,this,"export"));f(this._topToolbar,"print",b(g,this,"print"))}if(this._reportAlbum){f(this._reportAlbum,"resizeToolPanel",b(g,this,"resizeToolPanel"));f(this._reportAlbum,"selectView",this,"_onSelectView");f(this._reportAlbum,"removeView",this,"_onRemoveView");f(this._reportAlbum,"grpDrilldown",b(g,this,"grpDrilldown"));f(this._reportAlbum,"grpNodeRetrieveChildren",b(g,this,"grpNodeRetrieveChildren"));f(this._reportAlbum,"grpNodeCollapse",b(g,this,"grpNodeCollapse"));f(this._reportAlbum,"grpNodeExpand",b(g,this,"grpNodeExpand"));if(this._topToolbar){var a=this._reportAlbum._curView.toolPanel.initialViewType;this._topToolbar.updateToolPanelButtons(a)}}if(this._print){f(this._print,"printSubmitted",b(g,this,"printSubmitted"))}if(this._export){f(this._export,"exportSubmitted",b(g,this,"exportSubmitted"))}this._updateRefreshButton();this._loadReportPageContent();this.scrollToHighlighted();f(window,"onload",this,"removeFlashActivations");g(this,"initialized")};bobj.crv.Viewer._updateRefreshButton=function(){if(this._reportAlbum){var a=this._reportAlbum.getSelectedView();if(a){if(!a.isMainReport()){this.disableRefreshButton(true)}}}};bobj.crv.Viewer._loadReportPageContent=function(){var a=this.getReportPage();if(a){a.loadContent()}};bobj.crv.Viewer._doLayoutOnLoad=function(){this.css.visibility=this._oldCssVisibility;this._doLayout()};bobj.crv.Viewer._doLayout=function(){var q=this._topToolbar?this._topToolbar.getHeight():0;var y=this._topToolbar?this._topToolbar.getWidth():0;var x=this._botToolbar?this._botToolbar.getHeight():0;var k=this._separator?this._separator.getHeight():0;var s=this.layoutType.toLowerCase();if(bobj.crv.Viewer.LayoutTypes.CLIENT==s){this.css.width="100%";this.css.height="100%"}else{if(bobj.crv.Viewer.LayoutTypes.FITREPORT==s){var u=this._reportAlbum.getBestFitSize();var l=(u.width<y)?y:u.width;var v=(u.height+q+x+k);this.css.height=v+"px";this.css.width=l+"px"}else{this.css.width=this.visualStyle.width;this.css.height=this.visualStyle.height}}var r=this.getWidth();var a=this.getHeight();var g=Math.max(0,a-q-x-k);if(this._reportAlbum){this._reportAlbum.resizeOuter(r,g)}if(this._botToolbar){this._botToolbar.move(0,q+k+g)}if(this._print&&this._print.layer){this._print.center()}if(this._export&&this._export.layer){this._export.center()}if(this._reportProcessing&&this._reportProcessing.layer){this._reportProcessing.center()}var n=MochiKit.Style.getElementPosition(this.layer);var z=MochiKit.Style.getElementDimensions(this.layer);if(this._modalBackground){var b=this._modalBackground.style;b.top=n.y+"px";b.left=n.x+"px";b.width=z.w+"px";b.height=z.h+"px"}var f=bobj.getBodyScrollDimension();var m=((n.x+z.w)>=f.w)||((n.y+z.h)>=f.h);if(m&&(s!=bobj.crv.Viewer.LayoutTypes.CLIENT)){this.boundaryControl.updateBoundary(z.w,z.h,n.x,n.y)}else{this.boundaryControl.updateBoundary(0,0,0,0)}this._adjustWindowScrollBars()};bobj.crv.Viewer._onShowGroupTreeClick=function(b){var a=b?bobj.crv.ToolPanelType.GroupTree:bobj.crv.ToolPanelType.None;this.selectToolPanel(a)};bobj.crv.Viewer._onShowParamPanelClick=function(b){var a=b?bobj.crv.ToolPanelType.ParameterPanel:bobj.crv.ToolPanelType.None;this.selectToolPanel(a)};bobj.crv.Viewer.selectToolPanel=function(a){var b=bobj.crv.ToolPanelType;if(this._reportAlbum){this._reportAlbum._curView.toolPanel.setView(a);this._reportAlbum._curView.setDisplayToolPanel(b.None!==a)}if(b.GroupTree==a){MochiKit.Signal.signal(this,"showGroupTree")}else{if(b.ParameterPanel==a){MochiKit.Signal.signal(this,"showParamPanel")}else{if(b.None==a){MochiKit.Signal.signal(this,"hideToolPanel")}}}};bobj.crv.Viewer._onSelectView=function(a){MochiKit.Signal.signal(this,"selectView",a)};bobj.crv.Viewer._onRemoveView=function(a){MochiKit.Signal.signal(this,"removeView",a)};bobj.crv.Viewer.resize=function(a,b){if(bobj.isNumber(a)){a=a+"px"}if(bobj.isNumber(b)){b=b+"px"}this.visualStyle.width=a;this.visualStyle.height=b;this._doLayout()};bobj.crv.Viewer.disableRefreshButton=function(a){if(this._topToolbar){var b=this._topToolbar.refreshButton;if(b){b.setDisabled(a)}}if(this._botToolbar){var b=this._botToolbar.refreshButton;if(b){b.setDisabled(a)}}};bobj.crv.Viewer.setPageNumber=function(b,a){if(this._topToolbar){this._topToolbar.setPageNumber(b,a)}if(this._botToolbar){this._botToolbar.setPageNumber(b,a)}};bobj.crv.Viewer.showPromptDialog=function(a){a=a||"";if(!this._promptDlg){var b=MochiKit.Base.bind(this._onShowPromptDialog,this);var f=MochiKit.Base.bind(this._onHidePromptDialog,this);this._promptDlg=bobj.crv.params.newParameterDialog({id:this.id+"_promptDlg",showCB:b,hideCB:f})}if(this._promptDlg.isVisible()){this.hidePromptDialog()}this._originalDocumentOnKeyPress=document.onkeypress;this._promptDlg.setPromptHTML(a);setTimeout(MochiKit.Base.bind(this._promptDlg.show,this._promptDlg,true),1)};bobj.crv.Viewer.getPromptingType=function(){return this.promptingType};bobj.crv.Viewer.showFlexPromptDialog=function(n,k,l){var a=bobj.crv.params.FlexParameterUI;if(!a.checkFlashPlayer()){var g=L_bobj_crv_FlashRequired;this.showError(g.substr(0,g.indexOf("{0}")),a.getInstallHTML());return}a.setCurrentIParamInfo(this.id,n,k);a.setViewerLayoutType(this.id,this.layoutType);a.setCloseDialogCallBack(this.id,MochiKit.Base.bind(this.hideFlexPromptDialog,this));if(!this._promptDlg){this._modalBackground=document.createElement("div");this._modalBackground.id=bobj.uniqueId();var r=MochiKit.Style.getElementPosition(this.layer);var q=MochiKit.Style.getElementDimensions(this.layer);var b=this._modalBackground.style;b.top=r.y;b.left=r.x;b.width=q.w;b.height=q.h;b.backgroundColor="#888888";b.position="absolute";b.opacity=0.3;b.filter="alpha(opacity=30)";b.zIndex=bobj.constants.modalLayerIndex-2;document.body.appendChild(this._modalBackground);this._promptDlg=document.createElement("div");this._promptDlg.id=this.id+"_promptDlg";var m=this._promptDlg.style;m.border="1px";m.borderStyle="solid";m.borderColor="#000000";m.position="absolute";m.zIndex=bobj.constants.modalLayerIndex;var f=bobj.uniqueId();this._promptDlg.innerHTML='<div id="'+f+'" name="'+f+'"></div>';document.body.appendChild(this._promptDlg);a.createSWF(this.id,f,l,true)}else{this._promptDlg.style.display="";a.init(this.id)}this._modalBackground.style.visibility="visible"};bobj.crv.Viewer._onShowPromptDialog=function(){this._adjustWindowScrollBars()};bobj.crv.Viewer._onHidePromptDialog=function(){this._adjustWindowScrollBars();document.onkeypress=this._originalDocumentOnKeyPress};bobj.crv.Viewer.hidePromptDialog=function(){if(this._promptDlg&&this._promptDlg.isVisible()){this._promptDlg.show(false)}};bobj.crv.Viewer.hideFlexPromptDialog=function(){if(this._promptDlg){if(_ie){this._promptDlg.focus()}this._promptDlg.style.visibility="hidden";this._promptDlg.style.display="none";this._modalBackground.style.visibility="hidden"}};bobj.crv.Viewer._adjustWindowScrollBars=function(){if(_ie&&this.layoutType==bobj.crv.Viewer.LayoutTypes.CLIENT&&this._promptDlg&&this._promptDlg.layer&&MochiKit.DOM.currentDocument().body){var k,b;var a=MochiKit.DOM.currentDocument().body;var g=this._promptDlg.layer;if(this.getReportPage()&&this.getReportPage().layer){var f=this.getReportPage().layer}if(!window.bodyOverFlow){window.bodyOverFlow=MochiKit.DOM.getStyle(a,"overflow")}if(a.offsetHeight<(g.offsetTop+g.offsetHeight)){if(window.bodyOverFlow=="hidden"){k="scroll"}b="hidden"}else{k=window.bodyOverFlow;b="auto"}a.style.overflow=k;if(f){f.style.overflow=b}}};bobj.crv.Viewer.showError=function(f,a){var b=bobj.crv.ErrorDialog.getInstance();b.setText(f,a);b.setTitle(L_bobj_crv_Error);b.show(true)};bobj.crv.Viewer.update=function(g,a){if(!g){return}for(var b in g.children){var f=g.children[b];if(f){switch(f.cons){case"bobj.crv.newReportAlbum":if(this._reportAlbum&&a.updateReportAlbum()){this._reportAlbum.update(f,a)}break;case"bobj.crv.newToolbar":if(this._topToolbar&&a.updateToolbar()){this._topToolbar.update(f,a)}break}}}if(a.refreshLayout()){this._doLayout()}if(a.requiresScrolling()){this.scrollToHighlighted()}};bobj.crv.Viewer.getParameterPanel=function(){if(this._reportAlbum){var a=this._reportAlbum.getSelectedView();if(a&&a.toolPanel){return a.toolPanel.getParameterPanel()}}};bobj.crv.Viewer.getReportPage=function(){if(this._reportAlbum){var a=this._reportAlbum.getSelectedView();if(a&&a.toolPanel){return a.reportPage}}};bobj.crv.Viewer.scrollToHighlighted=function(){var k=this._reportAlbum.getSelectedView();var b=getLayer(k.reportPage.id);var f=getLayer("CrystalHighLighted");if(!f||!b){return}if(MochiKit.DOM.isParent(f,b)){var g=this.layoutType.toLowerCase();var a;if(g==bobj.crv.Viewer.LayoutTypes.FITREPORT){a=MochiKit.Style.getElementPosition(f);window.scrollTo(a.x,a.y)}else{a=MochiKit.Style.getElementPosition(f,b);b.scrollLeft=a.x;b.scrollTop=a.y}}};bobj.crv.Viewer.addViewerEventListener=function(f,b){var a=this._eventListeners[f];if(!a){this._eventListeners[f]=[b];return}a[a.length]=b};bobj.crv.Viewer.removeViewerEventListener=function(k,b){var a=this._eventListeners[k];if(a){for(var g=0,f=a.length;g<f;g++){if(a[g]==b){a.splice(g,1);return}}}};bobj.crv.Viewer.getEventListeners=function(a){return this._eventListeners[a]};bobj.crv.BoundaryControl=function(a){this.id=a;return this};bobj.crv.BoundaryControl.prototype={updateBoundary:function(b,a,g,f){if(!this.layer){this._init()}if(this.layer){this.layer.style.width=b;this.layer.style.height=a;this.layer.style.left=g;this.layer.style.top=f}},_init:function(){var b={display:"block",visibility:"hidden",position:"absolute"};if(!this.layer){var a=bobj.html.DIV({id:this.id,style:b});append2(_curDoc.body,a);this.layer=getLayer(this.id)}}};if(typeof(bobj.crv.Async)=="undefined"){bobj.crv.Async={}}bobj.crv.Async.UpdatePack=function(){this.viewer={refreshLayout:false,requiresScrolling:false,toolbar:{requiresUpdate:false},reportAlbum:{updateTabs:false,reportView:{reportPage:{requiresUpdate:false},toolPanel:{groupTree:{requiresUpdate:false,path:""},paramPanel:{requiresUpdate:false}}}}}};bobj.crv.Async.UpdatePack.prototype={setUpdateGroupTree:function(a){this.viewer.reportAlbum.reportView.toolPanel.groupTree.requiresUpdate=a},setRequiresScrolling:function(a){this.viewer.requiresScrolling=a},requiresScrolling:function(){return this.viewer.requiresScrolling},setGroupTreePath:function(a){this.viewer.reportAlbum.reportView.toolPanel.groupTree.path=a},updateGroupTree:function(){return this.viewer.reportAlbum.reportView.toolPanel.groupTree.requiresUpdate},groupTreePath:function(){return this.viewer.reportAlbum.reportView.toolPanel.groupTree.path},setUpdateReportPage:function(a){this.viewer.reportAlbum.reportView.reportPage.requiresUpdate=a},updateReportPage:function(){return this.viewer.reportAlbum.reportView.reportPage.requiresUpdate},setUpdateParamPanel:function(a){return this.viewer.reportAlbum.reportView.toolPanel.paramPanel.requiresUpdate},updateParamPanel:function(){return this.viewer.reportAlbum.reportView.toolPanel.paramPanel.requiresUpdate},updateToolPanel:function(){return this.updateGroupTree()||this.updateParamPanel()},updateReportAlbum:function(){return this.updateReportView()||this.viewer.reportAlbum.updateTabs},updateReportView:function(){return this.updateToolPanel()||this.updateReportPage()},setUpdateToolbar:function(a){this.viewer.toolbar.requiresUpdate=a},updateToolbar:function(){return this.viewer.toolbar.requiresUpdate},setUpdateTabs:function(a){this.viewer.reportAlbum.updateTabs=a},updateTabs:function(){return this.viewer.reportAlbum.updateTabs},refreshLayout:function(){return this.viewer.refreshLayout},setRefreshLayout:function(a){this.viewer.refreshLayout=a}};bobj.crv.ViewerListener=function(f,k){this._name=f;this._viewer=null;this._promptPage=null;this._paramCtrl=null;this._ioHandler=k;this._reportProcessing=null;var b=MochiKit.Signal.connect;var a=bobj.event.subscribe;var l=MochiKit.Base.bind;var g=getWidgetFromID(f);if(g){if(g.widgetType=="Viewer"){this._viewer=g;this._reportProcessing=this._viewer._reportProcessing}else{if(g.widgetType=="PromptPage"){this._promptPage=g;this._reportProcessing=this._promptPage._reportProcessing}}}if(this._viewer){b(this._viewer,"selectView",this,"_onSelectView");b(this._viewer,"removeView",this,"_onRemoveView");b(this._viewer,"firstPage",this,"_onFirstPage");b(this._viewer,"prevPage",this,"_onPrevPage");b(this._viewer,"nextPage",this,"_onNextPage");b(this._viewer,"lastPage",this,"_onLastPage");b(this._viewer,"selectPage",this,"_onSelectPage");b(this._viewer,"zoom",this,"_onZoom");b(this._viewer,"drillUp",this,"_onDrillUp");b(this._viewer,"refresh",this,"_onRefresh");b(this._viewer,"search",this,"_onSearch");b(this._viewer,"export",this,"_onExport");b(this._viewer,"print",this,"_onPrint");b(this._viewer,"resizeToolPanel",this,"_onResizeToolPanel");b(this._viewer,"hideToolPanel",this,"_onHideToolPanel");b(this._viewer,"grpDrilldown",this,"_onDrilldownGroupTree");b(this._viewer,"grpNodeRetrieveChildren",this,"_onRetrieveGroupTreeNodeChildren");b(this._viewer,"grpNodeCollapse",this,"_onCollapseGroupTreeNode");b(this._viewer,"grpNodeExpand",this,"_onExpandGroupTreeNode");b(this._viewer,"showParamPanel",this,"_onShowParamPanel");b(this._viewer,"showGroupTree",this,"_onShowGroupTree");b(this._viewer,"printSubmitted",this,"_onSubmitExport");b(this._viewer,"exportSubmitted",this,"_onSubmitExport");this._setInteractiveParams()}a("drilldown",this._forwardTo("_onDrilldown"));a("drilldownGraph",this._forwardTo("_onDrilldownGraph"));a("drilldownSubreport",this._forwardTo("_onDrilldownSubreport"));a("sort",this._forwardTo("_onSort"));a("hyperlinkClicked",this._forwardTo("_onHyperlinkClicked"));a("crprompt_param",this._forwardTo("_onSubmitStaticPrompts"));a("crprompt_pmtEngine",this._forwardTo("_onSubmitPromptEnginePrompts"));a("crprompt_logon",this._forwardTo("_onSubmitDBLogon"));a("crprompt_cancel",this._forwardTo("_onCancelParamDlg"));a("crprompt_flexparam",this._forwardTo("_onFlexParam"));a("crprompt_flexlogon",this._forwardTo("_onFlexLogon"));a("pnav",this._forwardTo("_onNavigateReportPart"));a("navbookmark",this._forwardTo("_onNavigateBookmark"));a("saveViewState",l(this._onSaveViewState,this))};bobj.crv.ViewerListener.prototype={getCurrentView:function(){if(this._viewer&&this._viewer._reportAlbum){return this._viewer._reportAlbum.getSelectedView()}return null},_forwardTo:function(a){return MochiKit.Base.bind(function(f){if(f==this._name){var b=bobj.slice(arguments,1);this[a].apply(this,b)}},this)},_onSaveViewState:function(){this._saveViewState()},_onSelectView:function(a){if(a){bobj.crv.logger.info("UIAction View.Select");if(a.hasContent()){this._updateUIState()}else{var b=bobj.crv.stateManager.getComponentState(this._name);if(b){b.curViewId=a.viewStateId;this._request({selectView:a.viewStateId},false)}}}},_onRemoveView:function(f){if(f){bobj.crv.logger.info("UIAction View.Remove");var b=bobj.crv.stateManager.getComponentState(this._name);if(b){delete b[f.viewStateId]}var g=this._getCommonState();if(g){var a=MochiKit.Base.findValue(g.rptAlbumOrder,f.viewStateId);if(a!=-1){arrayRemove(g,"rptAlbumOrder",a)}}}},_getPageNavigationUpdatePack:function(){var a=new bobj.crv.Async.UpdatePack();a.setUpdateReportPage(true);a.setUpdateToolbar(true);a.setRefreshLayout(true);return a},_onFirstPage:function(){bobj.crv.logger.info("UIAction Toolbar.FirstPage");this._request({tb:"first"},bobj.crv.config.useAsync,true,this._getPageNavigationUpdatePack())},_onPrevPage:function(){bobj.crv.logger.info("UIAction Toolbar.PrevPage");this._request({tb:"prev"},bobj.crv.config.useAsync,true,this._getPageNavigationUpdatePack())},_onNextPage:function(){bobj.crv.logger.info("UIAction Toolbar.NextPage");this._request({tb:"next"},bobj.crv.config.useAsync,true,this._getPageNavigationUpdatePack())},_onLastPage:function(){bobj.crv.logger.info("UIAction Toolbar.LastPage");this._request({tb:"last"},bobj.crv.config.useAsync,true,this._getPageNavigationUpdatePack())},_onDrillUp:function(){bobj.crv.logger.info("UIAction Toolbar.DrillUp");this._request({tb:"drillUp"},false)},_onSelectPage:function(a){bobj.crv.logger.info("UIAction Toolbar.SelectPage "+a);this._request({tb:"gototext",text:a},bobj.crv.config.useAsync,true,this._getPageNavigationUpdatePack())},_onZoom:function(b){bobj.crv.logger.info("UIAction Toolbar.Zoom "+b);var a=new bobj.crv.Async.UpdatePack();a.setUpdateReportPage(true);a.setRefreshLayout(true);this._request({tb:"zoom",value:b},bobj.crv.config.useAsync,true,a)},_onExport:function(){if(this._viewer._export){bobj.crv.logger.info("UIAction Toolbar.Export");this._viewer._export.show(true)}},_onPrint:function(){var a=this._viewer._print;if(a){if(a.isActxPrinting){bobj.crv.logger.info("UIAction Toolbar.Print ActiveX");var f=bobj.crv.stateManager.getCompositeState();var b=this._ioHandler.getPostDataForPrinting(f,this._name);this._viewer._print.show(true,b)}else{bobj.crv.logger.info("UIAction Toolbar.Print PDF");this._viewer._print.show(true)}}},_onResizeToolPanel:function(a){this._setCommonProperty("toolPanelWidth",a);this._setCommonProperty("toolPanelWidthUnit","px")},_onHideToolPanel:function(){bobj.crv.logger.info("UIAction Toolbar.HideToolPanel");this._setCommonProperty("toolPanelType",bobj.crv.ToolPanelType.None)},_onShowParamPanel:function(){bobj.crv.logger.info("UIAction Toolbar.ShowParamPanel");this._setCommonProperty("toolPanelType",bobj.crv.ToolPanelType.ParameterPanel)},_onShowGroupTree:function(){bobj.crv.logger.info("UIAction Toolbar.ShowGroupTree");this._setCommonProperty("toolPanelType",bobj.crv.ToolPanelType.GroupTree)},_onDrilldown:function(a){bobj.crv.logger.info("UIAction Report.Drilldown");this._request(a,false)},_onDrilldownSubreport:function(a){bobj.crv.logger.info("UIAction Report.DrilldownSubreport");this._request(a,false)},_onDrilldownGraph:function(a,m,r,n,l,q,s,g){if(a){bobj.crv.logger.info("UIAction Report.DrilldownGraph");var k,f;if(_ie||_saf){k=a.offsetX;f=a.offsetY}else{k=a.layerX;f=a.layerY}var b=parseInt(this._getCommonProperty("zoom"),10);b=(isNaN(b)?1:b/100);this._request({name:encodeURIComponent(m),brch:r,coord:(k*g/b+parseInt(n,10))+"-"+(f*g/b+parseInt(l,10)),pagenumber:q,nextpart:encodeURIComponent(s)},false)}},_onDrilldownGroupTree:function(k,f,b){bobj.crv.logger.info("UIAction GroupTree.Drilldown");var g=encodeURIComponent(k);if(!b){this._request({brch:f,drillname:g},false)}else{var a=new bobj.crv.Async.UpdatePack();a.setUpdateReportPage(true);a.setRequiresScrolling(true);a.setUpdateToolbar(true);this._request({grp:f,drillname:g},bobj.crv.config.useAsync,true,a)}},_onRetrieveGroupTreeNodeChildren:function(b){var a=new bobj.crv.Async.UpdatePack();a.setUpdateGroupTree(true);a.setGroupTreePath(b);this._request({grow:b},bobj.crv.config.useAsync,true,a)},_onCollapseGroupTreeNode:function(k){bobj.crv.logger.info("UIAction GroupTree.CollapseNode");var g=this.getCurrentExpandedPaths();var b=k.split("-");for(var f=0,a=b.length-1;f<=a;f++){var l=b[f];if(g[l]){if(f==a){delete g[l];return}g=g[l]}else{return}}},_onExpandGroupTreeNode:function(k){bobj.crv.logger.info("UIAction GroupTree.ExpandNode");var g=this.getCurrentExpandedPaths();var b=k.split("-");for(var f=0,a=b.length;f<a;f++){var l=b[f];if(!g[l]){g[l]={}}g=g[l]}},_onRefresh:function(){bobj.crv.logger.info("UIAction Toolbar.Refresh");this._request({tb:"refresh"},false)},_onSearch:function(b){bobj.crv.logger.info("UIAction Toolbar.Search");var a=new bobj.crv.Async.UpdatePack();a.setUpdateReportPage(true);a.setUpdateToolbar(true);a.setRequiresScrolling(true);this._request({tb:"search",text:encodeURIComponent(b)},bobj.crv.config.useAsync,true,a)},_onFlexParam:function(a){this._request({crprompt:"flexPromptingSetValues",paramList:a},false)},_onFlexLogon:function(f){for(var b=0,a=f.length;b<a;b++){this._addRequestField(f[b].field,f[b].value)}this._request({crprompt:"logon"},false)},_onSubmitPromptEnginePrompts:function(q){var m=(this._viewer&&this._viewer._promptDlg&&this._viewer._promptDlg.isVisible());var k=m;var f="ValueID"+this._name;var g="ContextID"+this._name;var b="ContextHandleID"+this._name;var l=document.getElementById(f);if(l){this._addRequestField(f,l.value)}var n=document.getElementById(g);if(n){this._addRequestField(g,n.value)}var a=document.getElementById(b);if(a){this._addRequestField(b,a.value)}this._request({crprompt:"pmtEngine",isAdvancedDialog:m},k);this._removeRequestField(f);this._removeRequestField(g);this._removeRequestField(b)},_onSubmitStaticPrompts:function(a){this._addRequestFields(a);this._request({crprompt:"param"},false)},_onSubmitDBLogon:function(a){this._addRequestFieldsFromContent(this._promptPage.contentId);this._request({crprompt:"logon"},false)},_onSubmitExport:function(l,a,g){var b=true;if(!l&&!a){b=false}if(!g){g="PDF"}var f={tb:"crexport",text:g,range:b+""};if(b){f.from=l+"";f.to=a+""}bobj.crv.logger.info("UIAction Export.Submit "+g);if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){this._ioHandler.redirectToServlet();this._ioHandler.addRequestField("ServletTask","Export")}var k=null;this._request(f,false,false)},_onCancelParamDlg:function(){bobj.crv.logger.info("UIAction PromptDialog.Cancel");this._viewer.hidePromptDialog()},_onReceiveParamDlg:function(a){this._viewer.showPromptDialog(a)},_onSort:function(a){bobj.crv.logger.info("UIAction Report.Sort");this._request(a,false)},_onNavigateReportPart:function(a){bobj.crv.logger.info("UIAction ReportPart.Navigate");this._request(a,false)},_onNavigateBookmark:function(a){bobj.crv.logger.info("UIAction Report.Navigate");this._request(a,false)},getCurrentExpandedPaths:function(){var a=this._getViewState();if(a){return a.gpTreeCurrentExpandedPaths}return{}},applyParams:function(a){if(a){bobj.crv.logger.info("UIAction ParameterPanel.Apply");if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){a=this._encodeParameters(a)}this._request({crprompt:"paramPanel",paramList:a})}},showAdvancedParamDialog:function(a){if(!a){return}var g=a._findParam(a._selected);if(!g){return}if(this._viewer.getPromptingType().toLowerCase()==bobj.crv.Viewer.PromptingTypes.FLEX){var b="";if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){b=this._ioHandler._servletUrl}this._viewer.showFlexPromptDialog(a,g,b)}else{var f=MochiKit.Base.clone(g);f.defaultValues=null;if(this._ioHandler instanceof bobj.crv.ServletAdapter||this._ioHandler instanceof bobj.crv.FacesAdapter){f.value=MochiKit.Base.clone(g.value);f=this._encodeParameter(f)}this._request({promptDlg:f},true)}},_encodeParameters:function(f){if(f){for(var b=0,a=f.length;b<a;b++){f[b]=this._encodeParameter(f[b])}}return f},_encodeParameter:function(f){if(f){if(f.value&&f.valueDataType==bobj.crv.params.DataTypes.STRING){for(var b=0,a=f.value.length;b<a;b++){if(bobj.isString(f.value[b])){f.value[b]=encodeURIComponent(f.value[b])}else{if(bobj.isObject(f.value[b])){if(f.value[b].beginValue){f.value[b].beginValue=encodeURIComponent(f.value[b].beginValue)}if(f.value[b].endValue){f.value[b].endValue=encodeURIComponent(f.value[b].endValue)}}}}}if(f.paramName){f.paramName=encodeURIComponent(f.paramName)}if(f.reportName){f.reportName=encodeURIComponent(f.reportName)}}return f},_setViewProperty:function(b,f){var a=this._getViewState();if(a){a[b]=f}},_getViewProperty:function(b){var a=this._getViewState();if(a){return a[b]}return null},_setCommonProperty:function(b,f){var a=this._getCommonState();if(a){a[b]=f}},_getCommonProperty:function(b){var a=this._getCommonState();if(a){return a[b]}return null},_updateUIState:function(a){},_getViewState:function(){var a=bobj.crv.stateManager.getComponentState(this._name);if(a&&a.curViewId){return a[a.curViewId]}return null},_getCommonState:function(){var a=bobj.crv.stateManager.getComponentState(this._name);if(a){return a.common}return null},_setInteractiveParams:function(f){if(!this._ioHandler.canUseAjax()){var g=this._viewer.getParameterPanel();if(g){g.showError(L_bobj_crv_InteractiveParam_NoAjax)}return}if(!f){var b=this._getCommonProperty("iactParams");if(b){var l=bobj.crv.params.Parameter;var f=[];for(var k=0;k<b.length;++k){f.push(new l(b[k]))}}}if(f&&f.length){var g=this._viewer.getParameterPanel();if(g){var a=this._getCommonProperty("paramOpts");this._paramCtrl=new bobj.crv.params.ParameterController(g,this,a);this._paramCtrl.setParameters(f)}}},_updateInteractiveParams:function(f){if(f.resolvedFields){this._viewer.hidePromptDialog();for(var a=0;a<f.resolvedFields.length;a++){var b=new bobj.crv.params.Parameter(f.resolvedFields[a]);this._paramCtrl.updateParameter(b.paramName,b.getValue())}this._paramCtrl._updateToolbar()}else{this._viewer.showPromptDialog(f.html)}},_request:function(l,k,n,a){var m=bobj.crv.stateManager.getCompositeState();var g=MochiKit.Base.bind;var b=g(this._onResponse,this,a,l);var f=g(this._onIOError,this);if(!bobj.isBoolean(n)){n=true}if(this._reportProcessing&&n){this._reportProcessing.delayedShow(false)}var q=this._ioHandler.request(m,this._name,l,k,b,f);if(q){if(this._reportProcessing&&n){this._reportProcessing.setDeferred(q)}q.addCallback(b);q.addErrback(f)}},_onResponse:function(a,l,b){var k=null;if(bobj.isString(b)){k=MochiKit.Base.evalJSON(b)}else{k=MochiKit.Async.evalJSONRequest(b)}if(k){if(k.needsReload){this._request(l,false,true,a);return}if(k.status&&this._viewer&&(k.status.errorMessage||k.status.debug)){var f=k.status.errorMessage||L_bobj_crv_RequestError;this._viewer.showError(f,k.status.debug)}if(k.state){var g=k.state;if(bobj.isString(g)){g=MochiKit.Base.evalJSON(g)}bobj.crv.stateManager.setComponentState(this._name,g)}if(k.update&&k.update.promptDlg){this._updateInteractiveParams(k.update.promptDlg);bobj.crv.logger.info("Update InteractiveParams")}if(k.update&&this._viewer&&a){this._viewer.update(k.update,a);bobj.crv.logger.info("Update Viewer")}}if(this._reportProcessing){this._reportProcessing.cancelShow()}},_onIOError:function(b){if(this._reportProcessing.wasCancelled()==true){return}if(this._viewer){var f=this._ioHandler.processError(b);var a="";if(bobj.isString(f)){a=f}else{for(var g in f){if(bobj.isString(f[g])||bobj.isNumber(f[g])){a+=g+": "+f[g]+"\n"}}}this._viewer.showError(L_bobj_crv_RequestError,a)}if(this._reportProcessing){this._reportProcessing.cancelShow()}},_saveViewState:function(){var a=bobj.crv.stateManager.getCompositeState();this._ioHandler.saveViewState(a,this._name)},_addRequestFields:function(b){var f=document.getElementById(b);if(f){for(var a in f){var g=f[a];if(g&&g.name&&g.value){this._addRequestField(g.name,g.value)}}}},_addRequestFieldsFromContent:function(k){var b=document.getElementById(k);if(!b){return}var f=MochiKit.DOM.getElementsByTagAndClassName("input",null,b);for(var a in f){var g=f[a];if(g&&g.name&&g.value){this._addRequestField(g.name,g.value)}}},_addRequestField:function(a,b){this._ioHandler.addRequestField(a,b)},_removeRequestField:function(a){this._ioHandler.removeRequestField(a)},_onHyperlinkClicked:function(g){g=MochiKit.Base.parseQueryString(g);var b=this._viewer.getEventListeners("hyperlinkClicked");var l=false;if(b){for(var k=0,f=b.length;k<f;k++){if(b[k](g)==true){l=true}}}if(l){return}var a=window;if(g.target&&g.target!="_self"){a.open(g.url,g.target)}else{a.location=g.url}}};bobj.crv.StateManager=function(){this._state={}};bobj.crv.StateManager.prototype={setViewState:function(a,g,f){var b=this._state;if(!b[a]){b[a]={}}b[a][g]=f},getViewState:function(a,f){var b=this._state;if(!b[a]){return null}return b[a][f]},setComponentState:function(a,b){this._state[a]=b},getComponentState:function(a){return this._state[a]},getCompositeState:function(){return this._state}};if(typeof bobj.crv.viewerState=="undefined"){bobj.crv.stateManager=new bobj.crv.StateManager()}bobj.crv.IOAdapterBase={request:function(){},addRequestField:function(a,b){},removeRequestField:function(a){},saveViewState:function(a,b){},getPostDataForPrinting:function(a,b){},processError:function(a){return a},canUseAjax:function(){try{return(MochiKit.Async.getXMLHttpRequest()!==null)}catch(a){return false}}};bobj.crv.ServletAdapter=function(b,a){this._pageUrl=b;this._servletUrl=a;this._form=null};bobj.crv.ServletAdapter._requestParams={STATE:"CRVCompositeViewState",TARGET:"CRVEventTarget",ARGUMENT:"CRVEventArgument"};bobj.crv.ServletAdapter.prototype=MochiKit.Base.merge(bobj.crv.IOAdapterBase,{request:function(g,m,f,n){if(!this._form){this._createForm()}var k=bobj.crv.ServletAdapter._requestParams;var a=MochiKit.Base.serializeJSON;this._form[k.STATE].value=encodeURIComponent(a(g));this._form[k.TARGET].value=encodeURIComponent(m);this._form[k.ARGUMENT].value=encodeURIComponent(a(f));var b=null;if(n&&this._servletUrl){var l=MochiKit.Async.getXMLHttpRequest();l.open("POST",this._servletUrl,true);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.setRequestHeader("Accept","application/json");b=MochiKit.Async.sendXMLHttpRequest(l,MochiKit.Base.queryString(this._form))}else{this._form.submit()}this._form=null;return b},redirectToServlet:function(){if(!this._form){this._createForm()}this._form.action=this._servletUrl},_createForm:function(){var b=MochiKit.DOM;var a=bobj.crv.ServletAdapter._requestParams;this._form=b.FORM({name:bobj.uniqueId(),style:"display:none",method:"POST",enctype:"application/x-www-form-urlencoded;charset=utf-8",action:this._pageUrl},b.INPUT({type:"hidden",name:a.STATE}),b.INPUT({type:"hidden",name:a.TARGET}),b.INPUT({type:"hidden",name:a.ARGUMENT}));document.body.appendChild(this._form)},addRequestField:function(a,f){if(a&&f){if(!this._form){this._createForm()}var b=this._form[a];if(b){b.value=f}else{this._form.appendChild(MochiKit.DOM.INPUT({type:"hidden",name:a,value:f}))}}},removeRequestField:function(a){if(a){var f=this._form;if(f){var b=f[a];if(b){MochiKit.DOM.removeElement(b);if(f[a]){f[a]=null}}b=null}}},getPostDataForPrinting:function(f,k){var a=MochiKit.Base.serializeJSON;var g=bobj.crv.ServletAdapter._requestParams;var l=a(f);var b=g.STATE;b+="=";b+=encodeURIComponent(l);b+="&";b+=g.TARGET;b+="=";b+=encodeURIComponent(k);b+="&";b+=g.ARGUMENT;b+="=";b+=encodeURIComponent('"axprint="');if(document.getElementById("com.sun.faces.VIEW")){b+="&com.sun.faces.VIEW="+encodeURIComponent(document.getElementById("com.sun.faces.VIEW").value)}return b},processError:function(a){if(!(typeof(a.number)=="undefined")&&a.number==404){return L_bobj_crv_ServletMissing}return a}});bobj.crv.AspDotNetAdapter=function(g,a,k,f){this._postbackEventReference=g;this._replacementParameter=a;this._stateID=k;this._form=null;this._callbackEventReference=f;this._additionalReqFlds=null;var b=bobj.getElementByIdOrName(this._stateID);if(b){this._form=b.form}};bobj.crv.AspDotNetAdapter.prototype=MochiKit.Base.merge(bobj.crv.IOAdapterBase,{request:function(pageState,viewerName,eventArgs,allowAsync,callbackHandler,errbackHandler){var toJSON=MochiKit.Base.serializeJSON;if(eventArgs&&this._additionalReqFlds){eventArgs=MochiKit.Base.update(eventArgs,this._additionalReqFlds)}this._additionalReqFlds=null;var jsonEventArgs=toJSON(eventArgs);if(allowAsync){this.saveViewState(pageState,viewerName);if(typeof WebForm_InitCallback=="function"){__theFormPostData="";__theFormPostCollection=[];WebForm_InitCallback()}var callback=this._callbackEventReference.replace("'arg'","jsonEventArgs");callback=callback.replace("'cb'","callbackHandler");callback=callback.replace("'errcb'","errbackHandler");callback=callback.replace("'frmID'","this._form.id");return eval(callback)}else{var postbackCall;if(this._postbackEventReference.indexOf("'"+this._replacementParameter+"'")>=0){postbackCall=this._postbackEventReference.replace("'"+this._replacementParameter+"'","jsonEventArgs")}else{postbackCall=this._postbackEventReference.replace('"'+this._replacementParameter+'"',"jsonEventArgs")}eval(postbackCall);this._clearEventFields()}},saveViewState:function(b,f){var a=MochiKit.Base.serializeJSON;var k=b[f];var g=bobj.getElementByIdOrName(this._stateID);if(g){g.value=a(k)}},getPostDataForPrinting:function(f,g){var b=MochiKit.DOM.formContents(this.form);var k=b[0];var a=b[1];k.push("crprint");a.push(g);var l=MochiKit.Base.queryString(k,a);return l},addRequestField:function(a,b){if(!this._additionalReqFlds){this._additionalReqFlds={}}this._additionalReqFlds[a]=b},_clearRequestField:function(a){if(a){if(this._form){var b=this._form[a];if(b){b.value=""}}}},_clearEventFields:function(){this._clearRequestField("__EVENTTARGET");this._clearRequestField("__EVENTARGUMENT")}});bobj.crv.FacesAdapter=function(a,b){this._formName=a;this._servletUrl=b;this._useServlet=false;if(!bobj.crv.FacesAdapter._hasInterceptedSubmit){this._interceptSubmit();bobj.crv.FacesAdapter._hasInterceptedSubmit=true}};bobj.crv.FacesAdapter._requestParams={STATE:"CRVCompositeViewState",TARGET:"CRVEventTarget",ARGUMENT:"CRVEventArgument"};bobj.crv.FacesAdapter.prototype=MochiKit.Base.merge(bobj.crv.IOAdapterBase,{request:function(n,r,b,a){var k=bobj.crv.FacesAdapter._requestParams;var q=MochiKit.Base.serializeJSON;var l=MochiKit.DOM.INPUT;var s=null;var f=this._getForm();if(!f){return}if(!f[k.TARGET]){f.appendChild(l({type:"hidden",name:k.TARGET}))}f[k.TARGET].value=encodeURIComponent(r);if(!f[k.ARGUMENT]){f.appendChild(l({type:"hidden",name:k.ARGUMENT}))}f[k.ARGUMENT].value=encodeURIComponent(q(b));if(!f[k.STATE]){f.appendChild(l({type:"hidden",name:k.STATE}))}f[k.STATE].value=encodeURIComponent(q(n));if(a&&this._servletUrl){var m=MochiKit.Async.getXMLHttpRequest();m.open("POST",this._servletUrl,true);m.setRequestHeader("Content-Type","application/x-www-form-urlencoded");m.setRequestHeader("Accept","application/json");s=MochiKit.Async.sendXMLHttpRequest(m,MochiKit.Base.queryString(f))}else{var g=f.action;if(this._useServlet===true){f.action=this._servletUrl}f.submit();f.action=g;this._useServlet=false}f[k.TARGET].value="";f[k.ARGUMENT].value="";f[k.STATE].value="";this.removeRequestField("ServletTask");return s},redirectToServlet:function(){this._useServlet=true},addRequestField:function(a,f){if(a&&f){var g=this._getForm();if(g){var b=g[a];if(b){b.value=f}else{g.appendChild(MochiKit.DOM.INPUT({type:"hidden",name:a,value:f}))}}}},removeRequestField:function(a){if(a){var f=this._getForm();if(f){var b=f[a];if(b){MochiKit.DOM.removeElement(b);if(f[a]){f[a]=null}}b=null}}},saveViewState:function(f,l){if(!bobj.crv.FacesAdapter._isStateSaved){var k=this._getForm();if(k){var g=bobj.crv.FacesAdapter._requestParams;var a=MochiKit.Base.serializeJSON;var b=MochiKit.DOM.INPUT;if(!k[g.STATE]){k.appendChild(b({type:"hidden",name:g.STATE}))}k[g.STATE].value=encodeURIComponent(a(f))}bobj.crv.FacesAdapter._isStateSaved=true}},_getForm:function(){return document.forms[this._formName]},_interceptSubmit:function(){var b=this._getForm();if(b){var a=b.submit;b.submit=function(){bobj.event.publish("saveViewState");b.submit=a;b.submit()}}},getPostDataForPrinting:function(f,k){var a=MochiKit.Base.serializeJSON;var g=bobj.crv.ServletAdapter._requestParams;var l=a(f);var b=g.STATE;b+="=";b+=encodeURIComponent(l);b+="&";b+=g.TARGET;b+="=";b+=encodeURIComponent(k);b+="&";b+=g.ARGUMENT;b+="=";b+=encodeURIComponent('"axprint="');if(document.getElementById("com.sun.faces.VIEW")){b+="&com.sun.faces.VIEW="+encodeURIComponent(document.getElementById("com.sun.faces.VIEW").value)}return b},processError:function(a){if(!(typeof(a.number)=="undefined")&&a.number==404){return L_bobj_crv_ServletMissing}return a}});if(typeof bobj=="undefined"){bobj={}}bobj.ArgumentNormalizer=function(){this._rules=[]};bobj.ArgumentNormalizer.prototype={addRule:function(){this._rules.push(arguments)},normalize:function(){for(var b=0,k=this._rules.length;b<k;++b){var s=this._rules[b];if(s.length==arguments.length){var g={};for(var q=0,m=s.length;q<m;++q){var f=arguments[q];var l=s[q];if(bobj.isString(l)){var r=null;var a=l;var n=null}else{if(bobj.isArray(l)){var r=l[0];var a=l[1];var n=l[2]}else{var r=l.test;var a=l.name;var n=l.xform}}if(!r||r(f)){g[a]=n?n(f):f;if(q+1==m){return g}}else{break}}}}return null},normalizeArray:function(a){return this.normalize.apply(this,a)}};if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.event=="undefined"){bobj.event={};bobj.event._topicSubscriptions={};bobj.event._globalSubscriptions=[]}bobj.event.publish=function(f){var b=bobj.slice(arguments,1);var k=bobj.event._topicSubscriptions[f];if(k){for(var g=0;g<k.length;++g){k[g]._notify.apply(null,b)}}var l=bobj.event._globalSubscriptions;for(var a=0;a<l.length;++a){l[a]._notify.apply(null,b)}};bobj.event.subscribe=function(){var a=bobj.event.subscribe._normalizer;if(!a){a=bobj.event.subscribe._normalizer=new bobj.ArgumentNormalizer();a.addRule("topic","target","methName");a.addRule([bobj.isString,"topic"],"callback");a.addRule("target","methName");a.addRule("callback")}return bobj.event.kwSubscribe(a.normalizeArray(arguments))};bobj.event.kwSubscribe=function(b){var g=MochiKit.Base.bind;var f={};if(b.callback){f._notify=b.callback}else{f._notify=g(b.target[b.methName],b.target)}if(b.topic){f.topic=b.topic;var a=bobj.event._topicSubscriptions;if(!a[b.topic]){a[b.topic]=[]}a[b.topic].push(f)}else{bobj.event._globalSubscriptions.push(f)}return f};bobj.event.unsubscribe=function(f){var b=bobj.event._globalSubscriptions;if(f.topic){b=bobj.event._topicSubscriptions[f.topic]}if(b){var a=MochiKit.Base.findIdentical(b,f);if(a!=-1){b.splice(a,1);delete f._notify}}};if(typeof(bobj.crv.PromptPage)=="undefined"){bobj.crv.PromptPage={}}bobj.crv.newPromptPage=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),layoutType:"fixed",width:800,height:600,padding:5,top:0,left:0},a);var b=newWidget(a.id);b.widgetType="PromptPage";b._reportProcessing=null;bobj.fillIn(b,a);b.initOld=b.init;MochiKit.Base.update(b,bobj.crv.PromptPage);return b};bobj.crv.PromptPage.setHTML=function(f){var b=this._pageNode;if(bobj.isString(f)){b.innerHTML=f}else{if(bobj.isObject(f)){b.innerHTML="";b.appendChild(f);var a=f.style;a.display="block";a.visibility="visible"}}};bobj.crv.PromptPage.getHTML=function(){var m=bobj.html;var b=bobj.isBorderBoxModel();var g=this.height+this.topMargin+this.bottomMargin;var k=this.width+this.leftMargin+this.rightMargin;var q=b?g:this.height;var a=b?k:this.width;var f={position:"relative",width:a+"px",height:q+"px",top:this.top+"px",left:this.left+"px",border:"none","z-index":1,"background-color":this.bgColor};if(this.layoutType=="fixed"){f.overflow="auto"}var n={padding:this.padding+"px"};var l=m.DIV({id:this.id,style:f},m.DIV({id:this.id+"_page",style:n}));return l+bobj.crv.getInitHTML(this.widx)};bobj.crv.PromptPage.init=function(){this._pageNode=document.getElementById(this.id+"_page");this.initOld();if(this.contentId){var b=document.getElementById(this.contentId);if(b){this.setHTML(b)}}var a=MochiKit.Signal.connect;if(this.layoutType.toLowerCase()=="client"){a(window,"onresize",this,"_doLayout")}this._doLayout()};bobj.crv.PromptPage._doLayout=function(){var b=this.layoutType.toLowerCase();if("client"==b){this.css.width="100%";this.css.height="100%"}else{if("fitreport"==b){this.css.width="100%";this.css.height="100%"}else{this.css.width=this.width+"px";this.css.height=this.height+"px"}}var a=this._reportProcessing;if(a&&a.layer){a.center()}};bobj.crv.PromptPage.addChild=function(a){if(a.widgetType=="ReportProcessingUI"){this._reportProcessing=a}};if(typeof(bobj.crv.FlexPromptPage)=="undefined"){bobj.crv.FlexPromptPage={}}bobj.crv.newFlexPromptPage=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),layoutType:"fixed",width:800,height:600,padding:5,top:0,left:0},a);var b=newWidget(a.id);b.widgetType="FlexPromptPage";b._reportProcessing=null;bobj.fillIn(b,a);b.initOld=b.init;MochiKit.Base.update(b,bobj.crv.FlexPromptPage);return b};bobj.crv.FlexPromptPage.setHTML=function(a){};bobj.crv.FlexPromptPage.getHTML=function(){var b=bobj.isBorderBoxModel();var k=this.height+this.topMargin+this.bottomMargin;var l=this.width+this.leftMargin+this.rightMargin;var q=b?k:this.height;var a=b?l:this.width;var g=this.layoutType.toLowerCase()==bobj.crv.Viewer.LayoutTypes.FIXED;var f={position:"relative",width:g?a+"px":"100%",height:g?q+"px":"100%",top:this.top+"px",left:this.left+"px",border:"none","z-index":1,"background-color":this.bgColor};var n={padding:this.padding+"px",position:"absolute"};bobj.crv.params.FlexParameterUI.setViewerLayoutType(this.id,this.layoutType);var m=bobj.html;return m.DIV({id:this.id,style:f},m.DIV({id:this.id+"_page",style:n},m.DIV({id:this.contentId})))};bobj.crv.FlexPromptPage.init=function(){var a=MochiKit.Signal.connect;if(this.layoutType.toLowerCase()=="client"){a(window,"onresize",this,"_doLayout")}this._doLayout()};bobj.crv.FlexPromptPage._doLayout=function(){var a=this._reportProcessing;if(a&&a.layer){a.center()}};bobj.crv.FlexPromptPage.addChild=function(a){if(a.widgetType=="ReportProcessingUI"){this._reportProcessing=a}};if(typeof bobj.crv.PrintUI=="undefined"){bobj.crv.PrintUI={}}if(typeof bobj.crv.ExportUI=="undefined"){bobj.crv.ExportUI={}}if(typeof bobj.crv.ErrorDialog=="undefined"){bobj.crv.ErrorDialog={}}if(typeof bobj.crv.ReportProcessingUI=="undefined"){bobj.crv.ReportProcessingUI={}}bobj.crv.newPrintUI=function(f){if(!f.id){f=MochiKit.Base.update({id:bobj.uniqueId()},f)}var g=f.submitBtnLabel;if(!g){g=L_bobj_crv_submitBtnLbl}var b=f.infoTitle;if(!b){b=L_bobj_crv_PrintInfoTitle}var a=f.dialogTitle;if(!a){if(f.isActxPrinting){a=L_bobj_crv_ActiveXPrintDialogTitle}else{a=L_bobj_crv_PDFPrintDialogTitle}}var l=f.infoMsg;if(!l){l=L_bobj_crv_PrintInfo1;l+="\n";l+=L_bobj_crv_PrintInfo2}var k=newDialogBoxWidget(f.id+"_dialog",a,250,100,null,bobj.crv.PrintUI._cancel,false);k.actxId=k.id+"_actx";k.actxContainerId=k.id+"_actxdiv";k._processingPrinting=false;k._initOld=k.init;k._showOld=k.show;if(!f.isActxPrinting){k._fromBox=newIntFieldWidget(k.id+"_fromBox",null,null,null,null,true,"",50);k._fromBox.setDisabled=bobj.crv.PrintUI.disabledTextFieldWidget;k._toBox=newIntFieldWidget(k.id+"_toBox",null,null,null,null,true,"",50);k._toBox.setDisabled=bobj.crv.PrintUI.disabledTextFieldWidget;k._submitBtn=newButtonWidget(k.id+"_submitBtn",g,MochiKit.Base.bind(bobj.crv.PrintUI._submitBtnCB,k));k._allRadio=newRadioWidget(k.id+"_allRadio",k.id+"_grp",L_bobj_crv_PrintAllLbl,MochiKit.Base.bind(bobj.crv.PrintUI.disabledPageRange,k,true));k._rangeRadio=newRadioWidget(k.id+"_rangeRadio",k.id+"_grp",L_bobj_crv_PrintPagesLbl,MochiKit.Base.bind(bobj.crv.PrintUI.disabledPageRange,k,false));k._optionsFrame=newFrameZoneWidget(k.id+"_optionsFrame",250);if(!f.isExporting){k._info=newInfoWidget(k.id+"_info",b,null,l,100)}}k.widgetType="PrintUI";bobj.fillIn(k,f);MochiKit.Base.update(k,bobj.crv.PrintUI);return k};bobj.crv.PrintUI.disabledTextFieldWidget=function(a){TextFieldWidget_setDisabled.call(this,a);if(a){MochiKit.DOM.addElementClass(this.layer,"textDisabled")}else{MochiKit.DOM.removeElementClass(this.layer,"textDisabled")}};bobj.crv.PrintUI.disabledPageRange=function(a){if(this._fromBox&&this._toBox){this._fromBox.setDisabled(a);this._toBox.setDisabled(a)}};bobj.crv.PrintUI._submitBtnCB=function(){var b=null;var a=null;if(this._rangeRadio.isChecked()){b=parseInt(this._fromBox.getValue(),10);a=parseInt(this._toBox.getValue(),10);if(!b||!a||(b<0)||(b>a)){alert(L_bobj_crv_PrintPageRangeError);return}}if(this.widgetType=="PrintUI"){MochiKit.Signal.signal(this,"printSubmitted",b,a)}else{MochiKit.Signal.signal(this,"exportSubmitted",b,a,this._comboBox.getSelection().value)}this.show(false)};bobj.crv.PrintUI._getRPSafeURL=function(f){if(!f){return}if(f.indexOf("/")===0){return f}var b=window.location.href;var a=b.lastIndexOf("/");if(a<0){return f}b=b.substring(0,a);return b+"/"+f};bobj.crv.PrintUI._getObjectTag=function(b){var f=[];f.push('<OBJECT width="0" height="0" ID="');f.push(this.actxId);f.push('" CLASSID="CLSID:');f.push(bobj.crv.ActxPrintControl_CLSID);f.push('" CODEBASE="');f.push(this._getRPSafeURL(this.codeBase));f.push("#Version=");f.push(bobj.crv.ActxPrintControl_Version);f.push('" VIEWASTEXT>');f.push('<PARAM NAME="PostBackData" VALUE="');f.push(b);f.push('">');f.push('<PARAM NAME="ServerResourceVersion" VALUE="');f.push(bobj.crv.ActxPrintControl_Version);f.push('">');if(this.lcid){f.push('<PARAM NAME="LocaleID" VALUE="');f.push(this.lcid);f.push('">')}if(this.url){f.push('<PARAM NAME="URL" VALUE="');f.push(this._getRPSafeURL(this.url));f.push('">')}if(this.title){f.push('<PARAM NAME="Title" VALUE="');f.push(this.title);f.push('">')}if(this.maxPage){f.push('<PARAM NAME="MaxPageNumber" VALUE="');f.push(this.maxPage);f.push('">')}if(this.paperOrientation){f.push('<PARAM NAME="PageOrientation" VALUE="');f.push(this.paperOrientation);f.push('">')}if(this.paperSize){f.push('<PARAM NAME="PaperSize" VALUE="');f.push(this.paperSize);f.push('">')}if(this.paperWidth){f.push('<PARAM NAME="PaperWidth" VALUE="');f.push(this.paperWidth);f.push('">')}if(this.paperLength){f.push('<PARAM NAME="PaperLength" VALUE="');f.push(this.paperLength);f.push('">')}if(this.driverName){f.push('<PARAM NAME="PrinterDriverName" VALUE="');f.push(this.driverName);f.push('">')}if(this.useDefPrinter){f.push('<PARAM NAME="UseDefaultPrinter" VALUE="');f.push(this.useDefPrinter);f.push('">')}if(this.useDefPrinterSettings){f.push('<PARAM NAME="UseDefaultPrinterSettings" VALUE="');f.push(this.useDefPrinterSettings);f.push('">')}if(this.sendPostDataOnce){f.push('<PARAM NAME="SendPostDataOnce" VALUE="');f.push(this.sendPostDataOnce);f.push('">')}f.push("</OBJECT>");f.push('<table id="');f.push(this.actxId);f.push('_wait" border="0" cellspacing="0" cellpadding="0" width="100%" ><tbody>');f.push('<tr><td align="center" valign="top">');var k=this;var g=k.getContainerWidth()-10;var a=k.getContainerHeight()-(2*k.pad+21+10);f.push('<table class="waitdialogzone" style="');f.push(sty("width",g));f.push(sty("height",a));f.push('" id="frame_table_');f.push(k.id);f.push('" cellspacing="0" cellpadding="0" border="0"><tbody><tr><td valign="top" class="dialogzone" id="frame_cont_');f.push(k.id);f.push('">');f.push('<table border="0" cellspacing="0" cellpadding="0" width="100%"><tbody>');f.push('<tr><td align="center" style="padding-top:5px;">');f.push(img(_skin+"wait01.gif",200,40));f.push("</td></tr>");f.push('<tr><td align="left" style="padding-left:2px;padding-right:2px;padding-top:5px;">');f.push('<div class="icontext" style="wordWrap:break_word;">');f.push(convStr(L_bobj_crv_PrintControlProcessingMessage,false,true));f.push("</div></td></tr></tbody></table>");f.push("</td></tr></tbody></table>");f.push("</td></tr></tbody></table>");return f.join("")};bobj.crv.PrintUI._cancel=function(){if(this.isActxPrinting){document.getElementById(this.actxContainerId).innerHTML="";this._processingPrinting=false}};bobj.crv.PrintUI._processPrinting=function(){if(!this._processingPrinting){var b=document.getElementById(this.actxId);var a=document.getElementById(this.actxId+"_wait");if(b&&a){b.width="100%";b.height="100%";a.style.display="none"}this._processingPrinting=true}};bobj.crv.PrintUI.show=function(b,a){this._processingPrinting=false;if(b){if(!this.layer){targetApp(this.getHTML());this.init()}if(this.isActxPrinting){document.getElementById(this.actxContainerId).innerHTML=this._getObjectTag(a)}this._showOld(true)}else{if(this.layer){this._showOld(false)}}};bobj.crv.PrintUI.init=function(){this._initOld();if(!this.isActxPrinting){this._fromBox.init();this._toBox.init();this._submitBtn.init();this._optionsFrame.init();this._allRadio.init();this._rangeRadio.init();if(!this.isExporting){this._info.init()}this._allRadio.check(true);this._toBox.setDisabled(true);this._fromBox.setDisabled(true);if(this.widgetType=="ExportUI"){this._initExportList()}}};bobj.crv.PrintUI.getHTML=function(){var a=bobj.html;var f=this;var b=[];b.push(f.beginHTML());if(!this.isActxPrinting){b.push('<table class="dialogzone" border=0 cellpadding=0 cellspacing=2>');b.push("<tr>");b.push('  <td style="padding-top:4px;">');b.push(f._optionsFrame.beginHTML());if(this.widgetType=="ExportUI"){b.push(this._getExportList())}if(_ie){b.push('<label tabIndex="0">'+L_bobj_crv_PrintRangeLbl+"</label>")}else{b.push(L_bobj_crv_PrintRangeLbl)}b.push(f._allRadio.getHTML());b.push(f._rangeRadio.getHTML());b.push('<span style="padding-left:20px">'+L_bobj_crv_PrintFromLbl+"</span>");b.push(f._fromBox.getHTML());b.push('<span style="padding-left:4px">'+L_bobj_crv_PrintToLbl+"</span>");b.push(f._toBox.getHTML());b.push(f._optionsFrame.endHTML());b.push("  </td>");b.push("</tr><tr>");if(!this.isExporting){b.push('  <td style="padding-top:8px;">');b.push(f._info.getHTML());b.push("  </td>");b.push("</tr><tr>")}b.push('  <td align="right" style="padding-top:4px;">');b.push(f._submitBtn.getHTML());b.push("  </td>");b.push("</tr></table>")}else{b.push(a.DIV({id:this.actxContainerId}));b.push('<script for="'+this.actxId+'" EVENT="Finished(status, statusText)" language="javascript">');b.push('getWidgetFromID("'+this.id+'").show(false);');b.push("<\/script>");b.push('<script for="'+this.actxId+'" EVENT="PrintingProgress(pageNumber)" language="javascript">');b.push('getWidgetFromID("'+this.id+'")._processPrinting();');b.push("<\/script>")}b.push(f.endHTML());b.push(bobj.crv.getInitHTML(this.widx));return b.join("")};bobj.crv.newExportUI=function(kwArgs){kwArgs=MochiKit.Base.update({submitBtnLabel:L_bobj_crv_ExportBtnLbl,dialogTitle:L_bobj_crv_ExportDialogTitle,infoTitle:L_bobj_crv_ExportInfoTitle,infoMsg:L_bobj_crv_PrintInfo1,isExporting:true},kwArgs);var o=bobj.crv.newPrintUI(kwArgs);o._comboBox=newCustomCombo(o.id+"_combo",MochiKit.Base.bind(bobj.crv.ExportUI._onSelectFormat,o),false,270,L_bobj_crv_ExportFormatLbl,_skin+"../transp.gif",0,14);if(o._comboBox){o._comboBox.icon.border=0;o._comboBox.icon.h=14;o._comboBox.arrow.h=12;o._comboBox.arrow.dy+=2;o._comboBox.arrow.disDy+=2}o.availableFormats=(o.availableFormats?eval(o.availableFormats):null);var itemsCount=(bobj.isArray(o.availableFormats)?o.availableFormats.length:0);for(var i=0;i<itemsCount;i++){var item=o.availableFormats[i];o._comboBox.add(item.name,item.value,item.isSelected)}o.widgetType="ExportUI";MochiKit.Base.update(o,bobj.crv.ExportUI);return o};bobj.crv.ExportUI._onSelectFormat=function(){var a=this._comboBox.getSelection().value;if(a=="CrystalReports"||a=="RecordToMSExcel"||a=="CharacterSeparatedValues"||a=="XML"){this._fromBox.setDisabled(true);this._toBox.setDisabled(true);this._rangeRadio.check(false);this._rangeRadio.setDisabled(true);this._allRadio.check(true)}else{this._rangeRadio.setDisabled(false)}};bobj.crv.ExportUI._initExportList=function(){if(!this._comboBox.initialized()){this._comboBox.init();var a=this._comboBox.getItemByIndex(0);if(a!=null){this._comboBox.selectItem(a)}}this._onSelectFormat()};bobj.crv.ExportUI._getExportList=function(){var a=L_bobj_crv_ExportFormatLbl;if(_ie){a='<label tabIndex="0">'+L_bobj_crv_ExportFormatLbl+"</label>"}return a+this._comboBox.getHTML()};bobj.crv.ErrorDialog.getInstance=function(){if(!bobj.crv.ErrorDialog.__instance){bobj.crv.ErrorDialog.__instance=bobj.crv.newErrorDialog()}return bobj.crv.ErrorDialog.__instance};bobj.crv.newErrorDialog=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),title:L_bobj_crv_Error,text:null,detailText:null,okLabel:L_bobj_crv_OK,promptType:_promptDlgCritical},a);var b=newPromptDialog(a.id,a.title,a.text,a.okLabel,null,a.promptType,null,null,true);b.widgetType="ErrorDialog";bobj.fillIn(b,a);b._promptDlgInit=b.init;b._promptDialogSetText=b.setText;b._promptDialogShow=b.show;b._promptDialogSetTitle=b.setTitle;b._promptDialogSetPromptType=b.setPromptType;MochiKit.Base.update(b,bobj.crv.ErrorDialog);b.noCB=MochiKit.Base.bind(b._onClose,b);b.yesCB=b.noCB;b._detailBtn=newIconWidget(b.id+"_detailBtn",bobj.skinUri("../help.gif"),MochiKit.Base.bind(bobj.crv.ErrorDialog._onDetailBtnClick,b),L_bobj_crv_showDetails,null,16,16,0,0,22,0);return b};bobj.crv.ErrorDialog.init=function(){this._promptDlgInit();this._detailBtn.init();this._detailRow=document.getElementById(this.id+"_detRow");this._detailArea=document.getElementById(this.id+"_detArea");if(!this.detailText){this._detailBtn.show(false)}};bobj.crv.ErrorDialog.getHTML=function(){var q=bobj.html.TABLE;var b=bobj.html.TBODY;var k=bobj.html.TR;var s=bobj.html.TD;var u=bobj.html.PRE;var n=bobj.html.DIV;var r=PromptDialog_getimgPath(this.promptType);var l=PromptDialog_getimgAlt(this.promptType);var a="320";var g="300px";var m="100px";var f=q({"class":"dialogzone",width:a,cellpadding:"0",cellspacing:"5",border:"0"},b(null,k(null,s(null,q({"class":"dialogzone",cellpadding:"5",cellspacing:"0",border:"0"},b(null,k(null,s({align:"right",width:"32"},img(r,32,32,null,'id="dlg_img_'+this.id+'"',l)),s(),s({id:"dlg_txt_"+this.id,align:"left",tabindex:"0"},convStr(this.text,false,true))))))),k({id:this.id+"_detRow",style:{display:"none"}},s(null,n({"class":"infozone",style:{width:g,height:m,overflow:"auto"}},u({id:this.id+"_detArea"},this.detailText)))),k(null,s(null,getSep())),k(null,s(null,q({cellpadding:"5",cellspacing:"0",border:"0",width:"100%"},b(null,k(null,s({align:"left"},this._detailBtn.getHTML()),s({align:"right"},this.yes.getHTML()))))))));return this.beginHTML()+f+this.endHTML()};bobj.crv.ErrorDialog.setText=function(f,a){this.text=f;this.detailText=a;if(this.layer){this._promptDialogSetText(f||"");if(this._detailArea){this._detailArea.innerHTML=a||""}var b=a?true:false;this._detailBtn.show(b);if(!b){this.showDetails(false)}}};bobj.crv.ErrorDialog.setTitle=function(a){this.title=a;if(this.layer){this._promptDialogSetTitle(a||"")}};bobj.crv.ErrorDialog.setPromptType=function(a){this.promptType=a;if(this.layer){this._promptDialogSetPromptType(a)}};bobj.crv.ErrorDialog.show=function(a,b){if(typeof a=="undefined"){a=true}if(a){this._closeCB=b;if(!this.layer){targetApp(this.getHTML());this.init()}this.layer.onkeyup=DialogBoxWidget_keypress;DialogBoxWidget_keypress=MochiKit.Base.noop;this._promptDialogShow(true)}else{if(this.layer){this._closeCB=null;this._promptDialogShow(false)}}};bobj.crv.ErrorDialog.showDetails=function(a){if(typeof a=="undefined"){a=true}if(this._detailRow&&this._detailBtn){if(a){this._detailRow.style.display="";this._detailBtn.changeText(L_bobj_crv_hideDetails)}else{this._detailRow.style.display="none";this._detailBtn.changeText(L_bobj_crv_showDetails)}}};bobj.crv.ErrorDialog._onDetailBtnClick=function(){if(this._detailRow){this.showDetails(this._detailRow.style.display=="none")}};bobj.crv.ErrorDialog._onClose=function(){if(this._closeCB){this._closeCB();this._closeCB=null}DialogBoxWidget_keypress=this.layer.onkeyup;this.layer.onkeyup=null};bobj.crv.newReportProcessingUI=function(b){b=MochiKit.Base.update({id:bobj.uniqueId(),delay:3000,message:L_bobj_crv_ReportProcessingMessage},b);var g=document.createElement("div");g.style.visibility="hidden";g.innerHTML=b.message;var a=g.innerHTML;g=null;var f=newWaitDialogBoxWidget(b.id,0,0,"",true,bobj.crv.ReportProcessingUI.cancelCB,true,a);f.widgetType="ReportProcessingUI";f.delay=b.delay;MochiKit.Base.update(f,bobj.crv.ReportProcessingUI);return f};bobj.crv.reportProcessingDialog=null;bobj.crv.timerID=null;bobj.crv.ReportProcessingUI.cancelCB=function(){bobj.crv.reportProcessingDialog.cancelled=true;if(bobj.crv.reportProcessingDialog.deferred!==null){bobj.crv.reportProcessingDialog.deferred.cancel()}bobj.crv.reportProcessingDialog.cancelShow()};bobj.crv.ReportProcessingUI.wasCancelled=function(){return bobj.crv.reportProcessingDialog.cancelled};bobj.crv.ReportProcessingUI.delayedShow=function(a){if(bobj.crv.reportProcessingDialog!==null){bobj.crv.reportProcessingDialog.cancelShow()}if(!this.layer){targetApp(this.getHTML());this.init()}this.cancelled=false;this.deferred=null;this.setShowCancel(a,a?this.cancelCB:null);bobj.crv.reportProcessingDialog=this;bobj.crv.timerID=setTimeout("bobj.crv._showReportProcessingDialog ()",bobj.crv.reportProcessingDialog.delay)};bobj.crv.ReportProcessingUI.cancelShow=function(){if(bobj.crv.timerID){clearTimeout(bobj.crv.timerID)}if(bobj.crv.reportProcessingDialog){bobj.crv.reportProcessingDialog.show(false)}bobj.crv.reportProcessingDialog=null;bobj.crv.timerID=null};bobj.crv.ReportProcessingUI.setDeferred=function(a){bobj.crv.reportProcessingDialog.deferred=a;if(bobj.crv.reportProcessingDialog.wasCancelled()===true){a.cancel()}};bobj.crv._showReportProcessingDialog=function(){if(bobj.crv.reportProcessingDialog&&bobj.crv.reportProcessingDialog.delay!==0){bobj.crv.logger.info("ShowReportProcessingDialog");bobj.crv.reportProcessingDialog.show(true)}};if(typeof(bobj.crv.StackedPanel)=="undefined"){bobj.crv.StackedPanel={}}if(typeof(bobj.crv.StackedTab)=="undefined"){bobj.crv.StackedTab={}}bobj.crv.newStackedPanel=function(b){var k=MochiKit.Base;var g=k.update;var a=k.bind;b=g({id:bobj.uniqueId(),width:null,height:null,isAnimated:true},b);var f=newWidget(b.id);f.widgetType="StackedPanel";bobj.fillIn(f,b);f._tabs=[];f._initWidget=f.init;f._resizeWidget=f.resize;g(f,bobj.crv.StackedPanel);f._onTabCollapse=a(f._onTabCollapse,f);f._onTabExpand=a(f._onTabExpand,f);return f};bobj.crv.StackedPanel.init=function(){this._initWidget();var g=this._tabs;var b=this._numTabsWritten;while(b<g.length){append(this.layer,g[b].getHTML(),document);b++}for(var f=0,a=g.length;f<a;++f){g[f].init()}};bobj.crv.StackedPanel.getHTML=function(){var b=bobj.html.DIV;var a={overflow:"auto",position:"relative"};if(this.height){a.height=bobj.unitValue(this.height)}if(this.width){a.width=bobj.unitValue(this.width)}return b({id:this.id,style:a,tabIndex:"-1"},this._getTabsHTML())};bobj.crv.StackedPanel._getTabsHTML=function(){var f="";var b=this._tabs;var g=b.length;for(var a=0;a<g;++a){f+=b[a].getHTML()}this._numTabsWritten=g;return f};bobj.crv.StackedPanel.addTab=function(a){if(a){a.collapseCB=this._onTabCollapse;a.expandCB=this._onTabExpand;this._tabs.push(a);if(this.layer){append(this.layer,a.getHTML());a.init()}}};bobj.crv.StackedPanel.getNumTabs=function(){return this._tabs.length};bobj.crv.StackedPanel.getTab=function(a){return this._tabs[a]};bobj.crv.StackedPanel.removeTab=function(a){if(a>=0&&a<this._tabs.length){var b=this._tabs[a];this._tabs.splice(a,1);delete _widgets[this._tabs.widx];if(b.layer){b.layer.parentNode.removeChild(b.layer)}}};bobj.crv.StackedPanel.resize=function(a,l){var f=!_saf;bobj.setOuterSize(this.layer,a,l,f);var k=this._tabs;var m=k.length;if(m){var b=this.layer.clientWidth;k[0].resize(b);if(b!=this.layer.clientWidth){b=this.layer.clientWidth;k[0].resize(b)}for(var g=1;g<m;++g){k[g].resize(b)}}};bobj.crv.StackedPanel._onTabCollapse=function(a){this.resize()};bobj.crv.StackedPanel._onTabExpand=function(a){this.resize()};bobj.crv.newStackedTab=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId(),label:"",width:300,height:null,isAnimated:true,expandCB:null,openAdvCB:null,selectCB:null,collapseCB:null,expandImgPos:"right"},a);var b=newWidget(a.id);b.widgetType="StackedTab";bobj.fillIn(b,a);b._content=null;b._leftIcons=[];b._rightIcons=[];b._IMG_WIDTH=16;b._IMG_HEIGHT=16;b._ICON_WIDTH=20;b._initWidget=b.init;b._resizeWidget=b.resize;f(b,bobj.crv.StackedTab);return b};bobj.crv.StackedTab.init=function(){var a=MochiKit.Signal.connect;this._initWidget();if(this._content){this._content.init()}this._labelCtn=document.getElementById(this.id+"_labelCtn");this._textCtn=document.getElementById(this.id+"_textCtn");this._expandCtn=document.getElementById(this.id+"_expandCtn");this._expandImg=document.getElementById(this.id+"_expand");this._contentCtn=document.getElementById(this.id+"_contentCtn");if(this.openAdvCB){a(this._labelCtn,"ondblclick",this.openAdvCB)}if(this.selectCB){a(this._labelCtn,"onclick",this.selectCB)}this.setMinMaxIconToolTip()};bobj.crv.StackedTab.getHTML=function(){var m=bobj.html.DIV;var l={width:this.width+"px",overflow:"hidden"};var a={id:this.id+"_labelCtn","class":"stackedTabLabel crvnoselect thumbtxt "};var g={id:this.id+"_expandCtn",onclick:"bobj.crv.StackedTab._onExpandClick('"+this.id+"')","class":"stackedTabIconCtn",style:{cursor:"pointer"}};if(this.expandImgPos==="left"){g.style.left="0px"}else{g.style.right="-1px"}var k=this._content?this._content.getHTML():"";var f=this._IMG_WIDTH;var n=this._IMG_HEIGHT;var b=m({id:this.id,style:l},m(a,m(g,imgOffset(bobj.crvUri("images/param_panel.gif"),f,n,f,16,this.id+"_expand")),m({"class":"stackedTabText",style:this._getTextCtnStyle(),id:this.id+"_textCtn"},this.label),this._getIconsHtml(this._leftIcons,true)+this._getIconsHtml(this._rightIcons,false)),m({id:this.id+"_contentCtn"},k));return b};bobj.crv.StackedTab.setMinMaxIconToolTip=function(){var l=this._rightIcons;for(var g=0,a=l.length;g<a;g++){var f=l[g].id;var b=l[g].tooltip;if(f.indexOf("_icnInfo")>=0){var k=getLayer(f);this._setIconTooltip(k,b)}}};bobj.crv.StackedTab._setIconTooltip=function(a,b){if(a!==null&&b!==null){bobj.crv.Tooltip.setElementTooltip(a,b)}};bobj.crv.StackedTab._getIconsHtml=function(g,n){var m=bobj.html.DIV;var l="";for(var f=0,b=g.length;f<b;++f){var k=g[f];var a=(k.id.indexOf("_icnInfo")>=0)?true:false;l+=m({id:k.id,"class":"stackedTabIconCtn",style:this._getIconCtnStyle(k,n,f)},imgOffset(k.url,this._IMG_WIDTH,this._IMG_HEIGHT,k.dx,k.dy,null,null,(a?null:k.tooltip)))}return l};bobj.crv.StackedTab._countVisibleIcons=function(b){var a=MochiKit.Base.filter(function(f){return f.isVisible},b);return a.length};bobj.crv.StackedTab._getIconCtnStyle=function(f,l,a){var g=l?this._leftIcons:this._rightIcons;var k=this._countVisibleIcons(bobj.slice(g,0,a))*this._ICON_WIDTH-1;var b={display:f.isVisible?"block":"none"};if(l){if(this.expandImgPos==="left"){k+=this._ICON_WIDTH}b.left=k+"px"}else{if(this.expandImgPos==="right"){k+=this._ICON_WIDTH}b.right=k+"px"}return b};bobj.crv.StackedTab._getTextCtnStyle=function(b){var k=0;var a=0;var g=this._ICON_WIDTH;if(this.expandImgPos==="left"){k+=g}else{a+=g}k+=this._countVisibleIcons(this._leftIcons)*g;a+=this._countVisibleIcons(this._rightIcons)*g;k=Math.max(k,2);a=Math.max(a,2);var f={};if(b){f.marginLeft=k+"px";f.marginRight=a+"px"}else{f["margin-left"]=k+"px";f["margin-right"]=a+"px"}if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){f.width="100%"}return f};bobj.crv.StackedTab.addIcon=function(g,f,b,l,n,a,m){m=m||bobj.uniqueId();var k={url:g,dx:f,dy:b,tooltip:l,isVisible:a,id:m};if(n){this._leftIcons.push(k)}else{this._rightIcons.push(k)}return m};bobj.crv.StackedTab._findIcon=function(k){var g=this._leftIcons;do{for(var b=0,a=g.length;b<a;++b){var f=g[b];if(f.id==k){return f}}g=(g===this._leftIcons)?this._rightIcons:null}while(g);return null};bobj.crv.StackedTab.showIcon=function(g){var b=this._findIcon(g);if(b){b.isVisible=true;var f=document.getElementById(g);if(f){var a=f.style.display!="block";f.style.display="block";if(a){this._paintLabel()}}}};bobj.crv.StackedTab.isIconShowing=function(b){var a=this._findIcon(b);if(a){return a.isVisible}return false};bobj.crv.StackedTab.hideIcon=function(g){var b=this._findIcon(g);if(b){b.isVisible=false;var f=document.getElementById(g);if(f){var a=f.style.display!="none";f.style.display="none";if(a){this._paintLabel()}}}};bobj.crv.StackedTab.setIconTooltip=function(g,b){var a=this._findIcon(g);if(a){a.tooltip=b;var f=document.getElementById(g);if(f){f.title=b}}};bobj.crv.StackedTab._paintLabel=function(){var g=this._leftIcons;do{for(var b=0,a=g.length;b<a;++b){var f=g[b];var k=document.getElementById(f.id);if(k){MochiKit.Base.update(k.style,this._getIconCtnStyle(f,g===this._leftIcons,b))}}g=(g===this._leftIcons)?this._rightIcons:null}while(g);MochiKit.Base.update(this._textCtn.style,this._getTextCtnStyle(true))};bobj.crv.StackedTab.resize=function(a){if(this._labelCtn){var b=!_saf;bobj.setOuterSize(this._labelCtn,a,b)}if(this._content){this._content.resize(a)}bobj.setOuterSize(this.layer,a)};bobj.crv.StackedTab.setContent=function(a){this._content=a};bobj.crv.StackedTab.getContent=function(){return this._content};bobj.crv.StackedTab.expand=function(){if(!this.isExpanded()){changeOffset(this._expandImg,16,16);var a=MochiKit.Base.partial(this.expandCB||MochiKit.Base.noop,this);if(this.isAnimated){var b={duration:0.2,afterFinish:a};if(MochiKit.Base.isIE()){b.restoreAfterFinish=false;b.scaleContent=true}MochiKit.Visual.blindDown(this._contentCtn,b);this.resize()}else{this._contentCtn.style.display="";this.resize();a()}}};bobj.crv.StackedTab.isExpanded=function(){return this._contentCtn.style.display!="none"};bobj.crv.StackedTab.collapse=function(){changeOffset(this._expandImg,0,16);var a=MochiKit.Base.partial(this.collapseCB||MochiKit.Base.noop,this);if(this.isAnimated){MochiKit.Visual.blindUp(this._contentCtn,{duration:0.2,afterFinish:a,scaleContent:true})}else{this._contentCtn.style.display="none";a()}};bobj.crv.StackedTab._onExpandClick=function(b){var a=getWidgetFromID(b);if(a.isExpanded()){a.collapse()}else{a.expand()}};bobj.crv.StackedTab._onMouseOver=function(b){var a=getWidgetFromID(b);MochiKit.DOM.addElementClass(a._labelCtn,"stackedTabLabelHover")};bobj.crv.StackedTab._onMouseOut=function(b){var a=getWidgetFromID(b);MochiKit.DOM.removeElementClass(a._labelCtn,"stackedTabLabelHover")};if(!MochiKit.Visual.Scale.prototype._crvSetDimensions){MochiKit.Visual.Scale.prototype._crvSetDimensions=MochiKit.Visual.Scale.prototype.setDimensions;MochiKit.Visual.Scale.prototype.setDimensions=function(a,b){a=Math.round(a)||1;b=Math.round(b)||1;MochiKit.Visual.Scale.prototype._crvSetDimensions.call(this,a,b)}}bobj.crv.Tooltip={show:function(f,a,g,b){b=MochiKit.Base.update({delay:0.5,duration:0.5,aspect:2,wrapThreshold:200},b);this._options=b;this._tipHtml=f;this._x=a;this._y=g;if(!this._layer){this._createLayer();this._delayedShow=MochiKit.Base.bind(this._delayedShow,this);this._delayedHide=MochiKit.Base.bind(this._delayedHide,this)}clearTimeout(this._timeoutId);this._timeoutId=setTimeout(this._delayedShow,b.delay*1000)},_delayedShow:function(){if(this._effect){this._effect.cancel()}var a=this._layer.style;if(!this._options._fastShow){if(bobj.isString(this._tipHtml)){this._layer.firstChild.innerHTML=this._tipHtml}this._resize();bobj.placeElement(this._layer,this._x,this._y,false,false)}a.visibility="visible";this._effect=MochiKit.Visual.appear(this._layer,{duration:this._options.duration})},hide:function(a){if(this._layer){this._options=MochiKit.Base.update(this._options,a);clearTimeout(this._timeoutId);this._timeoutId=setTimeout(this._delayedHide,this._options.delay*1000)}},_delayedHide:function(){if(this._effect){this._effect.cancel()}var a=this._layer;this._effect=MochiKit.Visual.fade(a,{duration:this._options.duration,afterFinish:function(){a.style.visibility="hidden"},afterFinishInternal:null})},_elementConnections:{},setElementTooltip:function(g,k,f){var m=MochiKit.Signal.connect;if(g){if(g.bobj_crv_tooltip_id){this.removeElementTooltip(g)}else{g.bobj_crv_tooltip_id=bobj.uniqueId()}var a=[];this._elementConnections[g.bobj_crv_tooltip_id]=a;var l=function(q){var n=q.mouse().page;bobj.crv.Tooltip.show(k,n.x,n.y,f)};var b=function(n){bobj.crv.Tooltip.hide(f)};a.push(m(g,"onmouseover",l));a.push(m(g,"onmouseout",b))}},removeElementTooltip:function(f){if(f&&f.bobj_crv_tooltip_id){var b=this._elementConnections[f.bobj_crv_tooltip_id];if(b){for(var g=0,a=b.length;g<a;++g){MochiKit.Signal.disconnect(b[g])}delete this._elementConnections[f.bobj_crv_tooltip_id]}}},_createLayer:function(){var g=MochiKit.Signal.connect;var b=MochiKit.DOM.DIV;this._layer=b({"class":"crvTooltip",style:"visibility:hidden, position:absolute; display:block; top:0px; left:0px"},b(null,"&nbsp;"));MochiKit.DOM.setOpacity(this._layer,0);document.body.appendChild(this._layer);var f=function(k){if(bobj.crv.Tooltip._effect){bobj.crv.Tooltip.show(null,null,null,MochiKit.Base.update({_fastShow:true},bobj.crv.Tooltip._options))}};var a=function(k){bobj.crv.Tooltip.hide(bobj.crv.Tooltip._options)};g(this._layer,"onmouseover",f);g(this._layer,"onmouseout",a)},_resize:function(){var n=this._layer;var f=n.style;var q=n.firstChild;var a=this._options.aspect;var r=this._options.wrapThreshold;var k=f.left;f.visibility="hidden";f.left="-"+r+"px";f.width=null;f.height=null;if(q.offsetWidth>r){var l=parseInt(MochiKit.Style.computedStyle(n,"padding-top"),10)||0;l+=parseInt(MochiKit.Style.computedStyle(n,"padding-bottom"),10)||0;var m=parseInt(MochiKit.Style.computedStyle(n,"padding-left"),10)||0;m+=parseInt(MochiKit.Style.computedStyle(n,"padding-right"),10)||0;f.width="1px";f.width=(q.offsetWidth+m)+"px";q.innerHTML+="";var g=q.offsetWidth*q.offsetHeight;var s=Math.ceil(Math.sqrt(g/a));var b=s*a;f.height=s+l+"px";f.width=b+"px";while(q.offsetWidth>n.clientWidth||q.offsetHeight>n.clientHeight){s+=5;b=s*a;f.height=s+"px";f.width=b+"px"}}f.left=k||null}};if(typeof bobj.crv.params=="undefined"){bobj.crv.params={};bobj.crv.params.DataTypes={DATE:"d",DATE_TIME:"dt",TIME:"t",STRING:"s",NUMBER:"n",CURRENCY:"c",BOOLEAN:"b"};bobj.crv.params.RangeBoundTypes={UNBOUNDED:0,EXCLUSIVE:1,INCLUSIVE:2};bobj.crv.params.DefaultDisplayTypes={Description:0,DescriptionAndValue:1};bobj.crv.params.CompareResults={TOO_BIG:1,TOO_SMALL:-1,EQUAL:0}}bobj.crv.params.Parameter=function(b){var f=bobj.crv.params;var a=f.DefaultDisplayTypes;MochiKit.Base.update(this,{paramName:null,reportName:null,description:null,valueDataType:null,value:null,modifiedValue:null,defaultValues:null,defaultDisplayType:a.DescriptionAndValue,maxValue:null,minValue:null,allowCustomValue:true,allowDiscreteValue:true,allowMultiValue:false,allowNullValue:false,allowRangeValue:false,editMask:null,isOptionalPrompt:false,isEditable:true,isHidden:false,isDataFetching:false,attributes:null},b);this.valueCounter=new f.ValueCounter(this.value,this.valueDataType)};bobj.crv.params.Parameter.prototype={getTitle:function(){return(this.description||this.paramName)},hasLOV:function(){return(this.defaultValues&&this.defaultValues.length)},isPassword:function(){return(this.editMask!==null&&this.editMask.toLowerCase()=="password")},getValue:function(){this._initModifiedValue();return this.modifiedValue},removeValueAt:function(a){this._initModifiedValue();var b=this.modifiedValue[a];this.modifiedValue.splice(a,1);this.valueCounter.reduceCount(b)},setValue:function(b,g){this._initModifiedValue();if(arguments.length==1&&bobj.isArray(arguments[0])){var f=arguments[0];this.modifiedValue=f;this.valueCounter.resetValue(f)}else{if(arguments.length==2){var a=this.modifiedValue[b];this.modifiedValue[b]=g;this.valueCounter.reduceCount(a);this.valueCounter.addCount(g)}}},clearValue:function(){this._initModifiedValue();this.modifiedValue=[]},commitValue:function(){this._initModifiedValue();this.value=this.modifiedValue.slice(0)},_initModifiedValue:function(){if(!this.modifiedValue){if(bobj.isArray(this.value)){this.modifiedValue=this.value.slice(0)}else{this.modifiedValue=[]}}},addDuplicateValuesCB:function(b,a){this.valueCounter.addCallBacks(b,a)},isDCP:function(){if(this.attributes!=null){if(this.attributes.IsDCP===true){return true}}return false}};bobj.crv.params.Validator=function(){};bobj.crv.params.Validator.ValueStatus={OK:0,ERROR:1,VALUE_MISSING:2,VALUE_INVALID_TYPE:3,VALUE_TOO_LONG:4,VALUE_TOO_SHORT:5,VALUE_TOO_BIG:6,VALUE_TOO_SMALL:7,VALUE_DUPLICATE:8};bobj.crv.params.Validator.getInstance=function(){if(!bobj.crv.params.Validator.__instance){bobj.crv.params.Validator.__instance=new bobj.crv.params.Validator()}return bobj.crv.params.Validator.__instance};bobj.crv.params.Validator.prototype={validateParameter:function(n){var m=bobj.crv.params;if(!n){return null}var b=m.Validator.ValueStatus;if(!bobj.isArray(n.value)||!n.value.length){return{isValid:false,reason:b.VALUE_MISSING}}var l=true;var k=[];for(var g=0,a=n.values.length;g<a;++g){var f=m.validateValue(n,g);k.push(f);l=l&&(f===ValueStatus.OK)}return{isValid:l,statusList:k}},validateValue:function(g,b){var a=bobj.crv.params.Validator.ValueStatus;if(!g||!bobj.isArray(g.value)||(b===undefined)){return a.ERROR}var f=this._getTypeValidatorFunc(g.valueDataType);if(!f){return a.ERROR}return f(g,b)},_getTypeValidatorFunc:function(b){var a=bobj.crv.params.DataTypes;switch(b){case a.STRING:return this._validateString;case a.NUMBER:case a.CURRENCY:return this._validateNumber;case a.DATE:case a.TIME:case a.DATE_TIME:return this._validateDateTime;case a.BOOLEAN:return this._validateBoolean;default:return null}},_validateString:function(k,f){var a=bobj.crv.params.Validator.ValueStatus;if(!bobj.isString(f)){return a.VALUE_INVALID_TYPE}var g=k.maxValue;var b=k.minValue;if(bobj.isNumber(g)&&f.length>g){return a.VALUE_TOO_LONG}if(bobj.isNumber(b)&&f.length<b){return a.VALUE_TOO_SHORT}return a.OK},_validateNumber:function(l,g){var a=bobj.crv.params.Validator.ValueStatus;var b=/^(\+|-)?(\d+(\.\d+)?|\.\d+)$/;if(bobj.isString(g)&&b.test(g)){g=parseFloat(g)}else{if(!bobj.isNumber(g)){return a.VALUE_INVALID_TYPE}}var k=l.maxValue;var f=l.minValue;if(k!==null&&g>k){return a.VALUE_TOO_BIG}else{if(f!==null&&g<f){return a.VALUE_TOO_SMALL}else{return a.OK}}},_validateDateTime:function(k,g){var l=bobj.crv.params.CompareResults;var a=bobj.crv.params.Validator.ValueStatus;if(bobj.isObject(g)){var b=function(m){return bobj.isNumber(g[m])};if(MochiKit.Iter.every(["d","m","y","h","min","s","ms"],b)){var f=bobj.crv.params.getDateCompareFunc(k.valueDataType);if(k.minValue&&f(k.minValue,g)==l.TOO_BIG){return a.VALUE_TOO_SMALL}else{if(k.maxValue&&f(k.maxValue,g)==l.TOO_SMALL){return a.VALUE_TOO_BIG}else{return a.OK}}}}return a.VALUE_INVALID_TYPE},_validateBoolean:function(b,a){return bobj.crv.params.Validator.ValueStatus.OK}};bobj.crv.params.dateToJson=function(a){return{d:a.getDate(),m:a.getMonth(),y:a.getFullYear(),h:a.getHours(),min:a.getMinutes(),s:a.getSeconds(),ms:a.getMilliseconds()}};bobj.crv.params.getDateCompareFunc=function(b){var f=bobj.crv.params;var a=f.DataTypes;switch(b){case a.DATE:return f.compareDate;case a.TIME:return f.compareTime;case a.DATE_TIME:return f.compareDateTime;default:return null}};bobj.crv.params.compareDateTime=function(b,a){var k=bobj.crv.params;var l=k.CompareResults;var g=k.compareDate(b,a);var f=k.compareTime(b,a);if(g==l.EQUAL&&f==l.EQUAL){return l.EQUAL}if(g!=l.EQUAL){return g}else{return f}};bobj.crv.params.compareDate=function(b,a){var f=bobj.crv.params.CompareResults;if(b.d==a.d&&b.m==a.m&&b.y==a.y){return f.EQUAL}if(b.y>a.y){return f.TOO_BIG}else{if(b.y<a.y){return f.TOO_SMALL}}if(b.m>a.m){return f.TOO_BIG}else{if(b.m<a.m){return f.TOO_SMALL}}if(b.d>a.d){return f.TOO_BIG}else{if(b.d<a.d){return f.TOO_SMALL}}};bobj.crv.params.compareTime=function(b,a){var f=bobj.crv.params.CompareResults;if(b.h==a.h&&b.min==a.min&&b.s==a.s&&b.ms==a.ms){return f.EQUAL}if(b.h>a.h){return f.TOO_BIG}else{if(b.h<a.h){return f.TOO_SMALL}}if(b.min>a.min){return f.TOO_BIG}else{if(b.min<a.min){return f.TOO_SMALL}}if(b.s>a.s){return f.TOO_BIG}else{if(b.s<a.s){return f.TOO_SMALL}}if(b.ms>a.ms){return f.TOO_BIG}else{if(b.ms<a.ms){return f.TOO_SMALL}}};bobj.crv.params.jsonToDate=function(b){var a=new Date();if(b){a.setFullYear(b.y||0,b.m||0,b.d||1);a.setHours(b.h||0);a.setMinutes(b.min||0);a.setSeconds(b.s||0);a.setMilliseconds(b.ms||0)}return a};bobj.crv.params.ValueCounter=function(a,b){this.values={};this.valueDataType=b;this.valueHasDupCB=null;this.valueNoDupCB=null;this.resetValue(a)};bobj.crv.params.ValueCounter.prototype={addCallBacks:function(a,b){this.valueHasDupCB=a;this.valueNoDupCB=b},addCount:function(a){if(a!==null&&a!==undefined&&a.beginValue===undefined){var b=bobj.getValueHashCode(this.valueDataType,a);if(this.values[b]!==null&&this.values[b]!==undefined){this.values[b]+=1;if(this.valueHasDupCB&&this.values[b]>1){this.valueHasDupCB(a)}}else{this.values[b]=1}}},reduceCount:function(a){if(a!==null&&a!==undefined&&a.beginValue===undefined){var b=bobj.getValueHashCode(this.valueDataType,a);this.values[b]-=1;if(this.valueNoDupCB&&this.values[b]==1){this.valueNoDupCB(a)}}},resetValue:function(g){if(this.valueNoDupCB){this.valueNoDupCB()}for(var b in this.values){if(this.values[b]>0){this.values[b]=0}}if(bobj.isArray(g)){for(var f=0,a=g.length;f<a;f++){this.addCount(g[f])}}else{this.addCount(g)}}};bobj.crv.params.ParameterController=function(b,k,a){this._panel=b;this._viewerCtrl=k;this._paramOpts=a;this._paramList=null;this._selected=null;this._selectedValueIdx=null;this._disablePanel=false;var f=MochiKit.Base.bind(this._onClickTbDeleteButton,this);var g=MochiKit.Base.bind(this._onClickTbApplyButton,this);this._panel.setToolbarCallBacks(f,g)};bobj.crv.params.ParameterController.prototype={setParameters:function(A){var a=bobj.crv.params.DataTypes;var b=MochiKit.Base.map;var s=MochiKit.Base.bind;this._deleteWidgets();this._paramList=A;this._selected=null;this._selectedValueIdx=null;for(var n=0;n<A.length;++n){var k=A[n];var v=s(this._onParamHasDupValue,this,k);var y=s(this._onParamHasNoDupValue,this,k);k.addDuplicateValuesCB(v,y);var u=s(this._getDisplayText,this,k);var l=s(this._getDefaultValue,this,k.valueDataType,k.defaultDisplayType);var m=this._canPanelChangeValues(k);var x=this._getMinMaxText(k.valueDataType,k.minValue,k.maxValue);var z=MochiKit.Base.bind(this._onClickTbAdvButton,this);var q=!k.isEditable;var g=k.getValue();var r=this._viewerCtrl.getCurrentView();if(r&&!r.isMainReport()){this._disablePanel=true;q=true;m=false}if(k.allowNullValue==true&&g!=null&&g.length==1&&g[0]==null){g=[]}var f=bobj.crv.params.newParameterUI({values:b(u,g),canChangeOnPanel:m,allowCustom:k.allowCustomValue,canAddValues:k.allowMultiValue&&m,isReadOnlyParam:q,isPassword:k.isPassword(),valueRequired:(!k.isOptionalPrompt&&!k.allowNullValue),defaultValues:b(l,k.defaultValues||[]),hasRowButtons:k.allowCustomValue&&m&&(k.valueDataType===a.DATE||k.valueDataType===a.DATE_TIME),rowButtonsUrl:bobj.crvUri("images/calendar.gif"),openAdvDialogCB:z,maxNumParameterDefaultValues:this._paramOpts.maxNumParameterDefaultValues,tooltip:k.getTitle()});this._observeParamWidget(f);this._panel.addParameter({paramUI:f,label:k.getTitle(),isDataFetching:k.isDataFetching,isReadOnly:!k.isEditable,isDirty:false,selectCB:s(this._onSelectValue,this,f,0),openAdvCB:q?null:z,minMaxTooltip:x})}this._panel.resize()},getParameters:function(){return this._paramList},updateParameter:function(f,k){if(f){var a=-1;for(var b=0;b<this._paramList.length;++b){if(this._paramList[b].paramName===f){this._paramList[b].setValue(k);a=b;break}}if(a!=-1){var l=this._panel.getParameter(a);var g=MochiKit.Base.bind(this._getDisplayText,this,this._paramList[a]);if(this._paramList[b].allowNullValue&&k.length==1&&k[0]==null){k=[]}l.setValues(MochiKit.Base.map(g,k));if(!l.valueRequired&&!l.canAddValues){if(k.length>0){l.showRowCreater(false)}else{l.showRowCreater(true)}}this._panel.setDirty(a,l.isDirty())}}},_canPanelChangeValues:function(a){return a&&a.isEditable&&!a.allowRangeValue&&!a.editMask&&!a.isDCP()},_deleteWidgets:function(){var a=this._panel.getParameter(0);while(a){delete _widgets[a.widx];this._panel.removeParameter(0);a=this._panel.getParameter(0)}},_compareCustomDateObject:function(b,a){if(b.y!=a.y){return false}if(b.m!=a.m){return false}if(b.d!=a.d){return false}if(b.h!=a.h){return false}if(b.min!=a.min){return false}if(b.s!=a.s){return false}if(b.ms!=a.ms){return false}return true},_hasMinBound:function(b,f){if(f==null){return false}var a=bobj.crv.params.DataTypes;switch(b){case a.STRING:if(f==0){return false}return true;case a.DATE:case a.DATE_TIME:absoluteMin={y:1753,m:0,d:1,h:0,min:0,s:0,ms:0};return !this._compareCustomDateObject(absoluteMin,f);case a.TIME:absoluteMin={y:1899,m:11,d:30,h:0,min:0,s:0,ms:0};return !this._compareCustomDateObject(absoluteMin,f);case a.NUMBER:case a.CURRENCY:if(f==-3.40282346638529e+38){return false}return true}return false},_hasMaxBound:function(b,f){if(f==null){return false}var a=bobj.crv.params.DataTypes;switch(b){case a.STRING:if(f==65534){return false}return true;case a.DATE:absoluteMax={y:9999,m:11,d:12,h:0,min:0,s:0,ms:0};return !this._compareCustomDateObject(absoluteMax,f);case a.TIME:absoluteMax={y:1899,m:11,d:30,h:23,min:59,s:59,ms:0};return !this._compareCustomDateObject(absoluteMax,f);case a.DATE_TIME:absoluteMax={y:9999,m:11,d:12,h:23,min:59,s:59,ms:0};return !this._compareCustomDateObject(absoluteMax,f);case a.NUMBER:case a.CURRENCY:if(f==3.40282346638529e+38){return false}return true}return false},_getMinMaxText:function(m,q,l){var a=bobj.crv.params.DataTypes;var r,f;if(m==a.STRING){f=this._getValueText(a.NUMBER,q);r=this._getValueText(a.NUMBER,l)}else{f=this._getValueText(m,q);r=this._getValueText(m,l)}if(m==a.BOOLEAN||(q==null&&l==null)){return null}var k,n;switch(m){case a.DATE:k=L_bobj_crv_Date;break;case a.TIME:k=L_bobj_crv_Time;break;case a.DATE_TIME:k=L_bobj_crv_DateTime;break;case a.NUMBER:k=L_bobj_crv_Number;break;case a.CURRENCY:k=L_bobj_crv_Number;break}var g=this._hasMinBound(m,q);var b=this._hasMaxBound(m,l);switch(m){case a.STRING:if(g&&b){n=L_bobj_crv_ParamsStringMinAndMaxTooltip.replace("%1",f);n=n.replace("%2",r)}else{if(g){n=L_bobj_crv_ParamsStringMinOrMaxTooltip.replace("%1",L_bobj_crv_Minimum);n=n.replace("%2",f)}else{if(b){n=L_bobj_crv_ParamsStringMinOrMaxTooltip.replace("%1",L_bobj_crv_Maximum);n=n.replace("%2",r)}}}break;default:if(g&&b){n=L_bobj_crv_ParamsMinAndMaxTooltip.replace("%1",k);n=n.replace("%2",f);n=n.replace("%3",r)}else{if(g){n=L_bobj_crv_ParamsMinTooltip.replace("%1",k);n=n.replace("%2",f)}else{if(b){n=L_bobj_crv_ParamsMaxTooltip.replace("%1",k);n=n.replace("%2",r)}}}}return n},_getDefaultValue:function(k,g,l){var a=bobj.crv.params.DefaultDisplayTypes;var f=this._getValueText(k,l.value);var b;switch(g){case a.Description:if(l.desc!=null&&l.desc.length>0){b=l.desc}else{b=f}break;case a.DescriptionAndValue:b=f;if(l.desc!=null&&l.desc.length>0){b+=" - "+l.desc}break}return b},_getValueTextFromDefValueDesc:function(g,f){if(g.defaultValues&&bobj.isArray(g.defaultValues)){for(var a=0;a<g.defaultValues.length;a++){var b=this._getDefaultValue(g.valueDataType,g.defaultDisplayType,g.defaultValues[a]);if(b==f){return this._getValueText(g.valueDataType,g.defaultValues[a].value)}}}return null},_getValueText:function(b,f){if(f===undefined){return undefined}var a=bobj.crv.params.DataTypes;switch(b){case a.DATE:return this._getDateTimeText(f,this._paramOpts.dateFormat);case a.TIME:return this._getDateTimeText(f,this._paramOpts.timeFormat);case a.DATE_TIME:return this._getDateTimeText(f,this._paramOpts.dateTimeFormat);case a.NUMBER:case a.CURRENCY:return this._getNumberText(f,this._paramOpts.numberFormat);case a.BOOLEAN:return this._getBooleanText(f,this._paramOpts.booleanFormat);case a.STRING:default:return""+f}},_getBooleanText:function(b,a){return a[""+b]},_getNumberText:function(n,m){var l=m.decimalSeperator;var a=m.groupSeperator;var r=(""+n).split(".");var q,b,k;var s=null;q=r[0];if(q.length>0&&q.slice(0,1)=="-"||q.slice(0,1)=="+"){s=q.slice(0,1);q=q.slice(1,q.length)}b=(r.length==2)?r[1]:null;formattedLeftVal=null;if(q.length<=3){formattedLeftVal=q}else{var g=null;var f=null;while(q.length>0){f=(q.length>3)?q.length-3:0;g=q.slice(f,q.length);q=q.slice(0,f);formattedLeftVal=(formattedLeftVal==null)?g:g+a+formattedLeftVal}}k=(b!=null)?formattedLeftVal+l+b:formattedLeftVal;k=(s!=null)?s+k:k;return k},_getDateTimeText:function(b,f){var a=bobj.crv.params.jsonToDate(b);if(a){return bobj.external.date.formatDate(a,f)}return""},_getValueTextFromDefaultValue:function(g,b){if(bobj.isArray(g.defaultValues)){var f=bobj.getValueHashCode(g.valueDataType,b);for(var a=0;a<g.defaultValues.length;a++){if(f==bobj.getValueHashCode(g.valueDataType,g.defaultValues[a].value)){return this._getDefaultValue(g.valueDataType,g.defaultDisplayType,g.defaultValues[a])}}}return null},_getDisplayText:function(f,b){if(b===undefined){return undefined}if(b.lowerBoundType!==undefined||b.upperBoundType!==undefined){return this._getRangeDisplayText(f,b)}var a=this._getValueTextFromDefaultValue(f,b);if(a==null){a=this._getValueText(f.valueDataType,b)}return a},_getRangeDisplayText:function(a,m){var q="";if(m.lowerBoundType!==undefined||m.upperBoundType!==undefined){var g=parseInt(m.lowerBoundType,10);var f=parseInt(m.upperBoundType,10);var n="(";var b=")";if(g==bobj.crv.params.RangeBoundTypes.INCLUSIVE){n="["}if(f==bobj.crv.params.RangeBoundTypes.INCLUSIVE){b="]"}var l="";var k="";if(g!=bobj.crv.params.RangeBoundTypes.UNBOUNDED){l=this._getDisplayText(a,m.beginValue)}if(f!=bobj.crv.params.RangeBoundTypes.UNBOUNDED){k=this._getDisplayText(a,m.endValue)}q=n+" "+l;q+=" .. ";q+=k+" "+b}else{q=this._getDisplayText(a,m)}return q},_getParamValue:function(b,f){if(b===undefined){return undefined}var a=bobj.crv.params.DataTypes;switch(b){case a.DATE:return this._getDateTimeParamValue(f,this._paramOpts.dateFormat);case a.TIME:return this._getDateTimeParamValue(f,this._paramOpts.timeFormat);case a.DATE_TIME:return this._getDateTimeParamValue(f,this._paramOpts.dateTimeFormat);case a.NUMBER:case a.CURRENCY:return this._getNumberParamValue(f,this._paramOpts.numberFormat);case a.BOOLEAN:return this._getBooleanParamValue(f,this._paramOpts.booleanFormat);case a.STRING:default:return f}},_getBooleanParamValue:function(b,a){if(b!=null&&b.length!=0){return a["true"]==b}else{return null}},_getNumberParamValue:function(g,f){if(g==null){return null}var a="";if(/[ \f\n\r\t\v\u00A0\u2028\u2029]/.test(f.groupSeperator)){a=g.replace(/[ \f\n\r\t\v\u00A0\u2028\u2029]/g,"")}else{var b=new RegExp("\\"+f.groupSeperator,"g");a=g.replace(b,"")}return a.replace(f.decimalSeperator,".")},_getDateTimeParamValue:function(f,b){var a=bobj.external.date.getDateFromFormat(f,b);if(a){return bobj.crv.params.dateToJson(a)}return f},_observeParamWidget:function(a){if(a){var b=MochiKit.Base.bind;a.changeValueCB=b(this._onChangeValue,this,a);a.addValueCB=b(this._onAddValue,this,a);a.selectValueCB=b(this._onSelectValue,this,a);a.enterPressCB=b(this._onEnterPress,this,a);a.clickRowButtonCB=b(this._onClickRowButton,this,a)}},_onParamHasDupValue:function(l,g){var f=this._findWidget(l);var b=this._getDisplayText(l,g);if(f){for(var a=0;a<f.getNumValues();a++){var k=f.getValueAt(a);if(b==k){f.setWarning(a,{code:bobj.crv.params.Validator.ValueStatus.VALUE_DUPLICATE,message:L_bobj_crv_ParamsDuplicateValue})}}}},_onParamHasNoDupValue:function(l,g){var f=this._findWidget(l);var b=this._getDisplayText(l,g);var m=bobj.crv.params.Validator.ValueStatus.VALUE_DUPLICATE;if(f){for(var a=0;a<f.getNumValues();a++){var k=f.getValueAt(a);if((arguments.length==1||b==k)&&f.getWarning(a)!=null&&f.getWarning(a).code==m){f.setWarning(a,null)}}}},_onChangeValue:function(f,a,g){if(this._disablePanel){return}f.setWarning(a,null);var b=f.isDirty();this._panel.setDirty(this._panel.getIndex(f),b);this._updateToolbar()},_onAddValue:function(a,b){if(this._disablePanel){return}this._updateToolbar();this._panel.setDirty(this._panel.getIndex(a),a.isDirty())},_onSelectValue:function(g,a){var b=this._selected;var f=this._selectedValueIdx;this._select(g,a);if(b&&bobj.isNumber(f)){this._checkAndSetValue(b,f)}},_onEnterPress:function(b,a){this._applyValues()},_onClickRowButton:function(g,b,a,n){this._setConnectedToCalendar(true);var l=bobj.crv.Calendar.getInstance();var m=this._findParam(g);var k=this._getDateTimeFormat(m.valueDataType);var f=bobj.external.date.getDateFromFormat(g.getValueAt(g.getSelectedIndex()),k);if(f){l.setDate(f)}l.setShowTime(m.valueDataType===bobj.crv.params.DataTypes.DATE_TIME);l.show(true,a,n)},_onClickCalendarOKButton:function(b){this._setConnectedToCalendar(false);if(b&&this._selected){var l=this._findParam(this._selected);var a=this._selected.getSelectedIndex();var g=this._getDateTimeFormat(l.valueDataType);var k=bobj.external.date.formatDate(b,g);this._selected.setValueAt(a,k);var f=this._selected.isDirty();this._selected.setWarning(a,null);this._panel.setDirty(this._panel.getIndex(this._selected),f);this._updateToolbar()}},_onClickCalendarCancelButton:function(){this._setConnectedToCalendar(false)},_onHideCalendar:function(){this._setConnectedToCalendar(false)},_onClickTbApplyButton:function(){this._applyValues()},_onClickTbAdvButton:function(){if(this._selected){this._viewerCtrl.showAdvancedParamDialog(this)}},_onClickTbDeleteButton:function(){if(this._selected){var a=this._selected.getSelectedIndex();this._selected.deleteValue(a);this._panel.setDirty(this._panel.getIndex(this._selected),this._selected.isDirty());this._updateToolbar();var b=this._findParam(this._selected);b.removeValueAt(a);a=Math.min(a,this._selected.getNumValues()-1);this._selected.setSelected(a);if((b.isOptionalPrompt||b.allowNullValue)&&b.getValue().length==0){this._selected.showRowCreater(true)}}},_select:function(b,a){this._selectedValueIdx=a;if(this._selected!==b){if(this._selected){this._selected.deselect()}this._selected=b;this._panel.setSelected(this._panel.getIndex(b),true);this._updateToolbar()}if(bobj.isNumber(a)){this._selected.setSelected(a)}},_applyValues:function(){this._checkAndSetValue(this._selected,this._selectedValueIdx);var f=this._paramList.length;var n=-1;var a=-1;var r=null;var b=null;for(var k=0;(k<f)&&!r;++k){b=this._panel.getParameter(k);var q=b.getNumValues();for(var g=0;(g<q)&&!r;++g){r=b.getWarning(g);if(r){n=k;a=g}}}if(r){b=this._panel.getParameter(n);this._onSelectValue(b,a);var m=bobj.crv.ErrorDialog.getInstance();m.setText(r.message,null);m.setTitle(L_bobj_crv_ParamsInvalidTitle);m.setPromptType(_promptDlgWarning);m.show(true,function(){b.setSelected(a)})}else{for(var k=0,l=this._paramList.length;k<l;k++){this._paramList[k].commitValue()}this._viewerCtrl.applyParams(this._paramList)}},_findParam:function(a){return this._paramList[this._panel.getIndex(a)]},_findWidget:function(b){for(var a=0;a<this._paramList.length;a++){if(this._paramList[a].paramName==b.paramName){return this._panel.getParameter(a)}}return null},_updateToolbar:function(){if(this._disablePanel){return}if(this._selected){var g=this._findParam(this._selected);this._panel.setDeleteButtonEnabled(this._canPanelChangeValues(g)&&(((g.isOptionalPrompt||g.allowNullValue)&&this._selected.getValues().length>0)||(g.allowMultiValue&&this._selected.getValues().length>1)))}else{this._panel.setDeleteButtonEnabled(false)}var f=false;for(var b=0,a=this._paramList.length;b<a;b++){if(this._panel.isDirty(b)){f=true;break}}this._panel.setApplyButtonEnabled(f)},_getDateTimeFormat:function(b){var a=bobj.crv.params.DataTypes;switch(b){case a.DATE:return this._paramOpts.dateFormat;case a.TIME:return this._paramOpts.timeFormat;case a.DATE_TIME:return this._paramOpts.dateTimeFormat;default:return null}},_setConnectedToCalendar:function(f){var b=f?MochiKit.Signal.connect:MochiKit.Signal.disconnect;var a=bobj.crv.Calendar.getInstance();b(a,a.Signals.OK_CLICK,this,"_onClickCalendarOKButton");b(a,a.Signals.CANCEL_CLICK,this,"_onClickCalendarCancelButton");b(a,a.Signals.ON_HIDE,this,"_onHideCalendar")},_checkAndSetValue:function(f,q){if(!f.canChangeOnPanel){return}var n=this._findParam(f);var g=f.getValueAt(q);var m=this._getValueTextFromDefValueDesc(n,g);if(m!=null){g=m}var b=this._getParamValue(n.valueDataType,g);if(q==0&&b==null&&n.getValue().length==0){if(n.allowNullValue){n.setValue(0,null)}if(n.isOptionalPrompt||n.allowNullValue){return}}var l=bobj.crv.params.Validator.ValueStatus;var a=l.OK;var r=null;a=bobj.crv.params.Validator.getInstance().validateValue(n,b);if(l.OK===a){var k=this._getValueTextFromDefaultValue(n,b);if(k!=null){f.setValueAt(q,k)}f.setWarning(q,null);n.setValue(q,b)}else{r=this._getWarningText(n,a);f.setWarning(q,{code:a,message:r})}},_getWarningText:function(f,b){var a=bobj.crv.params.DataTypes;switch(f.valueDataType){case a.DATE:case a.TIME:case a.DATE_TIME:return this._getDateTimeWarning(f,b);case a.STRING:return this._getStringWarning(f,b);case a.NUMBER:case a.CURRENCY:return this._getNumberWarning(f,b);default:return null}},_getDateTimeWarning:function(k,g){var f=bobj.crv.params.DataTypes;var b=bobj.crv.params.Validator.ValueStatus;var a=this._paramOpts.dateFormat;a=a.replace("yyyy","%1");a=a.replace("M","%2");a=a.replace("d","%3");a=a.replace("%1",L_bobj_crv_ParamsYearToken);a=a.replace("%2",L_bobj_crv_ParamsMonthToken);a=a.replace("%3",L_bobj_crv_ParamsDayToken);if(g==b.ERROR||g==b.VALUE_INVALID_TYPE){switch(k.valueDataType){case f.DATE:return L_bobj_crv_ParamsBadDate.replace("%1",a);case f.DATE_TIME:return L_bobj_crv_ParamsBadDateTime.replace("%1",a);break;case f.TIME:return L_bobj_crv_ParamsBadTime;break}}else{if(g==b.VALUE_TOO_BIG||g==b.VALUE_TOO_SMALL){return this._getMinMaxText(k.valueDataType,k.minValue,k.maxValue)}}return null},_getStringWarning:function(f,b){var a=bobj.crv.params.Validator.ValueStatus;if(a.VALUE_TOO_LONG===b){return L_bobj_crv_ParamsTooLong.replace("%1",f.maxValue)}else{if(a.VALUE_TOO_SHORT===b){return L_bobj_crv_ParamsTooShort.replace("%1",f.minValue)}}return null},_getNumberWarning:function(g,f){var b=bobj.crv.params.Validator.ValueStatus;var a=bobj.crv.params.DataTypes;switch(f){case b.ERROR:case b.VALUE_INVALID_TYPE:if(g.valueDataType==a.NUMBER){return L_bobj_crv_ParamsBadNumber}else{if(g.valueDataType==a.CURRENCY){return L_bobj_crv_ParamsBadCurrency}}case b.VALUE_TOO_BIG:case b.VALUE_TOO_SMALL:return this._getMinMaxText(g.valueDataType,g.minValue,g.maxValue);default:return null}}};if(typeof bobj.crv.params.ParameterUI=="undefined"){bobj.crv.params.ParameterUI={};bobj.crv.params.ParameterValueRow={};bobj.crv.params.ParamValueButton={};bobj.crv.params.ParamRowCreator={};bobj.crv.params.TextField={};bobj.crv.params.TextCombo={};bobj.crv.params.ScrollMenuWidget={};bobj.crv.params.HelperRow={}}bobj.crv.params.newParameterUI=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),canChangeOnPanel:false,allowCustom:false,canAddValues:false,isPassword:false,valueRequired:true,isReadOnlyParam:true,values:[],defaultValues:null,hasRowButtons:false,rowButtonsUrl:null,width:"200px",changeValueCB:null,addValueCB:null,selectValueCB:null,enterPressCB:null,clickRowButtonCB:null,openAdvDialogCB:null,maxNumParameterDefaultValues:200,tooltip:null},a);var b=newWidget(a.id);bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.ParameterUI);b._selectedRow=null;b._createMenu();b._rows=[];b._numRowsChanged=false;return b};bobj.crv.params.ParameterUI._createMenu=function(){var a=this.defaultValues.length;if(a>0){var b={originalValues:this.defaultValues};if(a==this.maxNumParameterDefaultValues){b.originalValues[this.maxNumParameterDefaultValues]=L_bobj_crv_ParamsMaxNumDefaultValues;MochiKit.Base.update(b,{openAdvDialogCB:this.openAdvDialogCB,maxNumParameterDefaultValues:this.maxNumParameterDefaultValues})}this._defaultValuesMenu=bobj.crv.params.newScrollMenuWidget(b)}else{this._defaultValuesMenu=null}};bobj.crv.params.ParameterUI.init=function(){Widget_init.call(this);var f=this._rows;for(var b=0,a=f.length;b<a;++b){f[b].init()}if(this._rowCreator){this._rowCreator.init()}if(this._helperRow){this._helperRow.init()}};bobj.crv.params.ParameterUI.getHTML=function(){var m="";var b=this.values;var k=this._rows;for(var f=0,a=b.length;f<a;++f){k.push(this._getRow(b[f],this._getBgColor(f)));m+=k[f].getHTML()}var l="";if(this._canAddRowCreater()){this._rowCreator=this._getRowCreator();l=this._rowCreator.getHTML()}var g="";if(this._canAddHelperRow()){this._helperRow=bobj.crv.params.newHelperRow({message:L_bobj_crv_ParamsNoValue});g=this._helperRow.getHTML()}return bobj.html.DIV({id:this.id,style:{width:bobj.unitValue(this.width)}},m,g,l)};bobj.crv.params.ParameterUI._canAddRowCreater=function(){return(this.canAddValues||(!this.valueRequired&&this.values.length===0&&!this.isReadOnlyParam))};bobj.crv.params.ParameterUI._canAddHelperRow=function(){return(this.isReadOnlyParam&&this.values.length===0)};bobj.crv.params.ParameterUI._getRow=function(b,a){var g=bobj.crv.params.BackgroundColor;var f=bobj.crv.params.newParameterValueRow({value:b,defaultValues:this.defaultValues,width:this.width,bgColor:a,isReadOnlyParam:this.isReadOnlyParam,canChangeOnPanel:this.canChangeOnPanel,allowCustom:this.allowCustom,isPassword:this.isPassword,hasButton:this.hasRowButtons,buttonUrl:this.rowButtonsUrl,openAdvDialogCB:this.openAdvDialogCB,defaultValuesMenu:this._defaultValuesMenu,tooltip:this.tooltip});var k=MochiKit.Base.bind;f.changeCB=k(this._onChangeValue,this,f);f.selectCB=k(this._onSelectValue,this,f);f.enterCB=k(this._onEnterValue,this,f);f.buttonClickCB=k(this._onClickRowButton,this,f);return f};bobj.crv.params.ParameterUI._addRow=function(a){var b=this._getRow(a,this._getBgColor(this._rows.length));this._rows.push(b);this._numRowsChanged=true;if(this._rowCreator){this._rowCreator.setBgColor(this._getBgColor(this._rows.length));insBefore2(this._rowCreator.layer,b.getHTML());b._valueWidget.setAlwaysDirty()}else{append(this.layer,b.getHTML())}b.init();b.setBgColor();return b};bobj.crv.params.ParameterUI._onChangeValue=function(a){if(this.changeValueCB){this.changeValueCB(this._getRowIndex(a),a.getValue())}};bobj.crv.params.ParameterUI._onSelectValue=function(a){if(this._selectedRow!==a){this.deselect();this._selectedRow=a}if(this.selectValueCB){this.selectValueCB(this._getRowIndex(a))}};bobj.crv.params.ParameterUI._onEnterValue=function(a){if(this.enterPressCB){this.enterPressCB(this._getRowIndex(a))}};bobj.crv.params.ParameterUI._onClickRowButton=function(b,a,f){if(this.clickRowButtonCB){this.clickRowButtonCB(this._getRowIndex(b),a,f)}};bobj.crv.params.ParameterUI.showRowCreater=function(a){if(!this._rowCreator&&a){this._rowCreator=this._getRowCreator();append(this.layer,this._rowCreator.getHTML());this._rowCreator.init()}if(this._rowCreator){this._rowCreator.show(a)}};bobj.crv.params.ParameterUI.showHelperRow=function(a){if(!this._helperRow&&a){this._helperRow=bobj.crv.params.newHelperRow({message:L_bobj_crv_ParamsNoValue});if(this._rowCreator){insBefore2(this._rowCreator.layer,this._helperRow.getHTML())}else{append(this.layer,this._helperRow.getHTML())}this._helperRow.init()}if(this._helperRow){this._helperRow.show(a)}};bobj.crv.params.ParameterUI._onCreateRow=function(){if((!this.canChangeOnPanel)&&(!this.isReadOnlyParam)){this.selectValueCB(-1);this.openAdvDialogCB()}else{var b="";if(!this.allowCustom&&this.defaultValues.length>0){b=this.defaultValues[0]}var a=this._addRow(b);this.setSelected(this._rows.length-1);this._onSelectValue(a);if(this.addValueCB){this.addValueCB(a.getValue())}if(!this.canAddValues&&!this.valueRequired){this.showRowCreater(false)}}};bobj.crv.params.ParameterUI._getRowIndex=function(g){if(g){var f=this._rows;for(var b=0,a=f.length;b<a;++b){if(f[b]===g){return b}}}return -1};bobj.crv.params.ParameterUI._getRowCreator=function(){var a=MochiKit.Base.bind(this._onCreateRow,this);return bobj.crv.params.newParamRowCreator({activateCB:a})};bobj.crv.params.ParameterUI._getBgColor=function(a){var f=bobj.crv.params.BackgroundColor;var b=false;if(this._rows.length>a){b=this._rows[a].isDirty()}if(b){if(a%2){return f.dirtyAlternate}else{return f.dirty}}else{if(a%2){return f.alternate}else{return f.standard}}return f.standard};bobj.crv.params.ParameterUI.isDirty=function(){if(this._numRowsChanged){return true}for(var b=0,a=this._rows.length;b<a;++b){if(this._rows[b].isDirty()){return true}}return false};bobj.crv.params.ParameterUI.getNumValues=function(){return this._rows.length};bobj.crv.params.ParameterUI.getValueAt=function(a){var b=this._rows[a];if(b){return b.getValue()}return null};bobj.crv.params.ParameterUI.getValues=function(){var b=[];for(var f=0,a=this._rows.length;f<a;++f){b.push(this._rows[f].getValue())}return b};bobj.crv.params.ParameterUI.getSelectedIndex=function(){return this._getRowIndex(this._selectedRow)};bobj.crv.params.ParameterUI.setValueAt=function(a,b){var f=this._rows[a];if(f){f.setValue(b)}};bobj.crv.params.ParameterUI.setValues=function(b){if(!b){return}var a=b.length;var g=this._rows.length;for(var f=0;f<a&&f<g;++f){this._rows[f].setValue(b[f])}if(g>a){for(var f=g-1;f>=a;--f){this.deleteValue(f)}}else{if(a>g){for(var f=g;f<a;++f){this._addRow(b[f]);this._rows[f]._valueWidget.setAlwaysDirty()}}}};bobj.crv.params.ParameterUI.setCleanValue=function(a,b){var f=this._rows[a];if(f){f.setCleanValue(b)}};bobj.crv.params.ParameterUI.setBgColor=function(){var b=this._rows.length;for(var a=0;a<b;++a){this._rows[a].setBgColor(this._getBgColor(a))}};bobj.crv.params.ParameterUI.deleteValue=function(a){if(a>=0&&a<this._rows.length){var g=this._rows[a];g.layer.parentNode.removeChild(g.layer);_widgets[g.widx]=null;this._rows.splice(a,1);this._numRowsChanged=true;var f=this._rows.length;for(var b=a;b<f;++b){this._rows[b].setBgColor(this._getBgColor(b))}if(this._rowCreator){this._rowCreator.setBgColor(this._getBgColor(f))}}};bobj.crv.params.ParameterUI.setWarning=function(a,b){var f=this._rows[a];if(f){f.setWarning(b)}};bobj.crv.params.ParameterUI.getWarning=function(a){var b=this._rows[a];if(b){return b.getWarning()}};bobj.crv.params.ParameterUI.setSelected=function(a){var b=this._rows[a];if(b&&this._selectedRow!=b){if(this._getRowIndex(this._selectedRow)!=-1){this.deselect()}this._selectedRow=b;b.select()}};bobj.crv.params.ParameterUI.deselect=function(){if(this._selectedRow){this._selectedRow.deselect();this._selectedRow=null}};bobj.crv.params.ParameterUI.resize=function(a){if(a!==null){this.width=a;if(this.layer){bobj.setOuterSize(this.layer,a)}}};bobj.crv.params.BackgroundColor={standard:0,dirty:1,alternate:2,dirtyAlternate:3};bobj.crv.paramPanelIcon=bobj.crvUri("images/param_panel.gif");bobj.crv.paramWarningIconYOffset=0;bobj.crv.paramAdvIconYOffset=124;bobj.crv.params.newParameterValueRow=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),value:"",defaultValues:null,bgColor:bobj.crv.params.BackgroundColor.standard,isReadOnlyParam:true,canChangeOnPanel:false,allowCustom:false,isPassword:false,hasButton:false,buttonUrl:null,changeCB:null,selectCB:null,enterCB:null,buttonClickCB:null,openAdvDialogCB:null,defaultValuesMenu:null,tooltip:null},a);var b=newWidget(a.id);b.widgetType="ParameterValueRow";b._prevValueString=a.value;b._warning=null;bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.ParameterValueRow);return b};bobj.crv.params.ParameterValueRow.init=function(){Widget_init.call(this);this._valueWidget.init();if(this._button){this._button.init()}this._valueCtn=getLayer(this.id+"_vc");this._rightCtn=getLayer(this.id+"_rc");this._icon=this._rightCtn.firstChild;this._btnCtn=getLayer(this.id+"_bc");this._valBtnCtn=getLayer(this.id+"_vab");this._advBtnCtn=getLayer(this.id+"_adv_ctn");if(this._advButton){this._advButton.init()}if(MochiKit.Base.isIE()){var a=parseInt(MochiKit.Style.computedStyle(this._valueCtn,"margin-right"),10);if(bobj.isNumber(a)){this._valueWidget.layer.style.marginRight=(-1*a)+"px"}}this.layer.onmousedown=MochiKit.Base.bind(this._onMouseDown,this)};bobj.crv.params.ParameterValueRow.getHTML=function(){if(!this._valueWidget){this._valueWidget=this._getValueWidget()}if(this.hasButton&&!this._button){var b=MochiKit.Base.bind(this._onButtonClick,this);this._button=bobj.crv.params.newParamValueButton({url:this.buttonUrl,clickCB:b})}var f=bobj.html.DIV;var g=bobj.html.IMG;var a=this._getBgColorClass(this.bgColor)+" iactParamRow";if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){a+=" iactParamRowIE"}return f({id:this.id,"class":a},this.hasButton?this._getValueAndButtonHTML():this._getValueHTML(),f({id:this.id+"_rc","class":"iactParamRight"},imgOffset(bobj.crv.paramPanelIcon,16,16,0,bobj.crv.paramWarningIconYOffset,this.id+"_icn",'class="iactParamValueWarningIcon"',"","display:none",""),this._getAdvButtonHTML()))};bobj.crv.params.ParameterValueRow._getAdvButtonHTML=function(){this._advButton=bobj.crv.params.newParamValueButton({id:this.id+"_adv_icn",url:bobj.crv.paramPanelIcon,clickCB:this.openAdvDialogCB,tooltip:L_bobj_crv_ParamsAdvDlg,dx:0,dy:bobj.crv.paramAdvIconYOffset});var a=bobj.html.DIV;return a({id:this.id+"_adv_ctn",style:{display:"none",position:"absolute",right:"0",top:"0",cursor:_hand}},this._advButton.getHTML())};bobj.crv.params.ParameterValueRow._getValueHTML=function(){var b=bobj.html.DIV;var a={};if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){a.position="absolute";a.top="0px";a.left="0px"}return b({id:this.id+"_vc","class":"iactParamValue",style:a},this._valueWidget.getHTML())};bobj.crv.params.ParameterValueRow._getValueAndButtonHTML=function(){var b={};if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){b.width="100%"}var f=bobj.html.DIV;var a=f({id:this.id+"_vab",style:b,"class":"iactParamValueAndButton"},this._getValueHTML(),f({id:this.id+"_bc","class":"iactValueIcon",style:{position:"absolute",right:"0",top:"0",cursor:_hand}},this._button.getHTML()));return a};bobj.crv.params.ParameterValueRow._getValueWidget=function(){var g=this.defaultValuesMenu!==null&&!this.isReadOnlyParam&&this.canChangeOnPanel;var a=g?"newTextCombo":"newTextField";var f=MochiKit.Base.bind;var b=bobj.crv.params[a]({password:this.isPassword,cleanValue:this.value,editable:this.allowCustom&&this.canChangeOnPanel,enterCB:f(this._onEnterPress,this),keyUpCB:f(this._onKeyUp,this),bgColor:this.bgColor,tooltip:this.tooltip});if(g){b.setMenu(this.defaultValuesMenu);b.changeCB=f(this._onChange,this)}return b};bobj.crv.params.ParameterValueRow.getValue=function(){if(this._valueWidget){return this._valueWidget.getValue()}return this.value};bobj.crv.params.ParameterValueRow.setValue=function(a){if(this._valueWidget){this._valueWidget.setValue(a)}};bobj.crv.params.ParameterValueRow.setCleanValue=function(a){if(this._valueWidget){this._valueWidget.setCleanValue(a)}};bobj.crv.params.ParameterValueRow.select=bobj.crv.params.ParameterValueRow.focus=function(){this._select(true);if(this._valueWidget.widgetType=="TextCombo"){this._valueWidget.text.focus()}else{this._valueWidget.focus()}};bobj.crv.params.ParameterValueRow.isSelected=function(){return this._isSelected};bobj.crv.params.ParameterValueRow.deselect=function(){this._select(false)};bobj.crv.params.ParameterValueRow._select=function(a){this._isSelected=a?true:false;if(a){var b=MochiKit.DOM.addElementClass;b(this._rightCtn,"iactParamRightSel");b(this.layer,"iactParamRowSel");if(this._valBtnCtn){b(this._valBtnCtn,"iactParamValueAndButtonSel")}else{b(this._valueCtn,"iactParamValueSel")}}else{var f=MochiKit.DOM.removeElementClass;f(this._rightCtn,"iactParamRightSel");f(this.layer,"iactParamRowSel");if(this._valBtnCtn){f(this._valBtnCtn,"iactParamValueAndButtonSel")}else{f(this._valueCtn,"iactParamValueSel")}}if(this._valueWidget&&this._valueWidget.setSelected){this._valueWidget.setSelected(a)}this._showAdvButton(a)};bobj.crv.params.ParameterValueRow._showAdvButton=function(a){if(this.isReadOnlyParam){return}if(a===true){this._advBtnCtn.style.display=""}else{this._advBtnCtn.style.display="none"}};bobj.crv.params.ParameterValueRow.setWarning=function(a){if(a){bobj.crv.Tooltip.setElementTooltip(this._icon,a.message);this._icon.style.display=""}else{this._icon.style.display="none"}this._warning=a};bobj.crv.params.ParameterValueRow.getWarning=function(){return this._warning};bobj.crv.params.ParameterValueRow.resize=function(a,b){bobj.setOuterSize(this.layer,a,b)};bobj.crv.params.ParameterValueRow.isDirty=function(){return this._valueWidget.isDirty()};bobj.crv.params.ParameterValueRow.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){var b=MochiKit.DOM;b.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));b.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a;this._valueWidget.setBgColor(a)}};bobj.crv.params.ParameterValueRow._getBgColorClass=function(a){var b="iactParamRowBg";var f=bobj.crv.params.BackgroundColor;if(a===f.alternate||a===f.dirtyAlternate){b+="Alt"}if(a===f.dirty||a===f.dirtyAlternate){b+="Dirty"}return b};bobj.crv.params.ParameterValueRow.deleteValue=function(){this._valueWidget.setValue("",true)};bobj.crv.params.ParameterValueRow._onSelect=function(){var a=this.isSelected();if(!a&&this.selectCB){this.selectCB()}this._select(true)};bobj.crv.params.ParameterValueRow._onKeyUp=function(g){var f=new MochiKit.Signal.Event(src,g);var b=f.key().string;var a=this._valueWidget.getValue();switch(b){case"KEY_ESCAPE":this._valueWidget.setValue(this._valueWidget.cleanValue);if(this.changeCB){this.changeCB()}this._onSelect();break;case"KEY_ARROW_LEFT":case"KEY_ARROW_RIGHT":case"KEY_HOME":case"KEY_END":case"KEY_TAB":this._onSelect();break;default:if(a!==this._prevValueString){this._onSelect();if(this.changeCB){this.changeCB()}this._prevValueString=a}break}};bobj.crv.params.ParameterValueRow._onChange=function(){if(this.changeCB){this.changeCB()}};bobj.crv.params.ParameterValueRow._onEnterPress=function(){if(this.isSelected()&&this.enterCB){this.enterCB()}else{this._onSelect()}};bobj.crv.params.ParameterValueRow._onMouseDown=function(){this._onSelect()};bobj.crv.params.ParameterValueRow._onButtonClick=function(){if(this.buttonClickCB){var b=getPosScrolled(this._button.layer);var a=b.x+this._button.getWidth();var f=b.y+this._button.getHeight()+1;this.buttonClickCB(a,f)}};bobj.crv.params.newParamValueButton=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),url:null,clickCB:null,tooltip:this.tooltip,dx:0,dy:0},a);var b=newIconWidget(a.id,a.url,a.clickCB,null,a.tooltip,14,14,a.dx,a.dy,0,0);b.margin=0;b.oldInit=b.init;MochiKit.Base.update(b,bobj.crv.params.ParamValueButton);return b};bobj.crv.params.ParamValueButton.init=function(){this.oldInit();this.layer.onfocus=IconWidget_realOverCB;this.layer.onblur=IconWidget_realOutCB};bobj.crv.params.ParamValueButton.getHTML=function(){var f;var b=bobj.html;if(this.src){f=b.DIV({style:{overflow:"hidden",height:"16px",width:this.w+"px"}},simpleImgOffset(this.src,this.w,this.h,this.dis?this.disDx:this.dx,this.dis?this.dixDy:this.dy,"IconImg_"+this.id,null,this.alt,"cursor:"+_hand),this.extraHTML)}else{f=b.DIV({"class":"icontext",style:{width:"1px",height:(this.h+this.border)+"px"}})}var a={margin:this.margin+"px",padding:"1px"};if(this.width){a.width=this.width+"px"}if(!this.disp){a.display="none"}return b.DIV({style:a,id:this.id,"class":this.nocheckClass},(this.clickCB&&_ie)?lnk(f,null,null,null,' tabIndex="-1"'):f)};bobj.crv.params.newParamRowCreator=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),bgColor:null,activateCB:null},a);var b=newWidget(a.id);b.widgetType="ParamRowCreator";bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.ParamRowCreator);b._textField=b._createTextField();return b};bobj.crv.params.ParamRowCreator.init=function(){Widget_init.call(this);this._textField.init();this.layer.onclick=MochiKit.Base.bind(this._onClick,this)};bobj.crv.params.ParamRowCreator.show=function(a){if(a===false){this.css.visibility="hidden";this.css.display="none"}else{this.css.visibility="visible";this.css.display="block"}};bobj.crv.params.ParamRowCreator.getHTML=function(){var b=bobj.html.DIV;cssClass=this._getBgColorClass()+" iactParamRow";ieCssClass="iactParamRowIE";var a="";if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){cssClass+=" "+ieCssClass;a.width="100%"}return b({id:this.id,"class":cssClass},b({"class":"iactParamValue",style:a},this._textField.getHTML()),b({"class":"iactParamRight"}))};bobj.crv.params.ParamRowCreator._getBgColorClass=bobj.crv.params.ParameterValueRow._getBgColorClass;bobj.crv.params.ParamRowCreator.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){MochiKit.DOM.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));MochiKit.DOM.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a;this._textField.setBgColor(a)}};bobj.crv.params.ParamRowCreator._createTextField=function(){var a=bobj.crv.params.newTextField({cleanValue:L_bobj_crv_ParamsAddValue,editable:false,enterCB:MochiKit.Base.bind(this._onEnterPress,this)});return a};bobj.crv.params.ParamRowCreator._onEnterPress=function(){if(this.activateCB){this.activateCB()}};bobj.crv.params.ParamRowCreator._onClick=function(){if(this.activateCB){this.activateCB()}};bobj.crv.params.ParamRowCreator.resize=function(a,b){bobj.setOuterSize(this.layer,a,b)};bobj.crv.params.newTextField=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),cleanValue:"",width:"100%",maxChar:null,tooltip:null,disabled:false,editable:true,password:false,focusCB:null,blurCB:null,changeCB:null,keyUpCB:null,enterCB:null,bgColor:bobj.crv.params.BackgroundColor.standard,alwaysDirty:false},a);var b=newTextFieldWidget(a.id,a.changeCB,a.maxChar,a.keyUpCB,a.enterCB,true,a.tooltip,null,a.focusCB,a.blurCB);b.widgetType="TextField";bobj.fillIn(b,a);b.disabled=a.disabled;b.width=a.width;MochiKit.Base.update(b,bobj.crv.params.TextField);if(a.cleanValue){b.setValue(a.cleanValue)}return b};bobj.crv.params.TextField.setAlwaysDirty=function(){this.alwaysDirty=true};bobj.crv.params.TextField.getHTML=function(){var g={width:bobj.unitValue(this.width)};var f=MochiKit.Base.isIE();var b=this._getBgColorClass(this.bgColor)+" iactTextField";if(f&&bobj.isQuirksMode()){b+="IE"}var a={type:this.password?"password":"text",name:this.id,id:this.id,maxLength:this.maxChar,style:g,"class":b,oncontextmenu:"event.cancelBubble=true;return true",onfocus:"TextFieldWidget_focus(this)",onblur:"TextFieldWidget_blur(this)",onchange:"TextFieldWidget_changeCB(event, this)",onkeydown:"return TextFieldWidget_keyDownCB(event, this);",onkeyup:"return TextFieldWidget_keyUpCB(event, this);",onkeypress:"return TextFieldWidget_keyPressCB(event, this);",ondragstart:"event.cancelBubble=true; return true;",onselectstart:"event.cancelBubble=true; return true;"};if(this.disabled){a.disabled="disabled"}if(!this.editable){a.readonly="readonly";if(f){g.filter="alpha(opacity=50)"}else{g.opacity="0.5"}}if(this.tooltip){a.title=this.tooltip}return bobj.html.INPUT(a)};bobj.crv.params.TextField.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){var b=MochiKit.DOM;b.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));b.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a}};bobj.crv.params.TextField.isDirty=function(){return this.alwaysDirty===true||this.getValue()!==this.cleanValue};bobj.crv.params.TextField.setValue=function(a){TextFieldWidget_setValue.call(this,a)};bobj.crv.params.TextField.setCleanValue=function(a){this.cleanValue=a};bobj.crv.params.TextField._getBgColorClass=function(a){var b="iactTextFieldBg";var f=bobj.crv.params.BackgroundColor;if(a===f.alternate||a===f.dirtyAlternate){b+="Alt"}if(a===f.dirty||a===f.dirtyAlternate){b+="Dirty"}return b};bobj.crv.params.newTextCombo=function(a){var g=MochiKit.Base.update;var b=bobj.crv.params;a=g({id:bobj.uniqueId(),width:"100%",maxChar:null,tooltip:null,disabled:false,editable:false,changeCB:null,enterCB:null,keyUpCB:null,selected:false,bgColor:b.BackgroundColor.standard},a);var f=newTextComboWidget(a.id,a.maxChar,a.tooltip,null,a.changeCB,null,null,null);f.widgetType="TextCombo";bobj.fillIn(f,a);f.width=a.width;f.init_TextCombo=f.init;g(f,b.TextCombo);f._createTextField();f._createArrow();f.arrow.dy+=2;f.arrow.disDy+=2;return f};bobj.crv.params.TextCombo.setAlwaysDirty=function(){this.text.setAlwaysDirty()};bobj.crv.params.TextCombo.setMenu=function(a){this.menu=a};bobj.crv.params.TextCombo.init=function(){var a=MochiKit.Base.bind;this.init_TextCombo();this.arrowContainer=getLayer(this.id+"_arrowCtn");this.layer.onmouseover=a(this.showArrow,this,true);this.layer.onmouseout=a(this.onMouseOut,this);if(this.arrow){this.arrow.layer.onfocus=IconWidget_realOverCB;this.arrow.layer.onblur=IconWidget_realOutCB}this.text.setValue(this.cleanValue)};bobj.crv.params.TextCombo.onMouseOut=function(){if(this.selected===false){this.showArrow(false)}};bobj.crv.params.TextCombo.setSelected=function(a){if(this.selected!=a){this.selected=a;this.showArrow(a)}};bobj.crv.params.TextCombo.showArrow=function(a){if(this.arrowContainer){this.arrowContainer.style.visibility=a?"visible":"hidden"}};bobj.crv.params.TextCombo.showMenu=function(){var a=this.menu;a.parIcon=this;a.show(true);a.valueSelect(this.text.getValue()+"")};bobj.crv.params.TextCombo._createArrow=function(){this.arrow=newIconWidget(this.id+"arrow_",bobj.skinUri("menus.gif"),MochiKit.Base.bind(this.showMenu,this),null,(_openMenuPart1+(this.tooltip?this.tooltip:"")+_openMenuPart2),7,12,0,83,0,99);this.arrow.setClasses("iconnocheck","combobtnhover","combobtnhover","combobtnhover");this.arrow.par=this};bobj.crv.params.TextCombo._createTextField=function(){this.text=bobj.crv.params.newTextField({id:this.id+"_text",cleanValue:this.cleanValue,width:"100%",maxChar:null,tooltip:this.tooltip,disabled:false,editable:this.editable,password:false,focusCB:null,blurCB:null,keyUpCB:MochiKit.Base.bind(this._onKeyUp,this),enterCB:this.enterCB,alwaysDirty:false})};bobj.crv.params.TextCombo.getHTML=function(){var k=bobj.html;var g=this._getBgColorClass(this.bgColor);this.text.bgColor=this.bgColor;var b="iactTextComboArrow";var a={};a.right="0px";a.visibility="hidden";if(MochiKit.Base.isIE()){a.height="18px";if(!bobj.isQuirksMode()){a.right="5px"}}else{a.height="16px"}var f=k.DIV({id:this.id,"class":g,style:{width:"100%",position:"relative"}},k.DIV({style:{position:"relative"},"class":"iactTextComboTextField"},this.text.getHTML()),k.DIV({"class":b,id:this.id+"_arrowCtn",style:a},this.arrow.getHTML()));return f};bobj.crv.params.TextCombo.setValue=function(a){this.text.setValue(a)};bobj.crv.params.TextCombo.setCleanValue=function(a){this.text.setCleanValue(a)};bobj.crv.params.TextCombo.selectItem=function(a){if(a){this.val=a.value;this.text.setValue(a.value,true);this.menu.select(a.index)}};bobj.crv.params.TextCombo.getValue=function(){return this.text.getValue()};bobj.crv.params.TextCombo.setBgColor=function(a){if(a!==this.bgColor){if(this.layer){var b=MochiKit.DOM;b.removeElementClass(this.layer,this._getBgColorClass(this.bgColor));b.addElementClass(this.layer,this._getBgColorClass(a))}this.bgColor=a}if(this.text){this.text.setBgColor(a)}};bobj.crv.params.TextCombo._onKeyUp=function(a){var b=this.text.getValue();if(this.keyUpCB){this.keyUpCB(a)}};bobj.crv.params.TextCombo.isDirty=function(){return this.text.isDirty()};bobj.crv.params.TextCombo._getBgColorClass=function(a){var b="iactTextComboBg";var f=bobj.crv.params.BackgroundColor;if(a===f.alternate||a===f.dirtyAlternate){b+="Alt"}if(a===f.dirty||a===f.dirtyAlternate){b+="Dirty"}return b};bobj.crv.params.newScrollMenuWidget=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),originalValues:[],hasProperWidth:false,hasValueList:false,maxVisibleItems:10,openAdvDialogCB:null,maxNumParameterDefaultValues:null},a);var f=(a.originalValues.length>=a.maxVisibleItems)?a.maxVisibleItems:a.originalValues.length;if(f===1){f++}var b=newScrollMenuWidget("menu_"+a.id,bobj.crv.params.ScrollMenuWidget.onChange,false,null,f,null,null,null,false,"","",null,null);b.oldShow=b.show;MochiKit.Base.update(b,a,bobj.crv.params.ScrollMenuWidget);return b};bobj.crv.params.ScrollMenuWidget.onChange=function(){var b=this.parIcon;var a=this.getSelection();if(a){if(this.maxNumParameterDefaultValues&&a.index==this.maxNumParameterDefaultValues){if(this.openAdvDialogCB){this.openAdvDialogCB()}}else{b.val=a.value;b.text.setValue(a.value)}}else{b.val=null;b.text.setValue("")}if(b.changeCB){b.changeCB()}};bobj.crv.params.ScrollMenuWidget.getPosition=function(){if(this.parIcon===null){return}var f=this.parIcon.layer;var b=MochiKit.Style.getElementDimensions;var a=getPosScrolled(f);var k=a.x+2;var g=a.y+b(f).h+3;if(MochiKit.Base.isIE()){k-=1;if(bobj.isQuirksMode()){g-=2}}return{x:k,y:g}};bobj.crv.params.ScrollMenuWidget.setProperWidth=function(){if(this.hasProperWidth===false){this.css.display="block";this.orginalWidth=this.layer.offsetWidth;this.css.display="none";this.hasProperWidth=true}};bobj.crv.params.ScrollMenuWidget.setValueList=function(){if(this.hasValueList===false){this.hasValueList=true;var b=this.originalValues;for(var f=0,a=b.length;f<a;f++){this.add(b[f],b[f],false)}}};bobj.crv.params.ScrollMenuWidget.setFocus=function(a){if(a){var b=MochiKit.Base.bind(this.list.focus,this.list);setTimeout(b,300)}else{if(this.parIcon.selected===true){this.parIcon.arrow.focus()}}};bobj.crv.params.ScrollMenuWidget.show=function(a){if(this.layer===null){this.justInTimeInit()}if(this.hasValueList===false){this.setValueList()}if(this.parIcon===null){return}if(this.hasProperWidth===false){this.setProperWidth()}if(this.parIcon&&this.parIcon.layer){var b=this.parIcon.layer;if(b.clientWidth>this.orginalWidth){this.css.width=b.clientWidth+"px";this.list.css.width=b.clientWidth+"px"}else{this.css.width=this.orginalWidth+"px";this.list.css.width=this.orginalWidth+"px"}}var f=this.getPosition();this.oldShow(a,f.x,f.y);this.setFocus(a)};bobj.crv.params.newHelperRow=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),message:""},a);var b=newWidget(a.id);b.widgetType="HelperRow";bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.HelperRow);return b};bobj.crv.params.HelperRow.show=function(a){switch(a){case false:this.css.visibility="hidden";this.css.display="none";break;case true:this.css.visibility="visible";this.css.display="block";break}};bobj.crv.params.HelperRow.getHTML=function(){var b=bobj.html.DIV;cssClass=this._getBgColorClass()+" iactParamRow";ieCssClass="iactParamRowIE";var a="";if(MochiKit.Base.isIE()&&bobj.isQuirksMode()){cssClass+=" "+ieCssClass;a.width="100%"}return b({id:this.id,"class":cssClass},b({"class":"iactParamValue",style:a},b({"class":"helperRowMessage"},"["+this.message+"]")),b({"class":"iactParamRight"}))};bobj.crv.params.HelperRow._getBgColorClass=bobj.crv.params.ParameterValueRow._getBgColorClass;bobj.crv.params.HelperRow.resize=function(a,b){bobj.setOuterSize(this.layer,a,b)};if(typeof bobj.crv.params.ParameterPanel=="undefined"){bobj.crv.params.ParameterPanel={};bobj.crv.params.ParameterPanelToolbar={};bobj.crv.params.ParameterTab={};bobj.crv.params.ParameterDialog={}}bobj.crv.params.newParameterPanel=function(a){a=MochiKit.Base.update({id:bobj.uniqueId()+"_IPPanel"},a);var b=newWidget(a.id);b.widgetType="ParameterPanel";bobj.fillIn(b,a);MochiKit.Base.update(b,bobj.crv.params.ParameterPanel);b._tabPanel=bobj.crv.newStackedPanel({id:b.id+"_ParamtersStack"});b._selected=null;b._toolbar=bobj.crv.params.newParameterPanelToolbar({id:b.id+"_IPToolbar"});return b};bobj.crv.params.ParameterPanel.setToolbarCallBacks=function(a,b){if(this._toolbar){this._toolbar.delClickCB=a;this._toolbar.applyClickCB=b}};bobj.crv.params.ParameterPanel.init=function(){Widget_init.call(this);this._toolbar.init();if(this._tabPanel){this._tabPanel.init()}};bobj.crv.params.ParameterPanel.getHTML=function(){var b=bobj.html.DIV;var a=this._getCommonLayerStyle();a.overflow="hidden";var f=this._toolbar.getHTML();if(this._tabPanel){f+=this._tabPanel.getHTML()}return b({id:this.id,style:a},f)};bobj.crv.params.ParameterPanel._getErrorMsgContent=function(b){var f=bobj.html.DIV;var a=this._getCommonLayerStyle();return f({id:this.id,style:a},b)};bobj.crv.params.ParameterPanel._getCommonLayerStyle=function(){var a={};if(this.height){a.height=bobj.unitValue(this.height)}if(this.width){a.width=bobj.unitValue(this.width)}return a};bobj.crv.params.ParameterPanel.showError=function(a){if(a){this.setHTML(this._getErrorMsgContent(a))}};bobj.crv.params.ParameterPanel.resize=function(a,b){Widget_resize.call(this,a,b);if(this._toolbar){a=this.layer.clientWidth;this._toolbar.resize(a);if(this._tabPanel){b=this.layer.clientHeight-this._toolbar.getHeight();this._tabPanel.resize(a,b)}}};bobj.crv.params.ParameterPanel.addParameter=function(b){b=MochiKit.Base.update({paramUI:null,label:null,isDataFetching:false,isDirty:false,isReadOnly:false,selectCB:null,openAdvCB:null,minMaxTooltip:null,id:this._tabPanel.id+"_P"+(this._tabPanel.getNumTabs()+1)},b);if(b.paramUI){var a=bobj.crv.params.newParameterTab(b);a.setContent(b.paramUI);this._tabPanel.addTab(a)}};bobj.crv.params.ParameterPanel.removeParameter=function(a){this._tabPanel.removeTab(a)};bobj.crv.params.ParameterPanel.getWidth=function(){if(this.layer){return this.layer.offsetWidth}return this.width};bobj.crv.params.ParameterPanel.setDeleteButtonEnabled=function(a){this._toolbar.delButton.setDisabled(!a)};bobj.crv.params.ParameterPanel.setApplyButtonEnabled=function(a){this._toolbar.applyButton.setDisabled(!a)};bobj.crv.params.ParameterPanel.getIndex=function(g){var f=this._tabPanel.getNumTabs();for(var a=0;a<f;++a){var b=this._tabPanel.getTab(a);if(b.getContent()===g){return a}}return -1};bobj.crv.params.ParameterPanel.getParameter=function(a){var b=this._tabPanel.getTab(a);if(b){return b.getContent()}return null};bobj.crv.params.ParameterPanel.setDirty=function(a,f){var b=this._tabPanel.getTab(a);if(b){b.setDirty(f);b.getContent().setBgColor()}};bobj.crv.params.ParameterPanel.isDirty=function(a){var b=this._tabPanel.getTab(a);if(b){return b.isDirty()}return false};bobj.crv.params.ParameterPanel.setSelected=function(b,a){var f=this._tabPanel.getTab(b);if(f){if(this._selected){this._selected.setSelected(false)}f.setSelected(a);this._selected=f}};bobj.crv.params.ParameterPanel.expand=function(a){var b=this._tabPanel.getTab(a);if(b){b.expand()}};bobj.crv.paramPanelIcon=bobj.crvUri("images/param_panel.gif");bobj.crv.paramDataFetchingIconYOffset=32;bobj.crv.paramDirtyIconYOffset=48;bobj.crv.paramInfoIconYOffset=64;bobj.crv.paramsApplyIconYOffset=80;bobj.crv.paramsDeleteIconYOffset=102;bobj.crv.params.newParameterPanelToolbar=function(a){a=MochiKit.Base.update({id:bobj.uniqueId()},a);var b=newPaletteContainerWidget(a.id);bobj.fillIn(b,a);b.widgetType="ParameterPanelToolbar";b._paletteContainerInit=b.init;MochiKit.Base.update(b,bobj.crv.params.ParameterPanelToolbar);b._palette=newPaletteWidget(b.id+"_palette");b.add(b._palette);var f=MochiKit.Base.bind;b.delButton=newIconWidget(b.id+"_delBtn",bobj.crv.paramPanelIcon,f(b._onDelClick,b),L_bobj_crv_ParamsDelete,L_bobj_crv_ParamsDeleteTooltip,16,16,3,3+bobj.crv.paramsDeleteIconYOffset,25,3+bobj.crv.paramsDeleteIconYOffset);b.applyButton=newIconWidget(b.id+"_applyBtn",bobj.crv.paramPanelIcon,f(b._onApplyClick,b),L_bobj_crv_ParamsApply,L_bobj_crv_ParamsApplyTip,16,16,3,3+bobj.crv.paramsApplyIconYOffset,25,3+bobj.crv.paramsApplyIconYOffset);b._palette.add(b.applyButton);b._palette.add();b._palette.add(b.delButton);return b};bobj.crv.params.ParameterPanelToolbar.init=function(){this._paletteContainerInit();this._palette.init();this.delButton.setDisabled(true);this.applyButton.setDisabled(true)};bobj.crv.params.ParameterPanelToolbar.beginHTML=function(){return bobj.html.openTag("div",{id:this.id,"class":"dialogzone",style:{overflow:"hidden",margin:"0"}})};bobj.crv.params.ParameterPanelToolbar.getHTML=function(){return(this.beginHTML()+this._palette.getHTML()+this.endHTML())};bobj.crv.params.ParameterPanelToolbar._onDelClick=function(){if(this.delClickCB){bobj.crv.logger.info("UIAction ParameterPanel.Delete");this.delClickCB()}};bobj.crv.params.ParameterPanelToolbar._onApplyClick=function(){if(this.applyClickCB){bobj.crv.logger.info("UIAction ParameterPanel.Apply");this.applyClickCB()}};bobj.crv.params.newParameterTab=function(a){a=MochiKit.Base.update({label:null,isDataFetching:false,isDirty:false,isReadOnly:false,minMaxTooltip:null,openAdvCB:null,selectCB:null,id:null},a);a.iconPos="right";a.expandImgPos="right";var f=bobj.crv.newStackedTab(a);bobj.fillIn(f,a);f._isDirtyInit=a.isDirty;MochiKit.Base.update(f,bobj.crv.params.ParameterTab);f._dirtyId=f.id+"_dirty";f.addIcon(bobj.crv.paramPanelIcon,0,bobj.crv.paramDirtyIconYOffset,L_bobj_crv_ParamsDirtyTip,false,f._isDirtyInit,f._dirtyId);if(a.minMaxTooltip||a.isReadOnly){var b="";if(a.isReadOnly&&a.minMaxTooltip){b=L_bobj_crv_ParamsReadOnly+"<BR>"+a.minMaxTooltip}else{if(a.minMaxTooltip){b=a.minMaxTooltip}else{if(a.isReadOnly){b=L_bobj_crv_ParamsReadOnly}}}f.addIcon(bobj.crv.paramPanelIcon,0,bobj.crv.paramInfoIconYOffset,b,false,true,f.id+"_icnInfo")}if(f.isDataFetching){f.addIcon(bobj.crv.paramPanelIcon,0,bobj.crv.paramDataFetchingIconYOffset,L_bobj_crv_ParamsDataTip,true,true,null)}return f};bobj.crv.params.ParameterTab.setDirty=function(a){if(a){this.showIcon.call(this,this._dirtyId)}else{this.hideIcon.call(this,this._dirtyId)}};bobj.crv.params.ParameterTab.isDirty=function(){if(this.layer){return this.isIconShowing(this._dirtyId)}else{return this._isDirtyInit}};bobj.crv.params.ParameterTab.isSelected=function(){return MochiKit.DOM.hasElementClass(this._labelCtn,"iactParamLabelSel")};bobj.crv.params.ParameterTab.setSelected=function(a){if(a){MochiKit.DOM.addElementClass(this._labelCtn,"iactParamLabelSel")}else{MochiKit.DOM.removeElementClass(this._labelCtn,"iactParamLabelSel")}};bobj.crv.params.newParameterDialog=function(a){a=MochiKit.Base.update({id:bobj.uniqueId(),prompt:null,promptHTML:"",showCB:null,hideCB:null},a);var b=newDialogBoxWidget(a.id,L_bobj_crv_ParamsDlgTitle,a.width,a.height);bobj.fillIn(b,a);b._showDialogBox=b.show;b._initDialogBox=b.init;MochiKit.Base.update(b,bobj.crv.params.ParameterDialog);return b};bobj.crv.params.ParameterDialog.init=function(){this._initDialogBox();this._form=document.getElementById(this.id+"_form")};bobj.crv.params.ParameterDialog._checkInitialization=function(){if(!this.layer){targetApp(this.getHTML());this.init()}};bobj.crv.params.ParameterDialog.show=function(a){if(a){this._checkInitialization();this.setResize(MochiKit.Base.noop);this._showDialogBox(true)}else{if(this.layer){this._showDialogBox(false)}}if(a&&this.showCB){this.showCB()}else{if(!a&&this.hideCB){this.hideCB()}}};bobj.crv.params.ParameterDialog.isVisible=function(){return(this.initialized()&&this.isDisplayed())};bobj.crv.params.ParameterDialog.setPromptHTML=function(k){if(k){this._checkInitialization();if(this.isDisplayed()){this._showDialogBox(false)}this._deleteScripts();var b=bobj.html.extractHtml(k);this.promptHTML=b.html;if(this._form){this._form.innerHTML='<div style="overflow:auto">'+this.promptHTML+"</div>"}var s=b.links;for(var r=0,l=s.length;r<l;++r){bobj.includeLink(s[r])}var m={x:getScrollX(),y:getScrollY()};var f=b.scripts;for(var a=0,g=f.length;a<g;++a){var q=f[a];if(!q){continue}if(q.text){bobj.evalInWindow(q.text)}}var n={x:getScrollX(),y:getScrollY()};if(m.x!=n.x||m.y!=n.y){_curWin.scrollTo(m.x,m.y)}}};bobj.crv.params.ParameterDialog._deleteScripts=function(){var b=this._form;if(b&&b.ContextHandleID){var f=b.ContextHandleID.value;for(var a in window){if(a.indexOf(f)===0){delete window[a]}}}};bobj.crv.params.ParameterDialog.getHTML=function(f){var a=bobj.html.FORM;var b="eventCancelBubble(event);return false;";return this.beginHTML()+a({id:this.id+"_form",onsubmit:b},this.promptHTML)+this.endHTML()};function bobj_WebForm_Callback(k,n,b){if(!k||!b){return}var q=document.getElementById(b);if(!q){return}var r=[];for(var g=0,a=q.elements.length;g<a;g++){var f=q.elements[g];if(f.name&&f.value){r.push(f.name);r.push("=");r.push(encodeURIComponent(f.value));r.push("&")}}r.push("__BOBJ_CALLBACK_EVENTTARGET=");r.push(encodeURIComponent(k));r.push("&__BOBJ_CALLBACK_EVENTARGUMENT=");r.push(encodeURIComponent(n));var m=r.join("");var l=MochiKit.Async.getXMLHttpRequest();l.open("POST",q.action,true);l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.setRequestHeader("Accept","application/json");return MochiKit.Async.sendXMLHttpRequest(l,m)}if(typeof bobj=="undefined"){bobj={}}if(typeof bobj.crv=="undefined"){bobj.crv={}}if(typeof bobj.crv.Calendar=="undefined"){bobj.crv.Calendar={}}bobj.crv.Calendar.getInstance=function(){if(!bobj.crv.Calendar.__instance){bobj.crv.Calendar.__instance=bobj.crv.newCalendar()}return bobj.crv.Calendar.__instance};bobj.crv.Calendar.Signals={OK_CLICK:"okClick",CANCEL_CLICK:"cancelClick",ON_HIDE:"onHide"};bobj.crv.newCalendar=function(a){var f=MochiKit.Base.update;a=f({id:bobj.uniqueId()+"_calendar",showTime:false,date:new Date(),timeFormats:["HH:mm:ss","H:mm:ss","H:m:s","HH:mm","H:mm","H:m","h:mm:ss a","h:m:s a","h:mm:ssa","h:m:sa","h:mm a","h:m a","h:mma","h:ma"]},a);var b=newMenuWidget();b.widgetType="Calendar";bobj.fillIn(b,a);b._menuJustInTimeInit=b.justInTimeInit;f(b,bobj.crv.Calendar);b._curTimeFormat=b.timeFormats[0];b._cells=[];b._firstDay=0;b._numDays=0;return b};bobj.crv.Calendar._createHeaderButtons=function(){var a=8;var f=4;var b=46;var l=0;var g=12;var k=MochiKit.Base.bind;this._prevMonthBtn=newIconWidget(this.id+"_pm",_skin+"../lov.gif",k(this._onPrevMonthClick,this),"",_calendarPrevMonthLab,a,f,b,g);this._prevYearBtn=newIconWidget(this.id+"_py",_skin+"../lov.gif",k(this._onPrevYearClick,this),"",_calendarPrevYearLab,a,f,b,g);this._nextMonthBtn=newIconWidget(this.id+"_nm",_skin+"../lov.gif",k(this._onNextMonthClick,this),"",_calendarNextMonthLab,a,f,b,l);this._nextYearBtn=newIconWidget(this.id+"_ny",_skin+"../lov.gif",k(this._onNextYearClick,this),"",_calendarNextYearLab,a,f,b,l);this._prevMonthBtn.allowDblClick=true;this._prevYearBtn.allowDblClick=true;this._nextMonthBtn.allowDblClick=true;this._nextYearBtn.allowDblClick=true};bobj.crv.Calendar._createTimeTextField=function(){var a=MochiKit.Base.bind;this._timeField=newTextFieldWidget(this.id+"_time",a(this._onTimeChange,this),null,null,null,true,null,null,null,null)};bobj.crv.Calendar._createOKCancelButtons=function(){var a=MochiKit.Base.bind;this._okBtn=newButtonWidget(this.id+"_ok",L_bobj_crv_OK,a(this._onOKClick,this));this._cancelBtn=newButtonWidget(this.id+"_cancel",L_bobj_crv_Cancel,a(this._onCancelClick,this))};bobj.crv.Calendar.justInTimeInit=function(){this._menuJustInTimeInit();this._prevMonthBtn.init();this._prevYearBtn.init();this._nextMonthBtn.init();this._nextYearBtn.init();this._okBtn.init();this._cancelBtn.init();this._timeField.init();this._timeField.layer.style.width="100%";this._timeField.setValue(bobj.external.date.formatDate(this.date,this._curTimeFormat));this._timeRow=getLayer(this.id+"_timeRow");this._timeSep=getLayer(this.id+"_timeSep");this._month=getLayer(this.id+"_month");this._year=getLayer(this.id+"_year");var b=6*7;for(var a=0;a<b;a++){this._cells[a]=getLayer(this.id+"_c"+a)}this._update()};bobj.crv.Calendar.getHTML=function(){var n=bobj.html;var s=n.TABLE;var a=n.TBODY;var f=n.TR;var x=n.TD;var r=n.DIV;var v=n.SPAN;var b=n.A;this._createHeaderButtons();this._createTimeTextField();this._createOKCancelButtons();var q="MenuWidget_keyDown('"+this.id+"', event); return true";var g="eventCancelBubble(event)";var u="eventCancelBubble(event)";var l="eventCancelBubble(event)";var k={"class":"calendarTextPart"};var m=s({dir:"ltr",id:this.id,border:"0",cellpadding:"0",cellspacing:"0",onkeydown:q,onmousedown:g,onmouseup:u,onkeypress:l,"class":"menuFrame",style:{cursor:"default",visibility:"hidden","z-index":10000}},a(null,f(null,x(null,this._getMonthYearHTML())),f(null,x({align:"center"},s({border:"0",cellspacing:"0",cellpadding:"0",style:{margin:"2px","margin-top":"6px"}},f({align:"center"},x(k,L_bobj_crv_SundayShort),x(k,L_bobj_crv_MondayShort),x(k,L_bobj_crv_TuesdayShort),x(k,L_bobj_crv_WednesdayShort),x(k,L_bobj_crv_ThursdayShort),x(k,L_bobj_crv_FridayShort),x(k,L_bobj_crv_SaturdayShort)),f(null,x({colspan:"7",style:{padding:"2px"}},this._getSeparatorHTML())),this._getDaysHTML(),f(null,x({colspan:"7",style:{padding:"2px"}},this._getSeparatorHTML())),f({id:this.id+"_timeRow",style:{display:this.showTime?"":"none"}},x({colspan:"7",style:{"padding-top":"3px","padding-bottom":"3px","padding-right":"10px","padding-left":"10px"}},this._timeField.getHTML())),f({id:this.id+"_timeSep",style:{display:this.showTime?"":"none"}},x({colspan:"7",style:{padding:"2px"}},this._getSeparatorHTML())),f(null,x({colspan:"7",align:"right",style:{"padding-bottom":"3px","padding-top":"3px"}},s(null,a(null,f(null,x(null,this._okBtn.getHTML()),x(null,this._cancelBtn.getHTML())))))))))));return this._getLinkHTML("startLink_"+this.id)+m+this._getLinkHTML("endLink_"+this.id)};bobj.crv.Calendar._getMonthYearHTML=function(){var f=bobj.html;var g=f.TABLE;var b=f.TBODY;var l=f.TR;var a=f.TD;var k=f.DIV;var m=f.SPAN;return g({"class":"dialogzone",width:"100%",cellpadding:"0",cellspacing:"0"},b(null,l(null,a({style:{"padding-top":"1px"}},this._nextMonthBtn.getHTML()),a({rowspan:"2",width:"100%",align:"center","class":"dialogzone"},m({id:this.id+"_month",tabIndex:"0"},_month[this.date.getMonth()]),"&nbsp;&nbsp;",m({id:this.id+"_year",tabIndex:"0"},this.date.getFullYear())),a({style:{"pading-top":"1px"}},this._nextYearBtn.getHTML())),l({valign:"top"},a({style:{"padding-bottom":"1px"}},this._prevMonthBtn.getHTML()),a({style:{"padding-bottom":"1px"}},this._prevYearBtn.getHTML()))))};bobj.crv.Calendar._getSeparatorHTML=function(){var f=bobj.html;var g=f.TABLE;var b=f.TBODY;var k=f.TR;var a=f.TD;return g({width:"100%",height:"3",cellpadding:"0",cellspacing:"0",border:"0",style:backImgOffset(_skin+"menus.gif",0,80)},b(null,k(null,a())))};bobj.crv.Calendar._getLinkHTML=function(a){return bobj.html.A({id:a,href:"javascript:void(0)",onfocus:"MenuWidget_keepFocus('"+this.id+"')",style:{visibility:"hidden",position:"absolute"}})};bobj.crv.Calendar._getDaysHTML=function(){var a=bobj.html.TD;var g=bobj.html.DIV;var f="";for(i=0;i<6;++i){f+='<tr align="right">';for(j=0;j<7;++j){var k=j+(i*7);var b="(this,"+k+",event);";f+=a({id:this.id+"_c"+(i*7+j),"class":"calendarTextPart",onmousedown:"bobj.crv.Calendar._onDayMouseDown"+b,onmouseover:"bobj.crv.Calendar._onDayMouseOver"+b,onmouseout:"bobj.crv.Calendar._onDayMouseOut"+b,ondblclick:"bobj.crv.Calendar._onDayDoubleClick"+b,onkeydown:"bobj.crv.Calendar._onDayKeyDown"+b},g({"class":"menuCalendar"}))}f+="</tr>"}return f};bobj.crv.Calendar._update=function(){var n=6*7;var f=this.date.getDate();var b=this._getMonthInfo(this.date.getMonth(),this.date.getFullYear());var a=b.firstDay;this._firstDay=b.firstDay;this._numDays=b.numDays;var l=""+this.date.getFullYear();while(l.length<4){l="0"+l}this._year.innerHTML=l;this._month.innerHTML=_month[this.date.getMonth()];this._selectedDate=null;for(var k=0;k<n;k++){var m=this._cells[k].firstChild;var q="menuCalendar";var g=this._getDateFromCellNum(k);if(g<1||g>b.numDays){m.innerHTML="";m.tabIndex="-1"}else{m.innerHTML=""+g;m.tabIndex="0";if(g==f){q="menuCalendarSel";this._selectedDay=m}}m.className=q}};bobj.crv.Calendar._getMonthInfo=function(l,k){var f=new Date();f.setDate(1);f.setFullYear(k);f.setMonth(l);var a=f.getDay();f.setDate(28);var b=28;for(var g=29;g<32;g++){f.setDate(g);if(f.getMonth()!=l){break}b=g}return{firstDay:a,numDays:b}};bobj.crv.Calendar._setDayOfMonth=function(a){if(a>0&&a<=this._numDays){var f=this.date.getDate();if(a!=f){var b=this._getCellFromDate(f);if(b){b.firstChild.className="menuCalendar"}this._getCellFromDate(a).firstChild.className="menuCalendarSel";this.date.setDate(a)}}};bobj.crv.Calendar._getCellFromDate=function(a){var b=a+this._firstDay-1;return this._cells[b]};bobj.crv.Calendar._getDateFromCellNum=function(a){return a-this._firstDay+1};bobj.crv.Calendar._onDayMouseOver=function(f,k,b){var g=getWidget(f);var l=f.firstChild;var a=k-g._firstDay+1;if(a<1||a>g._numDays){l.className="menuCalendar"}else{l.className="menuCalendarSel"}};bobj.crv.Calendar._onDayMouseOut=function(f,k,b){var g=getWidget(f);var l=f.firstChild;var a=k-g._firstDay+1;if(a!=g.date.getDate()){l.className="menuCalendar"}};bobj.crv.Calendar._onDayMouseDown=function(f,k,b){var g=getWidget(f);var a=k-g._firstDay+1;g._setDayOfMonth(a)};bobj.crv.Calendar._onDayDoubleClick=function(b,g,a){var f=getWidget(b);f._onOKClick()};bobj.crv.Calendar._onDayKeyDown=function(g,l,f){f=new MochiKit.Signal.Event(g,f);var b=f.key().string;if(b==="KEY_ENTER"){var k=getWidget(g);var a=l-k._firstDay+1;k._setDayOfMonth(a)}};bobj.crv.Calendar._onPrevMonthClick=function(){if(this.date.getMonth()===0){this.date.setYear(this.date.getFullYear()-1);this.date.setMonth(11)}else{this.date.setMonth(this.date.getMonth()-1)}this._update()};bobj.crv.Calendar._onPrevYearClick=function(){this.date.setFullYear(this.date.getFullYear()-1);this._update()};bobj.crv.Calendar._onNextMonthClick=function(){this.date.setMonth(this.date.getMonth()+1);this._update()};bobj.crv.Calendar._onNextYearClick=function(){this.date.setFullYear(this.date.getFullYear()+1);this._update()};bobj.crv.Calendar._onOKClick=function(){this.restoreFocus();MochiKit.Signal.signal(this,this.Signals.OK_CLICK,this._copyDate(this.date));this.show(false)};bobj.crv.Calendar._copyDate=function(a){if(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())}return new Date()};bobj.crv.Calendar._onCancelClick=function(){this.restoreFocus();this.show(false);MochiKit.Signal.signal(this,this.Signals.CANCEL_CLICK)};bobj.crv.Calendar._onTimeChange=function(){var g=this._timeField.getValue();var a=null;var f=null;for(var b=0;b<this.timeFormats.length&&a===null;++b){f=this.timeFormats[b];a=bobj.external.date.getDateFromFormat(g,f)}if(a){this._curTimeFormat=f;this.date.setHours(a.getHours());this.date.setMinutes(a.getMinutes());this.date.setSeconds(a.getSeconds());this.date.setMilliseconds(a.getMilliseconds())}else{this._timeField.setValue(bobj.external.date.formatDate(this.date,this._curTimeFormat))}};bobj.crv.Calendar.setShowTime=function(b){var a=b?"":"none";this.showTime=b;if(this.layer){this._timeRow.style.display=a;this._timeSep.style.display=a}};bobj.crv.Calendar.setDate=function(a){this.date=a;if(this.layer){this._timeField.setValue(bobj.external.date.formatDate(this.date,this._curTimeFormat));this._update()}};bobj.crv.Calendar.show=function(g,a,k,f,b){ScrollMenuWidget_show.call(this,g,a,k);if(g){this.focus()}else{MochiKit.Signal.signal(this,this.Signals.ON_HIDE)}};bobj.crv.Calendar.focus=function(){if(this._selectedDay){this._selectedDay.focus()}};if(typeof bobj.crv.params.FlexParameterUI=="undefined"){bobj.crv.params.FlexParameterUI={}}bobj.crv.params.FlexParameterUI=function(){var r=[];var g=[];var l=[];var m=[];var a=[];var q=[];var n=[];var k;var f=[];var b=[]};bobj.crv.params.FlexParameterUI.setViewerLayoutType=function(b,a){if(!this._viewerLayoutType){this._viewerLayoutType=[]}this._viewerLayoutType[b]=a};bobj.crv.params.FlexParameterUI.setPromptData=function(b,a){if(!this._promptData){this._promptData=[]}this._promptData[b]=a};bobj.crv.params.FlexParameterUI.setCurrentIParamInfo=function(b,a,f){if(!this._paramCtrl){this._paramCtrl=[]}if(!this._currentIParam){this._currentIParam=[]}this._paramCtrl[b]=a;this._currentIParam[b]=f};bobj.crv.params.FlexParameterUI.setCloseDialogCallBack=function(b,a){if(!this._closeDialogCallBack){this._closeDialogCallBack=[]}this._closeDialogCallBack[b]=a};bobj.crv.params.FlexParameterUI.addIParamPromptUnitData=function(k,g,m,b){if(!this._iParamsPromptUnitData){this._iParamsPromptUnitData=[]}if(!this._iParamsPromptUnitData[k]){this._iParamsPromptUnitData[k]=[]}if(!this._iParamsParamData){this._iParamsParamData=[]}if(!this._iParamsParamData[k]){this._iParamsParamData[k]=[]}this._iParamsPromptUnitData[k][g]=b;for(var f=0,a=m.length;f<a;f++){var l=m[f];this._iParamsParamData[k][l]=g}};bobj.crv.params.FlexParameterUI.getSWF=function(b){if(!this._swfID||!this._swfID[b]){return}if(!this._swf){this._swf=[]}if(this._swf[b]){return this._swf[b]}else{var a=document.getElementById(this._swfID[b]);if(!a){return}this._swf[b]=a;return a}};bobj.crv.params.FlexParameterUI.getInstallHTML=function(){return L_bobj_crv_FlashRequired.replace("{0}","<br><a href='http://www.adobe.com/go/getflash/' target='_blank'>")+"</a>"};bobj.crv.params.FlexParameterUI.checkFlashPlayer=function(){return swfobject.hasFlashPlayerVersion("9.0.0")};bobj.crv.params.FlexParameterUI.createSWF=function(s,f,k,u){if(!this._swfID){this._swfID=[]}bobj.crv.logger.info("Create the SWF");if(this.checkFlashPlayer()){var a=bobj.crv.getLangCode();var b=bobj.crvUri("../../swf/");var n=b+"prompting.swf";var q=bobj.uniqueId();var g={eventTarget:s,locale:a,isIParamDialog:u,baseURL:b,servletURL:k};var l={menu:"false",wmode:"window",allowscriptaccess:"sameDomain"};var m={id:q,name:q,style:"z-index:"+bobj.constants.modalLayerIndex};if(!(_ie||_ie11Up)){document.getElementById(f).parentNode.style.visibility="hidden"}swfobject.embedSWF(n,f,"360","50","9.0.0","",g,l,m);this._swfID[s]=q;var r=getWidgetFromID(s);if(r&&r._reportProcessing){r._reportProcessing.delayedShow(false)}}else{document.getElementById(f).innerHTML="<p>"+this.getInstallHTML()+"</p>"}};bobj.crv.params.FlexParameterUI.init=function(q){if(!q||!this._swfID||!this._swfID[q]){return}bobj.crv.logger.info("Init the SWF");var a=this.getSWF(q);if(!a){return}var r=getWidgetFromID(q);if(r&&r._reportProcessing){r._reportProcessing.cancelShow()}if(a.setStateInfo){var n=MochiKit.Base.serializeJSON;a.setStateInfo(encodeURIComponent(n(bobj.crv.stateManager.getCompositeState())))}if(a.setIdealHeight){var g=bobj.crv.Viewer.LayoutTypes;var k=g.CLIENT;if(this._viewerLayoutType&&this._viewerLayoutType[q]){k=this._viewerLayoutType[q]}var b=MochiKit.Style.getElementDimensions(getLayer(q));var f=k===g.FIXED?0:400;a.setIdealHeight(Math.max(f,b.h-20))}if(this._currentIParam&&this._currentIParam[q]){if(!this._iParamsParamData||!this._iParamsParamData[q]||!this._iParamsPromptUnitData||!this._iParamsPromptUnitData[q]){this.setPromptData(q,null)}else{var m=this._iParamsParamData[q][this._currentIParam[q].paramName];if(!m){this.setPromptData(q,null)}var l=this._iParamsPromptUnitData[q][m];this.setPromptData(q,l)}}if(this._promptData&&this._promptData[q]&&a.setPromptData){a.setPromptData(this._promptData[q])}};bobj.crv.params.FlexParameterUI.setIParamValues=function(v,m,q,u){if(!this._paramCtrl||!this._currentIParam||!this._iParamsParamData||!this._iParamsPromptUnitData){return}var g=this._currentIParam[v];var n=this._paramCtrl[v];var a=this._iParamsParamData[v];var r=this._iParamsPromptUnitData[v];if(!g||!n||!a||!r){return}var b=g.paramName;if(m){for(var f=0,l=q.length;f<l;f++){var s=q[f];if(!s.name||!s.values){continue}n.updateParameter(s.name,s.values)}}else{n.updateParameter(b,q)}n._updateToolbar();var k=a[b];if(k){r[k]=u}this.closeIParamDialog(v)};bobj.crv.params.FlexParameterUI.closeIParamDialog=function(a){if(this._closeDialogCallBack&&this._closeDialogCallBack[a]){this._closeDialogCallBack[a]()}};bobj.crv.params.FlexParameterUI.resize=function(k,a,f){var b=this.getSWF(k);if(b){bobj.crv.logger.info("Resizing the SWF h:"+a+" w:"+f);b.style.width=f+"px";b.style.height=a+"px";var g=b.parentNode.style;g.position="absolute";g.visibility="visible"}};bobj.crv.params.FlexParameterUI.center=function(n,a){var b=this.getSWF(n);if(b){var q=bobj.crv.logger;q.info("Centering the SWF");var f=getLayer(n);if(!f){q.error("Could not find the viewer:"+n);return}var r=MochiKit.Style.getElementPosition(f);var m=MochiKit.Style.getElementDimensions(f);var k=MochiKit.Style.getElementDimensions(b);var g=b.parentNode.style;if(!a){g.top=Math.max(r.y,r.y+(m.h/2)-(k.h/2))+"px"}else{g.top=(r.y+10)+"px"}g.left=Math.max(r.x,r.x+(m.w/2)-(k.w/2))+"px";if(b.focus!=undefined){b.focus()}}};bobj.crv.params.FlexParameterUI.startMove=function(g){var b=this.getSWF(g);if(b){if(this._moveArea){return}this._moveArea=document.createElement("div");this._moveArea.id=bobj.uniqueId();MOVE_STYLE=this._moveArea.style;var a=b.style;var f=b.parentNode.style;MOVE_STYLE.top=f.top;MOVE_STYLE.left=f.left;MOVE_STYLE.width=a.width;MOVE_STYLE.height=a.height;MOVE_STYLE.border="1px";MOVE_STYLE.borderStyle="solid";MOVE_STYLE.borderColor="#000000";MOVE_STYLE.backgroundColor="#FFFFFF";MOVE_STYLE.position="absolute";MOVE_STYLE.opacity=0.5;MOVE_STYLE.filter="alpha(opacity=50)";MOVE_STYLE.zIndex=bobj.constants.modalLayerIndex-1;document.body.appendChild(this._moveArea);document.body.style.cursor="move"}};bobj.crv.params.FlexParameterUI.stopMove=function(b){var a=this.getSWF(b);if(a){var f=MochiKit.Style.getElementPosition(this._moveArea);MochiKit.Style.setElementPosition(a.parentNode,f);document.body.removeChild(this._moveArea);delete this._moveArea;document.body.style.cursor="default"}};bobj.crv.params.FlexParameterUI.Move=function(B,z,v){var k=this.getSWF(B);if(k){var D=bobj.crv.logger;D.info("doMove Called viewer:"+B+" x:"+z+" y:"+v);var u=getLayer(B);if(!u){D.error("Shifting SWF could not find the viewer:"+B);return}var r=this._moveArea;if(!r){D.error("Unable to move SWF, no move area available");return}var q=r.offsetLeft;var n=r.offsetTop;var C=r.offsetHeight;var s=r.offsetWidth;var f=u.offsetLeft;var b=u.offsetTop;var A=u.offsetHeight;var g=u.offsetWidth;var a=q+z;var E=n+v;if(E<b){E=b}else{if(E+C>b+A){E=A-C}}if(a<f){a=f}else{if(a+s>f+g){a=g-s}}r.style.top=E+"px";r.style.left=a+"px";D.info("Moved the SWF to x:"+a+" y:"+E)}};bobj.crv.params.FlexParameterUI.setParamValues=function(b,a){bobj.crv.logger.info("setting parameter values");bobj.event.publish("crprompt_flexparam",b,a)};bobj.crv.params.FlexParameterUI.logon=function(b,a){bobj.crv.logger.info("logging on");bobj.event.publish("crprompt_flexlogon",b,a)};