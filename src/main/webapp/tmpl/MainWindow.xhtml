<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pi="http://primefaces.org/ui/ism"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      id="html">
    <h:head>
        <title><ui:insert name="title">#{ism.AppName}</ui:insert></title>
        <link rel="shortcut icon" href="#{resource['img/company/ismMain3.png']}" type="image/x-png" /> 
        <meta http-equiv="refresh" 
              content="#{viewRibbon.advanceSessionMaxInactiveInterval()};url=#{request.contextPath}#{request.servletPath}/login.xhtml?faces-redirect=true"/>


        <f:facet name="last">
            <h:outputStylesheet library="css" name="ribbon/ism-ribbon.min.css" />
            <h:outputStylesheet library="css" name="ribbon/ism-MainMenu.min.css" />
            <h:outputStylesheet library="css" name="ism-layout.min.css" />
            <h:outputStylesheet library="css" name="ism-global.min.css" />
            <h:outputStylesheet library="css" name="ism-index.min.css" />
            <h:outputStylesheet library="css" name="admin/ism-smq-nc.min.css" />

            <h:outputStylesheet library="js" name="daterangepicker/jquery.comiseo.daterangepicker.min.css" />


            <h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
            <h:outputScript library="primefaces" name="jquery/jquery-plugins.js" target="head" />

            <h:outputScript library="js" name="jquery/jquery-2.2.3.min.js" target="head" />
            <h:outputScript library="js" name="jquery/jquery-ui.min.js" target="head" />
            <h:outputScript library="js" name="daterangepicker/moment.min.js" target="head" />
            <h:outputScript library="js" name="daterangepicker/jquery.comiseo.daterangepicker.min.js" />

            <h:outputScript library="js" name="ism-global.min.js" />
            <h:outputScript library="js" name="lang.min.js" />
        </f:facet>
    </h:head>

    <h:body id="body" rendered="#{request.session.getAttribute('authenticated')}">

        <!--    Reste affiché pendant 5s
                Montre un résumer et affiche les détails
                Seul les messages sans id sont affiché
        -->
        <p:growl id="growl" life="5000" 
                 showDetail="true" showSummary="true" escape="false"/>  




        <p:layout id="fullPage" fullPage="#{viewLayout.layout.fullPage}"
                  resizeTitle="Réduire ou Double click pour réduire"
                  collapseTitle="Réduire la taille"
                  expandTitle="Etirer ou Double click pour restaurer"
                  closeTitle="Fermer"
                  stateful="false" 
                  widgetVar="fpLayoutWidget"
                  > 
            <p:ajax event="resize" listener="#{viewLayout.handleResize}" update="growl"/>
            <p:ajax event="close" listener="#{viewLayout.handleClose}" update="growl"/>
            <p:ajax event="toggle" listener="#{viewLayout.handleToggle}" update="growl"/>


            <p:layoutUnit id="unitNorth" position="north" 
                          size="#{viewLayout.northUnit.size}"
                          resizable="#{viewLayout.northUnit.resizable}" 
                          closable="#{viewLayout.northUnit.closable}"
                          collapsible="#{viewLayout.northUnit.collapsible}"
                          minSize="#{viewLayout.northUnit.minSize}"
                          maxSize="#{viewLayout.northUnit.maxSize}"
                          gutter="#{viewLayout.northUnit.gutter}"
                          visible="#{viewLayout.northUnit.visible}"
                          collapsed="#{viewLayout.northUnit.collapsed}"
                          collapseSize="#{viewLayout.northUnit.collapseSize}"
                          effect="#{viewLayout.northUnit.effect}"
                          effectSpeed="#{viewLayout.northUnit.effectSpeed}"
                          >

                <h:form id="mainForm">
                    <p:poll id="poll" interval="#{viewRibbon.reminingTimeSessionClock}" 
                            listener="#{viewRibbon.updateReminingTimeSession()}" 
                            update="shortcut-label-reminingTimeout" global="false"  />

                    <div id="ribbon-layout">
                        <div id="ribbon-layout-shortcut">
                            <div id="shortcut-main" >
                                <p:menuButton id="shortcut-selector" value=""  >
                                    <p:menuitem actionListener="#{viewRibbon.findComponent('btn_1')}" value="btn 1" update="@form" />
                                    <p:menuitem actionListener="#{viewRibbon.findComponent('btn_2')}" value="btn 2" update="@form" />
                                    <p:separator />
                                    <p:menuitem actionListener="#{viewRibbon.findComponent('shortcut-btn-theme')}" value="#{ism.Themes}" update="@form" />
                                    <p:menuitem actionListener="#{viewRibbon.findComponent('shortcut-btn-logout')}" value="#{ism.Authentication_Disconnect}" update="@form" />
                                    <p:menuitem actionListener="#{viewRibbon.findComponent('shortcut-label-reminingTimeout')}" value="TimeOut" update="@form" />
                                </p:menuButton>
                            </div>
                            <div id="shortcut-left">
                                <p:commandButton id="btn_1"  value='' rendered="false" />
                                <p:commandButton id="btn_2" value=''  rendered="false" />
                            </div>
                            <div id="shortcut-center">
                                <p:outputLabel value="#{ism.AppNameA} [ #{ism.AppVersion} ]  -  #{ism.CompanyName} - #{staffAuthController.staff.stStaff} - #{staffAuthController.staff.stFirstname} #{staffAuthController.staff.stLastname} #{staffAuthController.staff.stMiddlename}"/>
                            </div>
                            <div id="shortcut-right">

                                <p:selectOneMenu  id="shortcut-btn-theme" 
                                                  value="#{staffSetupController.theme}" 
                                                  var="t" 
                                                  valueChangeListener="#{staffSetupController.applyThemeEvent}"
                                                  filter="true" filterMatchMode="contains"
                                                  title="Thème recommandé (Flick Smothness, redmond , cupertino, aristo, bitzer, hot-sneaks, Excite Bike" 
                                                  >
                                    <p:ajax oncomplete="location.reload();" />
                                    <f:selectItem   itemLabel="#{staffSetupController.selected.stsTheme}"
                                                    itemValue="#{themeService.getStrTheme(staffSetupController.selected.stsTheme)}"
                                                    />
                                    <f:selectItems value="#{themeService.themes}" 
                                                   var="th"  itemValue="#{th}"  />
                                    <p:column>
                                        <h:outputText value="#{t.displayName}" />
                                    </p:column>
                                </p:selectOneMenu>

                                <p:commandButton id="shortcut-btn-logout" 
                                                 icon="ui-icon-key"  value="#{ism.Authentication_Disconnect}" rendered="true"
                                                 action="#{staffAuthController.logout}"
                                                 actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                 />
                                <p:outputLabel      id="shortcut-label-reminingTimeout"
                                                    value="#{viewRibbon.reminingTimeSession}/#{request.session.maxInactiveInterval}"
                                                    rendered="true"
                                                    style="margin-right: 3px; min-width: 72px; min-height: 22px; background-color: #a1dbff;"

                                                    />
                            </div>
                        </div>





                        <pi:ribbon id="ism-ribbon"  activeIndex="#{viewRibbon.activeIndex}">
                            <p:ajax event="tabChange" listener="#{viewRibbon.onChange}" />

                            <p:tab id="main" title="#{ism.Home}" titletip="#{ism.HomeTitle}" >

                            </p:tab>

                            <p:tab id="administration" title="#{ism.AdminPage}">
                                <pi:ribbonGroup id="ribbonGroupSMQ" label="SMQ"  >
                                    <pi:ribbonGroupSet id="ribbonGroupSetSMQ" set="big" >
                                        <p:commandButton id="btnSMQProcessus"
                                                         rendered="#{request.isUserInRole('CO_SMQPROCESSUS_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                         title="Visualiser les processus"
                                                         action="/company/smq/processus/List.xhtml?faces-redirect=true"
                                                         icon="ui-ribbonicon-new" 
                                                         value="Processus"
                                                         />
                                        <p:commandButton id="btnSMQDocType"
                                                         rendered="#{request.isUserInRole('CO_SMQDOCTYPE_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                         title="Visualiser les types de document"
                                                         action="/company/smq/docType/List.xhtml?faces-redirect=true"
                                                         icon="ui-ribbonicon-new" 
                                                         value="Type de document"
                                                         />
                                        <p:commandButton id="btnSMQDocument"
                                                         rendered="#{request.isUserInRole('CO_SMQDOCEXPLORER_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                         title="Liste de document"
                                                         action="/company/smq/docExplorer/List.xhtml?faces-redirect=true"
                                                         icon="ui-ribbonicon-new" 
                                                         value="Documentation"
                                                         />
                                    </pi:ribbonGroupSet>
                                </pi:ribbonGroup>

                                <pi:ribbonGroup id="RibbonGroupAdminNC" label="Non conformité" >
                                    <pi:ribbonGroupSet id="ribSetNC" set="big">
                                        <p:commandButton id="btnSMQNC"
                                                         title="Gestion de non conformité"
                                                         action="/company/smq/nc/Request/List.xhtml?faces-redirect=true"
                                                         actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                         rendered="#{request.isUserInRole('CO_SMQNCREQUEST_R')}"
                                                         icon="ui-icon-smqnc" 
                                                         value="Gérer"
                                                         />

                                        <p:menuButton id="menubutton-smq-nc" 
                                                      value="Configuration"
                                                      styleClass="ui-menubutton-smqnc"
                                                      >
                                            <p:menuitem id="splitButtonMenuItemNCUnit"
                                                        value="Unités"
                                                        action="/company/smq/nc/Unite/List.xhtml?faces-redirect=true"
                                                        actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                        rendered="#{request.isUserInRole('CO_SMQNCUNITE_R')}"
                                                        icon="ui-icon-smqnc-unit"
                                                        />
                                            <p:menuitem id="splitButtonMenuItemNCNature"
                                                        value="Nature" 
                                                        action="/company/smq/nc/Nature/List.xhtml?faces-redirect=true"
                                                        actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                        rendered="#{request.isUserInRole('CO_SMQNCNATURE_R')}"
                                                        icon="ui-icon-smqnc-nature"
                                                        />
                                            <p:menuitem id="splitButtonMenuItemNCGravity"
                                                        value="Gravités" 
                                                        action="/company/smq/nc/Gravite/List.xhtml?faces-redirect=true"
                                                        actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                        rendered="#{request.isUserInRole('CO_SMQNCGRAVITE_R')}"
                                                        icon="ui-icon-smqnc-gravite"
                                                        />
                                            <p:menuitem id="splitButtonMenuItemNCFrequency"
                                                        value="Fréquences" 
                                                        action="/company/smq/nc/Frequence/List.xhtml?faces-redirect=true"
                                                        actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                        rendered="#{request.isUserInRole('CO_SMQNCFREQUENCE_R')}"
                                                        icon="ui-icon-smqnc-frequence"/>
                                            <p:separator />
                                            <p:menuitem id="splitButtonMenuItemNCRequest"
                                                        value="Non conformité" 
                                                        action="/company/smq/nc/Request/List.xhtml?faces-redirect=true"
                                                        actionListener="#{viewRibbon.setActiveIndex(1)}"
                                                        rendered="#{request.isUserInRole('CO_SMQNCREQUEST_R')}"
                                                        icon="ui-icon-smqnc-request" />
                                        </p:menuButton>
                                    </pi:ribbonGroupSet>
                                </pi:ribbonGroup>
                            </p:tab>

                            <p:tab id="resources" title="#{ism.HRPage}">
                                <pi:ribbonGroup id="RibbonGroupResources" label="Staff">
                                    <pi:ribbonGroupSet id="ribbonGroupSetStaff" set="small">
                                        <p:commandButton id="btnStaffGroup"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFGROUPDEF_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(2)}"
                                                         title="Gérer vos groupes de staff donnant accès au utilisateur"
                                                         action="/company/hr/staffGroupDef/List.xhtml?faces-redirect=true"
                                                         value="Groupes" 
                                                         icon="ui-icon-hrstaffgroups" />
                                        <p:commandButton id="btnStaffRole"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFGROUPDEFROLE_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(2)}"
                                                         title="Associer des rôles d'accès au groupes de staff sous forme tabulaire"
                                                         action="/company/hr/staffGroupDefRole/List.xhtml?faces-redirect=true"
                                                         value="Rôle List" 
                                                         icon="ui-icon-hrstaffroles" />
                                        <p:commandButton id="btnStaffRoleTree"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFGROUPDEFROLE_R')}"
                                                         actionListener="#{staffGroupDefRoleController.prepareCreateTree}"
                                                         title="Associer des rôles d'accès au groupes de staff sous forme d'arbre"
                                                         action="/company/hr/staffGroupDefRole/CreateTree.xhtml?faces-redirect=true"
                                                         value="Rôle Tree" 
                                                         icon="ui-icon-hrstaffroles" />

                                        <p:commandButton id="btnStaffCompany"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFGROUPDEFROLE_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(2)}"
                                                         title="Lier l'utilisateur à une compagnie"
                                                         action="/company/hr/staffCompany/List.xhtml?faces-redirect=true"
                                                         value="Société"
                                                         icon="ui-icon-hrstaffcompany" />
                                        <p:commandButton id="btnStaffToGroup"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFGROUPS_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(2)}"
                                                         title="Lier des utilisateur à un groupe d'accès"
                                                         action="/company/hr/staffGroups/List.xhtml?faces-redirect=true"
                                                         value="Accès"
                                                         icon="ui-icon-hrstaffacces"  />
                                    </pi:ribbonGroupSet>
                                    <pi:ribbonGroupSet id="ribbonGroupSetStaffCreate" set="big">

                                        <p:commandButton id="btnStaffCreate"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFMANAGER_W')}"
                                                         actionListener="#{staffManagerController.prepareCreate}"
                                                         title="Créer un utilisateur"
                                                         action="/company/hr/staffManager/Create.xhtml?faces-redirect=true"
                                                         value="Staff Création" 
                                                         icon="ui-icon-hrstaffcreate" />


                                        <p:commandButton id="btnStaffList"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFMANAGER_R')}"
                                                         actionListener="#{viewRibbon.setActiveIndex(2)}"
                                                         title="Tableau de la liste du staffs (utilisateurs)"
                                                         action="/company/hr/staff/List.xhtml?faces-redirect=true"
                                                         value="Staff List" 
                                                         icon="ui-icon-hrstafflist" />

                                        <p:commandButton id="btnStaffManageList"
                                                         rendered="#{request.isUserInRole('CO_HRSTAFFMANAGER_R')}"
                                                         actionListener="#{staffManagerController.prepareCreate}"
                                                         title="Grille de la liste du staffs (utilisateurs)"
                                                         action="/company/hr/staffManager/List.xhtml?faces-redirect=true"
                                                         value="Staff List" 
                                                         icon="ui-icon-hrstaffusers" />
                                    </pi:ribbonGroupSet>
                                </pi:ribbonGroup>
                            </p:tab>

                            <p:tab id="tabProcess" title="Process" rendered="true" >
                                <pi:ribbonGroup id="RibbonGroupPStd" label="Standard">
                                    <h:panelGrid id="PanelGridStd" columns="1">
                                        <h:commandButton id="btnPStdEquipement"
                                                         title="Définition des équipements"
                                                         action="/company/process/equipement/List.xhtml?faces-redirect=true"
                                                         image="/resources/img/me/brewery_icon.jpg"
                                                         styleClass="btnSmall"

                                                         actionListener="#{viewRibbon.setActiveIndex(3)}"
                                                         />
                                        <h:commandButton id="btnPStdUnite"
                                                         title="Définition des unités d'usage"
                                                         action="/company/process/unite/List.xhtml?faces-redirect=true"
                                                         image="/resources/img/ctrl/measure_units.png"
                                                         styleClass="btnSmall"

                                                         actionListener="#{viewRibbon.setActiveIndex(3)}"
                                                         />
                                    </h:panelGrid>
                                </pi:ribbonGroup>
                                <pi:ribbonGroup id="RibbonGroupPCtrl" label="Contrôle">
                                    <h:panelGrid id="PanelGridPCtrl" columns="5">
                                        <h:panelGrid columns="3" >
                                            <p:splitButton id="splitButtonProcessCtrlType"  
                                                           icon="ism-menu-icon-ProcessCtrlType" 
                                                           styleClass="ism-menu-icon-ProcessCtrlType"
                                                           title="Définition des types d'analyse"
                                                           action="/company/process/ctrl/AnalyseType/List.xhtml?faces-redirect=true"
                                                           rendered="true"
                                                           actionListener="#{viewRibbon.setActiveIndex(3)}"
                                                           >

                                                <p:menuitem id="splitButtonMenuItemProcessCtrlTypeType" 
                                                            icon="ism-menu-icon-ProcessCtrlType"   
                                                            value="#{ism.PCtrlTypeTitleList}" 
                                                            title="Définition des types d'analyse"
                                                            action="/company/process/ctrl/AnalyseType/List.xhtml?faces-redirect=true"
                                                            rendered="true"
                                                            />
                                                <p:separator />
                                                <p:menuitem id="splitButtonMenuItemProcessCtrlTypeMethod" 
                                                            icon="ism-menu-icon-ProcessCtrlTypeMethod"   
                                                            value="#{ism.PCtrlMethodField_Method}" 
                                                            title="Définition des méthode d'analyse"
                                                            action="/company/process/ctrl/AnalyseMethod/List.xhtml?faces-redirect=true"
                                                            rendered="true"
                                                            />
                                                <p:menuitem id="splitButtonMenuItemProcessCtrlTypeCategory" 
                                                            icon="ism-menu-icon-ProcessCtrlTypeCategory"   
                                                            value="#{ism.PCtrlCategoryField_Category}" 
                                                            title="Définition des catégories d'analyse"
                                                            action="/company/process/ctrl/AnalyseCategory/List.xhtml?faces-redirect=true"
                                                            rendered="true"
                                                            />

                                            </p:splitButton>


                                            <p:splitButton id="splitButtonProcessCtrlSample"  
                                                           icon="ism-menu-icon-ProcessCtrlSample" 
                                                           styleClass="ism-menu-icon-ProcessCtrlSample"
                                                           title="Liste des valeurs d'analyse d'échantillon"
                                                           action="/company/process/ctrl/Sample/List.xhtml?faces-redirect=true"
                                                           rendered="true"
                                                           actionListener="#{viewRibbon.setActiveIndex(3)}"
                                                           >

                                                <p:menuitem id="splitButtonMenuItemProcessCtrlSample" 
                                                            icon="ism-menu-icon-ProcessCtrlSample"   
                                                            value="Valeur d'échantillon" 
                                                            title="Liste des valeurs d'analyse d'échantillon"
                                                            action="/company/process/ctrl/Sample/List.xhtml?faces-redirect=true"
                                                            rendered="true"
                                                            />
                                                <p:separator />
                                                <p:menuitem id="splitButtonMenuItemProcessCtrlSampleSamplePt" 
                                                            icon="ism-menu-icon-ProcessCtrlSampleSamplePt"   
                                                            value="Points d'échantillonage" 
                                                            title="Définition des points d'échantillonage"
                                                            action="/company/process/ctrl/SamplePt/List.xhtml?faces-redirect=true"
                                                            rendered="true"
                                                            />
                                                <p:menuitem id="splitButtonMenuItemProcessCtrlSampleSamplePtAnalyse" 
                                                            icon="ism-menu-icon-ProcessCtrlSampleSamplePtAnalyse"   
                                                            value="Echantill. - Type" 
                                                            title="Définition des types d'analyse par point d'échantillonage"
                                                            action="/company/process/ctrl/SamplePtAnalyses/List.xhtml?faces-redirect=true"
                                                            rendered="true"
                                                            />

                                            </p:splitButton>

                                            <p:menuButton value="Options"
                                                          style="width: 32px; height: 32px;">
                                                <p:menuitem value="Save"  icon="ui-icon-disk"/>
                                                <p:menuitem value="Update"   icon="ui-icon-arrowrefresh-1-w"/>
                                                <p:menuitem value="Delete"  ajax="false" icon="ui-icon-close"/>
                                                <p:separator />
                                                <p:menuitem value="Homepage" url="http://www.primefaces.org" icon="ui-icon-extlink"/>
                                            </p:menuButton>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                </pi:ribbonGroup>
                            </p:tab>

                            <p:tab id="manageLayout" title="AFFICHAGE">
                                <pi:ribbonGroup id="managedLayoutGroup" label="Fenêtre">
                                    <pi:ribbonGroupSet id="manageLayoutAuto" set="big">
                                        <p:commandButton id="btnLayoutAuto"
                                                         icon="ui-icon-layoutInit"
                                                         value="Réinitialiser"
                                                         actionListener="#{viewLayout.handleInitLayout()}"
                                                         update="fullPage"/>
                                    </pi:ribbonGroupSet>
                                    <pi:ribbonGroupSet id="manageLayoutOC" set="small" >
                                        <p:commandButton value="Menu" type="button"  
                                                         icon="ui-icon-layoutWest"
                                                         onclick="PF('fpLayoutWidget').toggle('west')"/>  
                                        <p:commandButton value="Options" type="button"  
                                                         icon="ui-icon-layoutEast"
                                                         onclick="PF('fpLayoutWidget').toggle('east')"/>  
                                        <p:commandButton value="Log" type="button"  
                                                         icon="ui-icon-layoutSouth"
                                                         onclick="PF('fpLayoutWidget').toggle('south')"/>  
                                    </pi:ribbonGroupSet>

                                </pi:ribbonGroup>
                            </p:tab>
                        </pi:ribbon>
                    </div>
                </h:form>
            </p:layoutUnit>



            <p:layoutUnit   id="unitWest" position="west" 
                            size="#{viewLayout.westUnit.size}"
                            resizable="#{viewLayout.westUnit.resizable}" 
                            closable="#{viewLayout.westUnit.closable}"
                            collapsible="#{viewLayout.westUnit.collapsible}"
                            minSize="#{viewLayout.westUnit.minSize}"
                            maxSize="#{viewLayout.westUnit.maxSize}"
                            gutter="#{viewLayout.westUnit.gutter}"
                            visible="#{viewLayout.westUnit.visible}"
                            collapsed="#{viewLayout.westUnit.collapsed}"
                            collapseSize="#{viewLayout.westUnit.collapseSize}"
                            effect="#{viewLayout.westUnit.effect}"
                            effectSpeed="#{viewLayout.westUnit.effectSpeed}"
                            >
                <f:facet name="header"><h:outputText value="Menu"/></f:facet> 
                <ui:insert id="west" name="west" />
            </p:layoutUnit>  


            <p:layoutUnit id="unitEast" position="east" 
                          size="#{viewLayout.eastUnit.size}"
                          resizable="#{viewLayout.eastUnit.resizable}" 
                          closable="#{viewLayout.eastUnit.closable}"
                          collapsible="#{viewLayout.eastUnit.collapsible}"
                          minSize="#{viewLayout.eastUnit.minSize}"
                          maxSize="#{viewLayout.eastUnit.maxSize}"
                          gutter="#{viewLayout.eastUnit.gutter}"
                          visible="#{viewLayout.eastUnit.visible}"
                          collapsed="#{viewLayout.eastUnit.collapsed}"
                          collapseSize="#{viewLayout.eastUnit.collapseSize}"
                          effect="#{viewLayout.eastUnit.effect}"
                          effectSpeed="#{viewLayout.eastUnit.effectSpeed}"
                          >
                <f:facet name="header">
                    <h:graphicImage library="img" name="ism/std/Options.png" width="22px" height="22px" style="float:left;" /> 
                    <h:outputText value="Options"/> </f:facet>  
                <ui:insert id="east" name="east" />
            </p:layoutUnit>


            <p:layoutUnit id="unitSouth" position="south" 
                          size="#{viewLayout.southUnit.size}"
                          resizable="#{viewLayout.southUnit.resizable}" 
                          closable="#{viewLayout.southUnit.closable}"
                          collapsible="#{viewLayout.southUnit.collapsible}"
                          minSize="#{viewLayout.southUnit.minSize}"
                          maxSize="#{viewLayout.southUnit.maxSize}"
                          gutter="#{viewLayout.southUnit.gutter}"
                          visible="#{viewLayout.southUnit.visible}"
                          collapsed="#{viewLayout.southUnit.collapsed}"
                          collapseSize="#{viewLayout.southUnit.collapseSize}"
                          effect="#{viewLayout.southUnit.effect}"
                          effectSpeed="#{viewLayout.southUnit.effectSpeed}"
                          >
                <p:messages />
                <p:outputLabel value="#{ism.EmptyList} : #{request.pathInfo}"
                               rendered="#{request.pathInfo!='/company/smq/nc/Request/View.xhtml'?true:false}" />
            </p:layoutUnit>  




            <p:layoutUnit id="unitCenter" position="center" collapseSize="4" gutter="4" style="margin:0px;margin-left: -15px;">
                <ui:insert id="body" name="body" />
            </p:layoutUnit>





        </p:layout>













        <h:form id="MainFormDialog">
            <p:dialog header="Déconnexion imminante" 
                      widgetVar="dlgReminingTimeSessionWakeUp" 
                      modal="true" height="50" width="400" 
                      closable="false" resizable="false" >
                <h:outputText value="Continuer avec ISM ... " /> <br />
                <h:outputText value="#{viewRibbon.currentPath}" />
                <br /><br />


                <f:facet name="footer" >
                    <p:commandButton id="dlgReminingTimeSessionWakeUpYes" 
                                     value="#{ism.Accept}"
                                     onclick="PF('dlgReminingTimeSessionWakeUp').hide();
                                             submit();"
                                     action="#{viewRibbon.currentPath}"
                                     />
                    <p:commandButton id="dlgReminingTimeSessionWakeUpNo" 
                                     value="#{ism.Refused}"
                                     onclick="PF('dlgReminingTimeSessionWakeUp').hide();"
                                     action="#{staffAuthController.logout()}"
                                     />
                </f:facet>
            </p:dialog> 

            <p:confirmDialog id="mainConfirmDialog" 
                             global="#{viewConfirmDialog.dlg.global}"
                             header="#{viewConfirmDialog.dlg.header}"
                             severity="#{viewConfirmDialog.dlg.severity}"
                             width="#{viewConfirmDialog.dlg.width}"
                             height="#{viewConfirmDialog.dlg.height}"
                             closable="#{viewConfirmDialog.dlg.closable}"
                             showEffect="#{viewConfirmDialog.dlg.showEffect}"
                             hideEffect="#{viewConfirmDialog.dlg.hideEffect}"
                             closeOnEscape="#{viewConfirmDialog.dlg.closeOnEscape}"
                             widgetVar="mainConfirmDialog"
                             >
                <f:facet name="message">
                    <p:graphicImage library="img" 
                                    name="#{viewConfirmDialog.dlg.severity=='alert'?'ism/std/DlgWarning.png':'ism/std/DlgInfos.png'}"
                                    width="48" height="48" style="float: left;" />
                    <h:outputFormat value="#{viewConfirmDialog.dlg.message}" escape="false"/>
                </f:facet>

                <p:commandButton type="button" value="#{ism.ConfirmYes}" 
                                 styleClass="ui-confirmdialog-yes"
                                 icon="ui-btn-Accept"
                                 update="#{viewConfirmDialog.update}"
                                 oncomplete="PF('mainConfirmDialog').hide()"
                                 />
                <p:commandButton type="button" value="#{ism.ConfirmNo}" 
                                 styleClass="ui-confirmdialog-no"
                                 icon="ui-btn-Cancel"
                                 oncomplete="PF('mainConfirmDialog').hide()"
                                 />
            </p:confirmDialog>


            <p:dialog modal="true" widgetVar="statusDialog" header="Status" draggable="false"
                      closable="false">
                <p:graphicImage width="48px" height="48px" library="img" name="ism/std/Onload.gif"/>
            </p:dialog>
            <p:ajaxStatus onstart="PF('statusDialog').show()" 
                          oncomplete="PF('statusDialog').hide();"/>
                


        </h:form>

    </h:body>


    <h:body rendered="#{!request.session.getAttribute('authenticated')}">
        <meta http-equiv="refresh" 
              content="5;url=#{request.contextPath}#{request.servletPath}/login.xhtml?faces-redirect=true"/>
    </h:body>


    <p:blockUI block="body" 
               trigger="mainForm:shortcut-btn-theme,
               mainForm:shortcut-btn-logout, 
               mainForm:ism-ribbon:main,
               mainForm:ism-ribbon:administration,
               mainForm:ism-ribbon:resources,
               mainForm:ism-ribbon:btnSMQProcessus, 
               mainForm:ism-ribbon:btnSMQDocType, 
               mainForm:ism-ribbon:btnSMQDocument,
               mainForm:ism-ribbon:btnSMQNC,       
               mainForm:ism-ribbon:splitButtonMenuItemNCUnit, 
               mainForm:ism-ribbon:splitButtonMenuItemNCNature, 
               mainForm:ism-ribbon:splitButtonMenuItemNCGravity, 
               mainForm:ism-ribbon:splitButtonMenuItemNCFrequency, 
               mainForm:ism-ribbon:splitButtonMenuItemNCRequest,
               mainForm:ism-ribbon:resources, 
               mainForm:ism-ribbon:btnStaffGroup, 
               mainForm:ism-ribbon:btnStaffRole, 
               mainForm:ism-ribbon:btnStaffRoleTree, 
               mainForm:ism-ribbon:btnStaffCompany, 
               mainForm:ism-ribbon:btnStaffToGroup, 
               mainForm:ism-ribbon:btnStaffCreate, 
               mainForm:ism-ribbon:btnStaffList, 
               mainForm:ism-ribbon:btnStaffManageList
               "
               >
        <p:graphicImage width="48px" height="48px" library="img" name="ism/std/Onload.gif"/>
    </p:blockUI>
</html>

