<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition template="/tmpl/MainWindow.xhtml">


        <ui:define name="body" >
            <h:form id="bodyForm" >
                <h1><h:outputText value="#{ism.MaillistTitle}"/></h1>



                <p:panelGrid id="panelForm" columns="2" columnClasses="columnFieldClass, columnContentClass" styleClass="panelGridClass"
                             >
                    <p:outputLabel value="#{ism.NonConformiteRequestField_ncrProcessus}" for="idProcessus" />
                    <h:panelGroup>
                        <p:selectOneMenu id="idProcessus" 
                                         filter="true" filterMatchMode="contains"
                                         title="#{ism.NonConformiteRequestFieldInfo_ncrProcessus}"                                          
                                         value="#{ncMailView.selectedProcessus}"
                                         >
                            <p:ajax event="change" update="MailContent"  />
                            <f:selectItem itemLabel="#{ism.SelectList}" itemValue="#{null}"  />
                            <f:selectItems value="#{processusController.itemsAvailableSelectOne}"
                                           var="processusItem"
                                           itemLabel="#{processusItem.PProcessus} - #{processusItem.PDesignation}"
                                           itemValue="#{processusItem}"/>
                        </p:selectOneMenu>
                        <p:message for="idProcessus" />
                    </h:panelGroup>
                </p:panelGrid>
                <br />


                <!--
                <style>

                    #bodyForm\3a MailDefintionView {
                        padding : 0px;
                    }
                    #bodyForm\3a MailDefintionView > ul {
                        width: 150px;
                        background-image: none;
                        padding-top: 1px;
                        border-right: 1px solid #1889fc;
                        height: 350px;
                    }
                    #bodyForm\3a MailDefintionView > div{
                        float: left;
                        min-height: 300px;
                        width: inherit;
                        margin-left: 157px;
                        margin-top: -350px;
                    }
                    .btn-searcher{
                        width: 0px!important;
                        min-width: 0px; 
                        max-width: 0px;
                    }
                    .btn-searcher > div.ui-selectonemenu-trigger.ui-state-default.ui-corner-right > span {
                        text-indent: 0!important;
                        background: url("#{resource['img/ism/std/Search.png']}") no-repeat;
                        background-size:contain;
                    }
                    .columnFieldClassSmall { min-width: 100px; }
                    .ui-selectlistbox-listcontainer{ width: 100%; }

                </style>
                -->






                <h:panelGroup id="MailContent">
                    <p:outputLabel value="Veuillez choisir un processus..." rendered="#{ncMailView.selectedProcessus==null}" />

                    <p:tabView id="MailDefintionView"   rendered="#{ncMailView.selectedProcessus!=null}">
                        <p:tab id="tabCreate" title="Créé">
                            <div style="margin-left: 4px;margin-right: 4px;">


                                <h4>Standard </h4> 


                                <p:panelGrid  columns="2" columnClasses="columnFieldClassSmall, columnContentClass" styleClass="panelGridClass">

                                    <p:outputLabel value="A"  />
                                    <h:panelGroup >
                                        <p:autoComplete id="mailTos"   multiple="true"  value="#{ncMailView.mailTos}" completeMethod="#{ncMailView.completeStaff}"
                                                        var="staff" itemLabel="#{staff.stFirstname} #{staff.stLastname} #{staff.stMiddlename} [#{staff.stStaff}]" 
                                                        
                                                        itemValue="#{staff}" converter="staffConverter" forceSelection="true">
                                        </p:autoComplete>
                                    </h:panelGroup>




                                    <p:outputLabel value="CC" for="fCreateCcs" />
                                    <h:panelGroup >
                                        <p:chips id="fCreateCcs"  />
                                    </h:panelGroup>

                                    <p:outputLabel value="CCi" for="fCreateCcis" />
                                    <p:chips id="fCreateCcis" />

                                </p:panelGrid>






                                <h4>Réclamation</h4>
                                <p:panelGrid  columns="2" columnClasses="columnFieldClassSmall, columnContentClass" styleClass="panelGridClass"
                                              >
                                    <p:outputLabel value="A" for="fCreateReclamTos" />
                                    <p:chips id="fCreateReclamTos" />
                                    <p:outputLabel value="CC" for="fCreateReclamCcs" />
                                    <p:chips id="fCreateReclamCcs" />
                                    <p:outputLabel value="CCi" for="fCreateReclamCcis" />
                                    <p:chips id="fCreateReclamCcis" />

                                </p:panelGrid>
                            </div>
                        </p:tab>




                        <p:tab id="WaitForSolution" title="En attente de solution">
                            <h4>Standard</h4>
                            <h:panelGrid columns="2" cellpadding="10">

                                <h:outputText value="Francis Ford Coppola's legendary..." />
                            </h:panelGrid>
                        </p:tab>




                        <p:tab id="InProgress" title="En cours">
                            <h:panelGrid columns="2" cellpadding="10">
                                <h:outputText value="After a break of more than 15 years..." />
                            </h:panelGrid>
                        </p:tab>



                        <p:tab id="Finished" title="Terminé">
                            <h:panelGrid columns="2" cellpadding="10">
                                <h:outputText value="After a break of more than 15 years..." />
                            </h:panelGrid>
                        </p:tab>



                        <p:tab id="Cancel" title="Annulé">
                            <h:panelGrid columns="2" cellpadding="10">
                                <h:outputText value="After a break of more than 15 years..." />
                            </h:panelGrid>
                        </p:tab>


                    </p:tabView>
                </h:panelGroup>

                <p:dialog id="MailSearchStaff" widgetVar="MailSearchStaff" 
                          showEffect="clip"  hideEffect="clip" appendTo="@(body)" 
                          header="#{ism.MailSearchStaffDlgTitle} : #{ism.MailSearchStaffDlgMsg}" 
                          width="610"
                          draggable="false" resizable="false" modal="true" 

                          fitViewport="true" 
                          >

                    <h:form id="mailSearchStaffForm">
                        <p:panelGrid id="mailSearchStaffPanel" 
                                     columns="2" 
                                     columnClasses="columnFieldClass, columnContentClass" 
                                     styleClass="panelGridClass">

                            <p:outputLabel value="#{ism.StaffGroupsField_stgStaff}" for="msStaff" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:selectOneMenu id="msStaff"  widgetVar="msStaff"
                                                 filter="true" filterMatchMode="contains"
                                                 value="#{staffGroupsController.selected.stgStaff}"
                                                 title="#{ism.StaffGroupsFieldInfo_stgStaff}" 
                                                 required="true" requiredMessage="#{ism.StaffGroupsRequiredMsg_stgStaff}"
                                                 >
                                    <f:selectItem itemLabel="#{ism.SelectList}" itemValue=""/>
                                    <f:selectItems value="#{staffController.itemsAvailableSelectOne}"
                                                   var="stgStaffItem"
                                                   itemLabel="#{stgStaffItem.stFirstname} #{stgStaffItem.stLastname} #{stgStaffItem.stMiddlename} [#{stgStaffItem.stStaff}]"
                                                   itemValue="#{stgStaffItem}"/>
                                </p:selectOneMenu>
                                <p:message for="msStaff" />
                            </h:panelGrid>


                        </p:panelGrid>
                        <br/>

                        <p:commandButton  value="#{ism.ReportRun}" ajax="false"
                                          action="Report.xhtml?faces-redirect=true"
                                          oncomplete="PF('ReportDlg').hide()"
                                          actionListener="#{crystalController.handleCSReportViewer()}"
                                          icon="fa fa-eye"
                                          />
                        <p:commandButton value="#{ism.Cancel}" 
                                         icon="fa fa-times"
                                         onclick="PF('ReportDlg').hide()"/>
                    </h:form>
                </p:dialog> 
            </h:form>


        </ui:define>


        <ui:define name="west" id="west">
            <h:panelGroup id="westGroup">
                <p:commandButton icon="ui-btn-Cancel"
                                 styleClass="options-btn"
                                 value="#{ism.Cancel}" 
                                 actionListener="#{crystalController.handleCSReportViewerClose()}"
                                 action="./List.xhtml?faces-redirect=true"
                                 update=":bodyForm,:growl"
                                 immediate="true"
                                 />

            </h:panelGroup>
        </ui:define>
    </ui:composition>
</html>