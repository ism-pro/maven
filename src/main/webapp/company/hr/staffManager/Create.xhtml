<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition template="/tmpl/MainWindow.xhtml">

        <ui:define name="body">
            <h1><h:outputText value="#{ism.StaffTitleCreate}"/></h1>

            <h:form id="bodyForm">



                <p:wizard backLabel="#{ism.Previous}" nextLabel="#{ism.Next}"
                          showNavBar="false" showStepStatus="true" 
                          widgetVar="wizard" flowListener="#{staffManagerView.handleWizardFlow}"
                          >

                    <p:tab id="flowStaff" title="#{ism.StaffManagerTabPersonnal}">

                        <p:panelGrid id="panelForm" 
                                     columns="2" columnClasses="columnFieldClass, columnContentClass" styleClass="panelGridClass"
                                     rendered="true">

                            <p:outputLabel value="#{ism.StaffField_stStaff}" for="stStaff" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:inputText id="stStaff" 
                                             value="#{staffManagerView.staff.stStaff}" 
                                             title="#{ism.StaffFieldInfo_stStaff}" 
                                             required="true" 
                                             requiredMessage="#{ism.StaffRequiredMsg_stStaff}"
                                             validator="StaffManagerView_StaffValidator"
                                             >
                                    <p:ajax event="change" update="bodyForm, :growl"  />
                                </p:inputText>
                                <p:message id="stStaffOut" for="stStaff" />
                            </h:panelGrid>




                            <p:outputLabel value="#{ism.StaffField_stPassword}" for="stPassword" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:password id="stPassword" 
                                            value="#{staffManagerView.staff.stPassword}" 
                                            title="#{ism.StaffFieldInfo_stPassword}" 
                                            redisplay="false" feedback="true"
                                            required="true" requiredMessage="#{ism.StaffRequiredMsg_stPassword}"
                                            promptLabel="#{ism.StaffField_stPasswordPromptLabel}"
                                            weakLabel="#{ism.StaffField_stPasswordWeakLabel}"
                                            goodLabel="#{ism.StaffField_stPasswordGoodLabel}"
                                            strongLabel="#{ism.StaffField_stPasswordStrongLabel}"
                                            match="stPasswordConf"
                                            placeholder="#{ism.PasswordYour}"
                                            validatorMessage="#{ism.PasswordMatch}"
                                            >
                                    <p:ajax event="change" update="stStaffOutPwd" listener="#{staffManagerView.handleStaffPwdEdit}" />
                                </p:password>
                                <p:message for="stPassword" />
                            </h:panelGrid>

                            <p:outputLabel value="#{ism.StaffField_stPasswordConf}" for="stPasswordConf" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:password id="stPasswordConf" 
                                            value="#{staffManagerView.staff.stPassword}" 
                                            title="#{ism.StaffFieldInfo_stPasswordConf}" 
                                            redisplay="false" required="true" 
                                            requiredMessage="#{ism.StaffRequiredMsg_stPasswordConf}"
                                            placeholder="#{ism.PasswordConfirm}"
                                            validatorMessage="#{ism.PasswordMatch}">
                                    <p:ajax event="change" update="stStaffOutPwd" listener="#{staffManagerView.handleStaffPwdEdit()}" />
                                </p:password>
                                <p:message id="stStaffOutPwd" for="stPasswordConf" />
                            </h:panelGrid>


                            <p:outputLabel value="#{ism.StaffField_stLastname}" for="stLastname" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:inputText id="stLastname" 
                                             value="#{staffManagerView.staff.stLastname}" 
                                             title="#{ism.StaffFieldInfo_stLastname}" 
                                             required="true"
                                             requiredMessage="#{ism.StaffRequiredMsg_stLastname}"
                                             />
                                <p:message for="stLastname"/>
                            </h:panelGrid>


                            <p:outputLabel value="#{ism.StaffField_stFirstname}" for="stFirstname" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:inputText id="stFirstname" 
                                             value="#{staffManagerView.staff.stFirstname}" 
                                             title="#{ism.StaffFieldInfo_stFirstname}" 
                                             required="true"
                                             requiredMessage="#{ism.StaffRequiredMsg_stFirstname}"/>
                                <p:message for="stFirstname"/>
                            </h:panelGrid>


                            <p:outputLabel value="#{ism.StaffField_stMiddlename}" for="stMiddlename" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:inputText id="stMiddlename" 
                                             value="#{staffManagerView.staff.stMiddlename}" 
                                             title="#{ism.StaffFieldInfo_stMiddlename}" />
                                <h:panelGroup />
                            </h:panelGrid>


                            <p:outputLabel value="#{ism.StaffField_stBorned}" for="stBorned" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:calendar id="stBorned" pattern="#{ism.DatePatternU}" 
                                            value="#{staffManagerView.staff.stBorned}" 
                                            title="#{ism.StaffFieldInfo_stBorned}" 
                                            mode="popup" showOn="button"
                                            locale="fr" navigator="true"
                                            showButtonPanel="true"
                                            effect="slideDown"
                                            mindate="01/01/1930" maxdate="31/12/2099"
                                            required="true"
                                            requiredMessage="#{ism.StaffRequiredMsg_stBorned}"/>
                                <p:message for="stBorned"/>
                            </h:panelGrid>


                            <p:outputLabel value="#{ism.StaffField_stGenre}" for="stGenre" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:selectOneMenu id="stGenre" value="#{staffManagerView.staff.stGenre}" >
                                    <f:selectItems value="#{ismGenreController.itemsAvailableSelectOne}"
                                                   var="stGenreItem"
                                                   itemLabel="#{stGenreItem.genre} - #{stGenreItem.genrename}"
                                                   itemValue="#{stGenreItem}"/>
                                </p:selectOneMenu>
                            </h:panelGrid>


                            <p:outputLabel value="#{ism.StaffField_stActivated}" for="stActivated" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:selectBooleanCheckbox id="stActivated" 
                                                         value="#{staffManagerView.staff.stActivated}" 
                                                         required="true" 
                                                         requiredMessage="#{ism.StaffRequiredMsg_stActivated}"/>
                                <h:panelGroup />
                            </h:panelGrid>

                        </p:panelGrid>


                        <div style="padding-top: 10px;">
                            <p:commandButton value="#{ism.Next}" icon="ui-btn-Next"
                                             style="float:right;"
                                             onclick="PF('wizard').next()" 
                                             update="bodyForm, :growl"/>
                        </div>

                    </p:tab>





                    <p:tab id="flowISM" title="#{ism.StaffManagerTabISM}">

                        <p:panelGrid columns="2" columnClasses="columnFieldClass, columnContentClass" styleClass="panelGridClass"
                                     rendered="true">

                            <p:outputLabel  value="#{ism.StaffCompaniesField_stcCompany}" for="access" />
                            <h:panelGrid columns="2" cellpadding="0px" cellspacing="0px" style="margin:0px; padding:0px;">
                                <p:tree    id="access"
                                           value="#{staffManagerView.access}" 
                                           var="access"  selection="#{staffManagerView.accessChecked}"
                                           selectionMode="checkbox"
                                           required="true"
                                           requiredMessage="#{ism.StaffRequiredMsg_access}"
                                           >
                                    <p:treeNode > 
                                        <h:outputText value="#{access}" />
                                    </p:treeNode>

                                </p:tree>
                                <p:message for="access" />
                            </h:panelGrid>

                        </p:panelGrid>

                        <div style="padding-top: 10px;">
                            <p:commandButton value="#{ism.Previous}" icon="ui-btn-Previous"
                                             style="float:left;"
                                             onclick="PF('wizard').back()" 
                                             update="bodyForm, :growl"/>
                            <p:commandButton value="#{ism.Next}" icon="ui-btn-Next"
                                             style="float:right;"
                                             onclick="PF('wizard').next()" 
                                             update="bodyForm, :growl"/>
                        </div>
                    </p:tab>



                    <p:tab id="flowConfirm" title="#{ism.StaffManagerTabConfirm}">
                        <p:panel header="Confirmation">
                            <h3>#{ism.StaffField_stStaff}</h3>
                            <hr />
                            <p:panelGrid columns="2" columnClasses="columnFieldClass, columnContentClass" styleClass="panelGridClass"
                                         rendered="true">

                                <h:outputText value="#{ism.StaffField_stStaff}"/>
                                <h:outputText value="#{staffManagerView.staff.stStaff}" 
                                              title="#{ism.StaffFieldInfo_stStaff}"/>

                                <h:outputText value="#{ism.StaffField_stPassword}" rendered="false"/>
                                <h:outputText value="#{staffManagerView.staff.stPassword}" 
                                              title="#{ism.StaffFieldInfo_stPassword}" rendered="false" />

                                <h:outputText value="#{ism.StaffField_stLastname}"/>
                                <h:outputText value="#{staffManagerView.staff.stLastname}" 
                                              title="#{ism.StaffFieldInfo_stLastname}"/>

                                <h:outputText value="#{ism.StaffField_stFirstname}"/>
                                <h:outputText value="#{staffManagerView.staff.stFirstname}" 
                                              title="#{ism.StaffFieldInfo_stFirstname}"/>

                                <h:outputText value="#{ism.StaffField_stMiddlename}"/>
                                <h:outputText value="#{staffManagerView.staff.stMiddlename}" 
                                              title="#{ism.StaffFieldInfo_stMiddlename}"/>

                                <h:outputText value="#{ism.StaffField_stBorned}"/>
                                <h:outputText value="#{staffManagerView.staff.stBorned}" 
                                              title="#{ism.StaffFieldInfo_stBorned}">
                                    <f:convertDateTime pattern="dd/MM/yyyy" />
                                </h:outputText>

                                <h:outputText value="#{ism.StaffField_stGenre}"/>
                                <h:outputText value="#{staffManagerView.staff.stGenre.genre} - #{staffManagerView.staff.stGenre.genrename}" 
                                              title="#{ism.StaffFieldInfo_stGenre}"/>

                                <h:outputText value="#{ism.StaffField_stActivated}"/>
                                <p:selectBooleanCheckbox 
                                    value="#{staffManagerView.staff.stActivated}" 
                                    disabled="true" />
                            </p:panelGrid>

                            <h3>#{ism.StaffGroupDefRoleField_stgdrRole}</h3>
                            <hr />
                            <p:panelGrid columns="2" columnClasses="columnFieldClass, columnContentClass" styleClass="panelGridClass"
                                         rendered="true">
                                <p:outputLabel  value="#{ism.StaffCompaniesField_stcCompany}" for="selectedAccessTree" />
                                <p:tree    id="selectedAccessTree"
                                           value="#{staffManagerView.access}" 
                                           var="accessChecked" 
                                           selection="#{staffManagerView.accessChecked}"

                                           >
                                    <p:ajax event="select" listener="#{staffManagerView.handleTreeSelect}" update=":growl" />
                                    <p:ajax event="unselect" listener="#{staffManagerView.handleTreeUnSelect}" update=":growl" />

                                    <p:treeNode>
                                        <h:outputText value="#{accessChecked.name}" />
                                    </p:treeNode>

                                </p:tree>


                            </p:panelGrid>



                        </p:panel>
                        <div style="padding-top: 10px;">
                            <p:commandButton value="#{ism.Previous}" icon="ui-btn-Previous"
                                             style="float:left;"
                                             onclick="PF('wizard').back()" 
                                             update="bodyForm, :growl"/>
                            <p:commandButton value="#{ism.Save}"  icon="ui-btn-Save"
                                             style="float:left;"
                                             action="/company/hr/staff/List.xhtml?faces-redirect=true"
                                             actionListener="#{staffManagerView.create}" 
                                             />
                        </div>
                    </p:tab>

                </p:wizard>



            </h:form>


        </ui:define>





        <ui:define name="west" id="west">
            <h:panelGroup id="westGroup">
                <p:outputLabel value="Wizard : #{staffManagerView.wizardStep}" />
                <p:commandButton icon="ui-btn-Previous"
                                 styleClass="options-btn"
                                 style="float:left;"
                                 value="#{ism.Previous}" 
                                 onclick="PF('wizard').back()" 
                                 update="bodyForm, :westGroup, :growl"
                                 form="bodyForm"
                                 disabled="#{staffManagerView.wizardStep==0?true:false}"
                                 />
                <p:commandButton icon="ui-btn-Next"
                                 styleClass="options-btn"
                                 style="float:left;"
                                 value="#{ism.Next}" 
                                 onclick="PF('wizard').next()" 
                                 update="bodyForm, :westGroup, :growl"
                                 form="bodyForm"
                                 disabled="#{staffManagerView.wizardStep==2?true:false}"
                                 />
                <p:commandButton icon="ui-btn-Save"
                                 styleClass="options-btn"
                                 value="#{ism.Save}" 
                                 actionListener="#{staffManagerView.create}" 
                                 action="List.xhtml?faces-redirect=true"
                                 update=":bodyForm, westGroup,:growl" 
                                 form="bodyForm"
                                 disabled="#{staffManagerView.wizardStep!=2?true:false}"
                                 />
                <p:commandButton icon="ui-btn-Cancel"
                                 styleClass="options-btn"
                                 value="#{ism.Cancel}" 
                                 update=":bodyForm,:growl"
                                 actionListener="#{staffManagerView.prepareCreate()}"
                                 action="./List.xhtml?faces-redirect=true"
                                 immediate="true"
                                 />

            </h:panelGroup>
        </ui:define>
    </ui:composition>
</html>
