<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ic="http://www.ism.org/charts"
      >



    <ui:composition template="/tmpl/MainWindow.xhtml">


        <ui:define name="body">
            <style>
                .userlist{
                    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;
                }
                .userlist ul{
                    /*
                    padding: 2px;
                    margin: 12px;
                    margin-top: 10px;
                    margin-bottom: 10px;
                    */

                    list-style-type: none;
                    padding: 0;
                    margin: 0;


                    color: #000!important;
                    background-color: #fff!important;

                    color: #000!important;
                    background-color: #fff!important;
                }

                .userlist ul li{
                    padding: 8px 2px 10px 16px;
                    border-bottom: 1px solid #ddd;
                }


                .idash-top{
                    margin-left: 10px;
                    margin-right: 10px;
                }
                .idash-top .ui-grid-col-3{
                    margin: 2px;
                    padding: 0px;
                    border: 1px solid #dddddd;
                }
                .bg-aqua, .callout.callout-info, .alert-info, .label-info, .modal-info .modal-body {
                    background-color: #00c0ef !important;
                }
                .bg-red, .bg-yellow, .bg-aqua, .bg-blue, .bg-light-blue, .bg-green, .bg-navy, .bg-teal, .bg-olive, .bg-lime, .bg-orange, .bg-fuchsia, .bg-purple, .bg-maroon, .bg-black, .bg-red-active, .bg-yellow-active, .bg-aqua-active, .bg-blue-active, .bg-light-blue-active, .bg-green-active, .bg-navy-active, .bg-teal-active, .bg-olive-active, .bg-lime-active, .bg-orange-active, .bg-fuchsia-active, .bg-purple-active, .bg-maroon-active, .bg-black-active, .callout.callout-danger, .callout.callout-warning, .callout.callout-info, .callout.callout-success, .alert-success, .alert-danger, .alert-error, .alert-warning, .alert-info, .label-danger, .label-info, .label-waring, .label-primary, .label-success, .modal-primary .modal-body, .modal-primary .modal-header, .modal-primary .modal-footer, .modal-warning .modal-body, .modal-warning .modal-header, .modal-warning .modal-footer, .modal-info .modal-body, .modal-info .modal-header, .modal-info .modal-footer, .modal-success .modal-body, .modal-success .modal-header, .modal-success .modal-footer, .modal-danger .modal-body, .modal-danger .modal-header, .modal-danger .modal-footer {
                    color: #fff !important;
                }
                .small-box {
                    border-radius: 2px;
                    position: relative;
                    display: block;
                    margin-bottom: 20px;
                    box-shadow: 0 1px 1px rgba(0,0,0,0.1);
                }
                .small-box>.small-box-footer {
                    position: relative;
                    text-align: center;
                    padding: 3px 0;
                    color: #fff;
                    color: rgba(255,255,255,0.8);
                    display: block;
                    z-index: 10;
                    background: rgba(0,0,0,0.1);
                    text-decoration: none;
                }


                .ui-grid {
                    margin: 10px;
                }
                .m-spacing-r4{  margin-right: 4px;}
                .m-spacing-r8{  margin-right: 8px;}
                .m-spacing-r16{  margin-right: 16px;}
                .m-spacing-r32{  margin-right: 32px;}

                .m-spacing-l4{  margin-left: 4px;}
                .m-spacing-l8{  margin-left: 8px;}
                .m-spacing-l16{  margin-left: 16px;}
                .m-spacing-l32{  margin-left: 32px;}

                .m-spacing-t4{  margin-top: 4px;}
                .m-spacing-t8{  margin-top: 8px;}
                .m-spacing-t16{  margin-top: 16px;}
                .m-spacing-t32{  margin-right: 32px;}

                .m-spacing-b4{  margin-bottom: 4px;}
                .m-spacing-b8{  margin-bottom: 8px;}
                .m-spacing-b16{  margin-bottom: 16px;}
                .m-spacing-b32{  margin-bottom: 32px;}

                .m-inner-tb0{  margin-top:0px; margin-bottom: 0px;}
                .m-inner-tb2{  margin-top:2px; margin-bottom: 2px;}
                .m-inner-tb4{  margin-top:4px; margin-bottom: 4px;}
                .m-inner-tb8{  margin-top:8px; margin-bottom: 8px;}
                .m-inner-tb16{  margin-top:16px; margin-bottom: 16px;}
                .m-inner-tb32{  margin-top:32px; margin-bottom: 32px;}

                .m-padding-tb0{  padding-top:0px; padding-bottom: 0px;}
                .m-padding-tb2{  padding-top:2px; padding-bottom: 2px;}
                .m-padding-tb4{  padding-top:4px; padding-bottom: 4px;}
                .m-padding-tb8{  padding-top:8px; padding-bottom: 8px;}
                .m-padding-tb16{  padding-top:16px; padding-bottom: 16px;}
                .m-padding-tb32{  padding-top:32px; padding-bottom: 32px;}
            </style>

            <h:form id="bodyForm">

                <div class="ui-grid ui-grid-responsive">

                    <!-- Vignette d'informations -->
                    <div class="ui-grid-row ">
                        <div class="ui-grid-col-3 w3-container w3-orange w3-text-white w3-blue m-spacing-r4">
                            <div class="w3-left w3-margin-top"><i class="fa fa-users fa-2x"></i></div>
                            <div class="w3-right">
                                <h5>#{viewSessionCounter.activeStaff.size()} / #{staffController.items.size()}</h5>
                            </div>
                            <div class="w3-clear"></div>
                            <h5 class="m-spacing-tb2">Utilisateurs</h5>
                        </div>

                        <div class="ui-grid-col-3 w3-container w3-blue m-spacing-r4">
                            <div class="w3-left w3-margin-top"><i class="fa fa-eye fa-2x"></i></div>
                            <div class="w3-right">
                                <h5>#{processusController.approuvedItems.size()}</h5>
                            </div>
                            <div class="w3-clear"></div>
                            <h5>Processus</h5>
                        </div>

                        <div class="ui-grid-col-3 w3-container w3-teal m-spacing-r4">
                            <div class="w3-left w3-margin-top"><i class="fa fa-file-pdf-o fa-2x"></i></div>
                            <div class="w3-right">
                                <h5>#{docExplorerController.items.size()}</h5>
                            </div>
                            <div class="w3-clear"></div>
                            <h5>Documentations</h5>
                        </div>

                        <div class="ui-grid-col-3 w3-red  w3-container ">
                            <div class="w3-left w3-margin-top"><i class="fa fa-thumbs-o-down fa-2x"></i></div>
                            <div class="w3-right">
                                <h5>#{nonConformiteRequestController.items.size()}</h5>
                            </div>

                            <div class="w3-clear"></div>
                            <h5>Non conformités</h5>
                        </div>
                    </div>





                    <!-- Graphiques -->
                    <div class="ui-grid-row m-spacing-t16 ">
                        <div class="ui-grid-col-4 w3-container w3-border m-spacing-r4">
                            <ic:chart id="chartSession" type="pie" exporting="true"
                                      style="height: 310px; margin: 0 auto;"
                                      model="#{viewCompanyCharts.sessionModel}" 
                                      debug="true"
                                      rendered="true"/>
                        </div>
                        <div class="ui-grid-col-8 w3-container w3-border">
                            <ic:chart id="chartNonConformite" type="pie"  exporting="true"
                                      style="height: 310px; " 
                                      model="#{viewCompanyCharts.nonConformiteModel}" />
                        </div>
                    </div>
                    <div class="ui-grid-row m-spacing-t16 ">
                        <div class="ui-grid-col-12 w3-container w3-border">
                            <ic:chart id="chartBarDocModel" type="column" 
                                      style="width: 100%"
                                      exporting="true"
                                      model="#{docExplorerChartView.barChartDocModel}" />
                        </div>
                    </div>




                    <div class="ui-grid-row m-spacing-t16 ">
                        <div class="ui-grid-col-4 w3-container m-spacing-r4">
                            <h5>Utilisateurs connectés</h5>
                            <p:dataList value="#{viewSessionCounter.activeStaff}" var="item" 
                                        type="unordered" itemType="none" paginator="false" rows="10" 
                                        styleClass="paginated" 
                                        itemStyleClass="" class="userlist"
                                        >
                                <h:graphicImage library="img" name="ism/hr/avatar2.png" class="w3-left w3-circle w3-margin-right" style="width:35px" />
                                <span class="w3-large"><h:outputText value="#{item.stFirstname} #{item.stLastname} #{item.stMiddlename} [#{item.stStaff}]" style="display:inline-block"/></span><br/>
                            </p:dataList>
                        </div>





                        <div class="ui-grid-col-8 w3-container">

                            <p:panel rendered="false">
                                <h5>Analyse annuelle <b>#{viewUtil.nowYear}</b> des non conformités </h5>

                                <div class="w3-responsive">
                                    <table class="w3-table-all">
                                        <tr>
                                            <th>Etats</th>

                                            <th>Janvier</th>
                                            <th>Février</th>
                                            <th>Mars</th>
                                            <th>Avril</th>
                                            <th>Mai</th>
                                            <th>Juin</th>
                                            <th>Juillet</th>
                                            <th>Août</th>
                                            <th>Septembre</th>
                                            <th>Octobre</th>
                                            <th>Novembre</th>
                                            <th>Décembre</th>
                                        </tr>
                                        <tr>
                                            <td>[1A] Créée</td>
                                            <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterCreated}" var="value">
                                                <td>#{value}</td>
                                            </ui:repeat>
                                        </tr>
                                        <tr>
                                            <td>[2B] En attente de solution</td>
                                            <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterRequest}" var="value">
                                                <td>#{value}</td>
                                            </ui:repeat>
                                        </tr>
                                        <tr>
                                            <td>[3C] En cours</td>
                                            <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterProcessing}" var="value">
                                                <td>#{value}</td>
                                            </ui:repeat>
                                        </tr>
                                        <tr>
                                            <td>[4D] Terminée</td>
                                            <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterFinished}" var="value">
                                                <td>#{value}</td>
                                            </ui:repeat>
                                        </tr>
                                        <tr>
                                            <td>[5E] Annulée</td>
                                            <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterCanceled}" var="value">
                                                <td>#{value}</td>
                                            </ui:repeat>
                                        </tr>
                                    </table>
                                </div>
                            </p:panel>

                            <hr/>


                            <p:panel rendered="true">
                                <ic:chart id="chartNCQuantiteStateLine" type="line"  exporting="true"
                                          style="height: 310px; " class="w3-responsive" debug="true"
                                          model="#{nonConformiteRequestService.nonConformiteRequestDomain.ncStateLineModel}" />
                            </p:panel>

                        </div>
                    </div>
                </div>


                <div class="w3-half w3-margin-bottom ui-g-8 w3-hide">
                    <div class="w3-container w3-blue w3-center" style="padding: 8px;">
                        <i class="fa fa-info-circle w3-margin-right"></i>News
                        <span class="w3-button w3-orange"
                              style="top: 0px;"
                              onclick="PF('imageswitch').previous();">Previous</span>
                        <span class="w3-button w3-green" onclick="PF('imageswitch').resumeSlideshow();">resume</span>
                        <span class="w3-button w3-green" onclick="PF('imageswitch').pauseSlideshow();">Pause</span>
                        <span class="w3-button w3-green" onclick="PF('imageswitch').next();">Next</span>
                    </div>
                    <div class="w3-container w3-white  w3-border w3-padding-16" style="min-height: 480px;">
                        <p:imageSwitch effect="scrollLeft" 
                                       slideshowAuto="true"
                                       style="width: 100%; height: 480px;position:relative;" 
                                       widgetVar="imageswitch" speed="1000" slideshowSpeed="9000"
                                       >
                            <p:graphicImage value="/img/Diapositive1.GIF" class="centered" />
                            <p:graphicImage value="/img/Diapositive2.GIF" class="centered" />
                            <p:graphicImage value="/img/Diapositive3.GIF" class="centered" />
                            <p:graphicImage value="/img/Diapositive4.GIF" class="centered" />
                            <p:graphicImage value="/img/Diapositive5.GIF" class="centered" />
                        </p:imageSwitch>

                    </div>
                </div>



            </h:form>

        </ui:define>
    </ui:composition>

</html>
