<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ic="http://www.ism.org/charts"

      xmlns:f="http://xmlns.jcp.org/jsf/core">



    <ui:composition template="/tmpl/MainWindow.xhtml">


        <ui:define name="body">
            <!--
            <h:outputStylesheet library="vendor" name="bootstrap/3.3.7/css/bootstrap.min.css" />
            <h:outputScript library="vendor" name="bootstrap/3.3.7/js/bootstrap.min.js" />
            -->
            <style>
                .userlist{
                    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12)!important;
                }
                .userlist ul{
                    /*
                    padding: 2px;
                    margin: 12px;
                    margin-top: 10px;
                    margin-bottom: 10px;
                    */

                    list-style-type: none;
                    padding: 0;
                    margin: 0;


                    color: #000!important;
                    background-color: #fff!important;

                    color: #000!important;
                    background-color: #fff!important;
                }

                .userlist ul li{
                    padding: 8px 2px 10px 16px;
                    border-bottom: 1px solid #ddd;
                }


                .idash-top{
                    margin-left: 10px;
                    margin-right: 10px;
                }
                .idash-top .ui-grid-col-3{
                    margin: 2px;
                    padding: 0px;
                    border: 1px solid #dddddd;
                }
                .bg-aqua, .callout.callout-info, .alert-info, .label-info, .modal-info .modal-body {
                    background-color: #00c0ef !important;
                }
                .bg-red, .bg-yellow, .bg-aqua, .bg-blue, .bg-light-blue, .bg-green, .bg-navy, .bg-teal, .bg-olive, .bg-lime, .bg-orange, .bg-fuchsia, .bg-purple, .bg-maroon, .bg-black, .bg-red-active, .bg-yellow-active, .bg-aqua-active, .bg-blue-active, .bg-light-blue-active, .bg-green-active, .bg-navy-active, .bg-teal-active, .bg-olive-active, .bg-lime-active, .bg-orange-active, .bg-fuchsia-active, .bg-purple-active, .bg-maroon-active, .bg-black-active, .callout.callout-danger, .callout.callout-warning, .callout.callout-info, .callout.callout-success, .alert-success, .alert-danger, .alert-error, .alert-warning, .alert-info, .label-danger, .label-info, .label-waring, .label-primary, .label-success, .modal-primary .modal-body, .modal-primary .modal-header, .modal-primary .modal-footer, .modal-warning .modal-body, .modal-warning .modal-header, .modal-warning .modal-footer, .modal-info .modal-body, .modal-info .modal-header, .modal-info .modal-footer, .modal-success .modal-body, .modal-success .modal-header, .modal-success .modal-footer, .modal-danger .modal-body, .modal-danger .modal-header, .modal-danger .modal-footer {
                    color: #fff !important;
                }
                .small-box {
                    border-radius: 2px;
                    position: relative;
                    display: block;
                    margin-bottom: 20px;
                    box-shadow: 0 1px 1px rgba(0,0,0,0.1);
                }
                .small-box>.small-box-footer {
                    position: relative;
                    text-align: center;
                    padding: 3px 0;
                    color: #fff;
                    color: rgba(255,255,255,0.8);
                    display: block;
                    z-index: 10;
                    background: rgba(0,0,0,0.1);
                    text-decoration: none;
                }
            </style>

            <h:form>
                <!--
                <p:poll interval="10" update="SessionCounter" />
                -->











                <div class="ui-grid">

                    <div class="ui-grid-row idash-top">
                        <div class="ui-grid-col-3 small-box bg-aqua">
                            <div class="w3-container w3-orange w3-text-white w3-padding-8">
                                <div class="w3-left"><i class="fa fa-users w3-xxxlarge"></i></div>
                                <div class="w3-right">
                                    <h5>#{viewSessionCounter.activeStaff.size()} / #{staffController.items.size()}</h5>
                                </div>
                                <div class="w3-clear"></div>
                                <h5>Utilisateurs  <i class="fa fa-arrow-circle-right"></i></h5>
                            </div>


                        </div>

                        <div class="ui-grid-col-3">
                            <div class="w3-container w3-blue w3-padding-8">
                                <div class="w3-left"><i class="fa fa-eye w3-xxxlarge"></i></div>
                                <div class="w3-right">
                                    <h5>#{processusController.approuvedItems.size()}</h5>
                                </div>
                                <div class="w3-clear"></div>
                                <h5>Processus</h5>
                            </div>
                        </div>

                        <div class="ui-grid-col-3">
                            <div class="w3-container w3-teal w3-padding-8">
                                <div class="w3-left"><i class="fa fa-file-pdf-o w3-xxxlarge"></i></div>
                                <div class="w3-right">
                                    <h5>#{docExplorerController.items.size()}</h5>
                                </div>
                                <div class="w3-clear"></div>
                                <h5>Documentations</h5>
                            </div>
                        </div>

                        <div class="ui-grid-col-3">
                            <div class="w3-container w3-red w3-padding-8">
                                <div class="w3-left"><i class="fa fa-thumbs-o-down w3-xxxlarge"></i></div>
                                <div class="w3-right">
                                    <h5>#{nonConformiteRequestController.items.size()}</h5>
                                </div>

                                <div class="w3-clear"></div>
                                <h5>Non conformités</h5>
                            </div>
                        </div>
                    </div>







                    <div class="ui-grid-row idash-top">
                        <div class="ui-grid-col-6">

                        </div>
                        <div class="ui-grid-col-6">

                        </div>
                    </div>
                </div>

















                <!--
                <p:dashboard id="dashbord" model="#{dashboardView.model}">

                    <p:panel id="dashMainNC" header="Non conformités">
                        <p:panelGrid columns="2">
                            <h:outputLabel value="Nombre total" />
                            <h:outputLabel value="#{nonConformiteRequestController.items.size()}" />
                        </p:panelGrid>
                    </p:panel>
                    <p:panel id="finance" header="Finance">
                        <h:outputText value="Finance Content" />
                    </p:panel>

                    <p:panel id="lifestyle" header="Lifestyle">
                        <h:outputText value="Lifestyle Content"  />
                    </p:panel>


                    <p:panel id="weather" header="Weather">
                        <h:outputText value="Weather Content" />
                    </p:panel>


                    <p:panel id="politics" header="Politics">
                        <h:outputText value="Politics Content" />
                    </p:panel>



                </p:dashboard>
                <div style="clear:both" />
                -->

                <p:outputPanel id="SessionCounter">

                    <p:panel id="panelChart" style="margin-left: 12px; margin-right: 12px; margin-top: 5px;">
                        <div class="w3-row">
                            <div class="w3-col s6  w3-center">
                                <ic:chart id="chartSession" type="pie" exporting="true"
                                          style="height: 310px; margin: 0 auto;"
                                          model="#{viewCompanyCharts.sessionModel}"   />
                            </div>
                            <div class="w3-col s6  w3-center">
                                <ic:chart id="chartNonConformite" type="pie"  exporting="true"
                                          style="height: 310px; " 
                                          model="#{viewCompanyCharts.nonConformiteModel}" />
                            </div>
                        </div>
                    </p:panel>
                    <br />



                </p:outputPanel>








                <!--
                <div class="wrapper">
                    <div class="content-wrapper">
<section class="content">

                <div class="row">
                    <section class="col-lg-7 connectedSortable">
                        <div class="nav-tabs-custom">
                            <ul class="nav nav-tabs pull-right">
                                <li class="active"><a href="#revenue-chart" data-toggle="tab">Area</a></li>
                                <li><a href="#sales-chart" data-toggle="tab">Donut</a></li>
                                <li class="pull-left header"><i class="fa fa-inbox"></i> Sales</li>
                            </ul>
                            <div class="tab-content no-padding">
                                <div class="chart tab-pane active" id="revenue-chart" style="position:relative; height:300px;"></div>
                                <div class="chart tab-pane" id="sales-chart" style="position:relative; height:300px;"></div>
                            </div>
                        </div>
                        <div class="box box-success">
                            <div class="box-header"> <i class="fa fa-comments-o"></i>
                                <h3 class="box-title">Chat</h3>
                                <div class="box-tools pull-right" data-toggle="tooltip" title="Status">
                                    <div class="btn-group" data-toggle="btn-toggle" >
                                        <button type="button" class="btn btn-default btn-sm active"><i class="fa fa-square text-green"></i></button>
                                        <button type="button" class="btn btn-default btn-sm"><i class="fa fa-square text-red"></i></button>
                                    </div>
                                </div>
                            </div>
                            <div class="box-body chat" id="chat-box">
                                <div class="item"> <img src="assets/img/user4-128x128.jpg" alt="website template image" class="online"/>
                                    <p class="message"> <a href="http://www.free-css.com/free-css-templates" class="name"> 
                                            <small class="text-muted pull-right">
                                                <i class="fa fa-clock-o"></i> 2:15</small> Mike Doe </a> I would like to meet you to discuss the latest news aboutthe arrival of the new theme. They say it is going to be one thebest themes on the market </p>
                                    <div class="attachment">
                                        <h4>Attachments:</h4>
                                        <p class="filename"> Theme-thumbnail-image.jpg </p>
                                        <div class="pull-right">
                                            <button class="btn btn-primary btn-sm btn-flat">Open</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="item"> <img src="assets/img/user3-128x128.jpg" alt="website template image" class="offline"/>
                                    <p class="message"> <a href="http://www.free-css.com/free-css-templates" class="name"> 
                                            <small class="text-muted pull-right"><i class="fa fa-clock-o"></i> 5:15</small> Alexander Pierce </a> I would like to meet you to discuss the latest news aboutthe arrival of the new theme. They say it is going to be one thebest themes on the market </p>
                                </div>
                                <div class="item"> <img src="assets/img/user2-160x160.jpg" alt="website template image" class="offline"/>
                                    <p class="message"> <a href="http://www.free-css.com/free-css-templates" class="name"> 
                                            <small class="text-muted pull-right"><i class="fa fa-clock-o"></i> 5:30</small> Susan Doe </a> I would like to meet you to discuss the latest news aboutthe arrival of the new theme. They say it is going to be one thebest themes on the market </p>
                                </div>
                            </div>
                            <div class="box-footer">
                                <div class="input-group">
                                    <input class="form-control" placeholder="Type message..."/>
                                    <div class="input-group-btn">
                                        <button class="btn btn-success"><i class="fa fa-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section class="col-lg-5">
                        
                    </section>
                </div>
</section>
</div>
                    </div>

                -->















                <div class="w3-panel w3-padding-0 w3-margin-0">
                    <div class="w3-row-padding w3-padding-0" >
                        <div class="w3-third">
                            <h5>Utilisateurs connectés</h5>
                            <p:dataList value="#{viewSessionCounter.activeStaff}" var="item" 
                                        type="unordered" itemType="none" paginator="false" rows="10" 
                                        styleClass="paginated" 
                                        itemStyleClass="" class="userlist"
                                        >
                                <h:graphicImage library="img" name="ism/hr/avatar2.png" class="w3-left w3-circle w3-margin-right" style="width:35px" />
                                <span class="w3-large"><h:outputText value="#{item.stFirstname} #{item.stLastname} #{item.stMiddlename} [#{item.stStaff}]" style="display:inline-block"/></span><br/>
                            </p:dataList>

                        </div>

                        <div class="w3-twothird">
                            <h5>Analyse annuelle <b>#{viewUtil.nowYear}</b> des non conformités </h5>
                            <div class="w3-responsive">
                                <table class="w3-table-all">
                                    <tr>
                                        <th>Etats</th>

                                        <th>Janvier</th>
                                        <th>Février</th>
                                        <th>Mars</th>
                                        <th>Avril</th>
                                        <th>Mai</th>
                                        <th>Juin</th>
                                        <th>Juillet</th>
                                        <th>Août</th>
                                        <th>Septembre</th>
                                        <th>Octobre</th>
                                        <th>Novembre</th>
                                        <th>Décembre</th>
                                    </tr>
                                    <tr>
                                        <td>[1A] Créée</td>
                                        <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterCreated}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                    <tr>
                                        <td>[2B] En attente de solution</td>
                                        <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterRequest}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                    <tr>
                                        <td>[3C] En cours</td>
                                        <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterProcessing}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                    <tr>
                                        <td>[4D] Terminée</td>
                                        <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterFinished}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                    <tr>
                                        <td>[5E] Annulée</td>
                                        <ui:repeat  value="#{nonConformiteRequestService.nonConformiteRequestDomain.itemsCounterCanceled}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                </table>
                            </div>
                            <hr />
                            <h5>Evolution annuelle <b>#{viewUtil.nowYear}</b> des non conformités </h5>
                            <p:panel>
                                <ic:chart id="chartNCQuantiteStateLine" type="line"  exporting="true"
                                          style="height: 310px; " class="w3-responsive" debug="false"
                                          model="#{nonConformiteRequestService.nonConformiteRequestDomain.ncStateLineModel}" />
                            </p:panel>

                            <hr/>
                            <p:panel header="Etat des non conformités par processus" toggleable="true" style="border: none;">

                                <table class="w3-table-all w3-responsive">
                                    <tr>
                                        <th valign="middle">Processus</th>
                                        <ui:repeat value="#{processusController.approuvedItems}" var="processus">
                                            <th valign="middle">
                                                <div  style="writing-mode:vertical-rl; white-space: nowrap;">
                                                    #{processus.PProcessus} - #{processus.PDesignation}
                                                </div>
                                            </th>
                                        </ui:repeat>
                                        <th valign="middle">
                                            <div style="writing-mode:vertical-rl;">Total</div>
                                        </th>
                                    </tr>
                                    <tr>
                                        <td>Créée</td>
                                        <ui:repeat value="#{nonConformiteRequestService.itemsCreatedOnMonth}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>

                                    </tr>
                                    <tr>
                                        <td>En attente de solution</td>
                                        <ui:repeat value="#{nonConformiteRequestService.itemsApprouvedOnMonth}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                    <tr>
                                        <td>En cours</td>
                                        <ui:repeat value="#{nonConformiteRequestService.itemsProcessingOnMonth}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                    <tr>
                                        <td>Terminée</td>
                                        <ui:repeat value="#{nonConformiteRequestService.itemsFinishedOnMonth}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>
                                    <tr>
                                        <td>Annulée</td>
                                        <ui:repeat value="#{nonConformiteRequestService.itemsCanceledOnMonth}" var="value">
                                            <td>#{value}</td>
                                        </ui:repeat>
                                    </tr>

                                </table>
                            </p:panel>

                        </div>
                    </div>
                </div>





            </h:form>

        </ui:define>
    </ui:composition>

</html>
