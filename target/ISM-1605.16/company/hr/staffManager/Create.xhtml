<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition template="/tmpl/MainWindow.xhtml">

        <ui:define name="body">
            <h1>
                <h:outputText value="#{ism.StaffManagerTitleCreate}" />
            </h1>

            <h:form id="StaffManagerCreateForm">

                <p:wizard flowListener="#{staffManagerController.listenerFlowEvent}" 
                          backLabel="#{ism.Previous}" 
                          nextLabel="#{ism.Next}">

                    <p:tab id="flowStaff" title="#{ism.StaffManagerTabPersonnal}">


                        <p:panel header="#{ism.StaffManagerTabPersonnal}"> 
                            <h:panelGrid columns="3">
                                <p:outputLabel value="#{ism.StaffField_stStaff}" for="stStaff" />
                                <p:inputText id="stStaff" 
                                             value="#{staffManagerController.staffCtrl.selected.stStaff}" 
                                             title="#{ism.StaffFieldInfo_stStaff}" 
                                             required="true" 
                                             requiredMessage="#{ism.StaffRequiredMsg_stStaff}">
                                    <p:ajax event="change" update="stStaffOut" listener="#{staffManagerController.listenerStaffChangedEvent}" />
                                </p:inputText>
                                <h:panelGroup >
                                    <h:outputText id="stStaffOut" 
                                                  style="color: red; background-color: yellow;"
                                                  value="#{staffManagerController.staffErrorMsg}" />
                                    <p:message for="stStaff" />
                                </h:panelGroup>

                                <p:outputLabel value="#{ism.StaffField_stPassword}" for="stPassword" />
                                <p:password id="stPassword" 
                                            value="#{staffManagerController.staffCtrl.selected.stPassword}" 
                                            title="#{ism.StaffFieldInfo_stPassword}" 
                                            redisplay="true"
                                            required="true" 
                                            requiredMessage="#{ism.StaffRequiredMsg_stPassword}"
                                            feedback="true"
                                            promptLabel="#{ism.StaffField_stPasswordPromptLabel}"
                                            weakLabel="#{ism.StaffField_stPasswordWeakLabel}"
                                            goodLabel="#{ism.StaffField_stPasswordGoodLabel}"
                                            strongLabel="#{ism.StaffField_stPasswordStrongLabel}"
                                            >
                                    <p:ajax event="change" update="stStaffOutPwd" listener="#{staffManagerController.listenerStaffPwdChangedEvent}" />
                                </p:password>
                                <h:panelGroup />

                                <p:outputLabel value="#{ism.StaffField_stPassword} - Conf." for="stPasswordConf" />
                                <p:password id="stPasswordConf" 
                                            value="#{staffManagerController.staffCtrl.selected.stPasswordConf}" 
                                            title="#{ism.StaffFieldInfo_stPassword} - Confirmation" 
                                            redisplay="true"
                                            required="true" 
                                            requiredMessage="#{ism.StaffRequiredMsg_stPassword} Confirmation">
                                    <p:ajax event="change" update="stStaffOutPwd" listener="#{staffManagerController.listenerStaffPwdChangedEvent}" />
                                </p:password>
                                <h:outputText   id="stStaffOutPwd" 
                                                style="color: red; background-color: yellow;"
                                                value="#{staffManagerController.staffErrorPwd}" />

                                <p:outputLabel value="#{ism.StaffField_stLastname}" for="stLastname" />
                                <p:inputText id="stLastname" 
                                             value="#{staffManagerController.staffCtrl.selected.stLastname}" 
                                             title="#{ism.StaffFieldInfo_stLastname}" 
                                             required="true"
                                             requiredMessage="#{ism.StaffRequiredMsg_stLastname}"/>
                                <p:message for="stLastname"/>

                                <p:outputLabel value="#{ism.StaffField_stFirstname}" for="stFirstname" />
                                <p:inputText id="stFirstname" 
                                             value="#{staffManagerController.staffCtrl.selected.stFirstname}" 
                                             title="#{ism.StaffFieldInfo_stFirstname}" 
                                             required="true"
                                             requiredMessage="#{ism.StaffRequiredMsg_stFirstname}"/>
                                <p:message for="stFirstname"/>

                                <p:outputLabel value="#{ism.StaffField_stMiddlename}" for="stMiddlename" />
                                <p:inputText id="stMiddlename" 
                                             value="#{staffManagerController.staffCtrl.selected.stMiddlename}" 
                                             title="#{ism.StaffFieldInfo_stMiddlename}" />
                                <h:panelGroup />

                                <p:outputLabel value="#{ism.StaffField_stBorned}" for="stBorned" />
                                <p:calendar id="stBorned" pattern="dd/MM/yyyy" 
                                            value="#{staffManagerController.staffCtrl.selected.stBorned}" 
                                            title="#{ism.StaffFieldInfo_stBorned}" 
                                            mode="popup" showOn="button"
                                            locale="fr" navigator="true"
                                            showButtonPanel="true"
                                            effect="slideDown"
                                            mindate="01/01/1930" maxdate="31/12/2099"
                                            required="true"
                                            requiredMessage="#{ism.StaffRequiredMsg_stBorned}"/>
                                <p:message for="stBorned"/>

                                <p:outputLabel value="#{ism.StaffField_stGenre}" for="stGenre" />
                                <p:selectOneMenu id="stGenre" value="#{staffManagerController.staffCtrl.selected.stGenre}" >
                                    <f:selectItems value="#{ismGenreController.itemsAvailableSelectOne}"
                                                   var="stGenreItem"
                                                   itemLabel="#{stGenreItem.genre} - #{stGenreItem.genrename}"
                                                   itemValue="#{stGenreItem}"/>
                                </p:selectOneMenu>
                                <h:panelGroup />


                                <p:outputLabel value="#{ism.StaffField_stActivated}" for="stActivated" />
                                <p:selectBooleanCheckbox id="stActivated" 
                                                         value="#{staffManagerController.staffCtrl.selected.stActivated}" 
                                                         required="true" 
                                                         requiredMessage="#{ism.StaffRequiredMsg_stActivated}"/>
                                <h:panelGroup />

                            </h:panelGrid>
                        </p:panel> 

                    </p:tab>


                    <p:tab id="flowISM" title="#{ism.StaffManagerTabISM}">


                        <p:panel header="#{ism.StaffManagerTabISM}">

                            <p:panelGrid>

                                <p:row>
                                    <p:column>
                                        <p:outputLabel  value="#{ism.StaffCompaniesField_stcCompany}"
                                                        for="accessTree" />
                                    </p:column>
                                    
                                    <p:column colspan="3">
                                        <p:tree    id="accessTree"
                                                   value="#{staffManagerController.accessTree}" 
                                                   var="varCtrlAccess" 
                                                   selectionMode="checkbox"
                                                   selection="#{staffManagerController.selectedAccessTree}"
                                                   >
                                            <p:treeNode >
                                                <h:outputText value="#{varCtrlAccess}" />
                                            </p:treeNode>
                                        </p:tree>
                                    </p:column>
                                </p:row>

                            </p:panelGrid>
                            
                        </p:panel>
                    </p:tab>



                    <p:tab id="flowConfirm" title="#{ism.StaffManagerTabConfirm}">
                        <p:panel header="Confirmation">
                            <h:panelGrid id="confirmation" columns="1" >
                                <p:panel header="#{ism.StaffField_stStaff}" style="margin: auto;">
                                    <p:panelGrid columns="2">
                                        <h:outputText value="#{ism.StaffField_stStaff}"/>
                                        <h:outputText value="#{staffManagerController.staffCtrl.selected.stStaff}" 
                                                      title="#{ism.StaffFieldInfo_stStaff}"/>

                                        <h:outputText value="#{ism.StaffField_stPassword}" rendered="false"/>
                                        <h:outputText value="#{staffManagerController.staffCtrl.selected.stPassword}" 
                                                      title="#{ism.StaffFieldInfo_stPassword}" rendered="false" />

                                        <h:outputText value="#{ism.StaffField_stLastname}"/>
                                        <h:outputText value="#{staffManagerController.staffCtrl.selected.stLastname}" 
                                                      title="#{ism.StaffFieldInfo_stLastname}"/>

                                        <h:outputText value="#{ism.StaffField_stFirstname}"/>
                                        <h:outputText value="#{staffManagerController.staffCtrl.selected.stFirstname}" 
                                                      title="#{ism.StaffFieldInfo_stFirstname}"/>

                                        <h:outputText value="#{ism.StaffField_stMiddlename}"/>
                                        <h:outputText value="#{staffManagerController.staffCtrl.selected.stMiddlename}" 
                                                      title="#{ism.StaffFieldInfo_stMiddlename}"/>

                                        <h:outputText value="#{ism.StaffField_stBorned}"/>
                                        <h:outputText value="#{staffManagerController.staffCtrl.selected.stBorned}" 
                                                      title="#{ism.StaffFieldInfo_stBorned}">
                                            <f:convertDateTime pattern="dd/MM/yyyy" />
                                        </h:outputText>

                                        <h:outputText value="#{ism.StaffField_stGenre}"/>
                                        <h:outputText value="#{staffManagerController.staffCtrl.selected.stGenre.genre} - #{staffManagerController.staffCtrl.selected.stGenre.genrename}" 
                                                      title="#{ism.StaffFieldInfo_stGenre}"/>

                                        <h:outputText value="#{ism.StaffField_stActivated}"/>
                                        <p:selectBooleanCheckbox 
                                            value="#{staffManagerController.staffCtrl.selected.stActivated}" 
                                            disabled="true" />
                                    </p:panelGrid>
                                </p:panel>

                                <p:panel header="#{ism.StaffCompaniesField_stcCompany}" style="margin: auto;">
                                    <p:tree    id="selectedAccessTree"
                                               value="#{staffManagerController.treeNodeFromSelectedAccessTree}" 
                                               var="varCtrlAccess" 
                                               >
                                        <p:treeNode >
                                            <h:outputText value="#{varCtrlAccess}" />
                                        </p:treeNode>
                                    </p:tree>
                                </p:panel>

                            </h:panelGrid>

                            <p:commandButton value="#{ism.Save}" 
                                             action="List?faces-redirect=true"
                                             actionListener="#{staffManagerController.create}" 
                                             />
                        </p:panel>

                    </p:tab>
                </p:wizard>

            </h:form>


        </ui:define>
    </ui:composition>

</html>
